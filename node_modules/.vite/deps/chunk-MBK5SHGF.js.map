{
  "version": 3,
  "sources": ["../../lodash/unset.js", "../../lodash/cloneDeep.js", "../../lodash/now.js", "../../lodash/_trimmedEndIndex.js", "../../lodash/_baseTrim.js", "../../lodash/toNumber.js", "../../lodash/debounce.js", "../../strict-uri-encode/index.js", "../../decode-uri-component/index.js", "../../split-on-first/index.js", "../../filter-obj/index.js", "../../query-string/index.js", "../../eventemitter3/index.js", "../../lodash/union.js", "../../lodash/defaults.js", "../../inflection/lib/inflection.js", "../../ra-core/src/auth/useAuthProvider.ts", "../../ra-core/src/auth/AuthContext.tsx", "../../ra-core/src/auth/useAuthState.ts", "../../ra-core/src/auth/useLogout.ts", "../../ra-core/src/store/localStorageStore.ts", "../../ra-core/src/store/memoryStore.tsx", "../../ra-core/src/store/StoreContext.tsx", "../../ra-core/src/store/StoreContextProvider.tsx", "../../ra-core/src/store/StoreSetter.tsx", "../../ra-core/src/store/useStoreContext.ts", "../../ra-core/src/store/useStore.ts", "../../ra-core/src/util/escapePath.ts", "../../ra-core/src/util/FieldTitle.tsx", "../../ra-core/src/i18n/substituteTokens.ts", "../../ra-core/src/i18n/TestTranslationProvider.tsx", "../../ra-core/src/i18n/I18nContextProvider.tsx", "../../ra-core/src/i18n/I18nContext.ts", "../../ra-core/src/notification/AddNotificationContext.tsx", "../../ra-core/src/notification/NotificationContext.ts", "../../ra-core/src/notification/NotificationContextProvider.tsx", "../../ra-core/src/notification/useAddNotificationContext.tsx", "../../ra-core/src/notification/useNotificationContext.ts", "../../ra-core/src/notification/useNotify.ts", "../../ra-core/src/i18n/TranslatableContext.ts", "../../ra-core/src/i18n/TranslatableContextProvider.tsx", "../../ra-core/src/i18n/TranslationUtils.ts", "../../ra-core/src/i18n/useLocaleState.tsx", "../../ra-core/src/i18n/useI18nProvider.ts", "../../ra-core/src/i18n/useLocale.tsx", "../../ra-core/src/i18n/useLocales.ts", "../../ra-core/src/i18n/useSetLocale.tsx", "../../ra-core/src/i18n/useTranslatable.ts", "../../ra-core/src/i18n/useTranslatableContext.ts", "../../ra-core/src/i18n/useTranslate.ts", "../../ra-core/src/i18n/useTranslateLabel.ts", "../../ra-core/src/core/CoreAdmin.tsx", "../../ra-core/src/core/CoreAdminContext.tsx", "../../ra-core/src/routing/AdminRouter.tsx", "../../ra-core/src/routing/BasenameContextProvider.tsx", "../../ra-core/src/routing/BasenameContext.ts", "../../ra-core/src/routing/useRestoreScrollPosition.ts", "../../ra-core/src/routing/RestoreScrollPosition.tsx", "../../ra-core/src/routing/useBasename.ts", "../../ra-core/src/routing/useCreatePath.ts", "../../ra-core/src/routing/useGetPathForRecord.ts", "../../ra-core/src/controller/useFilterState.ts", "../../ra-core/src/controller/useSortState.ts", "../../ra-core/src/controller/list/queryReducer.ts", "../../ra-core/src/util/shallowEqual.ts", "../../ra-core/src/util/removeEmpty.ts", "../../ra-core/src/util/removeKey.ts", "../../ra-core/src/controller/usePaginationState.ts", "../../ra-core/src/controller/checkMinimumRequiredProps.tsx", "../../ra-core/src/controller/button/useDeleteWithUndoController.tsx", "../../ra-core/src/dataProvider/dataFetchActions.ts", "../../ra-core/src/dataProvider/defaultDataProvider.ts", "../../ra-core/src/dataProvider/convertLegacyDataProvider.ts", "../../ra-core/src/dataProvider/DataProviderContext.ts", "../../ra-core/src/dataProvider/HttpError.ts", "../../ra-core/src/dataProvider/fetch.ts", "../../eventemitter3/index.mjs", "../../ra-core/src/dataProvider/undoableEventEmitter.ts", "../../ra-core/src/dataProvider/combineDataProviders.ts", "../../ra-core/src/dataProvider/testDataProvider.ts", "../../ra-core/src/dataProvider/withLifecycleCallbacks.ts", "../../ra-core/src/dataProvider/useDataProvider.ts", "../../ra-core/src/dataProvider/validateResponseFormat.ts", "../../ra-core/src/auth/useLogoutIfAccessDenied.ts", "../../ra-core/src/dataProvider/useIsDataLoaded.ts", "../../ra-core/src/dataProvider/useLoading.ts", "../../ra-core/src/dataProvider/useRefresh.ts", "../../ra-core/src/dataProvider/useGetOne.ts", "../../ra-core/src/dataProvider/useGetList.ts", "../../ra-core/src/dataProvider/useGetMany.ts", "../../ra-core/src/dataProvider/useGetManyAggregate.ts", "../../ra-core/src/dataProvider/useGetManyReference.ts", "../../ra-core/src/dataProvider/useGetRecordId.ts", "../../ra-core/src/dataProvider/useCreate.ts", "../../ra-core/src/dataProvider/useUpdate.ts", "../../ra-core/src/dataProvider/useUpdateMany.ts", "../../ra-core/src/dataProvider/useDelete.ts", "../../ra-core/src/dataProvider/useDeleteMany.ts", "../../ra-core/src/dataProvider/useInfiniteGetList.ts", "../../ra-core/src/controller/button/useDeleteWithConfirmController.tsx", "../../ra-core/src/controller/create/CreateBase.tsx", "../../ra-core/src/controller/create/useCreateController.ts", "../../ra-core/src/controller/saveContext/SaveContext.ts", "../../ra-core/src/controller/saveContext/SaveContextProvider.tsx", "../../ra-core/src/controller/saveContext/usePickSaveContext.ts", "../../ra-core/src/controller/saveContext/useSaveContext.ts", "../../ra-core/src/controller/saveContext/useMutationMiddlewares.ts", "../../ra-core/src/controller/saveContext/useRegisterMutationMiddleware.ts", "../../ra-core/src/controller/create/CreateContextProvider.tsx", "../../ra-core/src/controller/record/RecordContext.tsx", "../../ra-core/src/controller/create/CreateContext.tsx", "../../ra-core/src/controller/create/CreateController.tsx", "../../ra-core/src/controller/create/useCreateContext.tsx", "../../ra-core/src/controller/edit/EditBase.tsx", "../../ra-core/src/controller/edit/useEditController.ts", "../../ra-core/src/controller/edit/EditContextProvider.tsx", "../../ra-core/src/controller/record/useRecordContext.ts", "../../ra-core/src/controller/record/WithRecord.tsx", "../../ra-core/src/controller/record/OptionalRecordContextProvider.tsx", "../../ra-core/src/controller/record/RecordRepresentation.tsx", "../../ra-core/src/controller/edit/EditContext.tsx", "../../ra-core/src/controller/edit/EditController.tsx", "../../ra-core/src/controller/edit/useEditContext.tsx", "../../ra-core/src/controller/field/ReferenceFieldBase.tsx", "../../ra-core/src/controller/field/ReferenceFieldContext.tsx", "../../ra-core/src/controller/field/useReferenceFieldController.ts", "../../ra-core/src/controller/useReference.ts", "../../ra-core/src/controller/field/useReferenceArrayFieldController.ts", "../../ra-core/src/controller/list/InfiniteListBase.tsx", "../../ra-core/src/controller/list/useInfiniteListController.ts", "../../ra-core/src/export/defaultExporter.ts", "../../ra-core/src/export/downloadCSV.ts", "../../ra-core/src/export/ExporterContext.ts", "../../ra-core/src/export/getRelatedIds.ts", "../../ra-core/src/export/fetchRelatedRecords.ts", "../../ra-core/src/controller/list/useRecordSelection.ts", "../../ra-core/src/controller/list/useListParams.ts", "../../ra-core/src/util/hooks.ts", "../../ra-core/src/controller/list/ListContextProvider.tsx", "../../ra-core/src/controller/list/ListContext.tsx", "../../ra-core/src/controller/list/ListFilterContext.tsx", "../../ra-core/src/controller/list/ListSortContext.tsx", "../../ra-core/src/controller/list/ListPaginationContext.tsx", "../../ra-core/src/controller/list/InfinitePaginationContext.ts", "../../ra-core/src/controller/list/ListBase.tsx", "../../ra-core/src/controller/list/useListController.ts", "../../ra-core/src/controller/list/ListController.tsx", "../../ra-core/src/controller/list/useExpanded.tsx", "../../ra-core/src/controller/list/useInfinitePaginationContext.ts", "../../ra-core/src/controller/list/useList.ts", "../../ra-core/src/controller/list/useListContext.ts", "../../ra-core/src/controller/list/useListContextWithProps.ts", "../../ra-core/src/controller/list/useListFilterContext.ts", "../../ra-core/src/controller/list/useListPaginationContext.ts", "../../ra-core/src/controller/list/useListSortContext.ts", "../../ra-core/src/controller/list/useUnselect.ts", "../../ra-core/src/controller/list/useUnselectAll.ts", "../../ra-core/src/controller/list/WithListContext.tsx", "../../ra-core/src/controller/field/useReferenceManyFieldController.ts", "../../ra-core/src/controller/field/useReferenceOneFieldController.tsx", "../../ra-core/src/controller/input/referenceDataStatus.ts", "../../ra-core/src/controller/input/useReferenceArrayInputController.ts", "../../ra-core/src/controller/input/useReferenceParams.ts", "../../ra-core/src/controller/input/useReferenceInputController.ts", "../../ra-core/src/controller/input/ReferenceInputBase.tsx", "../../ra-core/src/form/FormDataConsumer.tsx", "../../ra-core/src/form/useFormValues.ts", "../../ra-core/src/form/FormGroupsContext.tsx", "../../ra-core/src/form/ValidationError.tsx", "../../ra-core/src/form/getSimpleValidationResolver.ts", "../../ra-core/src/form/choices/ChoicesContext.ts", "../../ra-core/src/form/choices/ChoicesContextProvider.tsx", "../../ra-core/src/form/choices/useChoicesContext.ts", "../../ra-core/src/form/Form.tsx", "../../ra-core/src/form/FormGroupsProvider.tsx", "../../ra-core/src/form/useWarnWhenUnsavedChanges.tsx", "../../ra-core/src/form/WarnWhenUnsavedChanges.ts", "../../ra-core/src/form/useAugmentedForm.ts", "../../ra-core/src/form/getFormInitialValues.ts", "../../ra-core/src/form/setSubmissionErrors.ts", "../../ra-core/src/form/useNotifyIsFormInvalid.ts", "../../ra-core/src/form/sanitizeEmptyValues.ts", "../../ra-core/src/form/validate.ts", "../../ra-core/src/form/FormGroupContext.ts", "../../ra-core/src/form/FormGroupContextProvider.tsx", "../../ra-core/src/form/useFormGroups.ts", "../../ra-core/src/form/useApplyInputDefaultValues.ts", "../../ra-core/src/form/useChoices.tsx", "../../ra-core/src/form/useFormGroup.ts", "../../ra-core/src/form/useFormGroupContext.ts", "../../ra-core/src/form/useGetValidationErrorMessage.ts", "../../ra-core/src/form/useInput.ts", "../../ra-core/src/form/isRequired.ts", "../../ra-core/src/form/useSuggestions.ts", "../../ra-core/src/form/useUnique.ts", "../../ra-core/src/controller/show/ShowBase.tsx", "../../ra-core/src/controller/show/useShowController.ts", "../../ra-core/src/controller/show/ShowContextProvider.tsx", "../../ra-core/src/controller/show/ShowContext.tsx", "../../ra-core/src/controller/show/ShowController.tsx", "../../ra-core/src/controller/show/useShowContext.tsx", "../../ra-core/src/controller/usePrevNextController.ts", "../../ra-core/src/routing/useGetPathForRecordCallback.ts", "../../ra-core/src/routing/useRedirect.ts", "../../ra-core/src/routing/useResetErrorBoundaryOnLocationChange.ts", "../../ra-core/src/routing/useScrollToTop.tsx", "../../ra-core/src/routing/TestMemoryRouter.tsx", "../../ra-core/src/preferences/PreferencesEditorContextProvider.tsx", "../../ra-core/src/preferences/PreferencesEditorContext.tsx", "../../ra-core/src/core/ResourceDefinitionContext.tsx", "../../ra-core/src/core/CoreAdminUI.tsx", "../../ra-core/src/core/CoreAdminRoutes.tsx", "../../ra-core/src/core/useConfigureAdminRouterFromChildren.tsx", "../../ra-core/src/core/useResourceDefinitionContext.ts", "../../ra-core/src/core/HasDashboardContext.ts", "../../ra-core/src/core/DefaultTitleContext.ts", "../../ra-core/src/core/CustomRoutes.tsx", "../../ra-core/src/core/OptionalResourceContextProvider.tsx", "../../ra-core/src/core/ResourceContextProvider.tsx", "../../ra-core/src/core/ResourceContext.ts", "../../ra-core/src/core/Resource.tsx", "../../ra-core/src/core/SourceContext.tsx", "../../ra-core/src/core/useResourceDefinitions.ts", "../../ra-core/src/core/useGetResourceLabel.ts", "../../ra-core/src/core/useResourceContext.ts", "../../ra-core/src/core/useResourceDefinition.ts", "../../ra-core/src/core/useGetRecordRepresentation.ts", "../../ra-core/src/core/useWrappedSource.ts", "../../ra-core/src/i18n/index.ts", "../../ra-core/src/util/Ready.tsx", "../../ra-core/src/util/warning.ts", "../../ra-core/src/util/useWhyDidYouUpdate.ts", "../../ra-core/src/util/getMutationMode.ts", "../../ra-core/src/util/getFieldLabelTranslationArgs.ts", "../../ra-core/src/util/mergeRefs.ts", "../../ra-core/src/util/useEvent.ts", "../../ra-core/src/util/useFieldValue.ts", "../../ra-core/src/util/asyncDebounce.ts", "../../ra-core/src/util/useCheckForApplicationUpdate.ts", "../../ra-core/src/store/useRemoveFromStore.ts", "../../ra-core/src/store/useRemoveItemsFromStore.ts", "../../ra-core/src/store/useResetStore.ts", "../../ra-core/src/auth/usePermissions.ts", "../../ra-core/src/auth/WithPermissions.tsx", "../../ra-core/src/auth/useAuthenticated.ts", "../../ra-core/src/auth/useLogin.ts", "../../ra-core/src/auth/useGetPermissions.ts", "../../ra-core/src/auth/types.ts", "../../ra-core/src/auth/convertLegacyAuthProvider.ts", "../../ra-core/src/auth/Authenticated.tsx", "../../ra-core/src/auth/LogoutOnMount.ts", "../../ra-core/src/auth/useCheckAuth.ts", "../../ra-core/src/auth/useGetIdentity.ts", "../../ra-core/src/auth/useHandleAuthCallback.ts", "../../ra-core/src/auth/addRefreshAuthToAuthProvider.ts", "../../ra-core/src/auth/addRefreshAuthToDataProvider.ts", "../../ra-core/src/preferences/PreferenceKeyContext.tsx", "../../ra-core/src/preferences/usePreference.ts", "../../ra-core/src/preferences/usePreferencesEditor.ts", "../../ra-core/src/preferences/usePreferenceInput.ts", "../../ra-core/src/preferences/useSetInspectorTitle.ts", "../../ra-core/src/inference/inferElementFromValues.tsx", "../../ra-core/src/inference/getValuesFromRecords.ts", "../../ra-core/src/inference/InferredElement.ts", "../../ra-core/src/inference/assertions.ts", "../../ra-core/src/inference/getElementsFromRecords.ts", "../../ra-core/src/inference/inferTypeFromValues.ts", "../../ra-core/src/types.ts"],
  "sourcesContent": ["var baseUnset = require('./_baseUnset');\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nmodule.exports = unset;\n", "var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n", "var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n", "var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n", "var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n", "var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n", "'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n", "'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp('(' + token + ')|([^%]+?)', 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn [decodeURIComponent(components.join(''))];\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher) || [];\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher) || [];\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n", "'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n", "'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n", "'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'colon-list-separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), ':list='].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), ':list=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSep = options.arrayFormat === 'bracket-separator' ?\n\t\t\t\t'[]=' :\n\t\t\t\t'=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSep, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'colon-list-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(:list)$/.exec(key);\n\t\t\t\tkey = key.replace(/:list$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tcase 'bracket-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[\\])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null ?\n\t\t\t\t\t[] :\n\t\t\t\t\tvalue.split(options.arrayFormatSeparator).map(item => decode(item, options));\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], arrayValue);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n", "var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n", "\"use strict\";\n/*!\n * inflection\n * Copyright(c) 2011 Ben Lin <ben@dreamerslab.com>\n * MIT Licensed\n *\n * @fileoverview\n * A port of inflection-js to node.js module.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transform = exports.ordinalize = exports.foreignKey = exports.classify = exports.tableize = exports.demodulize = exports.titleize = exports.dasherize = exports.capitalize = exports.humanize = exports.underscore = exports.camelize = exports.inflect = exports.singularize = exports.pluralize = void 0;\n/**\n * @description This is a list of nouns that use the same form for both singular and plural.\n *              This list should remain entirely in lower case to correctly match Strings.\n */\nconst uncountableWords = [\n    // 'access',\n    'accommodation',\n    'adulthood',\n    'advertising',\n    'advice',\n    'aggression',\n    'aid',\n    'air',\n    'aircraft',\n    'alcohol',\n    'anger',\n    'applause',\n    'arithmetic',\n    // 'art',\n    'assistance',\n    'athletics',\n    // 'attention',\n    'bacon',\n    'baggage',\n    // 'ballet',\n    // 'beauty',\n    'beef',\n    // 'beer',\n    // 'behavior',\n    'biology',\n    // 'billiards',\n    'blood',\n    'botany',\n    // 'bowels',\n    'bread',\n    // 'business',\n    'butter',\n    'carbon',\n    'cardboard',\n    'cash',\n    'chalk',\n    'chaos',\n    'chess',\n    'crossroads',\n    'countryside',\n    // 'damage',\n    'dancing',\n    // 'danger',\n    'deer',\n    // 'delight',\n    // 'dessert',\n    'dignity',\n    'dirt',\n    // 'distribution',\n    'dust',\n    'economics',\n    'education',\n    'electricity',\n    // 'employment',\n    // 'energy',\n    'engineering',\n    'enjoyment',\n    // 'entertainment',\n    'envy',\n    'equipment',\n    'ethics',\n    'evidence',\n    'evolution',\n    // 'failure',\n    // 'faith',\n    'fame',\n    'fiction',\n    // 'fish',\n    'flour',\n    'flu',\n    'food',\n    // 'freedom',\n    // 'fruit',\n    'fuel',\n    'fun',\n    // 'funeral',\n    'furniture',\n    'gallows',\n    'garbage',\n    'garlic',\n    // 'gas',\n    'genetics',\n    // 'glass',\n    'gold',\n    'golf',\n    'gossip',\n    // 'grass',\n    'gratitude',\n    'grief',\n    // 'ground',\n    'guilt',\n    'gymnastics',\n    // 'hair',\n    'happiness',\n    'hardware',\n    'harm',\n    'hate',\n    'hatred',\n    'health',\n    'heat',\n    // 'height',\n    'help',\n    'homework',\n    'honesty',\n    'honey',\n    'hospitality',\n    'housework',\n    'humour',\n    'hunger',\n    'hydrogen',\n    'ice',\n    'importance',\n    'inflation',\n    'information',\n    // 'injustice',\n    'innocence',\n    // 'intelligence',\n    'iron',\n    'irony',\n    'jam',\n    // 'jealousy',\n    // 'jelly',\n    'jewelry',\n    // 'joy',\n    'judo',\n    // 'juice',\n    // 'justice',\n    'karate',\n    // 'kindness',\n    'knowledge',\n    // 'labour',\n    'lack',\n    // 'land',\n    'laughter',\n    'lava',\n    'leather',\n    'leisure',\n    'lightning',\n    'linguine',\n    'linguini',\n    'linguistics',\n    'literature',\n    'litter',\n    'livestock',\n    'logic',\n    'loneliness',\n    // 'love',\n    'luck',\n    'luggage',\n    'macaroni',\n    'machinery',\n    'magic',\n    // 'mail',\n    'management',\n    'mankind',\n    'marble',\n    'mathematics',\n    'mayonnaise',\n    'measles',\n    // 'meat',\n    // 'metal',\n    'methane',\n    'milk',\n    'minus',\n    'money',\n    // 'moose',\n    'mud',\n    'music',\n    'mumps',\n    'nature',\n    'news',\n    'nitrogen',\n    'nonsense',\n    'nurture',\n    'nutrition',\n    'obedience',\n    'obesity',\n    // 'oil',\n    'oxygen',\n    // 'paper',\n    // 'passion',\n    'pasta',\n    'patience',\n    // 'permission',\n    'physics',\n    'poetry',\n    'pollution',\n    'poverty',\n    // 'power',\n    'pride',\n    // 'production',\n    // 'progress',\n    // 'pronunciation',\n    'psychology',\n    'publicity',\n    'punctuation',\n    // 'quality',\n    // 'quantity',\n    'quartz',\n    'racism',\n    // 'rain',\n    // 'recreation',\n    'relaxation',\n    'reliability',\n    'research',\n    'respect',\n    'revenge',\n    'rice',\n    'rubbish',\n    'rum',\n    'safety',\n    // 'salad',\n    // 'salt',\n    // 'sand',\n    // 'satire',\n    'scenery',\n    'seafood',\n    'seaside',\n    'series',\n    'shame',\n    'sheep',\n    'shopping',\n    // 'silence',\n    'sleep',\n    // 'slang'\n    'smoke',\n    'smoking',\n    'snow',\n    'soap',\n    'software',\n    'soil',\n    // 'sorrow',\n    // 'soup',\n    'spaghetti',\n    // 'speed',\n    'species',\n    // 'spelling',\n    // 'sport',\n    'steam',\n    // 'strength',\n    'stuff',\n    'stupidity',\n    // 'success',\n    // 'sugar',\n    'sunshine',\n    'symmetry',\n    // 'tea',\n    'tennis',\n    'thirst',\n    'thunder',\n    'timber',\n    // 'time',\n    // 'toast',\n    // 'tolerance',\n    // 'trade',\n    'traffic',\n    'transportation',\n    // 'travel',\n    'trust',\n    // 'understanding',\n    'underwear',\n    'unemployment',\n    'unity',\n    // 'usage',\n    'validity',\n    'veal',\n    'vegetation',\n    'vegetarianism',\n    'vengeance',\n    'violence',\n    // 'vision',\n    'vitality',\n    'warmth',\n    // 'water',\n    'wealth',\n    'weather',\n    // 'weight',\n    'welfare',\n    'wheat',\n    // 'whiskey',\n    // 'width',\n    'wildlife',\n    // 'wine',\n    'wisdom',\n    // 'wood',\n    // 'wool',\n    // 'work',\n    // 'yeast',\n    'yoga',\n    'zinc',\n    'zoology',\n];\n/**\n * @description These rules translate from the singular form of a noun to its plural form.\n */\nconst regex = {\n    plural: {\n        men: new RegExp('^(m|wom)en$', 'gi'),\n        people: new RegExp('(pe)ople$', 'gi'),\n        children: new RegExp('(child)ren$', 'gi'),\n        tia: new RegExp('([ti])a$', 'gi'),\n        analyses: new RegExp('((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$', 'gi'),\n        databases: new RegExp('(database)s$', 'gi'),\n        drives: new RegExp('(drive)s$', 'gi'),\n        hives: new RegExp('(hi|ti)ves$', 'gi'),\n        curves: new RegExp('(curve)s$', 'gi'),\n        lrves: new RegExp('([lr])ves$', 'gi'),\n        aves: new RegExp('([a])ves$', 'gi'),\n        foves: new RegExp('([^fo])ves$', 'gi'),\n        movies: new RegExp('(m)ovies$', 'gi'),\n        aeiouyies: new RegExp('([^aeiouy]|qu)ies$', 'gi'),\n        series: new RegExp('(s)eries$', 'gi'),\n        xes: new RegExp('(x|ch|ss|sh)es$', 'gi'),\n        mice: new RegExp('([m|l])ice$', 'gi'),\n        buses: new RegExp('(bus)es$', 'gi'),\n        oes: new RegExp('(o)es$', 'gi'),\n        shoes: new RegExp('(shoe)s$', 'gi'),\n        crises: new RegExp('(cris|ax|test)es$', 'gi'),\n        octopuses: new RegExp('(octop|vir)uses$', 'gi'),\n        aliases: new RegExp('(alias|canvas|status|campus)es$', 'gi'),\n        summonses: new RegExp('^(summons|bonus)es$', 'gi'),\n        oxen: new RegExp('^(ox)en', 'gi'),\n        matrices: new RegExp('(matr)ices$', 'gi'),\n        vertices: new RegExp('(vert|ind)ices$', 'gi'),\n        feet: new RegExp('^feet$', 'gi'),\n        teeth: new RegExp('^teeth$', 'gi'),\n        geese: new RegExp('^geese$', 'gi'),\n        quizzes: new RegExp('(quiz)zes$', 'gi'),\n        whereases: new RegExp('^(whereas)es$', 'gi'),\n        criteria: new RegExp('^(criteri)a$', 'gi'),\n        genera: new RegExp('^genera$', 'gi'),\n        ss: new RegExp('ss$', 'gi'),\n        s: new RegExp('s$', 'gi'),\n    },\n    singular: {\n        man: new RegExp('^(m|wom)an$', 'gi'),\n        person: new RegExp('(pe)rson$', 'gi'),\n        child: new RegExp('(child)$', 'gi'),\n        drive: new RegExp('(drive)$', 'gi'),\n        ox: new RegExp('^(ox)$', 'gi'),\n        axis: new RegExp('(ax|test)is$', 'gi'),\n        octopus: new RegExp('(octop|vir)us$', 'gi'),\n        alias: new RegExp('(alias|status|canvas|campus)$', 'gi'),\n        summons: new RegExp('^(summons|bonus)$', 'gi'),\n        bus: new RegExp('(bu)s$', 'gi'),\n        buffalo: new RegExp('(buffal|tomat|potat)o$', 'gi'),\n        tium: new RegExp('([ti])um$', 'gi'),\n        sis: new RegExp('sis$', 'gi'),\n        ffe: new RegExp('(?:([^f])fe|([lr])f)$', 'gi'),\n        hive: new RegExp('(hi|ti)ve$', 'gi'),\n        aeiouyy: new RegExp('([^aeiouy]|qu)y$', 'gi'),\n        x: new RegExp('(x|ch|ss|sh)$', 'gi'),\n        matrix: new RegExp('(matr)ix$', 'gi'),\n        vertex: new RegExp('(vert|ind)ex$', 'gi'),\n        mouse: new RegExp('([m|l])ouse$', 'gi'),\n        foot: new RegExp('^foot$', 'gi'),\n        tooth: new RegExp('^tooth$', 'gi'),\n        goose: new RegExp('^goose$', 'gi'),\n        quiz: new RegExp('(quiz)$', 'gi'),\n        whereas: new RegExp('^(whereas)$', 'gi'),\n        criterion: new RegExp('^(criteri)on$', 'gi'),\n        genus: new RegExp('^genus$', 'gi'),\n        s: new RegExp('s$', 'gi'),\n        common: new RegExp('$', 'gi'),\n    },\n};\nconst pluralRules = [\n    // do not replace if its already a plural word\n    [regex.plural.men],\n    [regex.plural.people],\n    [regex.plural.children],\n    [regex.plural.tia],\n    [regex.plural.analyses],\n    [regex.plural.databases],\n    [regex.plural.drives],\n    [regex.plural.hives],\n    [regex.plural.curves],\n    [regex.plural.lrves],\n    [regex.plural.foves],\n    [regex.plural.aeiouyies],\n    [regex.plural.series],\n    [regex.plural.movies],\n    [regex.plural.xes],\n    [regex.plural.mice],\n    [regex.plural.buses],\n    [regex.plural.oes],\n    [regex.plural.shoes],\n    [regex.plural.crises],\n    [regex.plural.octopuses],\n    [regex.plural.aliases],\n    [regex.plural.summonses],\n    [regex.plural.oxen],\n    [regex.plural.matrices],\n    [regex.plural.feet],\n    [regex.plural.teeth],\n    [regex.plural.geese],\n    [regex.plural.quizzes],\n    [regex.plural.whereases],\n    [regex.plural.criteria],\n    [regex.plural.genera],\n    // original rule\n    [regex.singular.man, '$1en'],\n    [regex.singular.person, '$1ople'],\n    [regex.singular.child, '$1ren'],\n    [regex.singular.drive, '$1s'],\n    [regex.singular.ox, '$1en'],\n    [regex.singular.axis, '$1es'],\n    [regex.singular.octopus, '$1uses'],\n    [regex.singular.alias, '$1es'],\n    [regex.singular.summons, '$1es'],\n    [regex.singular.bus, '$1ses'],\n    [regex.singular.buffalo, '$1oes'],\n    [regex.singular.tium, '$1a'],\n    [regex.singular.sis, 'ses'],\n    [regex.singular.ffe, '$1$2ves'],\n    [regex.singular.hive, '$1ves'],\n    [regex.singular.aeiouyy, '$1ies'],\n    [regex.singular.matrix, '$1ices'],\n    [regex.singular.vertex, '$1ices'],\n    [regex.singular.x, '$1es'],\n    [regex.singular.mouse, '$1ice'],\n    [regex.singular.foot, 'feet'],\n    [regex.singular.tooth, 'teeth'],\n    [regex.singular.goose, 'geese'],\n    [regex.singular.quiz, '$1zes'],\n    [regex.singular.whereas, '$1es'],\n    [regex.singular.criterion, '$1a'],\n    [regex.singular.genus, 'genera'],\n    [regex.singular.s, 's'],\n    [regex.singular.common, 's'],\n];\n/**\n * @description These rules translate from the plural form of a noun to its singular form.\n */\nconst singularRules = [\n    // do not replace if its already a singular word\n    [regex.singular.man],\n    [regex.singular.person],\n    [regex.singular.child],\n    [regex.singular.drive],\n    [regex.singular.ox],\n    [regex.singular.axis],\n    [regex.singular.octopus],\n    [regex.singular.alias],\n    [regex.singular.summons],\n    [regex.singular.bus],\n    [regex.singular.buffalo],\n    [regex.singular.tium],\n    [regex.singular.sis],\n    [regex.singular.ffe],\n    [regex.singular.hive],\n    [regex.singular.aeiouyy],\n    [regex.singular.x],\n    [regex.singular.matrix],\n    [regex.singular.mouse],\n    [regex.singular.foot],\n    [regex.singular.tooth],\n    [regex.singular.goose],\n    [regex.singular.quiz],\n    [regex.singular.whereas],\n    [regex.singular.criterion],\n    [regex.singular.genus],\n    // original rule\n    [regex.plural.men, '$1an'],\n    [regex.plural.people, '$1rson'],\n    [regex.plural.children, '$1'],\n    [regex.plural.databases, '$1'],\n    [regex.plural.drives, '$1'],\n    [regex.plural.genera, 'genus'],\n    [regex.plural.criteria, '$1on'],\n    [regex.plural.tia, '$1um'],\n    [regex.plural.analyses, '$1$2sis'],\n    [regex.plural.hives, '$1ve'],\n    [regex.plural.curves, '$1'],\n    [regex.plural.lrves, '$1f'],\n    [regex.plural.aves, '$1ve'],\n    [regex.plural.foves, '$1fe'],\n    [regex.plural.movies, '$1ovie'],\n    [regex.plural.aeiouyies, '$1y'],\n    [regex.plural.series, '$1eries'],\n    [regex.plural.xes, '$1'],\n    [regex.plural.mice, '$1ouse'],\n    [regex.plural.buses, '$1'],\n    [regex.plural.oes, '$1'],\n    [regex.plural.shoes, '$1'],\n    [regex.plural.crises, '$1is'],\n    [regex.plural.octopuses, '$1us'],\n    [regex.plural.aliases, '$1'],\n    [regex.plural.summonses, '$1'],\n    [regex.plural.oxen, '$1'],\n    [regex.plural.matrices, '$1ix'],\n    [regex.plural.vertices, '$1ex'],\n    [regex.plural.feet, 'foot'],\n    [regex.plural.teeth, 'tooth'],\n    [regex.plural.geese, 'goose'],\n    [regex.plural.quizzes, '$1'],\n    [regex.plural.whereases, '$1'],\n    [regex.plural.ss, 'ss'],\n    [regex.plural.s, ''],\n];\n/**\n * @description This is a list of words that should not be capitalized for title case.\n */\nconst nonTitlecasedWords = [\n    'and',\n    'or',\n    'nor',\n    'a',\n    'an',\n    'the',\n    'so',\n    'but',\n    'to',\n    'of',\n    'at',\n    'by',\n    'from',\n    'into',\n    'on',\n    'onto',\n    'off',\n    'out',\n    'in',\n    'over',\n    'with',\n    'for',\n];\n/**\n * @description These are regular expressions used for converting between String formats.\n */\nconst idSuffix = new RegExp('(_ids|_id)$', 'g');\nconst underbar = new RegExp('_', 'g');\nconst spaceOrUnderbar = new RegExp('[ _]', 'g');\nconst uppercase = new RegExp('([A-Z])', 'g');\nconst underbarPrefix = new RegExp('^_');\n/**\n * A helper method that applies rules based replacement to a String.\n * @param str String to modify and return based on the passed rules.\n * @param rules Regexp to match paired with String to use for replacement\n * @param skip Strings to skip if they match\n * @param override String to return as though this method succeeded (used to conform to APIs)\n * @returns Return passed String modified by passed rules.\n * @example\n *\n *     applyRules( 'cows', singular_rules ); // === 'cow'\n */\nfunction applyRules(str, rules, skip, override) {\n    if (override) {\n        return override;\n    }\n    else {\n        if (skip.includes(str.toLocaleLowerCase())) {\n            return str;\n        }\n        for (const rule of rules) {\n            if (str.match(rule[0])) {\n                if (rule[1] !== undefined) {\n                    return str.replace(rule[0], rule[1]);\n                }\n                return str;\n            }\n        }\n    }\n    return str;\n}\n/**\n * This function adds pluralization support to every String object.\n * @param str The subject string.\n * @param plural Overrides normal output with said String.(optional)\n * @returns Singular English language nouns are returned in plural form.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.pluralize( 'person' ); // === 'people'\n *     inflection.pluralize( 'octopus' ); // === 'octopuses'\n *     inflection.pluralize( 'Hat' ); // === 'Hats'\n *     inflection.pluralize( 'person', 'guys' ); // === 'guys'\n */\nfunction pluralize(str, plural) {\n    return applyRules(str, pluralRules, uncountableWords, plural);\n}\nexports.pluralize = pluralize;\n/**\n * This function adds singularization support to every String object.\n * @param str The subject string.\n * @param singular Overrides normal output with said String.(optional)\n * @returns Plural English language nouns are returned in singular form.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.singularize( 'people' ); // === 'person'\n *     inflection.singularize( 'octopuses' ); // === 'octopus'\n *     inflection.singularize( 'Hats' ); // === 'Hat'\n *     inflection.singularize( 'guys', 'person' ); // === 'person'\n */\nfunction singularize(str, singular) {\n    return applyRules(str, singularRules, uncountableWords, singular);\n}\nexports.singularize = singularize;\n/**\n * This function will pluralize or singularlize a String appropriately based on a number value\n * @param str The subject string.\n * @param count The number to base pluralization off of.\n * @param singular Overrides normal output with said String.(optional)\n * @param plural Overrides normal output with said String.(optional)\n * @returns English language nouns are returned in the plural or singular form based on the count.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.inflect( 'people' 1 ); // === 'person'\n *     inflection.inflect( 'octopuses' 1 ); // === 'octopus'\n *     inflection.inflect( 'Hats' 1 ); // === 'Hat'\n *     inflection.inflect( 'guys', 1 , 'person' ); // === 'person'\n *     inflection.inflect( 'inches', 1.5 ); // === 'inches'\n *     inflection.inflect( 'person', 2 ); // === 'people'\n *     inflection.inflect( 'octopus', 2 ); // === 'octopuses'\n *     inflection.inflect( 'Hat', 2 ); // === 'Hats'\n *     inflection.inflect( 'person', 2, null, 'guys' ); // === 'guys'\n */\nfunction inflect(str, count, singular, plural) {\n    if (isNaN(count))\n        return str;\n    if (count === 1) {\n        return applyRules(str, singularRules, uncountableWords, singular);\n    }\n    else {\n        return applyRules(str, pluralRules, uncountableWords, plural);\n    }\n}\nexports.inflect = inflect;\n/**\n * This function adds camelization support to every String object.\n * @param str The subject string.\n * @param lowFirstLetter Default is to capitalize the first letter of the results.(optional)\n *                                 Passing true will lowercase it.\n * @returns Lower case underscored words will be returned in camel case.\n *                  additionally '/' is translated to '::'\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.camelize( 'message_properties' ); // === 'MessageProperties'\n *     inflection.camelize( 'message_properties', true ); // === 'messageProperties'\n */\nfunction camelize(str, lowFirstLetter) {\n    const strPath = str.split('/');\n    const j = strPath.length;\n    let strArr, k, l, first;\n    for (let i = 0; i < j; i++) {\n        strArr = strPath[i].split('_');\n        k = 0;\n        l = strArr.length;\n        for (; k < l; k++) {\n            if (k !== 0) {\n                strArr[k] = strArr[k].toLowerCase();\n            }\n            first = strArr[k].charAt(0);\n            first =\n                lowFirstLetter && i === 0 && k === 0\n                    ? first.toLowerCase()\n                    : first.toUpperCase();\n            strArr[k] = first + strArr[k].substring(1);\n        }\n        strPath[i] = strArr.join('');\n    }\n    return strPath.join('::');\n}\nexports.camelize = camelize;\n/**\n * This function adds underscore support to every String object.\n * @param str The subject string.\n * @param allUpperCase Default is to lowercase and add underscore prefix.(optional)\n *                  Passing true will return as entered.\n * @returns Camel cased words are returned as lower cased and underscored.\n *                  additionally '::' is translated to '/'.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.underscore( 'MessageProperties' ); // === 'message_properties'\n *     inflection.underscore( 'messageProperties' ); // === 'message_properties'\n *     inflection.underscore( 'MP', true ); // === 'MP'\n */\nfunction underscore(str, allUpperCase) {\n    if (allUpperCase && str === str.toUpperCase())\n        return str;\n    const strPath = str.split('::');\n    const j = strPath.length;\n    for (let i = 0; i < j; i++) {\n        strPath[i] = strPath[i].replace(uppercase, '_$1');\n        strPath[i] = strPath[i].replace(underbarPrefix, '');\n    }\n    return strPath.join('/').toLowerCase();\n}\nexports.underscore = underscore;\n/**\n * This function adds humanize support to every String object.\n * @param str The subject string.\n * @param lowFirstLetter Default is to capitalize the first letter of the results.(optional)\n *                                 Passing true will lowercase it.\n * @returns Lower case underscored words will be returned in humanized form.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.humanize( 'message_properties' ); // === 'Message properties'\n *     inflection.humanize( 'message_properties', true ); // === 'message properties'\n */\nfunction humanize(str, lowFirstLetter) {\n    str = str.toLowerCase();\n    str = str.replace(idSuffix, '');\n    str = str.replace(underbar, ' ');\n    if (!lowFirstLetter) {\n        str = capitalize(str);\n    }\n    return str;\n}\nexports.humanize = humanize;\n/**\n * This function adds capitalization support to every String object.\n * @param str The subject string.\n * @returns All characters will be lower case and the first will be upper.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.capitalize( 'message_properties' ); // === 'Message_properties'\n *     inflection.capitalize( 'message properties', true ); // === 'Message properties'\n */\nfunction capitalize(str) {\n    str = str.toLowerCase();\n    return str.substring(0, 1).toUpperCase() + str.substring(1);\n}\nexports.capitalize = capitalize;\n/**\n * This function replaces underscores with dashes in the string.\n * @param str The subject string.\n * @returns Replaces all spaces or underscores with dashes.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.dasherize( 'message_properties' ); // === 'message-properties'\n *     inflection.dasherize( 'Message Properties' ); // === 'Message-Properties'\n */\nfunction dasherize(str) {\n    return str.replace(spaceOrUnderbar, '-');\n}\nexports.dasherize = dasherize;\n/**\n * This function adds titleize support to every String object.\n * @param str The subject string.\n * @returns Capitalizes words as you would for a book title.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.titleize( 'message_properties' ); // === 'Message Properties'\n *     inflection.titleize( 'message properties to keep' ); // === 'Message Properties to Keep'\n */\nfunction titleize(str) {\n    str = str.toLowerCase().replace(underbar, ' ');\n    const strArr = str.split(' ');\n    const j = strArr.length;\n    let d, l;\n    for (let i = 0; i < j; i++) {\n        d = strArr[i].split('-');\n        l = d.length;\n        for (let k = 0; k < l; k++) {\n            if (nonTitlecasedWords.indexOf(d[k].toLowerCase()) < 0) {\n                d[k] = capitalize(d[k]);\n            }\n        }\n        strArr[i] = d.join('-');\n    }\n    str = strArr.join(' ');\n    str = str.substring(0, 1).toUpperCase() + str.substring(1);\n    return str;\n}\nexports.titleize = titleize;\n/**\n * This function adds demodulize support to every String object.\n * @param str The subject string.\n * @returns Removes module names leaving only class names.(Ruby style)\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.demodulize( 'Message::Bus::Properties' ); // === 'Properties'\n */\nfunction demodulize(str) {\n    const strArr = str.split('::');\n    return strArr[strArr.length - 1];\n}\nexports.demodulize = demodulize;\n/**\n * This function adds tableize support to every String object.\n * @param str The subject string.\n * @returns Return camel cased words into their underscored plural form.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.tableize( 'MessageBusProperty' ); // === 'message_bus_properties'\n */\nfunction tableize(str) {\n    str = underscore(str);\n    str = pluralize(str);\n    return str;\n}\nexports.tableize = tableize;\n/**\n * This function adds classification support to every String object.\n * @param str The subject string.\n * @returns Underscored plural nouns become the camel cased singular form.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.classify( 'message_bus_properties' ); // === 'MessageBusProperty'\n */\nfunction classify(str) {\n    str = camelize(str);\n    str = singularize(str);\n    return str;\n}\nexports.classify = classify;\n/**\n   * This function adds foreign key support to every String object.\n   * @param str The subject string.\n   * @param dropIdUbar Default is to seperate id with an underbar at the end of the class name,\n                                 you can pass true to skip it.(optional)\n   * @returns Underscored plural nouns become the camel cased singular form.\n   * @example\n   *\n   *     const inflection = require( 'inflection' );\n   *\n   *     inflection.foreign_key( 'MessageBusProperty' ); // === 'message_bus_property_id'\n   *     inflection.foreign_key( 'MessageBusProperty', true ); // === 'message_bus_propertyid'\n   */\nfunction foreignKey(str, dropIdUbar) {\n    str = demodulize(str);\n    str = underscore(str) + (dropIdUbar ? '' : '_') + 'id';\n    return str;\n}\nexports.foreignKey = foreignKey;\n/**\n * This function adds ordinalize support to every String object.\n * @param str The subject string.\n * @returns Return all found numbers their sequence like '22nd'.\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.ordinalize( 'the 1 pitch' ); // === 'the 1st pitch'\n */\nfunction ordinalize(str) {\n    const strArr = str.split(' ');\n    const j = strArr.length;\n    for (let i = 0; i < j; i++) {\n        const k = parseInt(strArr[i], 10);\n        if (!isNaN(k)) {\n            const ltd = strArr[i].substring(strArr[i].length - 2);\n            const ld = strArr[i].substring(strArr[i].length - 1);\n            let suf = 'th';\n            if (ltd != '11' && ltd != '12' && ltd != '13') {\n                if (ld === '1') {\n                    suf = 'st';\n                }\n                else if (ld === '2') {\n                    suf = 'nd';\n                }\n                else if (ld === '3') {\n                    suf = 'rd';\n                }\n            }\n            strArr[i] += suf;\n        }\n    }\n    return strArr.join(' ');\n}\nexports.ordinalize = ordinalize;\nconst transformFunctions = {\n    pluralize,\n    singularize,\n    camelize,\n    underscore,\n    humanize,\n    capitalize,\n    dasherize,\n    titleize,\n    demodulize,\n    tableize,\n    classify,\n    foreignKey,\n    ordinalize,\n};\n/**\n * This function performs multiple inflection methods on a string\n * @param str The subject string.\n * @param arr An array of inflection methods.\n * @returns\n * @example\n *\n *     const inflection = require( 'inflection' );\n *\n *     inflection.transform( 'all job', [ 'pluralize', 'capitalize', 'dasherize' ]); // === 'All-jobs'\n */\nfunction transform(str, arr) {\n    const j = arr.length;\n    for (let i = 0; i < j; i++) {\n        const method = arr[i];\n        const methodFn = transformFunctions[method];\n        if (methodFn) {\n            str = methodFn(str);\n        }\n    }\n    return str;\n}\nexports.transform = transform;\n", "import { useContext } from 'react';\n\nimport { AuthProvider } from '../types';\nimport { AuthContext } from './AuthContext';\n\nexport const defaultAuthParams = {\n    loginUrl: '/login',\n    afterLoginUrl: '/',\n};\n\n/**\n * Get the authProvider stored in the context\n */\nconst useAuthProvider = <\n    AuthProviderType extends AuthProvider = AuthProvider,\n>(): AuthProviderType | undefined =>\n    useContext(AuthContext) as AuthProviderType | undefined;\n\nexport default useAuthProvider;\n", "import { createContext } from 'react';\n\nimport { AuthProvider } from '../types';\n\nexport const AuthContext = createContext<AuthProvider | undefined>(undefined);\n\nAuthContext.displayName = 'AuthContext';\n", "import { useEffect, useMemo } from 'react';\nimport {\n    QueryObserverResult,\n    useQuery,\n    UseQueryOptions,\n} from '@tanstack/react-query';\nimport useAuthProvider, { defaultAuthParams } from './useAuthProvider';\nimport useLogout from './useLogout';\nimport { removeDoubleSlashes, useBasename } from '../routing';\nimport { useNotify } from '../notification';\nimport { useEvent } from '../util';\n\nconst emptyParams = {};\n\n/**\n * Hook for getting the authentication status\n *\n * Calls the authProvider.checkAuth() method asynchronously.\n *\n * The return value updates according to the authProvider request state:\n *\n * - isPending: true just after mount, while the authProvider is being called. false once the authProvider has answered.\n * - authenticated: true while loading. then true or false depending on the authProvider response.\n *\n * To avoid rendering a component and force waiting for the authProvider response, use the useAuthState() hook\n * instead of the useAuthenticated() hook.\n *\n * You can render different content depending on the authenticated status.\n *\n * @see useAuthenticated()\n *\n * @param {Object} params Any params you want to pass to the authProvider\n *\n * @param {Boolean} logoutOnFailure: Optional. Whether the user should be logged out if the authProvider fails to authenticate them. False by default.\n *\n * @returns The current auth check state. Destructure as { authenticated, error, isPending }.\n *\n * @example\n * import { useAuthState, Loading } from 'react-admin';\n *\n * const MyPage = () => {\n *     const { isPending, authenticated } = useAuthState();\n *     if (isPending) {\n *         return <Loading />;\n *     }\n *     if (authenticated) {\n *        return <AuthenticatedContent />;\n *     }\n *     return <AnonymousContent />;\n * };\n */\nconst useAuthState = <ErrorType = Error>(\n    params: any = emptyParams,\n    logoutOnFailure: boolean = false,\n    queryOptions: UseAuthStateOptions<ErrorType> = emptyParams\n): UseAuthStateResult<ErrorType> => {\n    const authProvider = useAuthProvider();\n    const logout = useLogout();\n    const basename = useBasename();\n    const notify = useNotify();\n    const { onSuccess, onError, onSettled, ...options } = queryOptions;\n\n    const result = useQuery<boolean, any>({\n        queryKey: ['auth', 'checkAuth', params],\n        queryFn: ({ signal }) => {\n            // The authProvider is optional in react-admin\n            if (!authProvider) {\n                return true;\n            }\n            return authProvider\n                .checkAuth({ ...params, signal })\n                .then(() => true)\n                .catch(error => {\n                    // This is necessary because react-query requires the error to be defined\n                    if (error != null) {\n                        throw error;\n                    }\n\n                    throw new Error();\n                });\n        },\n        retry: false,\n        ...options,\n    });\n\n    const onSuccessEvent = useEvent(onSuccess ?? noop);\n    const onSettledEvent = useEvent(onSettled ?? noop);\n    const onErrorEvent = useEvent(\n        onError ??\n            ((error: any) => {\n                const loginUrl = removeDoubleSlashes(\n                    `${basename}/${defaultAuthParams.loginUrl}`\n                );\n                if (logoutOnFailure) {\n                    logout(\n                        {},\n                        error && error.redirectTo != null\n                            ? error.redirectTo\n                            : loginUrl\n                    );\n                    const shouldSkipNotify = error && error.message === false;\n                    !shouldSkipNotify &&\n                        notify(\n                            getErrorMessage(error, 'ra.auth.auth_check_error'),\n                            { type: 'error' }\n                        );\n                }\n            })\n    );\n\n    useEffect(() => {\n        if (result.data === undefined || result.isFetching) return;\n        onSuccessEvent(result.data);\n    }, [onSuccessEvent, result.data, result.isFetching]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return useMemo(() => {\n        return {\n            ...result,\n            // If the data is undefined and the query isn't loading anymore, it means the query failed.\n            // In that case, we set authenticated to false unless there's no authProvider.\n            authenticated:\n                result.data ?? result.isLoading ? true : authProvider == null, // Optimistic,\n        };\n    }, [authProvider, result]);\n};\n\ntype UseAuthStateOptions<ErrorType = Error> = Omit<\n    UseQueryOptions<boolean, ErrorType>,\n    'queryKey' | 'queryFn'\n> & {\n    onSuccess?: (data: boolean) => void;\n    onError?: (err: ErrorType) => void;\n    onSettled?: (data?: boolean, error?: Error) => void;\n};\n\nexport type UseAuthStateResult<ErrorType = Error> = QueryObserverResult<\n    boolean,\n    ErrorType\n> & {\n    authenticated: boolean;\n};\n\nexport default useAuthState;\n\nconst getErrorMessage = (error, defaultMessage) =>\n    typeof error === 'string'\n        ? error\n        : typeof error === 'undefined' || !error.message\n          ? defaultMessage\n          : error.message;\n\nconst noop = () => {};\n", "import { useCallback, useEffect, useRef } from 'react';\nimport { useLocation, useNavigate, Path } from 'react-router-dom';\nimport { useQueryClient } from '@tanstack/react-query';\n\nimport useAuthProvider, { defaultAuthParams } from './useAuthProvider';\nimport { useResetStore } from '../store';\nimport { useBasename } from '../routing';\nimport { removeDoubleSlashes } from '../routing/useCreatePath';\n\n/**\n * Get a callback for calling the authProvider.logout() method,\n * redirect to the login page, and clear the store.\n *\n * @see useAuthProvider\n *\n * @returns {Function} logout callback\n *\n * @example\n *\n * import { useLogout } from 'react-admin';\n *\n * const LogoutButton = () => {\n *     const logout = useLogout();\n *     const handleClick = () => logout();\n *     return <button onClick={handleClick}>Logout</button>;\n * }\n */\nconst useLogout = (): Logout => {\n    const authProvider = useAuthProvider();\n    const queryClient = useQueryClient();\n    const resetStore = useResetStore();\n    const navigate = useNavigate();\n    // useNavigate forces rerenders on every navigation, even if we don't use the result\n    // see https://github.com/remix-run/react-router/issues/7634\n    // so we use a ref to bail out of rerenders when we don't need to\n    const navigateRef = useRef(navigate);\n    const location = useLocation();\n    const locationRef = useRef(location);\n    const basename = useBasename();\n    const loginUrl = removeDoubleSlashes(\n        `${basename}/${defaultAuthParams.loginUrl}`\n    );\n\n    /*\n     * We need the current location to pass in the router state\n     * so that the login hook knows where to redirect to as next route after login.\n     *\n     * But if we used the location from useLocation as a dependency of the logout\n     * function, it would be rebuilt each time the user changes location.\n     * Consequently, that would force a rerender of all components using this hook\n     * upon navigation (CoreAdminRouter for example).\n     *\n     * To avoid that, we store the location in a ref.\n     */\n    useEffect(() => {\n        locationRef.current = location;\n        navigateRef.current = navigate;\n    }, [location, navigate]);\n\n    const logout: Logout = useCallback(\n        (\n            params = {},\n            redirectTo = loginUrl,\n            redirectToCurrentLocationAfterLogin = true\n        ) => {\n            if (authProvider) {\n                return authProvider\n                    .logout(params)\n                    .then(redirectToFromProvider => {\n                        if (\n                            redirectToFromProvider === false ||\n                            redirectTo === false\n                        ) {\n                            resetStore();\n                            queryClient.clear();\n                            // do not redirect\n                            return;\n                        }\n\n                        const finalRedirectTo =\n                            redirectToFromProvider || redirectTo;\n\n                        if (finalRedirectTo?.startsWith('http')) {\n                            // absolute link (e.g. https://my.oidc.server/login)\n                            resetStore();\n                            queryClient.clear();\n                            window.location.href = finalRedirectTo;\n                            return finalRedirectTo;\n                        }\n\n                        // redirectTo is an internal location that may contain a query string, e.g. '/login?foo=bar'\n                        // we must split it to pass a structured location to navigate()\n                        const redirectToParts = finalRedirectTo.split('?');\n                        const newLocation: Partial<Path> = {\n                            pathname: redirectToParts[0],\n                        };\n                        let newLocationOptions = {};\n\n                        if (\n                            redirectToCurrentLocationAfterLogin &&\n                            locationRef.current &&\n                            locationRef.current.pathname\n                        ) {\n                            newLocationOptions = {\n                                state: {\n                                    nextPathname: locationRef.current.pathname,\n                                    nextSearch: locationRef.current.search,\n                                },\n                            };\n                        }\n                        if (redirectToParts[1]) {\n                            newLocation.search = redirectToParts[1];\n                        }\n                        navigateRef.current(newLocation, newLocationOptions);\n                        resetStore();\n                        queryClient.clear();\n\n                        return redirectToFromProvider;\n                    });\n            } else {\n                navigateRef.current(\n                    {\n                        pathname: loginUrl,\n                    },\n                    {\n                        state: {\n                            nextPathname:\n                                locationRef.current &&\n                                locationRef.current.pathname,\n                        },\n                    }\n                );\n                resetStore();\n                queryClient.clear();\n                return Promise.resolve();\n            }\n        },\n        [authProvider, resetStore, loginUrl, queryClient]\n    );\n\n    return logout;\n};\n\n/**\n * Log the current user out by calling the authProvider.logout() method,\n * and redirect them to the login screen.\n *\n * @param {Object} params The parameters to pass to the authProvider\n * @param {string} redirectTo The path name to redirect the user to (optional, defaults to login)\n * @param {boolean} redirectToCurrentLocationAfterLogin Whether the button shall record the current location to redirect to it after login. true by default.\n *\n * @return {Promise} The authProvider response\n */\ntype Logout = (\n    params?: any,\n    redirectTo?: string | false,\n    redirectToCurrentLocationAfterLogin?: boolean\n) => Promise<any>;\n\nexport default useLogout;\n", "import { Store } from './types';\n\ntype Subscription = {\n    key: string;\n    callback: (value: any) => void;\n};\n\nconst RA_STORE = 'RaStore';\n\n// localStorage isn't available in incognito mode. We need to detect it\nconst testLocalStorage = () => {\n    // eslint-disable-next-line eqeqeq\n    if (typeof window === 'undefined' || window.localStorage == undefined) {\n        return false;\n    }\n\n    try {\n        window.localStorage.setItem('test', 'test');\n        window.localStorage.removeItem('test');\n        return true;\n    } catch (e) {\n        return false;\n    }\n};\n\nlet localStorageAvailable = testLocalStorage();\n\n/**\n * Store using localStorage, or memory storage in incognito mode\n *\n * @example\n *\n * import { localStorageStore } from 'react-admin';\n *\n * const App = () => (\n *    <Admin store={localStorageStore()}>\n *       ...\n *   </Admin>\n * );\n */\nexport const localStorageStore = (\n    version: string = '1',\n    appKey: string = ''\n): Store => {\n    const prefix = `${RA_STORE}${appKey}`;\n    const prefixLength = prefix.length;\n    const subscriptions: { [key: string]: Subscription } = {};\n    const publish = (key: string, value: any) => {\n        Object.keys(subscriptions).forEach(id => {\n            if (!subscriptions[id]) return; // may happen if a component unmounts after a first subscriber was notified\n            if (subscriptions[id].key === key) {\n                subscriptions[id].callback(value);\n            }\n        });\n    };\n\n    // Whenever the local storage changes in another document, look for matching subscribers.\n    // This allows to synchronize state across tabs\n    const onLocalStorageChange = (event: StorageEvent): void => {\n        if (event.key?.substring(0, prefixLength) !== prefix) {\n            return;\n        }\n        const key = event.key.substring(prefixLength + 1);\n        const value = event.newValue ? tryParse(event.newValue) : undefined;\n        Object.keys(subscriptions).forEach(id => {\n            if (!subscriptions[id]) return; // may happen if a component unmounts after a first subscriber was notified\n            if (subscriptions[id].key === key) {\n                if (value === null) {\n                    // an event with a null value is sent when the key is deleted.\n                    // to enable default value, we need to call setValue(undefined) instead of setValue(null)\n                    subscriptions[id].callback(undefined);\n                } else {\n                    subscriptions[id].callback(\n                        value == null ? undefined : value\n                    );\n                }\n            }\n        });\n    };\n\n    return {\n        setup: () => {\n            if (localStorageAvailable) {\n                const storedVersion = getStorage().getItem(`${prefix}.version`);\n                if (storedVersion && storedVersion !== version) {\n                    const storage = getStorage();\n                    Object.keys(storage).forEach(key => {\n                        if (key.startsWith(prefix)) {\n                            storage.removeItem(key);\n                        }\n                    });\n                }\n                getStorage().setItem(`${prefix}.version`, version);\n                window.addEventListener('storage', onLocalStorageChange);\n            }\n        },\n        teardown: () => {\n            if (localStorageAvailable) {\n                window.removeEventListener('storage', onLocalStorageChange);\n            }\n        },\n        getItem<T = any>(key: string, defaultValue?: T): T {\n            const valueFromStorage = getStorage().getItem(`${prefix}.${key}`);\n\n            // eslint-disable-next-line eqeqeq\n            return valueFromStorage == null\n                ? defaultValue\n                : tryParse(valueFromStorage);\n        },\n        setItem<T = any>(key: string, value: T): void {\n            if (value === undefined) {\n                getStorage().removeItem(`${prefix}.${key}`);\n            } else {\n                getStorage().setItem(`${prefix}.${key}`, JSON.stringify(value));\n            }\n            publish(key, value);\n        },\n        removeItem(key: string): void {\n            getStorage().removeItem(`${prefix}.${key}`);\n            publish(key, undefined);\n        },\n        removeItems(keyPrefix: string): void {\n            const storage = getStorage();\n            Object.keys(storage).forEach(key => {\n                if (key.startsWith(`${prefix}.${keyPrefix}`)) {\n                    storage.removeItem(key);\n                    const publishKey = key.substring(prefixLength + 1);\n                    publish(publishKey, undefined);\n                }\n            });\n        },\n        reset(): void {\n            const storage = getStorage();\n            Object.keys(storage).forEach(key => {\n                if (key.startsWith(prefix)) {\n                    storage.removeItem(key);\n                    const publishKey = key.substring(prefixLength + 1);\n                    publish(publishKey, undefined);\n                }\n            });\n        },\n        subscribe: (key: string, callback: (value: string) => void) => {\n            const id = Math.random().toString();\n            subscriptions[id] = {\n                key,\n                callback,\n            };\n            return () => {\n                delete subscriptions[id];\n            };\n        },\n    };\n};\n\nconst tryParse = (value: string): any => {\n    try {\n        return JSON.parse(value);\n    } catch (e) {\n        return value;\n    }\n};\nclass LocalStorageShim {\n    valuesMap: any = new Map();\n\n    getItem(key: string) {\n        if (this.valuesMap.has(key)) {\n            return String(this.valuesMap.get(key));\n        }\n        return null;\n    }\n\n    setItem(key: string, value: string) {\n        this.valuesMap.set(key, value);\n    }\n\n    removeItem(key: string) {\n        this.valuesMap.delete(key);\n    }\n\n    removeItems(keyPrefix: string) {\n        this.valuesMap.forEach((value, key) => {\n            if (key.startsWith(keyPrefix)) {\n                this.valuesMap.delete(key);\n            }\n        });\n    }\n\n    clear() {\n        this.valuesMap.clear();\n    }\n\n    key(i): string {\n        if (arguments.length === 0) {\n            throw new TypeError(\n                \"Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.\"\n            ); // this is a TypeError implemented on Chrome, Firefox throws Not enough arguments to Storage.key.\n        }\n        const arr = Array.from(this.valuesMap.keys()) as string[];\n        return arr[i];\n    }\n\n    get length() {\n        return this.valuesMap.size;\n    }\n}\nconst memoryStorage = new LocalStorageShim();\n\nexport const getStorage = () => {\n    return localStorageAvailable ? window.localStorage : memoryStorage;\n};\n", "import set from 'lodash/set';\nimport unset from 'lodash/unset';\nimport get from 'lodash/get';\nimport { Store } from './types';\n\ntype Subscription = {\n    key: string;\n    callback: (value: any) => void;\n};\n\n/**\n * Store using memory\n *\n * @example\n *\n * import { memoryStore } from 'react-admin';\n *\n * const App = () => (\n *    <Admin store={memoryStore()}>\n *       ...\n *   </Admin>\n * );\n */\nexport const memoryStore = (storage: any = {}): Store => {\n    const subscriptions: { [key: string]: Subscription } = {};\n    const publish = (key: string, value: any) => {\n        Object.keys(subscriptions).forEach(id => {\n            if (!subscriptions[id]) return; // may happen if a component unmounts after a first subscriber was notified\n            if (subscriptions[id].key === key) {\n                subscriptions[id].callback(value);\n            }\n        });\n    };\n    return {\n        setup: () => {},\n        teardown: () => {\n            Object.keys(storage).forEach(key => delete storage[key]);\n        },\n        getItem<T = any>(key: string, defaultValue?: T): T {\n            return get(storage, key, defaultValue);\n        },\n        setItem<T = any>(key: string, value: T): void {\n            set(storage, key, value);\n            publish(key, value);\n        },\n        removeItem(key: string): void {\n            unset(storage, key);\n            publish(key, undefined);\n        },\n        removeItems(keyPrefix: string): void {\n            const flatStorage = flatten(storage);\n            Object.keys(flatStorage).forEach(key => {\n                if (!key.startsWith(keyPrefix)) {\n                    return;\n                }\n                unset(storage, key);\n                publish(key, undefined);\n            });\n        },\n        reset(): void {\n            const flatStorage = flatten(storage);\n            Object.keys(flatStorage).forEach(key => {\n                unset(storage, key);\n                publish(key, undefined);\n            });\n        },\n        subscribe: (key: string, callback: (value: string) => void) => {\n            const id = Math.random().toString();\n            subscriptions[id] = {\n                key,\n                callback,\n            };\n            return () => {\n                delete subscriptions[id];\n            };\n        },\n    };\n};\n\n// taken from https://stackoverflow.com/a/19101235/1333479\nconst flatten = (data: any) => {\n    var result = {};\n    function doFlatten(current, prop) {\n        if (Object(current) !== current) {\n            // scalar value\n            result[prop] = current;\n        } else if (Array.isArray(current)) {\n            // array\n            result[prop] = current;\n        } else {\n            // object\n            var isEmpty = true;\n            for (var p in current) {\n                isEmpty = false;\n                doFlatten(current[p], prop ? prop + '.' + p : p);\n            }\n            if (isEmpty && prop) result[prop] = {};\n        }\n    }\n    doFlatten(data, '');\n    return result;\n};\n", "import { createContext } from 'react';\n\nimport { Store } from './types';\nimport { memoryStore } from './memoryStore';\n\nconst defaultStore = memoryStore();\n\nexport const StoreContext = createContext<Store>(defaultStore);\n", "import * as React from 'react';\nimport { useEffect } from 'react';\nimport { StoreContext } from './StoreContext';\nimport { Store } from './types';\n\nexport const StoreContextProvider = ({\n    value: Store,\n    children,\n}: StoreContextProviderProps) => {\n    useEffect(() => {\n        Store.setup();\n        return () => {\n            Store.teardown();\n        };\n    }, [Store]);\n\n    return (\n        <StoreContext.Provider value={Store}>{children}</StoreContext.Provider>\n    );\n};\n\nexport interface StoreContextProviderProps {\n    value: Store;\n    children: React.ReactNode;\n}\n", "import * as React from 'react';\nimport { useEffect, ReactNode } from 'react';\nimport { useStoreContext } from './useStoreContext';\n\n/**\n * A component to set store state for a key on mount declaratively\n *\n * To use it, just wrap any component that need to use the corresponding\n * store item with <StoreSetter name=\"my.key\" value=\"myvalue\">.\n * This wrapping needs to be done to ensure that the corresponding store item\n * is set before rendering the wrapped component.\n *\n * Tip: <StoreSetter> is a great helper for mocking the store in\n * unit tests. Prefer it to calling the Store manually.\n *\n * @example\n *\n *     <StoreSetter name=\"list.density\" value=\"small\">\n *         <MyStoreDependentComponent />\n *     </StoreSetter>\n *\n * @example // Using <StoreSetter> is equivalent to using `useStoreContext` and setting its value directly.\n *\n * const [, setDensity] = useStore('list.density');\n *\n * useEffect(() => {\n *     setDensity('small');\n * }, []);\n *\n * @param {Props}    props\n * @param {string}   props.name Store item key. Required. Separate with dots to namespace, e.g. 'posts.list.columns'\n * @param {any}      props.value Store item value. Required.\n * @param {children} props.children Children are rendered as is, on mount\n */\nexport const StoreSetter = ({ value, name, children }: StoreSetterProps) => {\n    const { setItem } = useStoreContext();\n\n    useEffect(() => {\n        setItem(name, value);\n    }, [name, setItem, value]);\n\n    return <>{children}</>;\n};\n\nexport interface StoreSetterProps {\n    name: string;\n    value: any;\n    children: ReactNode;\n}\n", "import { useContext } from 'react';\n\nimport { StoreContext } from './StoreContext';\n\n/**\n * Get the Store stored in the StoreContext\n */\nexport const useStoreContext = () => useContext(StoreContext);\n", "import { useState, useEffect } from 'react';\nimport isEqual from 'lodash/isEqual';\n\nimport { useEvent } from '../util';\nimport { useStoreContext } from './useStoreContext';\n\n/**\n * Read and write a value from the Store\n *\n * useState-like hook using the global Store for persistence.\n * Each time a store value is changed, all components using this value will be re-rendered.\n *\n * @param {string} key Name of the store key. Separate with dots to namespace, e.g. 'posts.list.columns'.\n * @param {any} defaultValue Default value\n *\n * @return {Object} A value and a setter for the value, in an array - just like for useState()\n *\n * @example\n * import { useStore } from 'react-admin';\n *\n * const PostList = () => {\n *     const [density] = useStore('posts.list.density', 'small');\n *\n *     return (\n *         <List>\n *             <Datagrid size={density}>\n *                 ...\n *             </Datagrid>\n *         </List>\n *     );\n * }\n *\n * // Clicking on this button will trigger a rerender of the PostList!\n * const ChangeDensity: FC<any> = () => {\n *     const [density, setDensity] = useStore('posts.list.density', 'small');\n *\n *     const changeDensity = (): void => {\n *         setDensity(density === 'small' ? 'medium' : 'small');\n *     };\n *\n *     return (\n *         <Button onClick={changeDensity}>\n *             {`Change density (current ${density})`}\n *         </Button>\n *     );\n * };\n */\nexport const useStore = <T = any>(\n    key: string,\n    defaultValue?: T\n): useStoreResult<T> => {\n    const { getItem, setItem, subscribe } = useStoreContext();\n    const [value, setValue] = useState(() => getItem(key, defaultValue));\n\n    // subscribe to changes on this key, and change the state when they happen\n    useEffect(() => {\n        const storedValue = getItem(key, defaultValue);\n        if (!isEqual(value, storedValue)) {\n            setValue(storedValue);\n        }\n        const unsubscribe = subscribe(key, newValue => {\n            setValue(typeof newValue === 'undefined' ? defaultValue : newValue);\n        });\n        return () => unsubscribe();\n    }, [key, subscribe, defaultValue, getItem, value]);\n\n    const set = useEvent((valueParam: T, runtimeDefaultValue: T) => {\n        const newValue =\n            typeof valueParam === 'function' ? valueParam(value) : valueParam;\n        // we only set the value in the Store;\n        // the value in the local state will be updated\n        // by the useEffect during the next render\n        setItem(\n            key,\n            typeof newValue === 'undefined'\n                ? typeof runtimeDefaultValue === 'undefined'\n                    ? defaultValue\n                    : runtimeDefaultValue\n                : newValue\n        );\n    });\n    return [value, set];\n};\n\nexport type useStoreResult<T = any> = [\n    T,\n    (value: T | ((value: T) => void), defaultValue?: T) => void,\n];\n", "/**\n * Escape special characters in path so that react-router Route does not do any special treatment\n *\n * @see https://github.com/ReactTraining/react-router/blob/v3/docs/guides/RouteMatching.md#path-syntax\n *\n * @example\n *\n * escapePath('/foo(bar)') => 'foo\\(bar\\)'\n */\nexport default url => url.replace(/(\\(|\\))/g, '\\\\$1');\n", "import * as React from 'react';\nimport { ReactElement, memo } from 'react';\n\nimport { useTranslateLabel } from '../i18n';\n\nexport interface FieldTitleProps {\n    isRequired?: boolean;\n    resource?: string;\n    source?: string;\n    label?: string | ReactElement | boolean;\n}\n\nexport const FieldTitle = (props: FieldTitleProps) => {\n    const { source, label, resource, isRequired } = props;\n    const translateLabel = useTranslateLabel();\n\n    if (label === true) {\n        throw new Error(\n            'Label parameter must be a string, a ReactElement or false'\n        );\n    }\n\n    if (label === false || label === '') {\n        return null;\n    }\n\n    if (label && typeof label !== 'string') {\n        return label;\n    }\n\n    return (\n        <span>\n            {translateLabel({\n                label,\n                resource,\n                source,\n            })}\n            {isRequired && <span aria-hidden=\"true\">&thinsp;*</span>}\n        </span>\n    );\n};\n\n// What? TypeScript loses the displayName if we don't set it explicitly\nFieldTitle.displayName = 'FieldTitle';\n\nexport default memo(FieldTitle);\n", "/**\n * Replace tokens by their value in the given string\n *\n * @param {string} template The template with interpolation tokens, e.g. 'Hello, %{name}'\n * @param {object} data The data to interpolate, e.g. { name: 'John' }\n * @returns {string} The interpolated string, e.g. 'Hello, John'\n */\nexport const substituteTokens = (template, data) =>\n    template && data\n        ? String.prototype.replace.call(\n              template,\n              defaultTokenRegex,\n              function (expression, argument) {\n                  if (\n                      !data.hasOwnProperty(argument) ||\n                      data[argument] == null\n                  ) {\n                      return expression;\n                  }\n                  return data[argument];\n              }\n          )\n        : template;\n\n// tokens are like 'Hello, %{name}'\nconst defaultTokenRegex = /%\\{(.*?)\\}/g;\n", "import * as React from 'react';\nimport lodashGet from 'lodash/get';\n\nimport { I18nContextProvider } from './I18nContextProvider';\nimport { I18nProvider } from '../types';\n\nexport const TestTranslationProvider = ({\n    translate,\n    messages,\n    children,\n}: any) => (\n    <I18nContextProvider value={testI18nProvider({ translate, messages })}>\n        {children}\n    </I18nContextProvider>\n);\n\nexport interface IMessages\n    extends Record<string, string | ((options?: any) => string) | IMessages> {}\n\nexport const testI18nProvider = ({\n    translate,\n    messages,\n}: {\n    translate?: I18nProvider['translate'];\n    messages?: IMessages;\n} = {}): I18nProvider => {\n    return {\n        translate: messages\n            ? (key, options) => {\n                  const message = lodashGet(messages, key);\n                  return message\n                      ? typeof message === 'function'\n                          ? message(options)\n                          : message\n                      : options?._ || key;\n              }\n            : translate || (key => key),\n        changeLocale: () => Promise.resolve(),\n        getLocale: () => 'en',\n    };\n};\n", "import * as React from 'react';\nimport { useEffect, useState, ReactNode } from 'react';\n\nimport { I18nContext } from './I18nContext';\nimport { useStore } from '../store/useStore';\nimport { useNotify } from '../notification';\nimport { I18nProvider } from '../types';\n\n/**\n * Store the i18nProvider in a context, and rerender children when the locale changes\n */\nexport const I18nContextProvider = ({\n    value = defaulti18nContext,\n    children,\n}: I18nContextProviderProps) => {\n    const [locale] = useStore('locale');\n    const notify = useNotify();\n    const [key, setKey] = useState(0);\n    // to avoid blinking effect, delay first render if the user has a non-default locale\n    const [isInitialized, setInitialized] = useState(\n        locale === value.getLocale()\n    );\n\n    // watch store for locale changes\n    useEffect(() => {\n        if (locale && value.getLocale() !== locale) {\n            new Promise(resolve => {\n                // so we systematically return a Promise for the messages\n                // i18nProvider may return a Promise for language changes,\n                resolve(value.changeLocale(locale));\n            })\n                .then(() => {\n                    // Force full page re-render.\n                    // This is slow on locale change, but it's a good way\n                    // to avoid having one subscription to the locale\n                    // for each call to translate()\n                    setKey(key => key + 1);\n                    setInitialized(true);\n                })\n                .catch(error => {\n                    setInitialized(true);\n                    notify('ra.notification.i18n_error', { type: 'error' });\n                    console.error(error);\n                });\n        } else {\n            setInitialized(true);\n        }\n    }, [value, locale, notify]);\n\n    return isInitialized ? (\n        <I18nContext.Provider value={value} key={key}>\n            {children}\n        </I18nContext.Provider>\n    ) : null;\n};\n\nexport interface I18nContextProviderProps {\n    value?: I18nProvider;\n    children: ReactNode;\n}\n\nconst defaulti18nContext = {\n    translate: x => x,\n    changeLocale: () => Promise.resolve(),\n    getLocale: () => 'en',\n};\n", "import { createContext } from 'react';\nimport { I18nProvider } from '../types';\nimport { substituteTokens } from './substituteTokens';\n\nexport type I18nContextProps = I18nProvider;\n\nconst defaultI18nProvider = {\n    translate: (key, options) =>\n        options?._\n            ? substituteTokens(options._, options)\n            : substituteTokens(key, options),\n    changeLocale: () => Promise.resolve(),\n    getLocale: () => 'en',\n};\n\nexport const I18nContext = createContext<I18nProvider>(defaultI18nProvider);\n\nI18nContext.displayName = 'I18nContext';\n", "import { createContext } from 'react';\n\nimport { NotificationPayload } from './types';\n\nexport const AddNotificationContext = createContext<\n    (notification: NotificationPayload) => void\n>(() => {});\n", "import { createContext, Dispatch, SetStateAction } from 'react';\n\nimport { NotificationPayload } from './types';\n\nexport type NotificationContextType = {\n    notifications: NotificationPayload[];\n    addNotification: (notification: NotificationPayload) => void;\n    takeNotification: () => NotificationPayload | void;\n    resetNotifications: () => void;\n    setNotifications: Dispatch<SetStateAction<NotificationPayload[]>>;\n};\n\n/**\n * Context for the notification state and modifiers\n *\n * @example // display notifications\n * import { useNotificationContext } from 'react-admin';\n *\n * const App = () => {\n *    const { notifications } = useNotificationContext();\n *    return (\n *        <ul>\n *            {notifications.map(({ message }) => (\n *                <li key={index}>{ message }</li>\n *            ))}\n *        </ul>\n *    );\n * };\n *\n * @example // reset notifications\n * import { useNotificationContext } from 'react-admin';\n *\n * const ResetNotificationsButton = () => {\n *    const { resetNotifications } = useNotificationContext();\n *    return (\n *        <button onClick={() => resetNotifications()}>Reset notifications</button>\n *    );\n * };\n */\nexport const NotificationContext = createContext<NotificationContextType>({\n    notifications: [],\n    addNotification: () => {},\n    takeNotification: () => {},\n    resetNotifications: () => {},\n    setNotifications: () => {},\n});\n", "import * as React from 'react';\nimport { useState, useCallback, useMemo } from 'react';\n\nimport { NotificationPayload } from './types';\nimport { NotificationContext } from './NotificationContext';\nimport { AddNotificationContext } from './AddNotificationContext';\n\nexport const NotificationContextProvider = ({ children }) => {\n    const [notifications, setNotifications] = useState<NotificationPayload[]>(\n        []\n    );\n\n    const addNotification = useCallback((notification: NotificationPayload) => {\n        setNotifications(notifications => [...notifications, notification]);\n    }, []);\n\n    const takeNotification = useCallback(() => {\n        if (notifications.length === 0) return;\n        const [notification, ...rest] = notifications;\n        setNotifications(rest);\n        return notification;\n    }, [notifications]);\n\n    const resetNotifications = useCallback(() => {\n        setNotifications([]);\n    }, []);\n\n    const contextValue = useMemo(\n        () => ({\n            notifications,\n            addNotification,\n            takeNotification,\n            resetNotifications,\n            setNotifications,\n        }),\n        [notifications] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    // we separate the addNotification context to avoid rerendering all components\n    // that depend on useNotify when a notification is dispatched\n    return (\n        <NotificationContext.Provider value={contextValue}>\n            <AddNotificationContext.Provider value={addNotification}>\n                {children}\n            </AddNotificationContext.Provider>\n        </NotificationContext.Provider>\n    );\n};\n", "import { useContext } from 'react';\nimport { AddNotificationContext } from './AddNotificationContext';\n\nexport const useAddNotificationContext = () =>\n    useContext(AddNotificationContext);\n", "import { useContext } from 'react';\nimport { NotificationContext } from './NotificationContext';\n\nexport const useNotificationContext = () => useContext(NotificationContext);\n", "import { useCallback, ReactNode } from 'react';\n\nimport { useAddNotificationContext } from './useAddNotificationContext';\nimport { NotificationType, NotificationOptions } from './types';\n\n/**\n * Hook for Notification Side Effect\n *\n * @example\n *\n * const notify = useNotify();\n * // simple message (info level)\n * notify('Level complete');\n * // specify level\n * notify('A problem occurred', { type: 'error' })\n * // pass arguments to the translation function\n * notify('Deleted %{count} elements', { type: 'info', messageArgs: { smart_count: 23 } })\n * // show the action as undoable in the notification\n * notify('Post renamed', { type: 'info', undoable: true })\n */\nexport const useNotify = () => {\n    const addNotification = useAddNotificationContext();\n    return useCallback(\n        (\n            message: string | ReactNode,\n            options: NotificationOptions & { type?: NotificationType } = {}\n        ) => {\n            const { type: messageType = 'info', ...notificationOptions } =\n                options;\n            addNotification({\n                message,\n                type: messageType,\n                notificationOptions,\n            });\n        },\n        [addNotification]\n    );\n};\n", "import { createContext } from 'react';\n\nexport const TranslatableContext = createContext<\n    TranslatableContextValue | undefined\n>(undefined);\n\nexport interface TranslatableContextValue {\n    locales: string[];\n    selectedLocale: string;\n    selectLocale: SelectTranslatableLocale;\n    getRecordForLocale: GetRecordForLocale;\n}\n\nexport type SelectTranslatableLocale = (locale: string) => void;\n\n/**\n * Returns a record where translatable fields have their values set to the value of the given locale.\n * This is necessary because the fields rely on the RecordContext to get their values and have no knowledge of the locale.\n *\n * Given the record { title: { en: 'title_en', fr: 'title_fr' } } and the locale 'fr',\n * the record for the locale 'fr' will be { title: 'title_fr' }\n */\nexport type GetRecordForLocale = (record: any, locale: string) => any;\n", "import * as React from 'react';\nimport { ReactElement, ReactNode } from 'react';\nimport {\n    TranslatableContext,\n    TranslatableContextValue,\n} from './TranslatableContext';\n\nexport const TranslatableContextProvider = ({\n    children,\n    value,\n}: {\n    children: ReactNode;\n    value: TranslatableContextValue;\n}): ReactElement => {\n    return (\n        <TranslatableContext.Provider value={value}>\n            {children}\n        </TranslatableContext.Provider>\n    );\n};\n", "import merge from 'lodash/merge';\nimport { DEFAULT_LOCALE } from './index';\n\ninterface AllNavigatorLanguage extends NavigatorLanguage {\n    browserLanguage?: string;\n    userLanguage?: string;\n}\n\n/**\n * Resolve the browser locale according to the value of the global window.navigator\n *\n * Use it to determine the <Admin> locale at runtime.\n *\n * @example\n *    import * as React from \"react\";\n *    import { Admin, Resource, resolveBrowserLocale } from 'react-admin';\n *    import polyglotI18nProvider from 'ra-i18n-polyglot';\n *    import englishMessages from 'ra-language-english';\n *    import frenchMessages from 'ra-language-french';\n *\n *    const messages = {\n *        fr: frenchMessages,\n *        en: englishMessages,\n *    };\n *    const i18nProvider = polyglotI18nProvider(\n *        locale => messages[locale] ? messages[locale] : messages.en,\n *        resolveBrowserLocale()\n *    );\n *\n *    const App = () => (\n *        <Admin i18nProvider={i18nProvider}>\n *            ...\n *        </Admin>\n *    );\n *\n * @param {string} defaultLocale Defaults to 'en'\n * @param options\n * @param {boolean} options.fullLocale Defaults to false\n */\nexport const resolveBrowserLocale = (\n    defaultLocale?: string,\n    options?: { fullLocale?: boolean }\n): string => {\n    // from http://blog.ksol.fr/user-locale-detection-browser-javascript/\n    // Rely on the window.navigator object to determine user locale\n    const { language, browserLanguage, userLanguage } =\n        window.navigator as AllNavigatorLanguage;\n\n    const locale =\n        language ||\n        browserLanguage ||\n        userLanguage ||\n        defaultLocale ||\n        DEFAULT_LOCALE;\n\n    return options?.fullLocale ? locale : locale.split('-')[0];\n};\n\n/**\n * Compose translations from multiple packages for a single language (eg: 'english').\n *\n * Use it to merge translations from addons with the main react-admin translations.\n *\n * @example\n *     import * as React from \"react\";\n *     import { Admin, Resource, mergeTranslations } from 'react-admin';\n *     import polyglotI18nProvider from 'ra-i18n-polyglot';\n *     import englishMessages from 'ra-language-english';\n *     import englishTreeMessages from 'ra-tree-language-english';\n *\n *     const messages = {\n *        en: mergeTranslations(englishMessages, englishTreeMessages),\n *     };\n *     const i18nProvider = polyglotI18nProvider(\n *        locale => messages[locale] ? messages[locale] : messages.en\n *    );\n *\n *    const App = () => (\n *        <Admin i18nProvider={i18nProvider}>\n *            ...\n *        </Admin>\n *    );\n */\nexport const mergeTranslations = (...translationsModules: object[]) =>\n    merge({}, ...translationsModules);\n", "import { useMemo } from 'react';\nimport { useI18nProvider } from './useI18nProvider';\nimport { useStore } from '../store/useStore';\n\n/**\n * Get the current locale and the ability to change it\n *\n * @example\n *\n * import { useLocaleState } from 'react-admin';\n *\n * const availableLanguages = {\n *     en: 'English',\n *     fr: 'Français',\n * }\n * const LocaleSwitcher = () => {\n *     const [locale, setLocale] = useLocaleState();\n *     return (\n *         <div>\n *             <div>Language</div>\n *             <Button disabled={locale === 'fr'} onClick={() => setLocale('fr')}>\n *                 English\n *             </Button>\n *             <Button disabled={locale === 'en'} onClick={() => setLocale('en')}>\n *                 French\n *             </Button>\n *         </div>\n *     );\n * };\n */\nexport const useLocaleState = () => {\n    const i18nProvider = useI18nProvider();\n    const defaultLocale = useMemo(\n        () => i18nProvider.getLocale(),\n        [i18nProvider]\n    );\n    return useStore<string>('locale', defaultLocale);\n};\n", "import { useContext } from 'react';\n\nimport { I18nContext } from './I18nContext';\n\n/**\n * Get the i18nProvider instance declared in the <Admin> component\n *\n * @example\n *\n * const CurrentLanguage = () => {\n *    const i18nProvider = useI18nProvider();\n *    const locale = i18nProvider.getLocale();\n *    return <span>{locale}</span>;\n * };\n */\nexport const useI18nProvider = () => useContext(I18nContext);\n", "import { useLocaleState } from './useLocaleState';\n\n/**\n * Get the current locale\n *\n * @example\n *\n * import { useLocale } from 'react-admin';\n *\n * const availableLanguages = {\n *     en: 'English',\n *     fr: 'Français',\n * }\n * const CurrentLanguage = () => {\n *     const locale = useLocale();\n *     return <span>{availableLanguages[locale]}</span>;\n * }\n */\nexport const useLocale = () => {\n    const [locale] = useLocaleState();\n    return locale;\n};\n", "import { useMemo } from 'react';\nimport { useI18nProvider } from './useI18nProvider';\n\n/**\n * A hook that gets the available locales from the i18nProvider.\n * @example\n *\n * import { useLocales } from 'react-admin';\n *\n * const LocaleSelector = () => {\n *     const locales = useLocales();\n *     const [currentLocale, setCurrentLocale] = useLocaleState();\n *\n *     return (\n *         <select onChange={event => setCurrentLocale(event.target.value)}>\n *             {locales.map(locale => (\n *                 <option key={locale.locale} value={locale.locale}>\n *                     {locale.name}\n *                 </option>\n *             )}\n *         </select>\n *     );\n * }\n */\nexport const useLocales = (options?: UseLocalesOptions) => {\n    const i18nProvider = useI18nProvider();\n    const locales = useMemo(\n        () => (i18nProvider?.getLocales ? i18nProvider?.getLocales() : []),\n        [i18nProvider]\n    );\n    return options?.locales ?? locales;\n};\n\nexport interface UseLocalesOptions {\n    locales?: { locale: string; name: string }[];\n}\n", "import { useLocaleState } from './useLocaleState';\n\n/**\n * Set the current locale in the I18nContext and re-render the app when the locale changes.\n *\n * @example\n *\n * import { useSetLocale } from 'react-admin';\n *\n * const availableLanguages = {\n *     en: 'English',\n *     fr: 'Français',\n * }\n * const LanguageSwitcher = () => {\n *     const setLocale = useSetLocale();\n *     return (\n *         <ul>{\n *             Object.keys(availableLanguages).map(locale => {\n *                  <li key={locale} onClick={() => setLocale(locale)}>\n *                      {availableLanguages[locale]}\n *                  </li>\n *              })\n *         }</ul>\n *     );\n * }\n */\nexport const useSetLocale = () => {\n    const [, setLocale] = useLocaleState();\n    return setLocale;\n};\n", "import { useState, useMemo } from 'react';\nimport set from 'lodash/set';\nimport get from 'lodash/get';\nimport cloneDeep from 'lodash/cloneDeep';\nimport { TranslatableContextValue } from './TranslatableContext';\nimport { useLocaleState } from './useLocaleState';\n\n/**\n * Hook supplying the logic to translate a field value in multiple languages.\n *\n * @param options The hook options\n * @param {string} options.defaultLocale The locale of the default selected locale. Defaults to 'en'.\n * @param {string[]} options.locales An array of the supported locales. Each is an object with a locale and a name property. For example { locale: 'en', name: 'English' }.\n *\n * @returns\n * An object with following properties and methods:\n * - selectedLocale: The locale of the currently selected locale\n * - locales: An array of the supported locales\n * - getLabel: A function which returns the translated label for the given field\n * - getSource: A function which returns the source for the given field\n * - selectLocale: A function which set the selected locale\n */\nexport const useTranslatable = (\n    options: UseTranslatableOptions\n): TranslatableContextValue => {\n    const [localeFromUI] = useLocaleState();\n    const { defaultLocale = localeFromUI, locales } = options;\n    const [selectedLocale, setSelectedLocale] = useState(defaultLocale);\n\n    const context = useMemo<TranslatableContextValue>(\n        () => ({\n            locales,\n            selectedLocale,\n            selectLocale: setSelectedLocale,\n            getRecordForLocale,\n        }),\n        [locales, selectedLocale]\n    );\n\n    return context;\n};\n\nexport type UseTranslatableOptions = {\n    defaultLocale?: string;\n    locales: string[];\n};\n\n/**\n * Returns a record where translatable fields have their values set to the value of the given locale.\n * This is necessary because the fields rely on the RecordContext to get their values and have no knowledge of the locale.\n *\n * Given the record { title: { en: 'title_en', fr: 'title_fr' } } and the locale 'fr',\n * the record for the locale 'fr' will be { title: 'title_fr' }\n */\nexport const getRecordForLocale = (record: {} | undefined, locale: string) => {\n    if (!record) {\n        return record;\n    }\n    // Get all paths of the record\n    const paths = getRecordPaths(record);\n\n    // For each path, if a path ends with the locale, set the value of the path without the locale\n    // to the value of the path with the locale\n    const recordForLocale = paths.reduce((acc, path) => {\n        if (path.includes(locale)) {\n            const pathWithoutLocale = path.slice(0, -1);\n            const value = get(record, path);\n            return set(acc, pathWithoutLocale, value);\n        }\n        return acc;\n    }, cloneDeep(record));\n\n    return recordForLocale;\n};\n\n// Return all the possible paths of the record as an array of arrays\n// For example, given the record\n//     {\n//         title: { en: 'title_en', fr: 'title_fr' },\n//         items: [\n//             { description: { en: 'item1_en', fr: 'item1_fr' } },\n//             { description: { en: 'item2_en', fr: 'item2_fr' } }\n//         ]\n//     },\n// the paths will be\n//     [\n//         ['title'],\n//         ['title', 'en'],\n//         ['title', 'fr'],\n//         ['items'],\n//         ['items', '0'],\n//         ['items', '0', 'description'],\n//         ['items', '0', 'description', 'en'],\n//         ['items', '0', 'description', 'fr'],\n//         ['items', '1'],\n//         ['items', '1', 'description'],\n//         ['items', '1', 'description', 'en'],\n//         ['items', '1', 'description', 'fr']]\nconst getRecordPaths = (\n    record: any = {},\n    path: Array<string> = []\n): Array<Array<string>> => {\n    return Object.entries(record).reduce((acc, [key, value]) => {\n        if (value !== null && typeof value === 'object') {\n            return [\n                ...acc,\n                [...path, key],\n                ...getRecordPaths(value, [...path, key]),\n            ];\n        }\n        if (Array.isArray(value)) {\n            return value.reduce(\n                (acc, item, index) => [\n                    ...acc,\n                    ...getRecordPaths(item, [...path, key, `${index}`]),\n                ],\n                acc\n            );\n        }\n        return [...acc, [...path, key]];\n    }, []);\n};\n", "import { useContext } from 'react';\nimport {\n    TranslatableContext,\n    TranslatableContextValue,\n} from './TranslatableContext';\n\n/**\n * Gives access to the current TranslatableContext.\n *\n * @example\n * <TranslatableFields\n *     selector={<MyLanguageSelector />}\n *     locales={['en', 'fr']}\n * >\n *     <TextField source={getSource('title')} />\n * <TranslatableFields>\n *\n * const MyLanguageSelector = () => {\n *     const {\n *         locales,\n *         selectedLocale,\n *         selectLocale,\n *     } = useTranslatableContext();\n *\n *     return (\n *         <select onChange={selectLocale}>\n *             {locales.map((locale) => (\n *                 <option selected={locale.locale === selectedLocale}>\n *                     {locale.name}\n *                 </option>\n *             ))}\n *        </select>\n *     );\n * }\n */\nexport const useTranslatableContext = (): TranslatableContextValue => {\n    const context = useContext(TranslatableContext);\n\n    if (!context) {\n        throw new Error(\n            'useTranslatableContext must be used inside a TranslatableContextProvider'\n        );\n    }\n\n    return context;\n};\n", "import { useCallback } from 'react';\n\nimport { Translate } from '../types';\nimport { useI18nProvider } from './useI18nProvider';\n\n/**\n * Translate a string using the current locale and the translations from the i18nProvider\n *\n * @see Polyglot.t()\n * @link https://airbnb.io/polyglot.js/#polyglotprototypetkey-interpolationoptions\n *\n * @return {Function} A translation function, accepting two arguments\n *   - a string used as key in the translations\n *   - an interpolationOptions object\n *\n * @example\n *\n * import { useTranslate } from 'react-admin';\n *\n * const SettingsMenu = () => {\n *     const translate = useTranslate();\n *     return <MenuItem>{translate('settings')}</MenuItem>;\n * }\n */\nexport const useTranslate = (): Translate => {\n    const i18nProvider = useI18nProvider();\n    const translate = useCallback(\n        (key: string, options?: any) =>\n            i18nProvider.translate(key, options) as string,\n        // update the hook each time the locale changes\n        [i18nProvider] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    return i18nProvider ? translate : identity;\n};\n\nconst identity = key => key;\n", "import { useCallback, ReactElement } from 'react';\n\nimport { useTranslate } from './useTranslate';\nimport { getFieldLabelTranslationArgs } from '../util';\nimport { useResourceContext, useOptionalSourceContext } from '../core';\n\nexport const useTranslateLabel = () => {\n    const translate = useTranslate();\n    const resourceFromContext = useResourceContext();\n    const sourceContext = useOptionalSourceContext();\n\n    return useCallback(\n        ({\n            source,\n            label,\n            resource,\n        }: {\n            source?: string;\n            label?: string | false | ReactElement;\n            resource?: string;\n        }) => {\n            if (label === false || label === '') {\n                return null;\n            }\n\n            if (label && typeof label !== 'string') {\n                return label;\n            }\n\n            return translate(\n                ...getFieldLabelTranslationArgs({\n                    label: label as string,\n                    defaultLabel: source\n                        ? sourceContext?.getLabel(source)\n                        : undefined,\n                    resource,\n                    resourceFromContext,\n                    source,\n                })\n            );\n        },\n        [resourceFromContext, translate, sourceContext]\n    );\n};\n", "import * as React from 'react';\n\nimport { CoreAdminContext, CoreAdminContextProps } from './CoreAdminContext';\nimport { CoreAdminUI, CoreAdminUIProps } from './CoreAdminUI';\n\n/**\n * Main admin component, entry point to the application.\n *\n * Initializes the various contexts (auth, data, i18n, router)\n * and defines the main routes.\n *\n * Expects a list of resources as children, or a function returning a list of\n * resources based on the permissions.\n *\n * @example\n *\n * // static list of resources\n *\n * import {\n *     CoreAdmin,\n *     Resource,\n *     ListGuesser,\n *     useDataProvider,\n * } from 'ra-core';\n *\n * const App = () => (\n *     <CoreAdmin dataProvider={myDataProvider}>\n *         <Resource name=\"posts\" list={ListGuesser} />\n *     </CoreAdmin>\n * );\n *\n * // dynamic list of resources based on permissions\n *\n * import {\n *     CoreAdmin,\n *     Resource,\n *     ListGuesser,\n *     useDataProvider,\n * } from 'ra-core';\n *\n * const App = () => (\n *     <CoreAdmin dataProvider={myDataProvider}>\n *         {permissions => [\n *             <Resource name=\"posts\" key=\"posts\" list={ListGuesser} />,\n *         ]}\n *     </CoreAdmin>\n * );\n *\n * // If you have to build a dynamic list of resources using a side effect,\n * // you can't use <CoreAdmin>. But as it delegates to sub components,\n * // it's relatively straightforward to replace it:\n *\n * import * as React from 'react';\n * import { useEffect, useState } from 'react';\n * import {\n *     CoreAdminContext,\n *     CoreAdminUI,\n *     Resource,\n *     ListGuesser,\n *     useDataProvider,\n * } from 'ra-core';\n *\n * const App = () => (\n *     <CoreAdminContext dataProvider={myDataProvider}>\n *         <UI />\n *     </CoreAdminContext>\n * );\n *\n * const UI = () => {\n *     const [resources, setResources] = useState([]);\n *     const dataProvider = useDataProvider();\n *     useEffect(() => {\n *         dataProvider.introspect().then(r => setResources(r));\n *     }, []);\n *\n *     return (\n *         <CoreAdminUI>\n *             {resources.map(resource => (\n *                 <Resource name={resource.name} key={resource.key} list={ListGuesser} />\n *             ))}\n *         </CoreAdminUI>\n *     );\n * };\n */\nexport const CoreAdmin = (props: CoreAdminProps) => {\n    const {\n        authProvider,\n        basename,\n        catchAll,\n        children,\n        dashboard,\n        dataProvider,\n        disableTelemetry,\n        error,\n        i18nProvider,\n        queryClient,\n        layout,\n        loading,\n        loginPage,\n        ready,\n        requireAuth,\n        store,\n        title = 'React Admin',\n    } = props;\n    return (\n        <CoreAdminContext\n            authProvider={authProvider}\n            basename={basename}\n            dataProvider={dataProvider}\n            i18nProvider={i18nProvider}\n            queryClient={queryClient}\n            store={store}\n        >\n            <CoreAdminUI\n                layout={layout}\n                dashboard={dashboard}\n                disableTelemetry={disableTelemetry}\n                catchAll={catchAll}\n                title={title}\n                loading={loading}\n                error={error}\n                loginPage={loginPage}\n                requireAuth={requireAuth}\n                ready={ready}\n            >\n                {children}\n            </CoreAdminUI>\n        </CoreAdminContext>\n    );\n};\n\nexport type CoreAdminProps = CoreAdminContextProps & CoreAdminUIProps;\n", "import * as React from 'react';\nimport { useMemo } from 'react';\nimport { QueryClientProvider, QueryClient } from '@tanstack/react-query';\n\nimport { AdminRouter } from '../routing';\nimport { AuthContext, convertLegacyAuthProvider } from '../auth';\nimport {\n    DataProviderContext,\n    convertLegacyDataProvider,\n    defaultDataProvider,\n} from '../dataProvider';\nimport { StoreContextProvider, Store, memoryStore } from '../store';\nimport { PreferencesEditorContextProvider } from '../preferences/PreferencesEditorContextProvider';\nimport { I18nContextProvider } from '../i18n';\nimport { ResourceDefinitionContextProvider } from './ResourceDefinitionContext';\nimport { NotificationContextProvider } from '../notification';\nimport {\n    AuthProvider,\n    LegacyAuthProvider,\n    I18nProvider,\n    DataProvider,\n    AdminChildren,\n    DashboardComponent,\n    LegacyDataProvider,\n} from '../types';\n\nconst defaultStore = memoryStore();\n\nexport interface CoreAdminContextProps {\n    /**\n     * The authentication provider for security and permissions\n     *\n     * @see https://marmelab.com/react-admin/Authentication.html\n     * @example\n     * import authProvider from './authProvider';\n     *\n     * const App = () => (\n     *     <Admin authProvider={authProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    authProvider?: AuthProvider | LegacyAuthProvider;\n\n    /**\n     * The base path for all URLs generated by react-admin.\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#using-react-admin-in-a-sub-path\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { BrowserRouter } from 'react-router-dom';\n     * import { dataProvider } from './dataProvider';\n     *\n     * const App = () => (\n     *     <BrowserRouter>\n     *         <Admin basename=\"/admin\" dataProvider={dataProvider}>\n     *              ...\n     *         </Admin>\n     *    </BrowserRouter>\n     * );\n     */\n    basename?: string;\n\n    children?: AdminChildren;\n\n    /**\n     * The component to use for the dashboard page (displayed on the `/` route).\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#dashboard\n     * @example\n     * import { Admin } from 'react-admin';\n     * import Dashboard from './Dashboard';\n     * import { dataProvider } from './dataProvider';\n     *\n     * const App = () => (\n     *     <Admin dashboard={Dashboard} dataProvider={dataProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    dashboard?: DashboardComponent;\n\n    /**\n     * The data provider used to communicate with the API\n     *\n     * @see https://marmelab.com/react-admin/DataProviders.html\n     * @example\n     * import { Admin } from 'react-admin';\n     * import simpleRestProvider from 'ra-data-simple-rest';\n     * const dataProvider = simpleRestProvider('http://path.to.my.api/');\n     *\n     * const App = () => (\n     *     <Admin dataProvider={dataProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    dataProvider?: DataProvider | LegacyDataProvider;\n\n    /**\n     * The adapter for storing user preferences\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#store\n     * @example\n     * import { Admin, memoryStore } from 'react-admin';\n     *\n     * const App = () => (\n     *     <Admin dataProvider={dataProvider} store={memoryStore()}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    store?: Store;\n\n    /**\n     * The react-query client\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#queryclient\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { QueryClient } from '@tanstack/react-query';\n     *\n     * const queryClient = new QueryClient({\n     *     defaultOptions: {\n     *         queries: {\n     *             retry: false,\n     *             structuralSharing: false,\n     *         },\n     *         mutations: {\n     *             retryDelay: 10000,\n     *         },\n     *     },\n     * });\n     *\n     * const App = () => (\n     *     <Admin queryClient={queryClient} dataProvider={...}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    queryClient?: QueryClient;\n\n    /**\n     * The internationalization provider for translations\n     *\n     * @see https://marmelab.com/react-admin/Translation.html\n     * @example\n     * // in src/i18nProvider.js\n     * import polyglotI18nProvider from 'ra-i18n-polyglot';\n     * import fr from 'ra-language-french';\n     *\n     * export const i18nProvider = polyglotI18nProvider(() => fr, 'fr');\n     *\n     * // in src/App.js\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     * import { i18nProvider } from './i18nProvider';\n     *\n     * const App = () => (\n     *     <Admin dataProvider={dataProvider} i18nProvider={i18nProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    i18nProvider?: I18nProvider;\n}\n\nexport const CoreAdminContext = (props: CoreAdminContextProps) => {\n    const {\n        authProvider,\n        basename,\n        dataProvider = defaultDataProvider,\n        i18nProvider,\n        store = defaultStore,\n        children,\n        queryClient,\n    } = props;\n\n    if (!dataProvider) {\n        throw new Error(`Missing dataProvider prop.\nReact-admin requires a valid dataProvider function to work.`);\n    }\n\n    const finalQueryClient = useMemo(\n        () => queryClient || new QueryClient(),\n        [queryClient]\n    );\n\n    const finalAuthProvider = useMemo(\n        () =>\n            authProvider instanceof Function\n                ? convertLegacyAuthProvider(authProvider)\n                : authProvider,\n        [authProvider]\n    );\n\n    const finalDataProvider = useMemo(\n        () =>\n            dataProvider instanceof Function\n                ? convertLegacyDataProvider(dataProvider)\n                : dataProvider,\n        [dataProvider]\n    );\n\n    return (\n        <AuthContext.Provider value={finalAuthProvider}>\n            <DataProviderContext.Provider value={finalDataProvider}>\n                <StoreContextProvider value={store}>\n                    <PreferencesEditorContextProvider>\n                        <QueryClientProvider client={finalQueryClient}>\n                            <AdminRouter basename={basename}>\n                                <I18nContextProvider value={i18nProvider}>\n                                    <NotificationContextProvider>\n                                        <ResourceDefinitionContextProvider>\n                                            {children}\n                                        </ResourceDefinitionContextProvider>\n                                    </NotificationContextProvider>\n                                </I18nContextProvider>\n                            </AdminRouter>\n                        </QueryClientProvider>\n                    </PreferencesEditorContextProvider>\n                </StoreContextProvider>\n            </DataProviderContext.Provider>\n        </AuthContext.Provider>\n    );\n};\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport {\n    useInRouterContext,\n    createHashRouter,\n    RouterProvider,\n} from 'react-router-dom';\n\nimport { BasenameContextProvider } from './BasenameContextProvider';\n\n/**\n * Creates a react-router Router unless the app is already inside existing router.\n * Also creates a BasenameContext with the basename prop\n */\nexport const AdminRouter = ({ basename = '', children }: AdminRouterProps) => {\n    const isInRouter = useInRouterContext();\n    const Router = isInRouter ? DummyRouter : InternalRouter;\n\n    return (\n        <BasenameContextProvider basename={isInRouter ? basename : ''}>\n            <Router basename={basename}>{children}</Router>\n        </BasenameContextProvider>\n    );\n};\n\nexport interface AdminRouterProps {\n    basename?: string;\n    children: React.ReactNode;\n}\n\nconst DummyRouter = ({\n    children,\n}: {\n    children: ReactNode;\n    basename?: string;\n}) => <>{children}</>;\n\nconst InternalRouter = ({\n    children,\n    basename,\n}: {\n    children: ReactNode;\n    basename?: string;\n}) => {\n    const router = createHashRouter([{ path: '*', element: <>{children}</> }], {\n        basename,\n    });\n    return <RouterProvider router={router} />;\n};\n", "import * as React from 'react';\nimport { BasenameContext } from './BasenameContext';\n\n/**\n * Set the string to append to all links to the admin app.\n *\n * Useful when the app is mounted on a sub path, e.g. '/admin'.\n * Used internally by the `<Admin>` component.\n *\n * @see useBasename\n */\nexport const BasenameContextProvider = ({ children, basename }) => (\n    <BasenameContext.Provider value={basename}>\n        {children}\n    </BasenameContext.Provider>\n);\n", "import { createContext } from 'react';\n\nexport const BasenameContext = createContext('');\n", "import { useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport debounce from 'lodash/debounce';\n\nimport { useStore } from '../store';\n\n/**\n * A hook that tracks the scroll position and restores it when the component mounts.\n * @param storeKey The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { useRestoreScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   useRestoreScrollPosition('my-list');\n *\n *   return (\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   );\n * };\n */\nexport const useRestoreScrollPosition = (\n    storeKey: string,\n    debounceMs = 250\n) => {\n    const [position, setPosition] = useTrackScrollPosition(\n        storeKey,\n        debounceMs\n    );\n    const location = useLocation();\n\n    useEffect(() => {\n        if (position != null && location.state?._scrollToTop !== true) {\n            setPosition(undefined);\n            window.scrollTo(0, position);\n        }\n        // We only want to run this effect on mount\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n};\n\n/**\n * A hook that tracks the scroll position and stores it.\n * @param storeKey The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { useTrackScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   useTrackScrollPosition('my-list');\n *\n *   return (\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   );\n * };\n */\nexport const useTrackScrollPosition = (storeKey: string, debounceMs = 250) => {\n    const [position, setPosition] = useStore(storeKey);\n\n    useEffect(() => {\n        if (typeof window === 'undefined') {\n            return;\n        }\n        const handleScroll = debounce(() => {\n            setPosition(window.scrollY);\n        }, debounceMs);\n\n        window.addEventListener('scroll', handleScroll);\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [debounceMs, setPosition]);\n\n    return [position, setPosition];\n};\n", "import { ReactNode } from 'react';\nimport { useRestoreScrollPosition } from './useRestoreScrollPosition';\n\n/**\n * A component that tracks the scroll position and restores it when the component mounts.\n * @param children The content to render\n * @param key The key under which to store the scroll position in the store\n * @param debounceMs The debounce time in milliseconds\n *\n * @example\n * import { RestoreScrollPosition } from 'ra-core';\n *\n * const MyCustomPage = () => {\n *   <RestoreScrollPosition key=\"my-list\">\n *     <div>\n *       <h1>My Custom Page</h1>\n *       <VeryLongContent />\n *     </div>\n *   </RestoreScrollPosition>\n * };\n */\nexport const RestoreScrollPosition = ({\n    children,\n    storeKey,\n    debounce = 250,\n}: {\n    storeKey: string;\n    debounce?: number;\n    children: ReactNode;\n}) => {\n    useRestoreScrollPosition(storeKey, debounce);\n    return children;\n};\n", "import { useContext } from 'react';\n\nimport { BasenameContext } from './BasenameContext';\n\n/**\n * Get the string to append to all links to the admin app.\n *\n * Useful when the app is mounted on a sub path, e.g. '/admin'.\n *\n * This hook is used internally by all react-admin components that\n * contain a link, and requires that the basename is set via the\n * `<BasenameContextProvider>` component (or via the `<Admin>` component,\n * which calls BasenameContextProvider internally).\n *\n * @see BasenameContextProvider\n *\n * @example\n * import { useBasename } from 'react-admin';\n *\n * const ArticleLink = ({ title, id }) => {\n *    const basename = useBasename();\n *    return <a href={`${basename}/articles/${id}`}>{title}</a>;\n * };\n */\nexport const useBasename = () => useContext(BasenameContext);\n", "import { useCallback } from 'react';\n\nimport { Identifier } from '../types';\nimport { useBasename } from './useBasename';\n\n/**\n * Get a callback to create a link to a given page in the admin app.\n *\n * The callback expects an object as parameter, containing the following properties:\n *   - type: 'list', 'edit', 'show' or 'create'\n *   - resource\n *   - id (optional), for 'edit' or 'show' pages\n *\n * This is used internally by react-admin to allow default components to work\n * in applications that are mounted on a sub path, e.g. '/admin'. If your app\n * is mounted in the root path, you don't need it, and you can create links by\n * hand, e.g. '/articles/1/show'.\n *\n * @example\n * import { useCreatePath, useRecordContext } from 'react-admin';\n * import { useNavigate } from 'react-router-dom';\n *\n * const PostEditButton = () => {\n *     const createPath = useCreatePath();\n *     const record = useRecordContext();\n *     const navigate = useNavigate();\n *\n *     const handleClick = () => {\n *         const link = createPath({\n *            type: 'edit',\n *            resource: 'posts',\n *            id: record.id\n *         });\n *         navigate(link);\n *     };\n *\n *    return <button onClick={handleClick}>Edit Post</button>;\n * };\n */\nexport const useCreatePath = () => {\n    const basename = useBasename();\n    return useCallback(\n        ({ resource, id, type }: CreatePathParams): string => {\n            if (\n                ['list', 'create', 'edit', 'show'].includes(type) &&\n                !resource\n            ) {\n                throw new Error(\n                    'Cannot create a link without a resource. You must provide the resource name.'\n                );\n            }\n            switch (type) {\n                case 'list':\n                    return removeDoubleSlashes(`${basename}/${resource}`);\n                case 'create':\n                    return removeDoubleSlashes(\n                        `${basename}/${resource}/create`\n                    );\n                case 'edit': {\n                    if (id == null) {\n                        // maybe the id isn't defined yet\n                        // instead of throwing an error, fallback to list link\n                        return removeDoubleSlashes(`${basename}/${resource}`);\n                    }\n                    return removeDoubleSlashes(\n                        `${basename}/${resource}/${encodeURIComponent(id)}`\n                    );\n                }\n                case 'show': {\n                    if (id == null) {\n                        // maybe the id isn't defined yet\n                        // instead of throwing an error, fallback to list link\n                        return removeDoubleSlashes(`${basename}/${resource}`);\n                    }\n                    return removeDoubleSlashes(\n                        `${basename}/${resource}/${encodeURIComponent(id)}/show`\n                    );\n                }\n                default:\n                    return type;\n            }\n        },\n        [basename]\n    );\n};\n\ntype AnyString = string & {};\nexport type CreatePathType = 'list' | 'edit' | 'show' | 'create' | AnyString;\n\nexport interface CreatePathParams {\n    type: CreatePathType;\n    resource?: string;\n    id?: Identifier;\n}\n\nexport const removeDoubleSlashes = (path: string) => path.replace('//', '/');\n", "import { useState, useEffect } from 'react';\nimport { useResourceContext } from '../core';\nimport { useRecordContext } from '../controller';\nimport type { RaRecord } from '../types';\nimport type { LinkToType } from './types';\nimport { useGetPathForRecordCallback } from './useGetPathForRecordCallback';\n\n/**\n * Get a path for a record, based on the current resource and the link type.\n *\n * Accepted link types are 'edit', 'show', a route string, false, or a function returning one of these types.\n *\n * @example\n * // basic usage (leverages RecordContext, ResourceContext and ResourceDefinitionContext)\n * const EditLink = () => {\n *   const path = useGetRouteForRecord();\n *   return path ? <Link to={path}>Edit</Link> : null;\n * };\n *\n * // controlled mode\n * const EditLink = ({ record, resource }) => {\n *    const path = useGetRouteForRecord({ record, resource, link: 'edit' });\n *    return path ? <Link to={path}>Edit</Link> : null;\n * };\n *\n * // the link option can be a function\n * const EditLink = ({ record, resource }) => {\n *   const path = useGetRouteForRecord({ record, resource, link: (record, resource) => record.canEdit ? 'edit' : false });\n *   return path ? <Link to={path}>Edit</Link> : null;\n * };\n *\n * // the link option can be a function returning a promise\n * const EditLink = ({ record, resource }) => {\n *   const path = useGetRouteForRecord({ record, resource, link: async (record, resource) => {\n *     const canEdit = await canEditRecord(record, resource);\n *     return canEdit ? 'edit' : false;\n *   }});\n *   return path ? <Link to={path}>Edit</Link> : null;\n * };\n */\nexport const useGetPathForRecord = <RecordType extends RaRecord = RaRecord>(\n    options: UseGetPathForRecordOptions<RecordType>\n): string | false | undefined => {\n    const { link } = options || {};\n    const record = useRecordContext(options);\n    const resource = useResourceContext(options);\n    if (!resource) {\n        throw new Error(\n            'Cannot generate a link for a record without a resource. You must use useGetPathForRecord within a ResourceContextProvider, or pass a resource prop.'\n        );\n    }\n    const getPathForRecord = useGetPathForRecordCallback<RecordType>(options);\n\n    // we initialize the path with the link value\n    const [path, setPath] = useState<string | false | undefined>(() => {\n        getPathForRecord({\n            record,\n            resource,\n            link,\n        }).then(resolvedLink => {\n            if (resolvedLink === false) {\n                // already set to false by default\n                return;\n            }\n            // update the path when the promise resolves\n            setPath(resolvedLink);\n        });\n\n        return false;\n    });\n\n    // update the path if the record changes\n    useEffect(() => {\n        getPathForRecord({\n            record,\n            resource,\n            link,\n        }).then(resolvedLink => {\n            // update the path when the promise resolves\n            setPath(resolvedLink);\n        });\n    }, [getPathForRecord, link, record, resource]);\n\n    return path;\n};\n\nexport interface UseGetPathForRecordOptions<\n    RecordType extends RaRecord = RaRecord,\n> {\n    resource?: string;\n    record?: RecordType;\n    link?: LinkToType<RecordType>;\n}\n\nexport type UseGetRouteForRecordOptions<\n    RecordType extends RaRecord = RaRecord,\n> = UseGetPathForRecordOptions<RecordType>;\n", "import { useEffect, useRef, useCallback } from 'react';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\n\nimport { useSafeSetState } from '../util';\nimport { FilterPayload } from '../types';\n\ninterface UseFilterStateOptions {\n    filterToQuery?: (v: string) => FilterPayload;\n    permanentFilter?: FilterPayload;\n    debounceTime?: number;\n}\n\n/**\n * @typedef UseFilterStateProps\n * @property {Object} filter: The filter object.\n * @property {setFilter} setFilter: Update the filter with the given string\n */\ninterface UseFilterStateProps {\n    filter: FilterPayload;\n    setFilter: (v: string) => void;\n}\n\nconst defaultFilter = {};\nconst defaultFilterToQuery = (v: string) => ({ q: v });\n\n/**\n * Hooks to provide filter state and setFilter which updates the query part of the filter\n *\n * @example\n *\n * const { filter, setFilter } = useFilter({\n *      filterToQuery: v => ({ query: v }),\n *      permanentFilter: { foo: 'bar' },\n *      debounceTime: 500,\n * });\n * // filter initial value:\n * {\n *      query: '',\n *      foo: 'bar'\n * }\n *  // after updating filter\n *  setFilter('needle');\n *  {\n *      query: 'needle',\n *      foo: 'bar'\n *  }\n *\n * @param {Object} option\n * @param {Function} option.filterToQuery Function to convert the filter string to a filter object. Defaults to v => ({ q: v }).\n * @param {Object} option.permanentFilter Permanent filter to be merged with the filter string. Defaults to {}.\n * @param {number} option.debounceTime Time in ms between filter updates - used to debounce the search. Defaults to 500ms.\n *\n * @returns {UseFilterStateOptions} The filter props\n */\nexport default ({\n    filterToQuery = defaultFilterToQuery,\n    permanentFilter = {},\n    debounceTime = 500,\n}: UseFilterStateOptions): UseFilterStateProps => {\n    const permanentFilterProp = useRef(permanentFilter);\n    const latestValue = useRef<string>();\n    const [filter, setFilterValue] = useSafeSetState<FilterPayload>({\n        ...permanentFilter,\n        ...filterToQuery(''),\n    });\n    // Developers often pass an object literal as permanent filter\n    // e.g. <ReferenceInput source=\"book_id\" reference=\"books\" filter={{ is_published: true }}>\n    // The effect should execute again when the parent component updates the filter value,\n    // but not when the object literal describes the same values. Therefore,\n    // we use JSON.stringify(permanentFilter) in the `useEffect` and `useCallback`\n    // dependencies instead of permanentFilter.\n    const permanentFilterSignature = JSON.stringify(permanentFilter);\n\n    useEffect(() => {\n        if (!isEqual(permanentFilterProp.current, permanentFilter)) {\n            permanentFilterProp.current = permanentFilter;\n            setFilterValue({\n                ...permanentFilter,\n                ...filterToQuery(latestValue.current || ''),\n            });\n        }\n    }, [permanentFilterSignature, permanentFilterProp, filterToQuery]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const setFilter = useCallback(\n        debounce((value: string) => {\n            setFilterValue({\n                ...permanentFilter,\n                ...filterToQuery(value),\n            });\n            latestValue.current = value;\n        }, debounceTime),\n        [permanentFilterSignature] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    return {\n        filter: filter ?? defaultFilter,\n        setFilter,\n    };\n};\n", "import { useReducer, useEffect, useRef, useCallback } from 'react';\n\nimport { SORT_ASC, SORT_DESC } from './list/queryReducer';\nimport { SortPayload } from '../types';\n\nexport interface SortProps {\n    setSortField: (field: SortPayload['field']) => void;\n    setSortOrder: (order: SortPayload['order']) => void;\n    setSort: (sort: SortPayload) => void;\n    sort: SortPayload;\n}\n\ntype Action =\n    | { type: 'SET_SORT'; payload: SortPayload }\n    | { type: 'SET_SORT_FIELD'; payload: SortPayload['field'] }\n    | { type: 'SET_SORT_ORDER'; payload: SortPayload['order'] };\n\nconst sortReducer = (state: SortPayload, action: Action): SortPayload => {\n    switch (action.type) {\n        case 'SET_SORT':\n            return action.payload;\n        case 'SET_SORT_FIELD': {\n            const field = action.payload;\n            const order =\n                state.field === field\n                    ? state.order === SORT_ASC\n                        ? SORT_DESC\n                        : SORT_ASC\n                    : SORT_ASC;\n            return { field, order };\n        }\n        case 'SET_SORT_ORDER': {\n            const order = action.payload;\n            if (!state.field) {\n                throw new Error(\n                    'cannot change the order on an undefined sort field'\n                );\n            }\n            return {\n                field: state.field,\n                order,\n            };\n        }\n        default:\n            return state;\n    }\n};\n\nexport const defaultSort = { field: '', order: 'ASC' } as const;\n\n/**\n * Set the sort { field, order }\n * @name setSort\n * @function\n * @param {SortPayload} sort the sort object\n */\n\n/**\n * Set the sort field, swap the order if the field is the same\n * @name setSortField\n * @function\n * @param {string} field the sort field\n */\n\n/**\n * Set the sort order\n * @name setSortOrder\n * @function\n * @param {string} order The sort order, either ASC or DESC\n */\n\n/**\n * @typedef SortProps\n * @type {Object}\n * @property {Object} sort: the sort object.\n * @property {string} sort.field: the sort object.\n * @property {'ASC' | 'DESC'} sort.order: the sort object.\n * @property {setSort} setSort\n * @property {setSortField} setSortField\n * @property {setSortOrder} setSortOrder\n */\n\n/**\n * Hooks to provide sort state\n *\n * @example\n *\n * const { sort, setSort, setSortField, setSortOrder } = useSort({\n *      field: 'name',\n *      order: 'ASC',\n * });\n *\n * setSort({ field: 'name', order: 'ASC' });\n * // is the same as\n * setSortField('name');\n * setSortOrder('ASC');\n *\n * @param {Object} initialSort\n * @param {string} initialSort.field The initial sort field\n * @param {string} initialSort.order The initial sort order\n * @returns {SortProps} The sort props\n */\nconst useSortState = (initialSort: SortPayload = defaultSort): SortProps => {\n    const [sort, dispatch] = useReducer(sortReducer, initialSort);\n    const isFirstRender = useRef(true);\n    useEffect(() => {\n        if (isFirstRender.current) {\n            isFirstRender.current = false;\n            return;\n        }\n        dispatch({ type: 'SET_SORT', payload: initialSort });\n    }, [initialSort.field, initialSort.order]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return {\n        setSort: useCallback(\n            (sort: SortPayload) =>\n                dispatch({ type: 'SET_SORT', payload: sort }),\n            [dispatch]\n        ),\n        setSortField: useCallback(\n            (field: string) =>\n                dispatch({ type: 'SET_SORT_FIELD', payload: field }),\n            [dispatch]\n        ),\n        setSortOrder: useCallback(\n            (order: 'ASC' | 'DESC') =>\n                dispatch({ type: 'SET_SORT_ORDER', payload: order }),\n            [dispatch]\n        ),\n        sort,\n    };\n};\n\nexport default useSortState;\n", "import { Reducer } from 'react';\nimport set from 'lodash/set';\n\nimport removeEmpty from '../../util/removeEmpty';\nimport removeKey from '../../util/removeKey';\nimport { ListParams } from './useListParams';\n\nexport const SET_SORT = 'SET_SORT';\nexport const SORT_ASC = 'ASC';\nexport const SORT_DESC = 'DESC';\n\nexport const SET_PAGE = 'SET_PAGE';\nexport const SET_PER_PAGE = 'SET_PER_PAGE';\n\nexport const SET_FILTER = 'SET_FILTER';\nexport const SHOW_FILTER = 'SHOW_FILTER';\nexport const HIDE_FILTER = 'HIDE_FILTER';\n\nconst oppositeOrder = direction =>\n    direction === SORT_DESC ? SORT_ASC : SORT_DESC;\n\ntype ActionTypes =\n    | {\n          type: typeof SET_SORT;\n          payload: {\n              field: string;\n              order?: typeof SORT_ASC | typeof SORT_DESC;\n          };\n      }\n    | {\n          type: typeof SET_PAGE;\n          payload: number;\n      }\n    | {\n          type: typeof SET_PER_PAGE;\n          payload: number;\n      }\n    | {\n          type: typeof SET_FILTER;\n          payload: {\n              filter: any;\n              displayedFilters?: { [key: string]: boolean };\n          };\n      }\n    | {\n          type: typeof SHOW_FILTER;\n          payload: { filterName: string; defaultValue?: any };\n      }\n    | {\n          type: typeof HIDE_FILTER;\n          payload: string;\n      };\n\n/**\n * This reducer is for the react-router query string.\n */\nexport const queryReducer: Reducer<ListParams, ActionTypes> = (\n    previousState,\n    action\n) => {\n    switch (action.type) {\n        case SET_SORT:\n            if (action.payload.field === previousState.sort) {\n                return {\n                    ...previousState,\n                    order:\n                        action.payload.order ??\n                        oppositeOrder(previousState.order),\n                    page: 1,\n                };\n            }\n\n            return {\n                ...previousState,\n                sort: action.payload.field,\n                order: action.payload.order || SORT_ASC,\n                page: 1,\n            };\n\n        case SET_PAGE:\n            return { ...previousState, page: action.payload };\n\n        case SET_PER_PAGE:\n            return { ...previousState, page: 1, perPage: action.payload };\n\n        case SET_FILTER: {\n            return {\n                ...previousState,\n                page: 1,\n                filter: action.payload.filter,\n                displayedFilters: action.payload.displayedFilters\n                    ? action.payload.displayedFilters\n                    : previousState.displayedFilters,\n            };\n        }\n\n        case SHOW_FILTER: {\n            if (\n                previousState.displayedFilters &&\n                previousState.displayedFilters[action.payload.filterName]\n            ) {\n                // the filter is already shown\n                return previousState;\n            }\n            return {\n                ...previousState,\n                filter:\n                    typeof action.payload.defaultValue !== 'undefined'\n                        ? set(\n                              previousState.filter,\n                              action.payload.filterName,\n                              action.payload.defaultValue\n                          )\n                        : previousState.filter,\n                // we don't use lodash.set() for displayed filters\n                // to avoid problems with compound filter names (e.g. 'author.name')\n                displayedFilters: {\n                    ...previousState.displayedFilters,\n                    [action.payload.filterName]: true,\n                },\n            };\n        }\n\n        case HIDE_FILTER: {\n            return {\n                ...previousState,\n                filter: removeEmpty(\n                    removeKey(previousState.filter, action.payload)\n                ),\n                // we don't use lodash.set() for displayed filters\n                // to avoid problems with compound filter names (e.g. 'author.name')\n                displayedFilters: previousState.displayedFilters\n                    ? Object.keys(previousState.displayedFilters).reduce(\n                          (filters, filter) => {\n                              return filter !== action.payload\n                                  ? { ...filters, [filter]: true }\n                                  : filters;\n                          },\n                          {}\n                      )\n                    : previousState.displayedFilters,\n            };\n        }\n\n        default:\n            return previousState;\n    }\n};\n\nexport default queryReducer;\n", "function is(x: unknown, y: unknown) {\n    if (x === y) {\n        return x !== 0 || y !== 0 || 1 / x === 1 / y;\n    } else {\n        // eslint-disable-next-line no-self-compare\n        return x !== x && y !== y;\n    }\n}\n\nexport const shallowEqual = (objA: any, objB: any) => {\n    if (is(objA, objB)) return true;\n\n    if (\n        typeof objA !== 'object' ||\n        objA === null ||\n        typeof objB !== 'object' ||\n        objB === null\n    ) {\n        return false;\n    }\n\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length) return false;\n\n    for (let i = 0; i < keysA.length; i++) {\n        if (\n            !Object.prototype.hasOwnProperty.call(objB, keysA[i]) ||\n            !is(objA[keysA[i]], objB[keysA[i]])\n        ) {\n            return false;\n        }\n    }\n\n    return true;\n};\n", "import { shallowEqual } from './shallowEqual';\n\nconst isObject = obj =>\n    obj && Object.prototype.toString.call(obj) === '[object Object]';\n\nconst isEmpty = obj =>\n    obj instanceof Date\n        ? false\n        : obj === '' ||\n          obj === null ||\n          obj === undefined ||\n          shallowEqual(obj, {});\n\nconst removeEmpty = object =>\n    Object.keys(object).reduce((acc, key) => {\n        let child = object[key];\n\n        if (isObject(object[key])) {\n            child = removeEmpty(object[key]);\n        }\n\n        return isEmpty(child) ? acc : { ...acc, [key]: child };\n    }, {});\n\nexport default removeEmpty;\n", "const removeKey = (target, path) =>\n    Object.keys(target).reduce((acc, key) => {\n        if (key !== path) {\n            return Object.assign({}, acc, { [key]: target[key] });\n        }\n\n        return acc;\n    }, {});\n\nconst deepRemoveKey = (target, path) => {\n    const paths = path.split('.');\n\n    if (paths.length === 1) {\n        return removeKey(target, path);\n    }\n\n    const deepKey = paths[0];\n    if (target[deepKey] === undefined) {\n        return target;\n    }\n    const deep = deepRemoveKey(target[deepKey], paths.slice(1).join('.'));\n\n    if (Object.keys(deep).length === 0) {\n        return removeKey(target, deepKey);\n    }\n\n    return Object.assign({}, target, { [deepKey]: deep });\n};\n\nexport default deepRemoveKey;\n", "import { useEffect, useReducer, useCallback, useRef } from 'react';\nimport { PaginationPayload } from '../types';\n\n/**\n * @typedef PaginationProps\n * @type {Object}\n * @property {number} page: The page number.\n * @property {number} perPage: The number of item per page.\n * @property {Function} setPage: Set the page number\n * @property {Function} setPerPage: Set the per page number\n * @property {Function} setPagination: Set page and perPage pagination numbers\n */\nexport interface PaginationHookResult {\n    page: number;\n    perPage: number;\n    pagination: PaginationPayload;\n    setPage: (page: number) => void;\n    setPerPage: (perPage: number) => void;\n    setPagination: (pagination: PaginationPayload) => void;\n}\n\nconst paginationReducer = (\n    prevState: PaginationPayload,\n    nextState: Partial<PaginationPayload>\n): PaginationPayload => {\n    return {\n        ...prevState,\n        ...nextState,\n    };\n};\n\nconst defaultPagination = {\n    page: 1,\n    perPage: 25,\n};\n\n/**\n * Hooks to provide pagination state (page and perPage)\n *\n * @example\n *\n * const { page, setPage, perPage, setPerPage } = usePagination(initialPerPage);\n *\n * @param {number} initialPagination the initial value per page\n * @returns {PaginationHookResult} The pagination props\n */\nexport default (\n    initialPagination: { perPage?: number; page?: number } = {}\n): PaginationHookResult => {\n    const [pagination, setPagination] = useReducer(paginationReducer, {\n        ...defaultPagination,\n        ...initialPagination,\n    });\n    const isFirstRender = useRef(true);\n\n    const setPerPage = useCallback(\n        perPage => setPagination({ perPage, page: 1 }),\n        []\n    );\n    const setPage = useCallback(page => setPagination({ page }), []);\n\n    useEffect(() => {\n        if (isFirstRender.current) {\n            isFirstRender.current = false;\n            return;\n        }\n        setPerPage(initialPagination.perPage || 25);\n    }, [initialPagination.perPage, setPerPage]);\n\n    return {\n        page: pagination.page,\n        perPage: pagination.perPage,\n        pagination,\n        setPage,\n        setPerPage,\n        setPagination,\n    };\n};\n", "import * as React from 'react';\nimport { ComponentType } from 'react';\n\nconst checkMinimumRequiredProps =\n    (displayName: string, requiredProps: string[]) =>\n    (WrappedComponent: ComponentType) =>\n    (props: any) => {\n        useCheckMinimumRequiredProps(displayName, requiredProps, props);\n        return <WrappedComponent {...props} />;\n    };\n\nexport default checkMinimumRequiredProps;\n\n// Not a hook but named that way to avoid conflicts with the old one\nexport const useCheckMinimumRequiredProps = (\n    displayName: string,\n    requiredProps: string[],\n    props: any\n): void => {\n    const propNames = Object.keys(props);\n    const missingProps = requiredProps.filter(\n        prop => !propNames.includes(prop)\n    );\n\n    if (missingProps.length > 0) {\n        throw new Error(\n            `<${displayName}> component is not properly configured, some essential props are missing.\nBe sure to pass the props from the parent. Example:\n\nconst My${displayName} = props => (\n    <${displayName} {...props}></${displayName}>\n);\n\nThe missing props are: ${missingProps.join(', ')}`\n        );\n    }\n};\n", "import { useCallback, ReactEventHandler } from 'react';\nimport { UseMutationOptions } from '@tanstack/react-query';\n\nimport { useDelete } from '../../dataProvider';\nimport { useUnselect } from '../../controller';\nimport { useRedirect, RedirectionSideEffect } from '../../routing';\nimport { useNotify } from '../../notification';\nimport { RaRecord, DeleteParams } from '../../types';\nimport { useResourceContext } from '../../core';\n\n/**\n * Prepare callback for a Delete button with undo support\n *\n * @example\n *\n * import React from 'react';\n * import ActionDelete from '@mui/icons-material/Delete';\n * import { Button, useDeleteWithUndoController } from 'react-admin';\n *\n * const DeleteButton = ({\n *     resource,\n *     record,\n *     redirect,\n *     onClick,\n *     ...rest\n * }) => {\n *     const { isPending, handleDelete } = useDeleteWithUndoController({\n *         resource,\n *         record,\n *         redirect,\n *         onClick,\n *     });\n *\n *     return (\n *         <Button\n *             onClick={handleDelete}\n *             disabled={isPending}\n *             label=\"ra.action.delete\"\n *             {...rest}\n *         >\n *             <ActionDelete />\n *         </Button>\n *     );\n * };\n */\nconst useDeleteWithUndoController = <RecordType extends RaRecord = any>(\n    props: UseDeleteWithUndoControllerParams<RecordType>\n): UseDeleteWithUndoControllerReturn => {\n    const {\n        record,\n        redirect: redirectTo = 'list',\n        onClick,\n        mutationOptions = {},\n        successMessage = 'ra.notification.deleted',\n    } = props;\n    const { meta: mutationMeta, ...otherMutationOptions } = mutationOptions;\n    const resource = useResourceContext(props);\n    const notify = useNotify();\n    const unselect = useUnselect(resource);\n    const redirect = useRedirect();\n    const [deleteOne, { isPending }] = useDelete<RecordType>(\n        resource,\n        undefined,\n        {\n            onSuccess: () => {\n                notify(successMessage, {\n                    type: 'info',\n                    messageArgs: { smart_count: 1 },\n                    undoable: true,\n                });\n                record && unselect([record.id]);\n                redirect(redirectTo, resource);\n            },\n            onError: (error: Error) => {\n                notify(\n                    typeof error === 'string'\n                        ? error\n                        : error.message || 'ra.notification.http_error',\n                    {\n                        type: 'error',\n                        messageArgs: {\n                            _:\n                                typeof error === 'string'\n                                    ? error\n                                    : error && error.message\n                                      ? error.message\n                                      : undefined,\n                        },\n                    }\n                );\n            },\n        }\n    );\n\n    const handleDelete = useCallback(\n        event => {\n            event.stopPropagation();\n            if (!record) {\n                throw new Error(\n                    'The record cannot be deleted because no record has been passed'\n                );\n            }\n            deleteOne(\n                resource,\n                {\n                    id: record.id,\n                    previousData: record,\n                    meta: mutationMeta,\n                },\n                {\n                    mutationMode: 'undoable',\n                    ...otherMutationOptions,\n                }\n            );\n            if (typeof onClick === 'function') {\n                onClick(event);\n            }\n        },\n        [\n            deleteOne,\n            mutationMeta,\n            otherMutationOptions,\n            onClick,\n            record,\n            resource,\n        ]\n    );\n\n    return { isPending, isLoading: isPending, handleDelete };\n};\n\nexport interface UseDeleteWithUndoControllerParams<\n    RecordType extends RaRecord = any,\n    MutationOptionsError = unknown,\n> {\n    record?: RecordType;\n    redirect?: RedirectionSideEffect;\n    resource?: string;\n    onClick?: ReactEventHandler<any>;\n    mutationOptions?: UseMutationOptions<\n        RecordType,\n        MutationOptionsError,\n        DeleteParams<RecordType>\n    >;\n    successMessage?: string;\n}\n\nexport interface UseDeleteWithUndoControllerReturn {\n    isPending: boolean;\n    isLoading: boolean;\n    handleDelete: ReactEventHandler<any>;\n}\n\nexport default useDeleteWithUndoController;\n", "export const GET_LIST = 'GET_LIST';\nexport const GET_ONE = 'GET_ONE';\nexport const GET_MANY = 'GET_MANY';\nexport const GET_MANY_REFERENCE = 'GET_MANY_REFERENCE';\nexport const CREATE = 'CREATE';\nexport const UPDATE = 'UPDATE';\nexport const UPDATE_MANY = 'UPDATE_MANY';\nexport const DELETE = 'DELETE';\nexport const DELETE_MANY = 'DELETE_MANY';\n\nexport const fetchActionsWithRecordResponse = ['getOne', 'create', 'update'];\nexport const fetchActionsWithArrayOfIdentifiedRecordsResponse = [\n    'getList',\n    'getMany',\n    'getManyReference',\n];\nexport const fetchActionsWithArrayOfRecordsResponse = [\n    ...fetchActionsWithArrayOfIdentifiedRecordsResponse,\n    'updateMany',\n    'deleteMany',\n];\nexport const fetchActionsWithTotalResponse = ['getList', 'getManyReference'];\n\nexport const reactAdminFetchActions = [\n    ...fetchActionsWithRecordResponse,\n    ...fetchActionsWithArrayOfRecordsResponse,\n];\n\nexport const sanitizeFetchType = (fetchType: string) => {\n    switch (fetchType) {\n        case GET_LIST:\n            return 'getList';\n        case GET_ONE:\n            return 'getOne';\n        case GET_MANY:\n            return 'getMany';\n        case GET_MANY_REFERENCE:\n            return 'getManyReference';\n        case CREATE:\n            return 'create';\n        case UPDATE:\n            return 'update';\n        case UPDATE_MANY:\n            return 'updateMany';\n        case DELETE:\n            return 'delete';\n        case DELETE_MANY:\n            return 'deleteMany';\n        default:\n            return fetchType;\n    }\n};\n", "import {\n    CreateResult,\n    DataProvider,\n    DeleteResult,\n    GetOneResult,\n    UpdateResult,\n} from '../types';\n\n// avoids adding a context in tests\nexport const defaultDataProvider: DataProvider = {\n    create: () => Promise.resolve<CreateResult>({ data: null }),\n    delete: () => Promise.resolve<DeleteResult>({ data: null }),\n    deleteMany: () => Promise.resolve({ data: [] }),\n    getList: () => Promise.resolve({ data: [], total: 0 }),\n    getMany: () => Promise.resolve({ data: [] }),\n    getManyReference: () => Promise.resolve({ data: [], total: 0 }),\n    getOne: () => Promise.resolve<GetOneResult>({ data: null }),\n    update: () => Promise.resolve<UpdateResult>({ data: null }),\n    updateMany: () => Promise.resolve({ data: [] }),\n};\n", "import {\n    CREATE,\n    DELETE,\n    DELETE_MANY,\n    GET_LIST,\n    GET_MANY,\n    GET_MANY_REFERENCE,\n    GET_ONE,\n    UPDATE,\n    UPDATE_MANY,\n} from './dataFetchActions';\nimport { LegacyDataProvider, DataProvider } from '../types';\nimport { defaultDataProvider } from './defaultDataProvider';\n\nconst fetchMap = {\n    create: CREATE,\n    delete: DELETE,\n    deleteMany: DELETE_MANY,\n    getList: GET_LIST,\n    getMany: GET_MANY,\n    getManyReference: GET_MANY_REFERENCE,\n    getOne: GET_ONE,\n    update: UPDATE,\n    updateMany: UPDATE_MANY,\n};\n\n/**\n * Turn a function-based dataProvider to an object-based one\n *\n * Allows using legacy dataProviders transparently.\n *\n * @param {Function} legacyDataProvider A legacy dataProvider (type, resource, params) => Promise<any>\n *\n * @returns {Object} A dataProvider that react-admin can use\n */\nconst convertLegacyDataProvider = (\n    legacyDataProvider: LegacyDataProvider\n): DataProvider => {\n    const proxy = new Proxy(defaultDataProvider, {\n        get(_, name) {\n            return (resource, params) => {\n                if (Object.keys(fetchMap).includes(name.toString())) {\n                    const fetchType = fetchMap[name.toString()];\n                    return legacyDataProvider(fetchType, resource, params);\n                }\n\n                return legacyDataProvider(name.toString(), resource, params);\n            };\n        },\n        apply(_, __, args) {\n            return legacyDataProvider.apply(legacyDataProvider, args);\n        },\n    });\n\n    return proxy;\n};\n\nexport default convertLegacyDataProvider;\n", "import { createContext } from 'react';\n\nimport { DataProvider } from '../types';\n\nconst DataProviderContext = createContext<DataProvider | null>(null);\n\nDataProviderContext.displayName = 'DataProviderContext';\n\nexport default DataProviderContext;\n", "class HttpError extends Error {\n    constructor(\n        public readonly message,\n        public readonly status,\n        public readonly body: any = null\n    ) {\n        super(message);\n        Object.setPrototypeOf(this, HttpError.prototype);\n        this.name = this.constructor.name;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = new Error(message).stack;\n        }\n        this.stack = new Error().stack;\n    }\n}\n\nexport default HttpError;\n", "import HttpError from './HttpError';\nimport { stringify } from 'query-string';\n\nexport interface Options extends RequestInit {\n    user?: {\n        authenticated?: boolean;\n        token?: string;\n    };\n}\n\nexport const createHeadersFromOptions = (options: Options): Headers => {\n    const requestHeaders = (options.headers ||\n        new Headers({\n            Accept: 'application/json',\n        })) as Headers;\n    const hasBody = options && options.body;\n    const isContentTypeSet = requestHeaders.has('Content-Type');\n    const isGetMethod = !options?.method || options?.method === 'GET';\n    const isFormData = options?.body instanceof FormData;\n\n    const shouldSetContentType =\n        hasBody && !isContentTypeSet && !isGetMethod && !isFormData;\n    if (shouldSetContentType) {\n        requestHeaders.set('Content-Type', 'application/json');\n    }\n\n    if (options.user && options.user.authenticated && options.user.token) {\n        requestHeaders.set('Authorization', options.user.token);\n    }\n\n    return requestHeaders;\n};\n\n/**\n * Utility function to make HTTP calls. It's similar to the HTML5 `fetch()`, except it handles JSON decoding and HTTP error codes automatically.\n *\n * @param url the URL to call\n * @param options the options to pass to the HTTP call\n * @param options.user the user object, used for the Authorization header\n * @param options.user.token the token to pass as the Authorization header\n * @param options.user.authenticated whether the user is authenticated or not (the Authorization header will be set only if this is true)\n * @param options.headers the headers to pass to the HTTP call\n *\n * @returns {Promise} the Promise for a response object containing the following properties:\n * - status: the HTTP status code\n * - headers: the HTTP headers\n * - body: the response body\n * - json: the response body parsed as JSON\n */\nexport const fetchJson = (url, options: Options = {}) => {\n    const requestHeaders = createHeadersFromOptions(options);\n\n    return fetch(url, { ...options, headers: requestHeaders })\n        .then(response =>\n            response.text().then(text => ({\n                status: response.status,\n                statusText: response.statusText,\n                headers: response.headers,\n                body: text,\n            }))\n        )\n        .then(({ status, statusText, headers, body }) => {\n            let json;\n            try {\n                json = JSON.parse(body);\n            } catch (e) {\n                // not json, no big deal\n            }\n            if (status < 200 || status >= 300) {\n                return Promise.reject(\n                    new HttpError(\n                        (json && json.message) || statusText,\n                        status,\n                        json\n                    )\n                );\n            }\n            return Promise.resolve({ status, headers, body, json });\n        });\n};\n\nexport const queryParameters = stringify;\n\nconst isValidObject = value => {\n    if (!value) {\n        return false;\n    }\n\n    const isArray = Array.isArray(value);\n    const isBuffer = typeof Buffer !== 'undefined' && Buffer.isBuffer(value);\n    const isObject =\n        Object.prototype.toString.call(value) === '[object Object]';\n    const hasKeys = !!Object.keys(value).length;\n\n    return !isArray && !isBuffer && isObject && hasKeys;\n};\n\nexport const flattenObject = (value: any, path: string[] = []) => {\n    if (isValidObject(value)) {\n        return Object.assign(\n            {},\n            ...Object.keys(value).map(key =>\n                flattenObject(value[key], path.concat([key]))\n            )\n        );\n    } else {\n        return path.length ? { [path.join('.')]: value } : value;\n    }\n};\n", "import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n", "import EventEmitter from 'eventemitter3';\n\nexport default new EventEmitter();\n", "import { DataProvider } from '../types';\nimport { defaultDataProvider } from './defaultDataProvider';\n\nexport type DataProviderMatcher = (resource: string) => DataProvider;\n\n/**\n * Combine multiple data providers into one.\n *\n * @param dataProviderMatcher A function that returns a data provider for a given resource.\n *\n * @example\n * const dataProvider = combineDataProviders(resource => {\n *    switch(resource) {\n *       case 'posts':\n *       case 'comments':\n *          return dataProvider1;\n *       case 'users':\n *          return dataProvider2;\n *       default:\n *         throw new Error('Unknown resource');\n *    }\n * });\n */\nexport const combineDataProviders = (\n    dataProviderMatcher: DataProviderMatcher\n): DataProvider =>\n    new Proxy(defaultDataProvider, {\n        get: (target, name) => {\n            if (name === 'then') {\n                return null;\n            }\n            return (resource, ...params) => {\n                if (typeof name === 'symbol') {\n                    return;\n                }\n                return dataProviderMatcher(resource)[name](resource, ...params);\n            };\n        },\n    });\n", "import { DataProvider } from '../types';\n\n/**\n * A dataProvider meant to be used in tests only. You can override any of its methods by passing a partial dataProvider.\n *\n * @example\n * const dataProvider = testDataProvider({\n *    getOne: async () => ({ data: { id: 123, title: 'foo' }})\n * })\n */\n\nconst defaultTestDataProvider: DataProvider = {\n    create: async () => {\n        throw new Error('create is not implemented');\n    },\n    delete: async () => {\n        throw new Error('delete not implemented');\n    },\n    deleteMany: async () => {\n        throw new Error('deleteMany is not implemented');\n    },\n    getList: async () => {\n        throw new Error('getList is not implemented');\n    },\n    getMany: async () => {\n        throw new Error('getMany is not implemented');\n    },\n    getManyReference: async () => {\n        throw new Error('getManyReference is not implemented');\n    },\n    getOne: async () => {\n        throw new Error('getOne is not implemented');\n    },\n    update: async () => {\n        throw new Error('update not implemented');\n    },\n    updateMany: async () => {\n        throw new Error('updateMany not implemented');\n    },\n};\nexport const testDataProvider = (\n    overrides?: Partial<DataProvider>\n): DataProvider => ({\n    ...defaultTestDataProvider,\n    ...overrides,\n});\n", "import {\n    CreateParams,\n    CreateResult,\n    DataProvider,\n    DeleteManyParams,\n    DeleteManyResult,\n    DeleteParams,\n    DeleteResult,\n    GetListParams,\n    GetListResult,\n    GetManyParams,\n    GetManyReferenceParams,\n    GetManyReferenceResult,\n    GetManyResult,\n    GetOneParams,\n    GetOneResult,\n    RaRecord,\n    UpdateManyParams,\n    UpdateManyResult,\n    UpdateParams,\n    UpdateResult,\n} from '../types';\n\n/**\n * Extend a dataProvider to execute callbacks before and after read and write calls.\n *\n * @param {DataProvider} dataProvider The dataProvider to wrap\n * @param {ResourceCallbacks[]} handlers An array of ResourceCallbacks\n *\n * @typedef {Object} ResourceCallbacks\n * @property {string} resource The resource name\n * @property {AfterCreate} [afterCreate] A callback (or array of callbacks) executed after create\n * @property {AfterDelete} [afterDelete] A callback (or array of callbacks) executed after delete\n * @property {AfterDeleteMany} [afterDeleteMany] A callback (or array of callbacks) executed after deleteMany\n * @property {AfterGetList} [afterGetList] A callback (or array of callbacks) executed after getList\n * @property {AfterGetMany} [afterGetMany] A callback (or array of callbacks) executed after getMany\n * @property {AfterGetManyReference} [afterGetManyReference] A callback (or array of callbacks) executed after getManyReference\n * @property {AfterGetOne} [afterGetOne] A callback (or array of callbacks) executed after getOne\n * @property {AfterRead} [afterRead] A callback (or array of callbacks) executed after read (getList, getMany, getManyReference, getOne)\n * @property {AfterSave} [afterSave] A callback (or array of callbacks) executed after save (create, update, updateMany)\n * @property {AfterUpdate} [afterUpdate] A callback (or array of callbacks) executed after update\n * @property {AfterUpdateMany} [afterUpdateMany] A callback (or array of callbacks) executed after updateMany\n * @property {BeforeCreate} [beforeCreate] A callback (or array of callbacks) executed before create\n * @property {BeforeDelete} [beforeDelete] A callback (or array of callbacks) executed before delete\n * @property {BeforeDeleteMany} [beforeDeleteMany] A callback (or array of callbacks) executed before deleteMany\n * @property {BeforeGetList} [beforeGetList] A callback (or array of callbacks) executed before getList\n * @property {BeforeGetMany} [beforeGetMany] A callback (or array of callbacks) executed before getMany\n * @property {BeforeGetManyReference} [beforeGetManyReference] A callback (or array of callbacks) executed before getManyReference\n * @property {BeforeGetOne} [beforeGetOne] A callback (or array of callbacks) executed before getOne\n * @property {BeforeSave} [beforeSave] A callback (or array of callbacks) executed before save (create, update, updateMany)\n * @property {BeforeUpdate} [beforeUpdate] A callback (or array of callbacks) executed before update\n * @property {BeforeUpdateMany} [beforeUpdateMany] A callback (or array of callbacks) executed before updateMany\n *\n * Warnings:\n * - As queries issued in the callbacks are not done through react-query,\n *   any change in the data will not be automatically reflected in the UI.\n * - The callbacks are not executed in a transaction. In case of error,\n *   the backend may be left in an inconsistent state.\n * - When calling the API directly using fetch or another client,\n *   the callbacks will not be executed, leaving the backend in a possibly inconsistent state.\n * - If a callback triggers the query it's listening to, this will lead to a infinite loop.\n *\n * @example\n *\n * const dataProvider = withLifecycleCallbacks(\n *   jsonServerProvider(\"http://localhost:3000\"),\n *   [\n *     {\n *       resource: \"posts\",\n *       afterRead: async (data, dataProvider, resource) => {\n *         // rename field to the record\n *         data.user_id = data.userId;\n *         return data;\n *       },\n *       // executed after create, update and updateMany\n *       afterSave: async (record, dataProvider, resource) => {\n *         // update the author's nb_posts\n *         const { total } = await dataProvider.getList(\"users\", {\n *           filter: { id: record.user_id },\n *           pagination: { page: 1, perPage: 1 },\n *         });\n *         await dataProvider.update(\"users\", {\n *           id: user.id,\n *           data: { nb_posts: total },\n *           previousData: user,\n *         });\n *         return record;\n *       },\n *       beforeDelete: async (params, dataProvider, resource) => {\n *         // delete all comments linked to the post\n *         const { data: comments } = await dataProvider.getManyReference(\n *           \"comments\",\n *           {\n *             target: \"post_id\",\n *             id: params.id,\n *           }\n *         );\n *         if (comments.length > 0) {\n *           await dataProvider.deleteMany(\"comments\", {\n *             ids: comments.map((comment) => comment.id),\n *           });\n *         }\n *         // update the author's nb_posts\n *         const { data: post } = await dataProvider.getOne(\"posts\", {\n *           id: params.id,\n *         });\n *         const { total } = await dataProvider.getList(\"users\", {\n *           filter: { id: post.user_id },\n *           pagination: { page: 1, perPage: 1 },\n *         });\n *         await dataProvider.update(\"users\", {\n *           id: user.id,\n *           data: { nb_posts: total - 1 },\n *           previousData: user,\n *         });\n *         return params;\n *       },\n *     },\n *   ]\n * );\n */\nexport const withLifecycleCallbacks = (\n    dataProvider: DataProvider,\n    handlers: ResourceCallbacks[]\n): DataProvider => {\n    return {\n        ...dataProvider,\n\n        getList: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: GetListParams\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeGetList',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.getList<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterGetList',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            result.data = await Promise.all(\n                result.data.map(record =>\n                    applyCallbacks({\n                        name: 'afterRead',\n                        params: record,\n                        dataProvider,\n                        handlers,\n                        resource,\n                    })\n                )\n            );\n\n            return result;\n        },\n\n        getOne: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: GetOneParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeGetOne',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.getOne<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterGetOne',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            result.data = await applyCallbacks({\n                name: 'afterRead',\n                params: result.data,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            return result;\n        },\n\n        getMany: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: GetManyParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeGetMany',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.getMany<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterGetMany',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            result.data = await Promise.all(\n                result.data.map(record =>\n                    applyCallbacks({\n                        name: 'afterRead',\n                        params: record,\n                        dataProvider,\n                        handlers,\n                        resource,\n                    })\n                )\n            );\n\n            return result;\n        },\n\n        getManyReference: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: GetManyReferenceParams\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeGetManyReference',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.getManyReference<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterGetManyReference',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            result.data = await Promise.all(\n                result.data.map(record =>\n                    applyCallbacks({\n                        name: 'afterRead',\n                        params: record,\n                        dataProvider,\n                        handlers,\n                        resource,\n                    })\n                )\n            );\n            return result;\n        },\n\n        update: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: UpdateParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeUpdate',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            newParams.data = await applyCallbacks({\n                name: 'beforeSave',\n                params: newParams.data,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.update<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterUpdate',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            result.data = await applyCallbacks({\n                name: 'afterSave',\n                params: result.data,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            return result;\n        },\n\n        create: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: CreateParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeCreate',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            newParams.data = await applyCallbacks({\n                name: 'beforeSave',\n                params: newParams.data,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.create<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterCreate',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            result.data = await applyCallbacks({\n                name: 'afterSave',\n                params: result.data,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            return result;\n        },\n\n        delete: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: DeleteParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeDelete',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.delete<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterDelete',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            return result;\n        },\n\n        updateMany: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: UpdateManyParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeUpdateMany',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            newParams.data = await applyCallbacks({\n                name: 'beforeSave',\n                params: newParams.data,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            let result = await dataProvider.updateMany<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterUpdateMany',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            const afterSaveHandlers = handlers.filter(\n                h =>\n                    (h.resource === resource || h.resource === '*') &&\n                    h.afterSave\n            );\n\n            if (afterSaveHandlers.length > 0) {\n                const { data: records } = await dataProvider.getMany(resource, {\n                    //@ts-ignore\n                    ids: result.data,\n                });\n                await Promise.all(\n                    records.map(record =>\n                        applyCallbacks({\n                            name: 'afterSave',\n                            params: record,\n                            dataProvider,\n                            handlers,\n                            resource,\n                        })\n                    )\n                );\n            }\n\n            return result;\n        },\n\n        deleteMany: async function <RecordType extends RaRecord = any>(\n            resource: string,\n            params: DeleteManyParams<RecordType>\n        ) {\n            let newParams = params;\n\n            newParams = await applyCallbacks({\n                name: 'beforeDeleteMany',\n                params: newParams,\n                dataProvider,\n                handlers,\n                resource,\n            });\n            let result = await dataProvider.deleteMany<RecordType>(\n                resource,\n                newParams\n            );\n            result = await applyCallbacks({\n                name: 'afterDeleteMany',\n                params: result,\n                dataProvider,\n                handlers,\n                resource,\n            });\n\n            return result;\n        },\n    };\n};\n\n/**\n * Apply callbacks to the params for the given resource and hook\n * @param {DataProvider} dataProvider The dataProvider\n * @param {ResourceCallbacks[]} handlers An array of ResourceCallbacks\n * @param {string} resource The resource name\n * @param {string} hook The hook name (beforeGetList, afterGetOne, etc.)\n * @param {U} params The params / result to pass to the callbacks\n * @returns {Promise<U>} The params / result after the callbacks have been applied\n */\nexport const applyCallbacks = async function <U>({\n    name,\n    params,\n    dataProvider,\n    handlers,\n    resource,\n}: {\n    name: string;\n    params: U;\n    dataProvider: DataProvider;\n    handlers: ResourceCallbacks[];\n    resource: string;\n}): Promise<U> {\n    let newParams = params;\n    const handlersToApply = handlers.filter(\n        h => (h.resource === resource || h.resource === '*') && h[name]\n    );\n    for (let handler of handlersToApply) {\n        const callbacksValue: ResourceCallbacksValue<any> = handler[name];\n        if (Array.isArray(callbacksValue)) {\n            for (let callback of callbacksValue ?? []) {\n                newParams = await callback(newParams, dataProvider, resource);\n            }\n        } else {\n            newParams = await callbacksValue(newParams, dataProvider, resource);\n        }\n    }\n    return newParams;\n};\n\nexport type ResourceCallback<U> = {\n    (params: U, dataProvider: DataProvider, resource: string): Promise<U>;\n};\n\nexport type ResourceCallbacksValue<V> =\n    | ResourceCallback<V>\n    | ResourceCallback<V>[];\n\nexport type ResourceCallbacks<T extends RaRecord = any> = {\n    resource: string;\n    afterCreate?: ResourceCallbacksValue<CreateResult<T>>;\n    afterDelete?: ResourceCallbacksValue<DeleteResult<T>>;\n    afterDeleteMany?: ResourceCallbacksValue<DeleteManyResult<T>>;\n    afterGetList?: ResourceCallbacksValue<GetListResult<T>>;\n    afterGetMany?: ResourceCallbacksValue<GetManyResult<T>>;\n    afterGetManyReference?: ResourceCallbacksValue<GetManyReferenceResult<T>>;\n    afterGetOne?: ResourceCallbacksValue<GetOneResult<T>>;\n    afterUpdate?: ResourceCallbacksValue<UpdateResult<T>>;\n    afterUpdateMany?: ResourceCallbacksValue<UpdateManyResult<T>>;\n    beforeCreate?: ResourceCallbacksValue<CreateParams<T>>;\n    beforeDelete?: ResourceCallbacksValue<DeleteParams<T>>;\n    beforeDeleteMany?: ResourceCallbacksValue<DeleteManyParams<T>>;\n    beforeGetList?: ResourceCallbacksValue<GetListParams>;\n    beforeGetMany?: ResourceCallbacksValue<GetManyParams>;\n    beforeGetManyReference?: ResourceCallbacksValue<GetManyReferenceParams>;\n    beforeGetOne?: ResourceCallbacksValue<GetOneParams<T>>;\n    beforeUpdate?: ResourceCallbacksValue<UpdateParams<T>>;\n    beforeUpdateMany?: ResourceCallbacksValue<UpdateManyParams<T>>;\n\n    // The following hooks don't match a dataProvider method\n\n    /**\n     * Modify the data before it is sent to the dataProvider.\n     *\n     * Used in create, update, and updateMany\n     *\n     * Note: This callback doesn't modify the record itself, but the data argument\n     * (which may be a diff, especially when called with updateMany).\n     */\n    beforeSave?: ResourceCallbacksValue<T>;\n    /**\n     * Update a record after it has been read from the dataProvider\n     *\n     * Used in getOne, getList, getMany, and getManyReference\n     */\n    afterRead?: ResourceCallbacksValue<T>;\n    /**\n     * Use the record after it is returned by the dataProvider.\n     *\n     * Used in create, update, and updateMany\n     */\n    afterSave?: ResourceCallbacksValue<T>;\n};\n", "import { useContext, useMemo } from 'react';\n\nimport DataProviderContext from './DataProviderContext';\nimport { defaultDataProvider } from './defaultDataProvider';\nimport validateResponseFormat from './validateResponseFormat';\nimport { DataProvider } from '../types';\nimport useLogoutIfAccessDenied from '../auth/useLogoutIfAccessDenied';\nimport { reactAdminFetchActions } from './dataFetchActions';\n\n/**\n * Hook for getting a dataProvider\n *\n * Gets a dataProvider object, which behaves just like the real dataProvider\n * (same methods returning a Promise). But it's actually a Proxy object,\n * which validates the response format, and logs the user out upon error\n * if authProvider.checkError() rejects.\n *\n * @return dataProvider\n *\n * @example Basic usage\n *\n * import * as React from 'react';\n * import { useState } from 'react';\n * import { useDataProvider } from 'react-admin';\n *\n * const PostList = () => {\n *      const [posts, setPosts] = useState([])\n *      const dataProvider = useDataProvider();\n *      useEffect(() => {\n *          dataProvider.getList('posts', { filter: { status: 'pending' }})\n *            .then(({ data }) => setPosts(data));\n *      }, [])\n *\n *      return (\n *          <Fragment>\n *              {posts.map((post, key) => <PostDetail post={post} key={key} />)}\n *          </Fragment>\n *     );\n * }\n *\n * @example Handling all states (loading, error, success)\n *\n * import { useState, useEffect } from 'react';\n * import { useDataProvider } from 'react-admin';\n *\n * const UserProfile = ({ userId }) => {\n *     const dataProvider = useDataProvider();\n *     const [user, setUser] = useState();\n *     const [loading, setLoading] = useState(true);\n *     const [error, setError] = useState();\n *     useEffect(() => {\n *         dataProvider.getOne('users', { id: userId })\n *             .then(({ data }) => {\n *                 setUser(data);\n *                 setLoading(false);\n *             })\n *             .catch(error => {\n *                 setError(error);\n *                 setLoading(false);\n *             })\n *     }, []);\n *\n *     if (loading) return <Loading />;\n *     if (error) return <Error />\n *     if (!user) return null;\n *\n *     return (\n *         <ul>\n *             <li>Name: {user.name}</li>\n *             <li>Email: {user.email}</li>\n *         </ul>\n *     )\n * }\n */\n\nconst arrayReturnTypes = ['getList', 'getMany', 'getManyReference'];\n\nexport const useDataProvider = <\n    TDataProvider extends DataProvider = DataProvider,\n>(): TDataProvider => {\n    const dataProvider = (useContext(DataProviderContext) ||\n        defaultDataProvider) as unknown as TDataProvider;\n\n    const logoutIfAccessDenied = useLogoutIfAccessDenied();\n\n    const dataProviderProxy = useMemo(() => {\n        return new Proxy(dataProvider, {\n            get: (_, name) => {\n                if (typeof name === 'symbol' || name === 'then') {\n                    return;\n                }\n                if (name === 'supportAbortSignal') {\n                    return dataProvider.supportAbortSignal;\n                }\n                return (...args) => {\n                    const type = name.toString();\n\n                    if (typeof dataProvider[type] !== 'function') {\n                        throw new Error(\n                            `Unknown dataProvider function: ${type}`\n                        );\n                    }\n\n                    try {\n                        return dataProvider[type]\n                            .apply(dataProvider, args)\n                            .then(response => {\n                                if (\n                                    process.env.NODE_ENV !== 'production' &&\n                                    reactAdminFetchActions.includes(type)\n                                ) {\n                                    validateResponseFormat(response, type);\n                                }\n                                return response;\n                            })\n                            .catch(error => {\n                                if (\n                                    process.env.NODE_ENV !== 'production' &&\n                                    // do not log AbortErrors\n                                    !isAbortError(error)\n                                ) {\n                                    console.error(error);\n                                }\n                                return logoutIfAccessDenied(error).then(\n                                    loggedOut => {\n                                        if (loggedOut)\n                                            return {\n                                                data: arrayReturnTypes.includes(\n                                                    type\n                                                )\n                                                    ? []\n                                                    : {},\n                                            };\n                                        throw error;\n                                    }\n                                );\n                            });\n                    } catch (e) {\n                        if (process.env.NODE_ENV !== 'production') {\n                            console.error(e);\n                        }\n                        throw new Error(\n                            'The dataProvider threw an error. It should return a rejected Promise instead.'\n                        );\n                    }\n                };\n            },\n        });\n    }, [dataProvider, logoutIfAccessDenied]);\n\n    return dataProviderProxy;\n};\n\nconst isAbortError = error =>\n    error instanceof DOMException &&\n    (error as DOMException).name === 'AbortError';\n", "import {\n    fetchActionsWithRecordResponse,\n    fetchActionsWithArrayOfIdentifiedRecordsResponse,\n    fetchActionsWithArrayOfRecordsResponse,\n    fetchActionsWithTotalResponse,\n} from './dataFetchActions';\n\nfunction validateResponseFormat(\n    response,\n    type,\n    logger = console.error // eslint-disable-line no-console\n) {\n    if (!response) {\n        logger(`The dataProvider returned an empty response for '${type}'.`);\n        throw new Error('ra.notification.data_provider_error');\n    }\n    if (!response.hasOwnProperty('data')) {\n        logger(\n            `The response to '${type}' must be like { data: ... }, but the received response does not have a 'data' key. The dataProvider is probably wrong for '${type}'.`\n        );\n        throw new Error('ra.notification.data_provider_error');\n    }\n    if (\n        fetchActionsWithArrayOfRecordsResponse.includes(type) &&\n        !Array.isArray(response.data)\n    ) {\n        logger(\n            `The response to '${type}' must be like { data : [...] }, but the received data is not an array. The dataProvider is probably wrong for '${type}'`\n        );\n        throw new Error('ra.notification.data_provider_error');\n    }\n    if (\n        fetchActionsWithArrayOfIdentifiedRecordsResponse.includes(type) &&\n        Array.isArray(response.data) &&\n        response.data.length > 0 &&\n        !response.data[0].hasOwnProperty('id')\n    ) {\n        logger(\n            `The response to '${type}' must be like { data : [{ id: 123, ...}, ...] }, but the received data items do not have an 'id' key. The dataProvider is probably wrong for '${type}'`\n        );\n        throw new Error('ra.notification.data_provider_error');\n    }\n    if (\n        fetchActionsWithRecordResponse.includes(type) &&\n        !response.data.hasOwnProperty('id')\n    ) {\n        logger(\n            `The response to '${type}' must be like { data: { id: 123, ... } }, but the received data does not have an 'id' key. The dataProvider is probably wrong for '${type}'`\n        );\n        throw new Error('ra.notification.data_provider_error');\n    }\n    if (\n        fetchActionsWithTotalResponse.includes(type) &&\n        !response.hasOwnProperty('total') &&\n        !response.hasOwnProperty('pageInfo')\n    ) {\n        logger(\n            `The response to '${type}' must be like { data: [...], total: 123 } or { data: [...], pageInfo: {...} }, but the received response has neither a 'total' nor a 'pageInfo' key. The dataProvider is probably wrong for '${type}'`\n        );\n        throw new Error('ra.notification.data_provider_error');\n    }\n}\n\nexport default validateResponseFormat;\n", "import { useCallback } from 'react';\n\nimport useAuthProvider from './useAuthProvider';\nimport useLogout from './useLogout';\nimport { useNotify } from '../notification';\nimport { useNavigate } from 'react-router';\n\nlet timer;\n\n/**\n * Returns a callback used to call the authProvider.checkError() method\n * and an error from the dataProvider. If the authProvider rejects the call,\n * the hook logs the user out and shows a logged out notification.\n *\n * Used in the useDataProvider hook to check for access denied responses\n * (e.g. 401 or 403 responses) and trigger a logout.\n *\n * @see useLogout\n * @see useDataProvider\n *\n * @returns {Function} logoutIfAccessDenied callback\n *\n * @example\n *\n * import { useLogoutIfAccessDenied, useNotify, DataProviderContext } from 'react-admin';\n *\n * const FetchRestrictedResource = () => {\n *     const dataProvider = useContext(DataProviderContext);\n *     const logoutIfAccessDenied = useLogoutIfAccessDenied();\n *     const notify = useNotify()\n *     useEffect(() => {\n *         dataProvider.getOne('secret', { id: 123 })\n *             .catch(error => {\n *                  logoutIfAccessDenied(error);\n *                  notify('server error',  { type: 'error' });\n *              })\n *     }, []);\n *     // ...\n * }\n */\nconst useLogoutIfAccessDenied = (): LogoutIfAccessDenied => {\n    const authProvider = useAuthProvider();\n    const logout = useLogout();\n    const notify = useNotify();\n    const navigate = useNavigate();\n    const logoutIfAccessDenied = useCallback(\n        (error?: any) => {\n            if (!authProvider) {\n                return logoutIfAccessDeniedWithoutProvider();\n            }\n            return authProvider\n                .checkError(error)\n                .then(() => false)\n                .catch(async e => {\n                    const logoutUser = e?.logoutUser ?? true;\n                    //manual debounce\n                    if (timer) {\n                        // side effects already triggered in this tick, exit\n                        return true;\n                    }\n                    timer = setTimeout(() => {\n                        timer = undefined;\n                    }, 0);\n\n                    const redirectTo =\n                        e && e.redirectTo != null\n                            ? e.redirectTo\n                            : error && error.redirectTo\n                              ? error.redirectTo\n                              : undefined;\n\n                    const shouldNotify = !(\n                        (e && e.message === false) ||\n                        (error && error.message === false) ||\n                        redirectTo?.startsWith('http')\n                    );\n                    if (shouldNotify) {\n                        // notify only if not yet logged out\n                        authProvider\n                            .checkAuth({})\n                            .then(() => {\n                                if (logoutUser) {\n                                    notify(\n                                        getErrorMessage(\n                                            e,\n                                            'ra.notification.logged_out'\n                                        ),\n                                        { type: 'error' }\n                                    );\n                                } else {\n                                    notify(\n                                        getErrorMessage(\n                                            e,\n                                            'ra.notification.not_authorized'\n                                        ),\n                                        { type: 'error' }\n                                    );\n                                }\n                            })\n                            .catch(() => {});\n                    }\n\n                    if (logoutUser) {\n                        logout({}, redirectTo);\n                    } else {\n                        if (redirectTo.startsWith('http')) {\n                            // absolute link (e.g. https://my.oidc.server/login)\n                            window.location.href = redirectTo;\n                        } else {\n                            // internal location\n                            navigate(redirectTo);\n                        }\n                    }\n\n                    return true;\n                });\n        },\n        [authProvider, logout, notify, navigate]\n    );\n    return logoutIfAccessDenied;\n};\n\nconst logoutIfAccessDeniedWithoutProvider = () => Promise.resolve(false);\n\n/**\n * Call the authProvider.authError() method, using the error passed as argument.\n * If the authProvider rejects the call, logs the user out and shows a logged out notification.\n *\n * @param {Error} error An Error object (usually returned by the dataProvider)\n *\n * @return {Promise} Resolved to true if there was a logout, false otherwise\n */\ntype LogoutIfAccessDenied = (error?: any) => Promise<boolean>;\n\nconst getErrorMessage = (error, defaultMessage) =>\n    typeof error === 'string'\n        ? error\n        : typeof error === 'undefined' || !error.message\n          ? defaultMessage\n          : error.message;\n\nexport default useLogoutIfAccessDenied;\n", "import { useEffect, useState } from 'react';\nimport { useQueryClient, QueryObserver } from '@tanstack/react-query';\n\n/**\n * Check if react-query has already fetched data for a query key.\n *\n * This hook is reactive.\n *\n * @example\n * const isCustomerLoaded = useIsDataLoaded(['customers', 'getOne', { id: customerId }]);\n *\n * @returns {boolean} true if the data is loaded, false otherwise\n */\nexport const useIsDataLoaded = (\n    queryKey: any,\n    options: { enabled?: boolean } = {}\n) => {\n    const { enabled = true } = options;\n    const queryClient = useQueryClient();\n    const [isDataLoaded, setDataLoaded] = useState<boolean>(() => {\n        if (!enabled) {\n            return false;\n        }\n        return queryClient.getQueryData(queryKey) !== undefined;\n    });\n\n    useEffect(() => {\n        if (!enabled) return;\n        if (queryClient.getQueryData(queryKey) === undefined) {\n            const observer = new QueryObserver(queryClient, { queryKey });\n            const unsubscribe = observer.subscribe(result => {\n                setDataLoaded(!result.isPending);\n                unsubscribe();\n            });\n            return unsubscribe;\n        }\n    }, [enabled, queryKey, queryClient]);\n\n    return isDataLoaded;\n};\n", "import React from 'react';\n\nimport { notifyManager, useQueryClient } from '@tanstack/react-query';\n\n/**\n * Get the state of the dataProvider connection.\n *\n * Returns true if a query or a mutation is pending.\n *\n * Custom implementation because react-query's useIsFetching and useIsMutating\n * render each time the number of active queries changes, which is too often.\n *\n * @see useIsFetching\n * @see useIsMutating\n */\nexport const useLoading = (): boolean => {\n    const client = useQueryClient();\n    const mountedRef = React.useRef(false);\n    const isFetchingRef = React.useRef(client.isFetching() > 0);\n    const isMutatingRef = React.useRef(client.isMutating() > 0);\n\n    const [isLoading, setIsLoading] = React.useState<boolean>(\n        isFetchingRef.current || isMutatingRef.current\n    );\n\n    React.useEffect(() => {\n        mountedRef.current = true;\n\n        const unsubscribeQueryCache = client.getQueryCache().subscribe(\n            notifyManager.batchCalls(() => {\n                if (mountedRef.current) {\n                    isFetchingRef.current = client.isFetching() > 0;\n                    setIsLoading(\n                        isFetchingRef.current || isMutatingRef.current\n                    );\n                }\n            })\n        );\n\n        const unsubscribeMutationCache = client.getMutationCache().subscribe(\n            notifyManager.batchCalls(() => {\n                if (mountedRef.current) {\n                    isMutatingRef.current = client.isMutating() > 0;\n                    setIsLoading(\n                        isFetchingRef.current || isMutatingRef.current\n                    );\n                }\n            })\n        );\n\n        return () => {\n            mountedRef.current = false;\n            unsubscribeQueryCache();\n            unsubscribeMutationCache();\n        };\n    }, [client]);\n\n    return isLoading;\n};\n", "import { useCallback } from 'react';\nimport { useQueryClient } from '@tanstack/react-query';\n\n/**\n * Hook for triggering a page refresh. Returns a callback function.\n *\n * The callback invalidates all queries and refetches the active ones.\n * Any component depending on react-query data will be re-rendered.\n *\n * @example\n *\n * const refresh = useRefresh();\n * const handleClick = () => {\n *     refresh();\n * };\n */\nexport const useRefresh = () => {\n    const queryClient = useQueryClient();\n    return useCallback(() => {\n        queryClient.invalidateQueries();\n    }, [queryClient]);\n};\n", "import { RaRecord, GetOneParams, GetOneResult } from '../types';\nimport {\n    useQuery,\n    UseQueryOptions,\n    UseQueryResult,\n} from '@tanstack/react-query';\nimport { useDataProvider } from './useDataProvider';\nimport { useEffect } from 'react';\nimport { useEvent } from '../util';\n\n/**\n * Call the dataProvider.getOne() method and return the resolved value\n * as well as the loading state.\n *\n * The return value updates according to the request state:\n *\n * - start: { isPending: true, isFetching: true, refetch }\n * - success: { data: [data from response], isPending: false, refetch }\n * - error: { error: [error from response], isPending: false, refetch }\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param resource The resource name, e.g. 'posts'\n * @param {Params} params The getOne parameters { id, meta }, e.g. { id: 123 }\n * @param {Options} options Options object to pass to the react-query queryClient.\n *\n * @typedef Params\n * @prop id a resource identifier, e.g. 123\n *\n * @typedef Options\n * @prop enabled Flag to conditionally run the query. If it's false, the query will not run\n * @prop onSuccess Side effect function to be executed upon success, e.g. { onSuccess: { refresh: true } }\n * @prop onError Side effect function to be executed upon failure, e.g. { onError: error => notify(error.message) }\n *\n * @returns The current request state. Destructure as { data, error, isPending, refetch }.\n *\n * @example\n *\n * import { useGetOne, useRecordContext } from 'react-admin';\n *\n * const UserProfile = () => {\n *     const record = useRecordContext();\n *     const { data, isPending, error } = useGetOne('users', { id: record.id });\n *     if (isPending) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return <div>User {data.username}</div>;\n * };\n */\nexport const useGetOne = <RecordType extends RaRecord = any>(\n    resource: string,\n    { id, meta }: Partial<GetOneParams<RecordType>>,\n    options: UseGetOneOptions<RecordType> = {}\n): UseGetOneHookValue<RecordType> => {\n    const dataProvider = useDataProvider();\n    const {\n        onError = noop,\n        onSuccess = noop,\n        onSettled = noop,\n        enabled,\n        ...queryOptions\n    } = options;\n    const onSuccessEvent = useEvent(onSuccess);\n    const onErrorEvent = useEvent(onError);\n    const onSettledEvent = useEvent(onSettled);\n\n    const result = useQuery<RecordType>({\n        // Sometimes the id comes as a string (e.g. when read from the URL in a Show view).\n        // Sometimes the id comes as a number (e.g. when read from a Record in useGetList response).\n        // As the react-query cache is type-sensitive, we always stringify the identifier to get a match\n        queryKey: [resource, 'getOne', { id: String(id), meta }],\n        queryFn: queryParams =>\n            id == null\n                ? new Promise(() => {})\n                : dataProvider\n                      .getOne<RecordType>(resource, {\n                          id,\n                          meta,\n                          signal:\n                              dataProvider.supportAbortSignal === true\n                                  ? queryParams.signal\n                                  : undefined,\n                      })\n                      .then(({ data }) => data),\n        enabled: enabled ?? id != null,\n        ...queryOptions,\n    });\n\n    useEffect(() => {\n        if (\n            result.data === undefined ||\n            result.error != null ||\n            result.isFetching\n        )\n            return;\n        onSuccessEvent(result.data);\n    }, [onSuccessEvent, result.data, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return result;\n};\n\nconst noop = () => undefined;\n\nexport type UseGetOneOptions<RecordType extends RaRecord = any> = Omit<\n    UseQueryOptions<GetOneResult<RecordType>['data']>,\n    'queryKey' | 'queryFn'\n> & {\n    onSuccess?: (data: GetOneResult<RecordType>['data']) => void;\n    onError?: (error: Error) => void;\n    onSettled?: (\n        data?: GetOneResult<RecordType>['data'],\n        error?: Error | null\n    ) => void;\n};\n\nexport type UseGetOneHookValue<RecordType extends RaRecord = any> =\n    UseQueryResult<GetOneResult<RecordType>['data']>;\n", "import { useEffect, useMemo, useRef } from 'react';\nimport {\n    useQuery,\n    UseQueryOptions,\n    UseQueryResult,\n    useQueryClient,\n} from '@tanstack/react-query';\n\nimport { RaRecord, GetListParams, GetListResult } from '../types';\nimport { useDataProvider } from './useDataProvider';\nimport { useEvent } from '../util';\n\nconst MAX_DATA_LENGTH_TO_CACHE = 100;\n\n/**\n * Call the dataProvider.getList() method and return the resolved result\n * as well as the loading state.\n *\n * The return value updates according to the request state:\n *\n * - start: { isPending: true, refetch }\n * - success: { data: [data from store], total: [total from response], isPending: false, refetch }\n * - error: { error: [error from response], isPending: false, refetch }\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getList parameters { pagination, sort, filter, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * @typedef Params\n * @prop params.pagination The request pagination { page, perPage }, e.g. { page: 1, perPage: 10 }\n * @prop params.sort The request sort { field, order }, e.g. { field: 'id', order: 'DESC' }\n * @prop params.filter The request filters, e.g. { title: 'hello, world' }\n * @prop params.meta Optional meta parameters\n *\n * @returns The current request state. Destructure as { data, total, error, isPending, refetch }.\n *\n * @example\n *\n * import { useGetList } from 'react-admin';\n *\n * const LatestNews = () => {\n *     const { data, total, isPending, error } = useGetList(\n *         'posts',\n *         { pagination: { page: 1, perPage: 10 }, sort: { field: 'published_at', order: 'DESC' } }\n *     );\n *     if (isPending) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return <ul>{data.map(item =>\n *         <li key={item.id}>{item.title}</li>\n *     )}</ul>;\n * };\n */\nexport const useGetList = <RecordType extends RaRecord = any>(\n    resource: string,\n    params: Partial<GetListParams> = {},\n    options: UseGetListOptions<RecordType> = {}\n): UseGetListHookValue<RecordType> => {\n    const {\n        pagination = { page: 1, perPage: 25 },\n        sort = { field: 'id', order: 'DESC' },\n        filter = {},\n        meta,\n    } = params;\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const {\n        onError = noop,\n        onSuccess = noop,\n        onSettled = noop,\n        ...queryOptions\n    } = options;\n    const onSuccessEvent = useEvent(onSuccess);\n    const onErrorEvent = useEvent(onError);\n    const onSettledEvent = useEvent(onSettled);\n\n    const result = useQuery<\n        GetListResult<RecordType>,\n        Error,\n        GetListResult<RecordType>\n    >({\n        queryKey: [resource, 'getList', { pagination, sort, filter, meta }],\n        queryFn: queryParams =>\n            dataProvider\n                .getList<RecordType>(resource, {\n                    pagination,\n                    sort,\n                    filter,\n                    meta,\n                    signal:\n                        dataProvider.supportAbortSignal === true\n                            ? queryParams.signal\n                            : undefined,\n                })\n                .then(({ data, total, pageInfo }) => ({\n                    data,\n                    total,\n                    pageInfo,\n                })),\n        ...queryOptions,\n    });\n\n    const metaValue = useRef(meta);\n    const resourceValue = useRef(resource);\n\n    useEffect(() => {\n        metaValue.current = meta;\n    }, [meta]);\n\n    useEffect(() => {\n        resourceValue.current = resource;\n    }, [resource]);\n\n    useEffect(() => {\n        if (\n            result.data === undefined ||\n            result.error != null ||\n            result.isFetching\n        )\n            return;\n\n        // optimistically populate the getOne cache\n        if (\n            result.data?.data &&\n            result.data.data.length <= MAX_DATA_LENGTH_TO_CACHE\n        ) {\n            result.data.data.forEach(record => {\n                queryClient.setQueryData(\n                    [\n                        resourceValue.current,\n                        'getOne',\n                        { id: String(record.id), meta: metaValue.current },\n                    ],\n                    oldRecord => oldRecord ?? record\n                );\n            });\n        }\n        onSuccessEvent(result.data);\n    }, [\n        onSuccessEvent,\n        queryClient,\n        result.data,\n        result.error,\n        result.isFetching,\n    ]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return useMemo(\n        () =>\n            result.data\n                ? {\n                      ...result,\n                      data: result.data?.data,\n                      total: result.data?.total,\n                      pageInfo: result.data?.pageInfo,\n                  }\n                : result,\n        [result]\n    ) as UseQueryResult<RecordType[], Error> & {\n        total?: number;\n        pageInfo?: {\n            hasNextPage?: boolean;\n            hasPreviousPage?: boolean;\n        };\n    };\n};\n\nconst noop = () => undefined;\n\nexport type UseGetListOptions<RecordType extends RaRecord = any> = Omit<\n    UseQueryOptions<GetListResult<RecordType>, Error>,\n    'queryKey' | 'queryFn'\n> & {\n    onSuccess?: (value: GetListResult<RecordType>) => void;\n    onError?: (error: Error) => void;\n    onSettled?: (\n        data?: GetListResult<RecordType>,\n        error?: Error | null\n    ) => void;\n};\n\nexport type UseGetListHookValue<RecordType extends RaRecord = any> =\n    UseQueryResult<RecordType[], Error> & {\n        total?: number;\n        pageInfo?: {\n            hasNextPage?: boolean;\n            hasPreviousPage?: boolean;\n        };\n    };\n", "import { useEffect, useRef } from 'react';\nimport {\n    useQuery,\n    UseQueryOptions,\n    UseQueryResult,\n    useQueryClient,\n    hashKey,\n} from '@tanstack/react-query';\n\nimport { RaRecord, GetManyParams } from '../types';\nimport { useDataProvider } from './useDataProvider';\nimport { useEvent } from '../util';\n\n/**\n * Call the dataProvider.getMany() method and return the resolved result\n * as well as the loading state.\n *\n * The return value updates according to the request state:\n *\n * - start: { isPending: true, refetch }\n * - success: { data: [data from store], isPending: false, refetch }\n * - error: { error: [error from response], isPending: false, refetch }\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getMany parameters { ids, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * @typedef Params\n * @prop params.ids The ids to get, e.g. [123, 456, 789]\n * @prop params.meta Optional meta parameters\n *\n * @returns The current request state. Destructure as { data, error, isPending, refetch }.\n *\n * @example\n *\n * import { useGetMany } from 'react-admin';\n *\n * const PostTags = ({ post }) => {\n *     const { data, isPending, error } = useGetMany(\n *         'tags',\n *         { ids: post.tags },\n *     );\n *     if (isPending) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return <ul>{data.map(tag =>\n *         <li key={tag.id}>{tag.name}</li>\n *     )}</ul>;\n * };\n */\nexport const useGetMany = <RecordType extends RaRecord = any>(\n    resource: string,\n    params: Partial<GetManyParams<RecordType>>,\n    options: UseGetManyOptions<RecordType> = {}\n): UseGetManyHookValue<RecordType> => {\n    const { ids, meta } = params;\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const queryCache = queryClient.getQueryCache();\n    const {\n        onError = noop,\n        onSuccess = noop,\n        onSettled = noop,\n        enabled,\n        ...queryOptions\n    } = options;\n    const onSuccessEvent = useEvent(onSuccess);\n    const onErrorEvent = useEvent(onError);\n    const onSettledEvent = useEvent(onSettled);\n\n    const result = useQuery<RecordType[], Error, RecordType[]>({\n        queryKey: [\n            resource,\n            'getMany',\n            {\n                ids: !ids || ids.length === 0 ? [] : ids.map(id => String(id)),\n                meta,\n            },\n        ],\n        queryFn: queryParams => {\n            if (!ids || ids.length === 0) {\n                // no need to call the dataProvider\n                return Promise.resolve([]);\n            }\n            return dataProvider\n                .getMany<RecordType>(resource, {\n                    ids,\n                    meta,\n                    signal:\n                        dataProvider.supportAbortSignal === true\n                            ? queryParams.signal\n                            : undefined,\n                })\n                .then(({ data }) => data);\n        },\n        placeholderData: () => {\n            const records =\n                !ids || ids.length === 0\n                    ? []\n                    : ids.map(id => {\n                          const queryHash = hashKey([\n                              resource,\n                              'getOne',\n                              { id: String(id), meta },\n                          ]);\n                          return queryCache.get<RecordType>(queryHash)?.state\n                              ?.data;\n                      });\n            if (records.some(record => record === undefined)) {\n                return undefined;\n            } else {\n                return records as RecordType[];\n            }\n        },\n        retry: false,\n        enabled: enabled ?? ids != null,\n        ...queryOptions,\n    });\n\n    const metaValue = useRef(meta);\n    const resourceValue = useRef(resource);\n\n    useEffect(() => {\n        metaValue.current = meta;\n    }, [meta]);\n\n    useEffect(() => {\n        resourceValue.current = resource;\n    }, [resource]);\n\n    useEffect(() => {\n        if (\n            result.data === undefined ||\n            result.error != null ||\n            result.isFetching\n        )\n            return;\n        // optimistically populate the getOne cache\n        result.data.forEach(record => {\n            queryClient.setQueryData(\n                [\n                    resourceValue.current,\n                    'getOne',\n                    { id: String(record.id), meta: metaValue.current },\n                ],\n                oldRecord => oldRecord ?? record\n            );\n        });\n\n        onSuccessEvent(result.data);\n    }, [\n        queryClient,\n        onSuccessEvent,\n        result.data,\n        result.error,\n        result.isFetching,\n    ]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return result;\n};\n\nconst noop = () => undefined;\n\nexport type UseGetManyOptions<RecordType extends RaRecord = any> = Omit<\n    UseQueryOptions<RecordType[], Error>,\n    'queryKey' | 'queryFn'\n> & {\n    onSuccess?: (data: RecordType[]) => void;\n    onError?: (error: Error) => void;\n    onSettled?: (data?: RecordType[], error?: Error | null) => void;\n};\n\nexport type UseGetManyHookValue<RecordType extends RaRecord = any> =\n    UseQueryResult<RecordType[], Error>;\n", "import { useEffect, useMemo, useRef } from 'react';\nimport {\n    QueryClient,\n    useQueryClient,\n    useQuery,\n    UseQueryOptions,\n    hashKey,\n} from '@tanstack/react-query';\nimport union from 'lodash/union';\n\nimport { UseGetManyHookValue } from './useGetMany';\nimport { Identifier, RaRecord, GetManyParams, DataProvider } from '../types';\nimport { useDataProvider } from './useDataProvider';\nimport { useEvent } from '../util';\n\n/**\n * Call the dataProvider.getMany() method and return the resolved result\n * as well as the loading state.\n *\n * The return value updates according to the request state:\n *\n * - start: { isPending: true, isFetching: true, refetch }\n * - success: { data: [data from response], isPending: false, isFetching: false, refetch }\n * - error: { error: [error from response], isPending: false, isFetching: false, refetch }\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * This hook aggregates and deduplicates calls to the same resource, so for instance, if an app calls:\n *\n * useGetManyAggregate('tags', [1, 2, 3]);\n * useGetManyAggregate('tags', [3, 4]);\n *\n * during the same tick, the hook will only call the dataProvider once with the following parameters:\n *\n * dataProvider.getMany('tags', [1, 2, 3, 4])\n *\n * @param resource The resource name, e.g. 'posts'\n * @param {Params} params The getMany parameters { ids, meta }\n * @param {Object} options Options object to pass to the dataProvider.\n * @param {boolean} options.enabled Flag to conditionally run the query. If it's false, the query will not run\n * @param {Function} options.onSuccess Side effect function to be executed upon success, e.g. { onSuccess: { refresh: true } }\n * @param {Function} options.onError Side effect function to be executed upon failure, e.g. { onError: error => notify(error.message) }\n *\n * @typedef Params\n * @prop params.ids The ids to get, e.g. [123, 456, 789]\n * @prop params.meta Optional meta parameters\n\n * @returns The current request state. Destructure as { data, error, isPending, isFetching, refetch }.\n *\n * @example\n *\n * import { useGetManyAggregate, useRecordContext } from 'react-admin';\n *\n * const PostTags = () => {\n *     const record = useRecordContext();\n *     const { data, isPending, error } = useGetManyAggregate('tags', { ids: record.tagIds });\n *     if (isPending) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return (\n *          <ul>\n *              {data.map(tag => (\n *                  <li key={tag.id}>{tag.name}</li>\n *              ))}\n *          </ul>\n *      );\n * };\n */\nexport const useGetManyAggregate = <RecordType extends RaRecord = any>(\n    resource: string,\n    params: Partial<GetManyParams<RecordType>>,\n    options: UseGetManyAggregateOptions<RecordType> = {}\n): UseGetManyHookValue<RecordType> => {\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const queryCache = queryClient.getQueryCache();\n    const {\n        onError = noop,\n        onSuccess = noop,\n        onSettled = noop,\n        enabled,\n        ...queryOptions\n    } = options;\n    const onSuccessEvent = useEvent(onSuccess);\n    const onErrorEvent = useEvent(onError);\n    const onSettledEvent = useEvent(onSettled);\n\n    const { ids, meta } = params;\n    const placeholderData = useMemo(() => {\n        const records = (Array.isArray(ids) ? ids : [ids]).map(id => {\n            const queryHash = hashKey([\n                resource,\n                'getOne',\n                { id: String(id), meta },\n            ]);\n            return queryCache.get<RecordType>(queryHash)?.state?.data;\n        });\n        if (records.some(record => record === undefined)) {\n            return undefined;\n        } else {\n            return records as RecordType[];\n        }\n    }, [ids, queryCache, resource, meta]);\n\n    const result = useQuery<RecordType[], Error, RecordType[]>({\n        queryKey: [\n            resource,\n            'getMany',\n            {\n                ids: (Array.isArray(ids) ? ids : [ids]).map(id => String(id)),\n                meta,\n            },\n        ],\n        queryFn: queryParams =>\n            new Promise((resolve, reject) => {\n                if (!ids || ids.length === 0) {\n                    // no need to call the dataProvider\n                    return resolve([]);\n                }\n\n                // debounced / batched fetch\n                return callGetManyQueries({\n                    resource,\n                    ids,\n                    meta,\n                    resolve,\n                    reject,\n                    dataProvider,\n                    queryClient,\n                    signal:\n                        dataProvider.supportAbortSignal === true\n                            ? queryParams.signal\n                            : undefined,\n                });\n            }),\n        placeholderData,\n        enabled: enabled ?? ids != null,\n        retry: false,\n        ...queryOptions,\n    });\n\n    const metaValue = useRef(meta);\n    const resourceValue = useRef(resource);\n\n    useEffect(() => {\n        metaValue.current = meta;\n    }, [meta]);\n\n    useEffect(() => {\n        resourceValue.current = resource;\n    }, [resource]);\n\n    useEffect(() => {\n        if (\n            result.data === undefined ||\n            result.error != null ||\n            result.isFetching\n        )\n            return;\n\n        // optimistically populate the getOne cache\n        (result.data ?? []).forEach(record => {\n            queryClient.setQueryData(\n                [\n                    resourceValue.current,\n                    'getOne',\n                    { id: String(record.id), meta: metaValue.current },\n                ],\n                oldRecord => oldRecord ?? record\n            );\n        });\n\n        onSuccessEvent(result.data);\n    }, [\n        queryClient,\n        onSuccessEvent,\n        result.data,\n        result.error,\n        result.isFetching,\n    ]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return result;\n};\n\n/**\n * Batch all calls to a function into one single call with the arguments of all the calls.\n *\n * @example\n * let sum = 0;\n * const add = (args) => { sum = args.reduce((arg, total) => total + arg, 0); };\n * const addBatched = batch(add);\n * addBatched(2);\n * addBatched(8);\n * // add will be called once with arguments [2, 8]\n * // and sum will be equal to 10\n */\nconst batch = fn => {\n    let capturedArgs: any[] = [];\n    let timeout: ReturnType<typeof setTimeout> | null = null;\n    return (arg: any) => {\n        capturedArgs.push(arg);\n        if (timeout) clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            timeout = null;\n            fn([...capturedArgs]);\n            capturedArgs = [];\n        }, 0);\n    };\n};\n\ninterface GetManyCallArgs {\n    resource: string;\n    ids: Identifier[];\n    meta?: any;\n    resolve: (data: any[]) => void;\n    reject: (error?: any) => void;\n    dataProvider: DataProvider;\n    queryClient: QueryClient;\n    signal?: AbortSignal;\n}\n\n/**\n * Group and execute all calls to the dataProvider.getMany() method for the current tick\n *\n * Thanks to batch(), this function executes at most once per tick,\n * whatever the number of calls to useGetManyAggregate().\n */\nconst callGetManyQueries = batch((calls: GetManyCallArgs[]) => {\n    const dataProvider = calls[0].dataProvider;\n    const queryClient = calls[0].queryClient;\n\n    /**\n     * Aggregate calls by resource\n     *\n     * callsByResource will look like:\n     * {\n     *     posts: [{ resource, ids, resolve, reject, dataProvider, queryClient }, ...],\n     *     tags: [{ resource, ids, resolve, reject, dataProvider, queryClient }, ...],\n     * }\n     */\n    const callsByResource = calls.reduce(\n        (acc, callArgs) => {\n            if (!acc[callArgs.resource]) {\n                acc[callArgs.resource] = [];\n            }\n            acc[callArgs.resource].push(callArgs);\n            return acc;\n        },\n        {} as { [resource: string]: GetManyCallArgs[] }\n    );\n\n    /**\n     * For each resource, aggregate ids and call dataProvider.getMany() once\n     */\n    Object.keys(callsByResource).forEach(resource => {\n        const callsForResource = callsByResource[resource];\n\n        /**\n         * Extract ids from queries, aggregate and deduplicate them\n         *\n         * @example from [[1, 2], [2, null, 3], [4, null]] to [1, 2, 3, 4]\n         */\n        const aggregatedIds = callsForResource\n            .reduce((acc, { ids }) => union(acc, ids), []) // concat + unique\n            .filter(v => v != null && v !== ''); // remove null values\n\n        const uniqueMeta = callsForResource.reduce(\n            (acc, { meta }) => meta || acc,\n            undefined\n        );\n\n        if (aggregatedIds.length === 0) {\n            // no need to call the data provider if all the ids are null\n            callsForResource.forEach(({ resolve }) => {\n                resolve([]);\n            });\n            return;\n        }\n\n        const callThatHasAllAggregatedIds = callsForResource.find(\n            ({ ids, signal }) =>\n                JSON.stringify(ids) === JSON.stringify(aggregatedIds) &&\n                !signal?.aborted\n        );\n        if (callThatHasAllAggregatedIds) {\n            // There is only one call (no aggregation), or one of the calls has the same ids as the sum of all calls.\n            // Either way, we can't trigger a new fetchQuery with the same signature, as it's already pending.\n            // Therefore, we reply with the dataProvider\n            const { dataProvider, resource, ids, meta, signal } =\n                callThatHasAllAggregatedIds;\n\n            dataProvider\n                .getMany<any>(resource, { ids, meta, signal })\n                .then(({ data }) => data)\n                .then(\n                    data => {\n                        // We must then resolve all the pending calls with the data they requested\n                        callsForResource.forEach(({ ids, resolve }) => {\n                            resolve(\n                                data.filter(record =>\n                                    ids\n                                        .map(id => String(id))\n                                        .includes(String(record.id))\n                                )\n                            );\n                        });\n                    },\n                    error => {\n                        // All pending calls must also receive the error\n                        callsForResource.forEach(({ reject }) => {\n                            reject(error);\n                        });\n                    }\n                );\n            return;\n        }\n\n        /**\n         * Call dataProvider.getMany() with the aggregatedIds,\n         * and resolve each of the promises using the results\n         */\n        queryClient\n            .fetchQuery<any[], Error, any[]>({\n                queryKey: [\n                    resource,\n                    'getMany',\n                    {\n                        ids: aggregatedIds.map(id => String(id)),\n                        meta: uniqueMeta,\n                    },\n                ],\n                queryFn: queryParams =>\n                    dataProvider\n                        .getMany<any>(resource, {\n                            ids: aggregatedIds,\n                            meta: uniqueMeta,\n                            signal:\n                                dataProvider.supportAbortSignal === true\n                                    ? queryParams.signal\n                                    : undefined,\n                        })\n                        .then(({ data }) => data),\n            })\n            .then(data => {\n                callsForResource.forEach(({ ids, resolve }) => {\n                    resolve(\n                        data.filter(record =>\n                            ids\n                                .map(id => String(id))\n                                .includes(String(record.id))\n                        )\n                    );\n                });\n            })\n            .catch(error =>\n                callsForResource.forEach(({ reject }) => reject(error))\n            );\n    });\n});\n\nconst noop = () => undefined;\n\nexport type UseGetManyAggregateOptions<RecordType extends RaRecord> = Omit<\n    UseQueryOptions<RecordType[]>,\n    'queryKey' | 'queryFn'\n> & {\n    onSuccess?: (data: RecordType[]) => void;\n    onError?: (error: Error) => void;\n    onSettled?: (data?: RecordType[], error?: Error | null) => void;\n};\n", "import { useEffect, useMemo } from 'react';\nimport {\n    useQuery,\n    UseQueryOptions,\n    UseQueryResult,\n    useQueryClient,\n} from '@tanstack/react-query';\n\nimport {\n    RaRecord,\n    GetManyReferenceParams,\n    GetManyReferenceResult,\n} from '../types';\nimport { useDataProvider } from './useDataProvider';\nimport { useEvent } from '../util';\n\n/**\n * Call the dataProvider.getManyReference() method and return the resolved result\n * as well as the loading state.\n *\n * The return value updates according to the request state:\n *\n * - start: { isPending: true, refetch }\n * - success: { data: [data from store], total: [total from response], isPending: false, refetch }\n * - error: { error: [error from response], isPending: false, refetch }\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getManyReference parameters { target, id, pagination, sort, filter, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * @typedef Params\n * @prop params.target The target resource key, e.g. 'post_id'\n * @prop params.id The identifier of the record to look for in target, e.g. '123'\n * @prop params.pagination The request pagination { page, perPage }, e.g. { page: 1, perPage: 10 }\n * @prop params.sort The request sort { field, order }, e.g. { field: 'id', order: 'DESC' }\n * @prop params.filter The request filters, e.g. { title: 'hello, world' }\n * @prop params.meta Optional meta parameters\n *\n * @returns The current request state. Destructure as { data, total, error, isPending, refetch }.\n *\n * @example\n *\n * import { useGetManyReference, useRecordContext } from 'react-admin';\n *\n * const PostComments = () => {\n *     const record = useRecordContext();\n *     // fetch all comments related to the current record\n *     const { data, isPending, error } = useGetManyReference(\n *         'comments',\n *         { target: 'post_id', id: record.id, pagination: { page: 1, perPage: 10 }, sort: { field: 'published_at', order: 'DESC' } }\n *     );\n *     if (isPending) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return <ul>{data.map(comment =>\n *         <li key={comment.id}>{comment.body}</li>\n *     )}</ul>;\n * };\n */\nexport const useGetManyReference = <RecordType extends RaRecord = any>(\n    resource: string,\n    params: Partial<GetManyReferenceParams> = {},\n    options: UseGetManyReferenceHookOptions<RecordType> = {}\n): UseGetManyReferenceHookValue<RecordType> => {\n    const {\n        target,\n        id,\n        pagination = { page: 1, perPage: 25 },\n        sort = { field: 'id', order: 'DESC' },\n        filter = {},\n        meta,\n    } = params;\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const {\n        onError = noop,\n        onSuccess = noop,\n        onSettled = noop,\n        ...queryOptions\n    } = options;\n    const onSuccessEvent = useEvent(onSuccess);\n    const onErrorEvent = useEvent(onError);\n    const onSettledEvent = useEvent(onSettled);\n\n    const result = useQuery<\n        GetManyReferenceResult<RecordType>,\n        Error,\n        GetManyReferenceResult<RecordType>\n    >({\n        queryKey: [\n            resource,\n            'getManyReference',\n            { target, id, pagination, sort, filter, meta },\n        ],\n        queryFn: queryParams => {\n            if (!target || id == null) {\n                // check at runtime to support partial parameters with the enabled option\n                return Promise.reject(new Error('target and id are required'));\n            }\n\n            return dataProvider\n                .getManyReference<RecordType>(resource, {\n                    target,\n                    id,\n                    pagination,\n                    sort,\n                    filter,\n                    meta,\n                    signal:\n                        dataProvider.supportAbortSignal === true\n                            ? queryParams.signal\n                            : undefined,\n                })\n                .then(({ data, total, pageInfo }) => ({\n                    data,\n                    total,\n                    pageInfo,\n                }));\n        },\n        ...queryOptions,\n    });\n\n    useEffect(() => {\n        if (result.data === undefined) return;\n        // optimistically populate the getOne cache\n        result.data?.data?.forEach(record => {\n            queryClient.setQueryData(\n                [resource, 'getOne', { id: String(record.id), meta }],\n                oldRecord => oldRecord ?? record\n            );\n        });\n\n        onSuccessEvent(result.data);\n    }, [queryClient, meta, onSuccessEvent, resource, result.data]);\n\n    useEffect(() => {\n        if (result.error == null) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error]);\n\n    useEffect(() => {\n        if (result.status === 'pending') return;\n        onSettledEvent(result.data, result.error);\n    }, [onSettledEvent, result.data, result.error, result.status]);\n\n    return useMemo(\n        () =>\n            result.data\n                ? {\n                      ...result,\n                      data: result.data?.data,\n                      total: result.data?.total,\n                      pageInfo: result.data?.pageInfo,\n                  }\n                : result,\n        [result]\n    ) as UseQueryResult<RecordType[], Error> & {\n        total?: number;\n        pageInfo?: {\n            hasNextPage?: boolean;\n            hasPreviousPage?: boolean;\n        };\n    };\n};\n\nexport type UseGetManyReferenceHookOptions<RecordType extends RaRecord = any> =\n    Omit<\n        UseQueryOptions<GetManyReferenceResult<RecordType>>,\n        'queryKey' | 'queryFn'\n    > & {\n        onSuccess?: (data: GetManyReferenceResult<RecordType>) => void;\n        onError?: (error: Error) => void;\n        onSettled?: (\n            data?: GetManyReferenceResult<RecordType>,\n            error?: Error | null\n        ) => void;\n    };\n\nexport type UseGetManyReferenceHookValue<RecordType extends RaRecord = any> =\n    UseQueryResult<RecordType[]> & {\n        total?: number;\n        pageInfo?: {\n            hasNextPage?: boolean;\n            hasPreviousPage?: boolean;\n        };\n    };\n\nconst noop = () => undefined;\n", "import { useParams } from 'react-router-dom';\nimport { useRecordContext } from '../controller';\nimport { Identifier, RaRecord } from '../types';\n\n/**\n * Helper hook to get the current `recordId`.\n *\n * `recordId` is obtained from parameters if passed as a parameter, or from the `RecordContext` if there is one, or, lastly, from the react-router URL.\n *\n * @param {any} recordId optional if used inside a RecordContextProvider or if recordId can be guessed from the URL\n *\n * @returns The `recordId` determined in this manner.\n *\n * @example\n * const recordId = useGetRecordId();\n */\nexport function useGetRecordId(recordId?: Identifier): Identifier {\n    const contextRecord = useRecordContext<RaRecord>();\n    const { id: routeId } = useParams<'id'>();\n    const actualRecordId = recordId ?? contextRecord?.id ?? routeId;\n    if (actualRecordId == null)\n        throw new Error(\n            `useGetRecordId could not find the current record id. You need to use it inside a RecordContextProvider, or inside a supported route, or provide the record id to the hook yourself.`\n        );\n\n    return actualRecordId;\n}\n", "import { useMemo, useRef } from 'react';\nimport {\n    useMutation,\n    UseMutationOptions,\n    UseMutationResult,\n    useQueryClient,\n    MutateOptions,\n} from '@tanstack/react-query';\n\nimport { useDataProvider } from './useDataProvider';\nimport { RaRecord, CreateParams, Identifier, DataProvider } from '../types';\nimport { useEvent } from '../util';\n\n/**\n * Get a callback to call the dataProvider.create() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The create parameters { data }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n *\n * @typedef Params\n * @prop params.data The record to create, e.g. { title: 'hello, world' }\n *\n * @returns The current mutation state. Destructure as [create, { data, error, isPending }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [create, { isPending: false, isIdle: true }]\n * - start:   [create, { isPending: true }]\n * - success: [create, { data: [data from response], isPending: false, isSuccess: true }]\n * - error:   [create, { error: [error from response], isPending: false, isError: true }]\n *\n * The create() function must be called with a resource and a parameter object: create(resource, { data, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://tanstack.com/query/v5/docs/react/reference/useMutation\n *\n * @example // set params when calling the create callback\n *\n * import { useCreate, useRecordContext } from 'react-admin';\n *\n * const LikeButton = () => {\n *     const record = useRecordContext();\n *     const like = { postId: record.id };\n *     const [create, { isPending, error }] = useCreate();\n *     const handleClick = () => {\n *         create('likes', { data: like })\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={handleClick}>Like</button>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useCreate, useRecordContext } from 'react-admin';\n *\n * const LikeButton = () => {\n *     const record = useRecordContext();\n *     const like = { postId: record.id };\n *     const [create, { isPending, error }] = useCreate('likes', { data: like });\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={() => create()}>Like</button>;\n * };\n *\n * @example // TypeScript\n * const [create, { data }] = useCreate<Product>('products', { data: product });\n *                    \\-- data is Product\n */\nexport const useCreate = <\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    MutationError = unknown,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n>(\n    resource?: string,\n    params: Partial<CreateParams<Partial<RecordType>>> = {},\n    options: UseCreateOptions<RecordType, MutationError, ResultRecordType> = {}\n): UseCreateResult<RecordType, boolean, MutationError, ResultRecordType> => {\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const paramsRef =\n        useRef<Partial<CreateParams<Partial<RecordType>>>>(params);\n    const hasCallTimeOnError = useRef(false);\n    const hasCallTimeOnSuccess = useRef(false);\n    const hasCallTimeOnSettled = useRef(false);\n    const { getMutateWithMiddlewares, ...mutationOptions } = options;\n    const mutation = useMutation<\n        ResultRecordType,\n        MutationError,\n        Partial<UseCreateMutateParams<RecordType>>\n    >({\n        mutationFn: ({\n            resource: callTimeResource = resource,\n            data: callTimeData = paramsRef.current.data,\n            meta: callTimeMeta = paramsRef.current.meta,\n        } = {}) => {\n            if (!callTimeResource) {\n                throw new Error(\n                    'useCreate mutation requires a non-empty resource'\n                );\n            }\n            if (!callTimeData) {\n                throw new Error(\n                    'useCreate mutation requires a non-empty data object'\n                );\n            }\n            if (getMutateWithMiddlewares) {\n                const createWithMiddlewares = getMutateWithMiddlewares(\n                    dataProvider.create.bind(dataProvider)\n                );\n                return createWithMiddlewares(callTimeResource, {\n                    data: callTimeData,\n                    meta: callTimeMeta,\n                }).then(({ data }) => data);\n            }\n            return dataProvider\n                .create<RecordType, ResultRecordType>(callTimeResource, {\n                    data: callTimeData,\n                    meta: callTimeMeta,\n                })\n                .then(({ data }) => data);\n        },\n        ...mutationOptions,\n        onError: (error, variables, context) => {\n            if (options.onError && !hasCallTimeOnError.current) {\n                return options.onError(error, variables, context);\n            }\n        },\n        onSuccess: (\n            data: ResultRecordType,\n            variables: Partial<UseCreateMutateParams<RecordType>> = {},\n            context: unknown\n        ) => {\n            const { resource: callTimeResource = resource } = variables;\n            queryClient.setQueryData(\n                [callTimeResource, 'getOne', { id: String(data.id) }],\n                data\n            );\n            queryClient.invalidateQueries({\n                queryKey: [callTimeResource, 'getList'],\n            });\n            queryClient.invalidateQueries({\n                queryKey: [callTimeResource, 'getInfiniteList'],\n            });\n            queryClient.invalidateQueries({\n                queryKey: [callTimeResource, 'getMany'],\n            });\n            queryClient.invalidateQueries({\n                queryKey: [callTimeResource, 'getManyReference'],\n            });\n\n            if (options.onSuccess && !hasCallTimeOnSuccess.current) {\n                options.onSuccess(data, variables, context);\n            }\n        },\n        onSettled: (data, error, variables, context) => {\n            if (options.onSettled && !hasCallTimeOnSettled.current) {\n                return options.onSettled(data, error, variables, context);\n            }\n        },\n    });\n\n    const create = (\n        callTimeResource: string | undefined = resource,\n        callTimeParams: Partial<CreateParams<Partial<RecordType>>> = {},\n        callTimeOptions: MutateOptions<\n            ResultRecordType,\n            MutationError,\n            Partial<UseCreateMutateParams<RecordType>>,\n            unknown\n        > & { returnPromise?: boolean } = {}\n    ) => {\n        const {\n            returnPromise = options.returnPromise,\n            ...otherCallTimeOptions\n        } = callTimeOptions;\n\n        hasCallTimeOnError.current = !!otherCallTimeOptions.onError;\n        hasCallTimeOnSuccess.current = !!otherCallTimeOptions.onSuccess;\n        hasCallTimeOnSettled.current = !!otherCallTimeOptions.onSettled;\n\n        if (returnPromise) {\n            return mutation.mutateAsync(\n                { resource: callTimeResource, ...callTimeParams },\n                otherCallTimeOptions\n            );\n        }\n        return mutation.mutate(\n            { resource: callTimeResource, ...callTimeParams },\n            otherCallTimeOptions\n        );\n    };\n\n    const mutationResult = useMemo(\n        () => ({\n            isLoading: mutation.isPending,\n            ...mutation,\n        }),\n        [mutation]\n    );\n\n    return [useEvent(create), mutationResult];\n};\n\nexport interface UseCreateMutateParams<\n    RecordType extends Omit<RaRecord, 'id'> = any,\n> {\n    resource?: string;\n    data?: Partial<Omit<RecordType, 'id'>>;\n    meta?: any;\n}\n\nexport type UseCreateOptions<\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    MutationError = unknown,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n> = Omit<\n    UseMutationOptions<\n        ResultRecordType,\n        MutationError,\n        Partial<UseCreateMutateParams<RecordType>>\n    >,\n    'mutationFn'\n> & {\n    returnPromise?: boolean;\n    getMutateWithMiddlewares?: <\n        CreateFunctionType extends\n            DataProvider['create'] = DataProvider['create'],\n    >(\n        mutate: CreateFunctionType\n    ) => (\n        ...Params: Parameters<CreateFunctionType>\n    ) => ReturnType<CreateFunctionType>;\n};\n\nexport type CreateMutationFunction<\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    TReturnPromise extends boolean = boolean,\n    MutationError = unknown,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n> = (\n    resource?: string,\n    params?: Partial<CreateParams<Partial<RecordType>>>,\n    options?: MutateOptions<\n        ResultRecordType,\n        MutationError,\n        Partial<UseCreateMutateParams<RecordType>>,\n        unknown\n    > & { returnPromise?: TReturnPromise }\n) => TReturnPromise extends true ? Promise<ResultRecordType> : void;\n\nexport type UseCreateResult<\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    TReturnPromise extends boolean = boolean,\n    MutationError = unknown,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n> = [\n    CreateMutationFunction<\n        RecordType,\n        TReturnPromise,\n        MutationError,\n        ResultRecordType\n    >,\n    UseMutationResult<\n        ResultRecordType,\n        MutationError,\n        Partial<UseCreateMutateParams<RecordType>>,\n        unknown\n    > & { isLoading: boolean },\n];\n", "import { useMemo, useRef } from 'react';\nimport {\n    useMutation,\n    useQueryClient,\n    UseMutationOptions,\n    UseMutationResult,\n    MutateOptions,\n    QueryKey,\n    UseInfiniteQueryResult,\n    InfiniteData,\n} from '@tanstack/react-query';\n\nimport { useDataProvider } from './useDataProvider';\nimport undoableEventEmitter from './undoableEventEmitter';\nimport {\n    RaRecord,\n    UpdateParams,\n    MutationMode,\n    GetListResult as OriginalGetListResult,\n    GetInfiniteListResult,\n    DataProvider,\n} from '../types';\nimport { useEvent } from '../util';\n\n/**\n * Get a callback to call the dataProvider.update() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The update parameters { id, data, previousData, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.id The resource identifier, e.g. 123\n * @prop params.data The updates to merge into the record, e.g. { views: 10 }\n * @prop params.previousData The record before the update is applied\n * @prop params.meta Optional meta data\n *\n * @returns The current mutation state. Destructure as [update, { data, error, isPending }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [update, { isPending: false, isIdle: true }]\n * - start:   [update, { isPending: true }]\n * - success: [update, { data: [data from response], isPending: false, isSuccess: true }]\n * - error:   [update, { error: [error from response], isPending: false, isError: true }]\n *\n * The update() function must be called with a resource and a parameter object: update(resource, { id, data, previousData }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://react-query-v3.tanstack.com/reference/useMutation\n *\n * @example // set params when calling the update callback\n *\n * import { useUpdate, useRecordContext } from 'react-admin';\n *\n * const IncreaseLikeButton = () => {\n *     const record = useRecordContext();\n *     const diff = { likes: record.likes + 1 };\n *     const [update, { isPending, error }] = useUpdate();\n *     const handleClick = () => {\n *         update('likes', { id: record.id, data: diff, previousData: record })\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={handleClick}>Like</div>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useUpdate, useRecordContext } from 'react-admin';\n *\n * const IncreaseLikeButton = () => {\n *     const record = useRecordContext();\n *     const diff = { likes: record.likes + 1 };\n *     const [update, { isPending, error }] = useUpdate('likes', { id: record.id, data: diff, previousData: record });\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={() => update()}>Like</button>;\n * };\n *\n * @example // TypeScript\n * const [update, { data }] = useUpdate<Product>('products', { id, data: diff, previousData: product });\n *                    \\-- data is Product\n */\nexport const useUpdate = <RecordType extends RaRecord = any, ErrorType = Error>(\n    resource?: string,\n    params: Partial<UpdateParams<RecordType>> = {},\n    options: UseUpdateOptions<RecordType, ErrorType> = {}\n): UseUpdateResult<RecordType, boolean, ErrorType> => {\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const { id, data, meta } = params;\n    const {\n        mutationMode = 'pessimistic',\n        getMutateWithMiddlewares,\n        ...mutationOptions\n    } = options;\n    const mode = useRef<MutationMode>(mutationMode);\n    const paramsRef = useRef<Partial<UpdateParams<RecordType>>>(params);\n    const snapshot = useRef<Snapshot>([]);\n    // Ref that stores the mutation with middlewares to avoid losing them if the calling component is unmounted\n    const mutateWithMiddlewares = useRef(dataProvider.update);\n    // We need to store the call-time onError and onSettled in refs to be able to call them in the useMutation hook even\n    // when the calling component is unmounted\n    const callTimeOnError =\n        useRef<UseUpdateOptions<RecordType, ErrorType>['onError']>();\n    const callTimeOnSettled =\n        useRef<UseUpdateOptions<RecordType, ErrorType>['onSettled']>();\n\n    // We don't need to keep a ref on the onSuccess callback as we call it ourselves for optimistic and\n    // undoable mutations. There is a limitation though: if one of the side effects applied by the onSuccess callback\n    // unmounts the component that called the useUpdate hook (redirect for instance), it must be the last one applied,\n    // otherwise the other side effects may not applied.\n    const hasCallTimeOnSuccess = useRef(false);\n\n    const updateCache = ({ resource, id, data }) => {\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        const now = Date.now();\n        const updatedAt = mode.current === 'undoable' ? now + 5 * 1000 : now;\n\n        const updateColl = (old: RecordType[]) => {\n            if (!old) return old;\n            const index = old.findIndex(\n                // eslint-disable-next-line eqeqeq\n                record => record.id == id\n            );\n            if (index === -1) {\n                return old;\n            }\n            return [\n                ...old.slice(0, index),\n                { ...old[index], ...data } as RecordType,\n                ...old.slice(index + 1),\n            ];\n        };\n\n        type GetListResult = Omit<OriginalGetListResult, 'data'> & {\n            data?: RecordType[];\n        };\n\n        queryClient.setQueryData(\n            [resource, 'getOne', { id: String(id), meta }],\n            (record: RecordType) => ({ ...record, ...data }),\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getList'] },\n            (res: GetListResult) =>\n                res && res.data ? { ...res, data: updateColl(res.data) } : res,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getInfiniteList'] },\n            (\n                res: UseInfiniteQueryResult<\n                    InfiniteData<GetInfiniteListResult>\n                >['data']\n            ) =>\n                res && res.pages\n                    ? {\n                          ...res,\n                          pages: res.pages.map(page => ({\n                              ...page,\n                              data: updateColl(page.data),\n                          })),\n                      }\n                    : res,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getMany'] },\n            (coll: RecordType[]) =>\n                coll && coll.length > 0 ? updateColl(coll) : coll,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getManyReference'] },\n            (res: GetListResult) =>\n                res && res.data\n                    ? { data: updateColl(res.data), total: res.total }\n                    : res,\n            { updatedAt }\n        );\n    };\n\n    const mutation = useMutation<\n        RecordType,\n        ErrorType,\n        Partial<UseUpdateMutateParams<RecordType>>\n    >({\n        mutationFn: ({\n            resource: callTimeResource = resource,\n            id: callTimeId = paramsRef.current.id,\n            data: callTimeData = paramsRef.current.data,\n            meta: callTimeMeta = paramsRef.current.meta,\n            previousData: callTimePreviousData = paramsRef.current.previousData,\n        } = {}) => {\n            if (!callTimeResource) {\n                throw new Error(\n                    'useUpdate mutation requires a non-empty resource'\n                );\n            }\n            if (callTimeId == null) {\n                throw new Error('useUpdate mutation requires a non-empty id');\n            }\n            if (!callTimeData) {\n                throw new Error(\n                    'useUpdate mutation requires a non-empty data object'\n                );\n            }\n\n            return mutateWithMiddlewares\n                .current(callTimeResource, {\n                    id: callTimeId,\n                    data: callTimeData,\n                    previousData: callTimePreviousData,\n                    meta: callTimeMeta,\n                })\n                .then(({ data }) => data);\n        },\n        ...mutationOptions,\n        onMutate: async (\n            variables: Partial<UseUpdateMutateParams<RecordType>>\n        ) => {\n            if (mutationOptions.onMutate) {\n                const userContext =\n                    (await mutationOptions.onMutate(variables)) || {};\n                return {\n                    snapshot: snapshot.current,\n                    // @ts-ignore\n                    ...userContext,\n                };\n            } else {\n                // Return a context object with the snapshot value\n                return { snapshot: snapshot.current };\n            }\n        },\n        onError: (error, variables = {}, context: { snapshot: Snapshot }) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(([key, value]) => {\n                    queryClient.setQueryData(key, value);\n                });\n            }\n\n            if (callTimeOnError.current) {\n                return callTimeOnError.current(error, variables, context);\n            }\n            if (mutationOptions.onError) {\n                return mutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        },\n        onSuccess: (\n            data: RecordType,\n            variables: Partial<UseUpdateMutateParams<RecordType>> = {},\n            context: unknown\n        ) => {\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                const {\n                    resource: callTimeResource = resource,\n                    id: callTimeId = id,\n                } = variables;\n                updateCache({\n                    resource: callTimeResource,\n                    id: callTimeId,\n                    data,\n                });\n\n                if (\n                    mutationOptions.onSuccess &&\n                    !hasCallTimeOnSuccess.current\n                ) {\n                    mutationOptions.onSuccess(data, variables, context);\n                }\n            }\n        },\n        onSettled: (\n            data,\n            error,\n            variables = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(([queryKey]) => {\n                    queryClient.invalidateQueries({ queryKey });\n                });\n            }\n\n            if (callTimeOnSettled.current) {\n                return callTimeOnSettled.current(\n                    data,\n                    error,\n                    variables,\n                    context\n                );\n            }\n            if (mutationOptions.onSettled) {\n                return mutationOptions.onSettled(\n                    data,\n                    error,\n                    variables,\n                    context\n                );\n            }\n        },\n    });\n\n    const update = async (\n        callTimeResource: string | undefined = resource,\n        callTimeParams: Partial<UpdateParams<RecordType>> = {},\n        callTimeOptions: MutateOptions<\n            RecordType,\n            ErrorType,\n            Partial<UseUpdateMutateParams<RecordType>>,\n            unknown\n        > & { mutationMode?: MutationMode; returnPromise?: boolean } = {}\n    ) => {\n        const {\n            mutationMode,\n            returnPromise = mutationOptions.returnPromise,\n            onError,\n            onSettled,\n            onSuccess,\n            ...otherCallTimeOptions\n        } = callTimeOptions;\n\n        // Store the mutation with middlewares to avoid losing them if the calling component is unmounted\n        if (getMutateWithMiddlewares) {\n            mutateWithMiddlewares.current = getMutateWithMiddlewares(\n                dataProvider.update.bind(dataProvider)\n            );\n        } else {\n            mutateWithMiddlewares.current = dataProvider.update;\n        }\n\n        // We need to keep the onSuccess callback here and not in the useMutation for undoable mutations\n        hasCallTimeOnSuccess.current = !!onSuccess;\n        // We need to store the onError and onSettled callbacks here to be able to call them in the useMutation hook\n        // so that they are called even when the calling component is unmounted\n        callTimeOnError.current = onError;\n        callTimeOnSettled.current = onSettled;\n\n        // store the hook time params *at the moment of the call*\n        // because they may change afterwards, which would break the undoable mode\n        // as the previousData would be overwritten by the optimistic update\n        paramsRef.current = params;\n\n        if (mutationMode) {\n            mode.current = mutationMode;\n        }\n\n        if (returnPromise && mode.current !== 'pessimistic') {\n            console.warn(\n                'The returnPromise parameter can only be used if the mutationMode is set to pessimistic'\n            );\n        }\n\n        if (mode.current === 'pessimistic') {\n            if (returnPromise) {\n                return mutation.mutateAsync(\n                    { resource: callTimeResource, ...callTimeParams },\n                    // We don't pass onError and onSettled here as we will call them in the useMutation hook side effects\n                    { onSuccess, ...otherCallTimeOptions }\n                );\n            }\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                // We don't pass onError and onSettled here as we will call them in the useMutation hook side effects\n                { onSuccess, ...otherCallTimeOptions }\n            );\n        }\n\n        const {\n            id: callTimeId = id,\n            data: callTimeData = data,\n            meta: callTimeMeta = meta,\n        } = callTimeParams;\n\n        // optimistic update as documented in https://react-query-v3.tanstack.com/guides/optimistic-updates\n        // except we do it in a mutate wrapper instead of the onMutate callback\n        // to have access to success side effects\n\n        const previousRecord = queryClient.getQueryData<RecordType>([\n            callTimeResource,\n            'getOne',\n            { id: String(callTimeId), meta: callTimeMeta },\n        ]);\n\n        const queryKeys = [\n            [\n                callTimeResource,\n                'getOne',\n                { id: String(callTimeId), meta: callTimeMeta },\n            ],\n            [callTimeResource, 'getList'],\n            [callTimeResource, 'getInfiniteList'],\n            [callTimeResource, 'getMany'],\n            [callTimeResource, 'getManyReference'],\n        ];\n\n        /**\n         * Snapshot the previous values via queryClient.getQueriesData()\n         *\n         * The snapshotData ref will contain an array of tuples [query key, associated data]\n         *\n         * @example\n         * [\n         *   [['posts', 'getOne', { id: '1' }], { id: 1, title: 'Hello' }],\n         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n         * ]\n         *\n         * @see https://react-query-v3.tanstack.com/reference/QueryClient#queryclientgetqueriesdata\n         */\n        snapshot.current = queryKeys.reduce(\n            (prev, queryKey) =>\n                prev.concat(queryClient.getQueriesData({ queryKey })),\n            [] as Snapshot\n        );\n\n        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n        await Promise.all(\n            snapshot.current.map(([queryKey]) =>\n                queryClient.cancelQueries({ queryKey })\n            )\n        );\n\n        // Optimistically update to the new value\n        updateCache({\n            resource: callTimeResource,\n            id: callTimeId,\n            data: callTimeData,\n        });\n\n        // run the success callbacks during the next tick\n        setTimeout(() => {\n            if (onSuccess) {\n                onSuccess(\n                    { ...previousRecord, ...callTimeData } as RecordType,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            } else if (\n                mutationOptions.onSuccess &&\n                !hasCallTimeOnSuccess.current\n            ) {\n                mutationOptions.onSuccess(\n                    { ...previousRecord, ...callTimeData } as RecordType,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            }\n        }, 0);\n\n        if (mode.current === 'optimistic') {\n            // call the mutate method without success side effects\n            return mutation.mutate({\n                resource: callTimeResource,\n                // We don't pass onError and onSettled here as we will call them in the useMutation hook side effects\n                ...callTimeParams,\n            });\n        } else {\n            // undoable mutation: register the mutation for later\n            undoableEventEmitter.once('end', ({ isUndo }) => {\n                if (isUndo) {\n                    // rollback\n                    snapshot.current.forEach(([key, value]) => {\n                        queryClient.setQueryData(key, value);\n                    });\n                } else {\n                    // call the mutate method without success side effects\n                    mutation.mutate({\n                        resource: callTimeResource,\n                        ...callTimeParams,\n                    });\n                }\n            });\n        }\n    };\n\n    const mutationResult = useMemo(\n        () => ({\n            isLoading: mutation.isPending,\n            ...mutation,\n        }),\n        [mutation]\n    );\n\n    return [useEvent(update), mutationResult];\n};\n\ntype Snapshot = [key: QueryKey, value: any][];\n\nexport interface UseUpdateMutateParams<RecordType extends RaRecord = any> {\n    resource?: string;\n    id?: RecordType['id'];\n    data?: Partial<RecordType>;\n    previousData?: any;\n    meta?: any;\n}\n\nexport type UseUpdateOptions<\n    RecordType extends RaRecord = any,\n    ErrorType = Error,\n> = UseMutationOptions<\n    RecordType,\n    ErrorType,\n    Partial<Omit<UseUpdateMutateParams<RecordType>, 'mutationFn'>>\n> & {\n    mutationMode?: MutationMode;\n    returnPromise?: boolean;\n    getMutateWithMiddlewares?: <\n        UpdateFunctionType extends\n            DataProvider['update'] = DataProvider['update'],\n    >(\n        mutate: UpdateFunctionType\n    ) => (\n        ...Params: Parameters<UpdateFunctionType>\n    ) => ReturnType<UpdateFunctionType>;\n};\n\nexport type UpdateMutationFunction<\n    RecordType extends RaRecord = any,\n    TReturnPromise extends boolean = boolean,\n    ErrorType = Error,\n> = (\n    resource?: string,\n    params?: Partial<UpdateParams<RecordType>>,\n    options?: MutateOptions<\n        RecordType,\n        ErrorType,\n        Partial<UseUpdateMutateParams<RecordType>>,\n        unknown\n    > & { mutationMode?: MutationMode; returnPromise?: TReturnPromise }\n) => Promise<TReturnPromise extends true ? RecordType : void>;\n\nexport type UseUpdateResult<\n    RecordType extends RaRecord = any,\n    TReturnPromise extends boolean = boolean,\n    ErrorType = Error,\n> = [\n    UpdateMutationFunction<RecordType, TReturnPromise, ErrorType>,\n    UseMutationResult<\n        RecordType,\n        ErrorType,\n        Partial<UpdateParams<RecordType> & { resource?: string }>,\n        unknown\n    > & { isLoading: boolean },\n];\n", "import { useMemo, useRef } from 'react';\nimport {\n    useMutation,\n    useQueryClient,\n    UseMutationOptions,\n    UseMutationResult,\n    MutateOptions,\n    QueryKey,\n    UseInfiniteQueryResult,\n    InfiniteData,\n} from '@tanstack/react-query';\n\nimport { useDataProvider } from './useDataProvider';\nimport undoableEventEmitter from './undoableEventEmitter';\nimport {\n    RaRecord,\n    UpdateManyParams,\n    MutationMode,\n    GetListResult as OriginalGetListResult,\n    GetInfiniteListResult,\n} from '../types';\nimport { useEvent } from '../util';\nimport { Identifier } from '..';\n\n/**\n * Get a callback to call the dataProvider.updateMany() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The updateMany parameters { ids, data, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.ids The resource identifiers, e.g. [123, 456]\n * @prop params.data The updates to merge into the record, e.g. { views: 10 }\n * @prop params.meta Optional meta parameters\n *\n * @returns The current mutation state. Destructure as [updateMany, { data, error, isPending }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [updateMany, { isPending: false, isIdle: true }]\n * - start:   [updateMany, { isPending: true }]\n * - success: [updateMany, { data: [data from response], isPending: false, isSuccess: true }]\n * - error:   [updateMany, { error: [error from response], isPending: false, isError: true }]\n *\n * The updateMany() function must be called with a resource and a parameter object: updateMany(resource, { ids, data, previousData }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://tanstack.com/query/v5/docs/react/reference/useMutation\n *\n * @example // set params when calling the updateMany callback\n *\n * import { useUpdateMany, useListContext } from 'react-admin';\n *\n * const BulkResetViewsButton = () => {\n *     const { selectedIds } = useListContext();\n *     const [updateMany, { isPending, error }] = useUpdateMany();\n *     const handleClick = () => {\n *         updateMany('posts', { ids: selectedIds, data: { views: 0 } });\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={handleClick}>Reset views</button>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useUpdateMany, useListContext } from 'react-admin';\n *\n * const BulkResetViewsButton = () => {\n *     const { selectedIds } = useListContext();\n *     const [updateMany, { isPending, error }] = useUpdateMany('posts', { ids: selectedIds, data: { views: 0 } });\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={() => updateMany()}>Reset views</button>;\n * };\n */\nexport const useUpdateMany = <\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n>(\n    resource?: string,\n    params: Partial<UpdateManyParams<Partial<RecordType>>> = {},\n    options: UseUpdateManyOptions<RecordType, MutationError> = {}\n): UseUpdateManyResult<RecordType, boolean, MutationError> => {\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const { ids, data, meta } = params;\n    const { mutationMode = 'pessimistic', ...mutationOptions } = options;\n    const mode = useRef<MutationMode>(mutationMode);\n    const paramsRef =\n        useRef<Partial<UpdateManyParams<Partial<RecordType>>>>(params);\n    const snapshot = useRef<Snapshot>([]);\n    const hasCallTimeOnError = useRef(false);\n    const hasCallTimeOnSuccess = useRef(false);\n    const hasCallTimeOnSettled = useRef(false);\n\n    const updateCache = async ({\n        resource,\n        ids,\n        data,\n        meta,\n    }: {\n        resource: string;\n        ids: Identifier[];\n        data: any;\n        meta?: any;\n    }) => {\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        const updatedAt =\n            mode.current === 'undoable' ? Date.now() + 1000 * 5 : Date.now();\n\n        const updateColl = (old: RecordType[]) => {\n            if (!old) return old;\n            let newCollection = [...old];\n            ids.forEach(id => {\n                // eslint-disable-next-line eqeqeq\n                const index = old.findIndex(record => record.id == id);\n                if (index === -1) {\n                    return;\n                }\n                newCollection = [\n                    ...newCollection.slice(0, index),\n                    { ...newCollection[index], ...data },\n                    ...newCollection.slice(index + 1),\n                ];\n            });\n            return newCollection;\n        };\n\n        type GetListResult = Omit<OriginalGetListResult, 'data'> & {\n            data?: RecordType[];\n        };\n\n        ids.forEach(id => {\n            queryClient.setQueryData(\n                [resource, 'getOne', { id: String(id), meta }],\n                (record: RecordType) => ({ ...record, ...data }),\n                { updatedAt }\n            );\n        });\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getList'] },\n            (res: GetListResult) =>\n                res && res.data ? { ...res, data: updateColl(res.data) } : res,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getInfiniteList'] },\n            (\n                res: UseInfiniteQueryResult<\n                    InfiniteData<GetInfiniteListResult>\n                >['data']\n            ) =>\n                res && res.pages\n                    ? {\n                          ...res,\n                          pages: res.pages.map(page => ({\n                              ...page,\n                              data: updateColl(page.data),\n                          })),\n                      }\n                    : res,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getMany'] },\n            (coll: RecordType[]) =>\n                coll && coll.length > 0 ? updateColl(coll) : coll,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getManyReference'] },\n            (res: GetListResult) =>\n                res && res.data\n                    ? { data: updateColl(res.data), total: res.total }\n                    : res,\n            { updatedAt }\n        );\n    };\n\n    const mutation = useMutation<\n        Array<RecordType['id']>,\n        MutationError,\n        Partial<UseUpdateManyMutateParams<RecordType>>\n    >({\n        mutationFn: ({\n            resource: callTimeResource = resource,\n            ids: callTimeIds = paramsRef.current.ids,\n            data: callTimeData = paramsRef.current.data,\n            meta: callTimeMeta = paramsRef.current.meta,\n        } = {}) => {\n            if (!callTimeResource) {\n                throw new Error(\n                    'useUpdateMany mutation requires a non-empty resource'\n                );\n            }\n            if (!callTimeIds) {\n                throw new Error(\n                    'useUpdateMany mutation requires an array of ids'\n                );\n            }\n            if (!callTimeData) {\n                throw new Error(\n                    'useUpdateMany mutation requires a non-empty data object'\n                );\n            }\n            return dataProvider\n                .updateMany<RecordType>(callTimeResource, {\n                    ids: callTimeIds,\n                    data: callTimeData,\n                    meta: callTimeMeta,\n                })\n                .then(({ data }) => data || []);\n        },\n        ...mutationOptions,\n        onMutate: async (\n            variables: Partial<UseUpdateManyMutateParams<RecordType>>\n        ) => {\n            if (mutationOptions.onMutate) {\n                const userContext =\n                    (await mutationOptions.onMutate(variables)) || {};\n                return {\n                    snapshot: snapshot.current,\n                    // @ts-ignore\n                    ...userContext,\n                };\n            } else {\n                // Return a context object with the snapshot value\n                return { snapshot: snapshot.current };\n            }\n        },\n        onError: (\n            error: MutationError,\n            variables: Partial<UseUpdateManyMutateParams<RecordType>> = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(([key, value]) => {\n                    queryClient.setQueryData(key, value);\n                });\n            }\n\n            if (mutationOptions.onError && !hasCallTimeOnError.current) {\n                return mutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        },\n        onSuccess: (\n            dataFromResponse: Array<RecordType['id']>,\n            variables: Partial<UseUpdateManyMutateParams<RecordType>> = {},\n            context: unknown\n        ) => {\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                const {\n                    resource: callTimeResource = resource,\n                    ids: callTimeIds = ids,\n                    data: callTimeData = data,\n                    meta: callTimeMeta = meta,\n                } = variables;\n                if (!callTimeResource) {\n                    throw new Error(\n                        'useUpdateMany mutation requires a non-empty resource'\n                    );\n                }\n                if (!callTimeIds) {\n                    throw new Error(\n                        'useUpdateMany mutation requires an array of ids'\n                    );\n                }\n                updateCache({\n                    resource: callTimeResource,\n                    ids: callTimeIds,\n                    data: callTimeData,\n                    meta: callTimeMeta,\n                });\n\n                if (\n                    mutationOptions.onSuccess &&\n                    !hasCallTimeOnSuccess.current\n                ) {\n                    mutationOptions.onSuccess(\n                        dataFromResponse,\n                        variables,\n                        context\n                    );\n                }\n            }\n        },\n        onSettled: (\n            data: Array<RecordType['id']>,\n            error: MutationError,\n            variables: Partial<UseUpdateManyMutateParams<RecordType>> = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(([queryKey]) => {\n                    queryClient.invalidateQueries({ queryKey });\n                });\n            }\n\n            if (mutationOptions.onSettled && !hasCallTimeOnSettled.current) {\n                return mutationOptions.onSettled(\n                    data,\n                    error,\n                    variables,\n                    context\n                );\n            }\n        },\n    });\n\n    const updateMany = async (\n        callTimeResource: string | undefined = resource,\n        callTimeParams: Partial<UpdateManyParams<RecordType>> = {},\n        callTimeOptions: MutateOptions<\n            Array<RecordType['id']>,\n            unknown,\n            Partial<UseUpdateManyMutateParams<RecordType>>,\n            unknown\n        > & { mutationMode?: MutationMode; returnPromise?: boolean } = {}\n    ) => {\n        if (!callTimeResource) {\n            throw new Error(\n                'useUpdateMany mutation requires a non-empty resource'\n            );\n        }\n        const {\n            mutationMode,\n            returnPromise = mutationOptions.returnPromise,\n            ...otherCallTimeOptions\n        } = callTimeOptions;\n\n        hasCallTimeOnError.current = !!otherCallTimeOptions.onError;\n        hasCallTimeOnSuccess.current = !!otherCallTimeOptions.onSuccess;\n        hasCallTimeOnSettled.current = !!otherCallTimeOptions.onSettled;\n\n        // store the hook time params *at the moment of the call*\n        // because they may change afterwards, which would break the undoable mode\n        // as the previousData would be overwritten by the optimistic update\n        paramsRef.current = params;\n\n        if (mutationMode) {\n            mode.current = mutationMode;\n        }\n\n        if (returnPromise && mode.current !== 'pessimistic') {\n            console.warn(\n                'The returnPromise parameter can only be used if the mutationMode is set to pessimistic'\n            );\n        }\n\n        if (mode.current === 'pessimistic') {\n            if (returnPromise) {\n                return mutation.mutateAsync(\n                    { resource: callTimeResource, ...callTimeParams },\n                    otherCallTimeOptions\n                );\n            }\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                otherCallTimeOptions\n            );\n        }\n\n        const {\n            ids: callTimeIds = ids,\n            data: callTimeData = data,\n            meta: callTimeMeta = meta,\n        } = callTimeParams;\n        if (!callTimeIds) {\n            throw new Error('useUpdateMany mutation requires an array of ids');\n        }\n\n        // optimistic update as documented in https://react-query-v5.tanstack.com/guides/optimistic-updates\n        // except we do it in a mutate wrapper instead of the onMutate callback\n        // to have access to success side effects\n\n        const queryKeys = [\n            [callTimeResource, 'getOne'],\n            [callTimeResource, 'getList'],\n            [callTimeResource, 'getInfiniteList'],\n            [callTimeResource, 'getMany'],\n            [callTimeResource, 'getManyReference'],\n        ];\n\n        /**\n         * Snapshot the previous values via queryClient.getQueriesData()\n         *\n         * The snapshotData ref will contain an array of tuples [query key, associated data]\n         *\n         * @example\n         * [\n         *   [['posts', 'getOne', { id: '1' }], { id: 1, title: 'Hello' }],\n         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n         * ]\n         *\n         * @see https://tanstack.com/query/v5/docs/react/reference/QueryClient#queryclientgetqueriesdata\n         */\n        snapshot.current = queryKeys.reduce(\n            (prev, queryKey) =>\n                prev.concat(queryClient.getQueriesData({ queryKey })),\n            [] as Snapshot\n        );\n\n        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n        await Promise.all(\n            snapshot.current.map(([queryKey]) =>\n                queryClient.cancelQueries({ queryKey })\n            )\n        );\n\n        // Optimistically update to the new data\n        await updateCache({\n            resource: callTimeResource,\n            ids: callTimeIds,\n            data: callTimeData,\n            meta: callTimeMeta,\n        });\n\n        // run the success callbacks during the next tick\n        setTimeout(() => {\n            if (otherCallTimeOptions.onSuccess) {\n                otherCallTimeOptions.onSuccess(\n                    callTimeIds,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            } else if (mutationOptions.onSuccess) {\n                mutationOptions.onSuccess(\n                    callTimeIds,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            }\n        }, 0);\n\n        if (mode.current === 'optimistic') {\n            // call the mutate method without success side effects\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                {\n                    onSettled: otherCallTimeOptions.onSettled,\n                    onError: otherCallTimeOptions.onError,\n                }\n            );\n        } else {\n            // undoable mutation: register the mutation for later\n            undoableEventEmitter.once('end', ({ isUndo }) => {\n                if (isUndo) {\n                    // rollback\n                    snapshot.current.forEach(([key, value]) => {\n                        queryClient.setQueryData(key, value);\n                    });\n                } else {\n                    // call the mutate method without success side effects\n                    mutation.mutate(\n                        { resource: callTimeResource, ...callTimeParams },\n                        {\n                            onSettled: otherCallTimeOptions.onSettled,\n                            onError: otherCallTimeOptions.onError,\n                        }\n                    );\n                }\n            });\n        }\n    };\n\n    const mutationResult = useMemo(\n        () => ({\n            isLoading: mutation.isPending,\n            ...mutation,\n        }),\n        [mutation]\n    );\n\n    return [useEvent(updateMany), mutationResult];\n};\n\ntype Snapshot = [key: QueryKey, value: any][];\n\nexport interface UseUpdateManyMutateParams<RecordType extends RaRecord = any> {\n    resource?: string;\n    ids?: Array<RecordType['id']>;\n    data?: Partial<RecordType>;\n    previousData?: any;\n    meta?: any;\n}\n\nexport type UseUpdateManyOptions<\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n> = UseMutationOptions<\n    Array<RecordType['id']>,\n    MutationError,\n    Partial<Omit<UseUpdateManyMutateParams<RecordType>, 'mutationFn'>>\n> & { mutationMode?: MutationMode; returnPromise?: boolean };\n\nexport type UseUpdateManyResult<\n    RecordType extends RaRecord = any,\n    TReturnPromise extends boolean = boolean,\n    MutationError = unknown,\n> = [\n    (\n        resource?: string,\n        params?: Partial<UpdateManyParams<RecordType>>,\n        options?: MutateOptions<\n            Array<RecordType['id']>,\n            MutationError,\n            Partial<UseUpdateManyMutateParams<RecordType>>,\n            unknown\n        > & { mutationMode?: MutationMode; returnPromise?: TReturnPromise }\n    ) => Promise<TReturnPromise extends true ? Array<RecordType['id']> : void>,\n    UseMutationResult<\n        Array<RecordType['id']>,\n        MutationError,\n        Partial<UpdateManyParams<Partial<RecordType>> & { resource?: string }>,\n        unknown\n    > & { isLoading: boolean },\n];\n", "import { useMemo, useRef } from 'react';\nimport {\n    useMutation,\n    useQueryClient,\n    UseMutationOptions,\n    UseMutationResult,\n    MutateOptions,\n    QueryKey,\n    UseInfiniteQueryResult,\n    InfiniteData,\n} from '@tanstack/react-query';\n\nimport { useDataProvider } from './useDataProvider';\nimport undoableEventEmitter from './undoableEventEmitter';\nimport {\n    RaRecord,\n    DeleteParams,\n    MutationMode,\n    GetListResult as OriginalGetListResult,\n    GetInfiniteListResult,\n} from '../types';\nimport { useEvent } from '../util';\n\n/**\n * Get a callback to call the dataProvider.delete() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The delete parameters { id, previousData }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.id The resource identifier, e.g. 123\n * @prop params.previousData The record before the update is applied\n *\n * @returns The current mutation state. Destructure as [deleteOne, { data, error, isPending }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [deleteOne, { isPending: false, isIdle: true }]\n * - start:   [deleteOne, { isPending: true }]\n * - success: [deleteOne, { data: [data from response], isPending: false, isSuccess: true }]\n * - error:   [deleteOne, { error: [error from response], isPending: false, isError: true }]\n *\n * The deleteOne() function must be called with a resource and a parameter object: deleteOne(resource, { id, previousData, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://tanstack.com/query/v5/docs/react/reference/useMutation\n *\n * @example // set params when calling the deleteOne callback\n *\n * import { useDelete, useRecordContext } from 'react-admin';\n *\n * const DeleteButton = () => {\n *     const record = useRecordContext();\n *     const [deleteOne, { isPending, error }] = useDelete();\n *     const handleClick = () => {\n *         deleteOne('likes', { id: record.id, previousData: record })\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={handleClick}>Delete</div>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useDelete, useRecordContext } from 'react-admin';\n *\n * const DeleteButton = () => {\n *     const record = useRecordContext();\n *     const [deleteOne, { isPending, error }] = useDelete('likes', { id: record.id, previousData: record });\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={() => deleteOne()}>Delete</button>;\n * };\n *\n * @example // TypeScript\n * const [delete, { data }] = useDelete<Product>('products', { id, previousData: product });\n *                    \\-- data is Product\n */\nexport const useDelete = <\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n>(\n    resource?: string,\n    params: Partial<DeleteParams<RecordType>> = {},\n    options: UseDeleteOptions<RecordType, MutationError> = {}\n): UseDeleteResult<RecordType, MutationError> => {\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const { id, previousData } = params;\n    const { mutationMode = 'pessimistic', ...mutationOptions } = options;\n    const mode = useRef<MutationMode>(mutationMode);\n    const paramsRef = useRef<Partial<DeleteParams<RecordType>>>(params);\n    const snapshot = useRef<Snapshot>([]);\n    const hasCallTimeOnError = useRef(false);\n    const hasCallTimeOnSuccess = useRef(false);\n    const hasCallTimeOnSettled = useRef(false);\n\n    const updateCache = ({ resource, id }) => {\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        const now = Date.now();\n        const updatedAt = mode.current === 'undoable' ? now + 5 * 1000 : now;\n\n        const updateColl = (old: RecordType[]) => {\n            if (!old) return old;\n            const index = old.findIndex(\n                // eslint-disable-next-line eqeqeq\n                record => record.id == id\n            );\n            if (index === -1) {\n                return old;\n            }\n            return [...old.slice(0, index), ...old.slice(index + 1)];\n        };\n\n        type GetListResult = Omit<OriginalGetListResult, 'data'> & {\n            data?: RecordType[];\n        };\n\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getList'] },\n            (res: GetListResult) => {\n                if (!res || !res.data) return res;\n                const newCollection = updateColl(res.data);\n                const recordWasFound = newCollection.length < res.data.length;\n                return recordWasFound\n                    ? {\n                          data: newCollection,\n                          total: res.total ? res.total - 1 : undefined,\n                          pageInfo: res.pageInfo,\n                      }\n                    : res;\n            },\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getInfiniteList'] },\n            (\n                res: UseInfiniteQueryResult<\n                    InfiniteData<GetInfiniteListResult>\n                >['data']\n            ) => {\n                if (!res || !res.pages) return res;\n                return {\n                    ...res,\n                    pages: res.pages.map(page => {\n                        const newCollection = updateColl(page.data);\n                        const recordWasFound =\n                            newCollection.length < page.data.length;\n                        return recordWasFound\n                            ? {\n                                  ...page,\n                                  data: newCollection,\n                                  total: page.total\n                                      ? page.total - 1\n                                      : undefined,\n                                  pageInfo: page.pageInfo,\n                              }\n                            : page;\n                    }),\n                };\n            },\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getMany'] },\n            (coll: RecordType[]) =>\n                coll && coll.length > 0 ? updateColl(coll) : coll,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getManyReference'] },\n            (res: GetListResult) => {\n                if (!res || !res.data) return res;\n                const newCollection = updateColl(res.data);\n                const recordWasFound = newCollection.length < res.data.length;\n                return recordWasFound\n                    ? {\n                          data: newCollection,\n                          total: res.total! - 1,\n                      }\n                    : res;\n            },\n            { updatedAt }\n        );\n    };\n\n    const mutation = useMutation<\n        RecordType,\n        MutationError,\n        Partial<UseDeleteMutateParams<RecordType>>\n    >({\n        mutationFn: ({\n            resource: callTimeResource = resource,\n            id: callTimeId = paramsRef.current.id,\n            previousData: callTimePreviousData = paramsRef.current.previousData,\n            meta: callTimeMeta = paramsRef.current.meta,\n        } = {}) => {\n            if (!callTimeResource) {\n                throw new Error(\n                    'useDelete mutation requires a non-empty resource'\n                );\n            }\n            if (callTimeId == null) {\n                throw new Error('useDelete mutation requires a non-empty id');\n            }\n            return dataProvider\n                .delete<RecordType>(callTimeResource, {\n                    id: callTimeId,\n                    previousData: callTimePreviousData,\n                    meta: callTimeMeta,\n                })\n                .then(({ data }) => data);\n        },\n        ...mutationOptions,\n        onMutate: async (\n            variables: Partial<UseDeleteMutateParams<RecordType>>\n        ) => {\n            if (mutationOptions.onMutate) {\n                const userContext =\n                    (await mutationOptions.onMutate(variables)) || {};\n                return {\n                    snapshot: snapshot.current,\n                    // @ts-ignore\n                    ...userContext,\n                };\n            } else {\n                // Return a context object with the snapshot value\n                return { snapshot: snapshot.current };\n            }\n        },\n        onError: (\n            error: MutationError,\n            variables: Partial<UseDeleteMutateParams<RecordType>> = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(([key, value]) => {\n                    queryClient.setQueryData(key, value);\n                });\n            }\n\n            if (mutationOptions.onError && !hasCallTimeOnError.current) {\n                return mutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        },\n        onSuccess: (\n            data: RecordType,\n            variables: Partial<UseDeleteMutateParams<RecordType>> = {},\n            context: unknown\n        ) => {\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                const {\n                    resource: callTimeResource = resource,\n                    id: callTimeId = id,\n                } = variables;\n                updateCache({\n                    resource: callTimeResource,\n                    id: callTimeId,\n                });\n\n                if (\n                    mutationOptions.onSuccess &&\n                    !hasCallTimeOnSuccess.current\n                ) {\n                    mutationOptions.onSuccess(data, variables, context);\n                }\n                // call-time success callback is executed by react-query\n            }\n        },\n        onSettled: (\n            data: RecordType,\n            error: MutationError,\n            variables: Partial<UseDeleteMutateParams<RecordType>> = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(([queryKey]) => {\n                    queryClient.invalidateQueries({ queryKey });\n                });\n            }\n\n            if (mutationOptions.onSettled && !hasCallTimeOnSettled.current) {\n                return mutationOptions.onSettled(\n                    data,\n                    error,\n                    variables,\n                    context\n                );\n            }\n        },\n    });\n\n    const mutate = async (\n        callTimeResource: string | undefined = resource,\n        callTimeParams: Partial<DeleteParams<RecordType>> = {},\n        callTimeOptions: MutateOptions<\n            RecordType,\n            MutationError,\n            Partial<UseDeleteMutateParams<RecordType>>,\n            unknown\n        > & {\n            mutationMode?: MutationMode;\n            onSuccess?: (\n                data: RecordType | undefined,\n                variables: Partial<UseDeleteMutateParams<RecordType>>,\n                context: unknown\n            ) => void;\n        } = {}\n    ) => {\n        const { mutationMode, ...otherCallTimeOptions } = callTimeOptions;\n        hasCallTimeOnError.current = !!callTimeOptions.onError;\n        hasCallTimeOnSuccess.current = !!callTimeOptions.onSuccess;\n        hasCallTimeOnSettled.current = !!callTimeOptions.onSettled;\n\n        // store the hook time params *at the moment of the call*\n        // because they may change afterwards, which would break the undoable mode\n        // as the previousData would be overwritten by the optimistic update\n        paramsRef.current = params;\n\n        if (mutationMode) {\n            mode.current = mutationMode;\n        }\n\n        if (mode.current === 'pessimistic') {\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                otherCallTimeOptions\n            );\n        }\n\n        const {\n            id: callTimeId = id,\n            previousData: callTimePreviousData = previousData,\n        } = callTimeParams;\n\n        // optimistic update as documented in https://react-query-v5.tanstack.com/guides/optimistic-updates\n        // except we do it in a mutate wrapper instead of the onMutate callback\n        // to have access to success side effects\n\n        const queryKeys = [\n            [callTimeResource, 'getList'],\n            [callTimeResource, 'getInfiniteList'],\n            [callTimeResource, 'getMany'],\n            [callTimeResource, 'getManyReference'],\n        ];\n\n        /**\n         * Snapshot the previous values via queryClient.getQueriesData()\n         *\n         * The snapshotData ref will contain an array of tuples [query key, associated data]\n         *\n         * @example\n         * [\n         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n         * ]\n         *\n         * @see https://tanstack.com/query/v5/docs/react/reference/QueryClient#queryclientgetqueriesdata\n         */\n        snapshot.current = queryKeys.reduce(\n            (prev, queryKey) =>\n                prev.concat(queryClient.getQueriesData({ queryKey })),\n            [] as Snapshot\n        );\n\n        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n        await Promise.all(\n            snapshot.current.map(([queryKey]) =>\n                queryClient.cancelQueries({ queryKey })\n            )\n        );\n\n        // Optimistically update to the new value\n        updateCache({\n            resource: callTimeResource,\n            id: callTimeId,\n        });\n\n        // run the success callbacks during the next tick\n        setTimeout(() => {\n            if (callTimeOptions.onSuccess) {\n                callTimeOptions.onSuccess(\n                    callTimePreviousData,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            } else if (mutationOptions.onSuccess) {\n                mutationOptions.onSuccess(\n                    callTimePreviousData,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            }\n        }, 0);\n\n        if (mode.current === 'optimistic') {\n            // call the mutate method without success side effects\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                {\n                    onSettled: callTimeOptions.onSettled,\n                    onError: callTimeOptions.onError,\n                }\n            );\n        } else {\n            // undoable mutation: register the mutation for later\n            undoableEventEmitter.once('end', ({ isUndo }) => {\n                if (isUndo) {\n                    // rollback\n                    snapshot.current.forEach(([key, value]) => {\n                        queryClient.setQueryData(key, value);\n                    });\n                } else {\n                    // call the mutate method without success side effects\n                    mutation.mutate(\n                        { resource: callTimeResource, ...callTimeParams },\n                        {\n                            onSettled: callTimeOptions.onSettled,\n                            onError: callTimeOptions.onError,\n                        }\n                    );\n                }\n            });\n        }\n    };\n\n    const mutationResult = useMemo(\n        () => ({\n            isLoading: mutation.isPending,\n            ...mutation,\n        }),\n        [mutation]\n    );\n\n    return [useEvent(mutate), mutationResult];\n};\n\ntype Snapshot = [key: QueryKey, value: any][];\n\nexport interface UseDeleteMutateParams<RecordType extends RaRecord = any> {\n    resource?: string;\n    id?: RecordType['id'];\n    data?: Partial<RecordType>;\n    previousData?: any;\n    meta?: any;\n}\n\nexport type UseDeleteOptions<\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n> = UseMutationOptions<\n    RecordType,\n    MutationError,\n    Partial<UseDeleteMutateParams<RecordType>>\n> & {\n    mutationMode?: MutationMode;\n    onSuccess?: (\n        data: RecordType | undefined,\n        variables: Partial<UseDeleteMutateParams<RecordType>>,\n        context: unknown\n    ) => void;\n};\n\nexport type UseDeleteResult<\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n> = [\n    (\n        resource?: string,\n        params?: Partial<DeleteParams<RecordType>>,\n        options?: MutateOptions<\n            RecordType,\n            MutationError,\n            Partial<UseDeleteMutateParams<RecordType>>,\n            unknown\n        > & {\n            mutationMode?: MutationMode;\n        }\n    ) => Promise<void>,\n    UseMutationResult<\n        RecordType,\n        MutationError,\n        Partial<DeleteParams<RecordType> & { resource?: string }>,\n        unknown\n    > & { isLoading: boolean },\n];\n", "import { useMemo, useRef } from 'react';\nimport {\n    useMutation,\n    useQueryClient,\n    UseMutationOptions,\n    UseMutationResult,\n    MutateOptions,\n    QueryKey,\n    UseInfiniteQueryResult,\n    InfiniteData,\n} from '@tanstack/react-query';\n\nimport { useDataProvider } from './useDataProvider';\nimport undoableEventEmitter from './undoableEventEmitter';\nimport {\n    RaRecord,\n    DeleteManyParams,\n    MutationMode,\n    GetListResult as OriginalGetListResult,\n    GetInfiniteListResult,\n} from '../types';\nimport { useEvent } from '../util';\n\n/**\n * Get a callback to call the dataProvider.delete() method, the result and the loading state.\n *\n * @param {string} resource\n * @param {Params} params The delete parameters { ids }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { refresh(); } }\n * May include a mutation mode (optimistic/pessimistic/undoable), e.g. { mutationMode: 'undoable' }\n *\n * @typedef Params\n * @prop params.ids The resource identifiers, e.g. [123, 456]\n *\n * @returns The current mutation state. Destructure as [deleteMany, { data, error, isPending }].\n *\n * The return value updates according to the request state:\n *\n * - initial: [deleteMany, { isPending: false, isIdle: true }]\n * - start:   [deleteMany, { isPending: true }]\n * - success: [deleteMany, { data: [data from response], isPending: false, isSuccess: true }]\n * - error:   [deleteMany, { error: [error from response], isPending: false, isError: true }]\n *\n * The deleteMany() function must be called with a resource and a parameter object: deleteMany(resource, { ids, meta }, options)\n *\n * This hook uses react-query useMutation under the hood.\n * This means the state object contains mutate, isIdle, reset and other react-query methods.\n *\n * @see https://tanstack.com/query/v5/docs/react/reference/useMutation\n *\n * @example // set params when calling the deleteMany callback\n *\n * import { useDeleteMany } from 'react-admin';\n *\n * const BulkDeletePostsButton = ({ selectedIds }) => {\n *     const [deleteMany, { isPending, error }] = useDeleteMany();\n *     const handleClick = () => {\n *         deleteMany('posts', { ids: selectedIds })\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={handleClick}>Delete selected posts</button>;\n * };\n *\n * @example // set params when calling the hook\n *\n * import { useDeleteMany } from 'react-admin';\n *\n * const BulkDeletePostsButton = ({ selectedIds }) => {\n *     const [deleteMany, { isPending, error }] = useDeleteMany('posts', { ids: selectedIds });\n *     const handleClick = () => {\n *         deleteMany()\n *     }\n *     if (error) { return <p>ERROR</p>; }\n *     return <button disabled={isPending} onClick={handleClick}>Delete selected posts</button>;\n * };\n *\n * @example // TypeScript\n * const [deleteMany, { data }] = useDeleteMany<Product>('products', { ids });\n *                        \\-- data is Product\n */\nexport const useDeleteMany = <\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n>(\n    resource?: string,\n    params: Partial<DeleteManyParams<RecordType>> = {},\n    options: UseDeleteManyOptions<RecordType, MutationError> = {}\n): UseDeleteManyResult<RecordType, MutationError> => {\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const { ids } = params;\n    const { mutationMode = 'pessimistic', ...mutationOptions } = options;\n    const mode = useRef<MutationMode>(mutationMode);\n    const paramsRef = useRef<Partial<DeleteManyParams<RecordType>>>({});\n    const snapshot = useRef<Snapshot>([]);\n    const hasCallTimeOnError = useRef(false);\n    const hasCallTimeOnSuccess = useRef(false);\n    const hasCallTimeOnSettled = useRef(false);\n\n    const updateCache = ({ resource, ids }) => {\n        // hack: only way to tell react-query not to fetch this query for the next 5 seconds\n        // because setQueryData doesn't accept a stale time option\n        const now = Date.now();\n        const updatedAt = mode.current === 'undoable' ? now + 5 * 1000 : now;\n\n        const updateColl = (old: RecordType[]) => {\n            if (!old) return old;\n            let newCollection = [...old];\n            ids.forEach(id => {\n                const index = newCollection.findIndex(\n                    // eslint-disable-next-line eqeqeq\n                    record => record.id == id\n                );\n                if (index === -1) {\n                    return;\n                }\n                newCollection = [\n                    ...newCollection.slice(0, index),\n                    ...newCollection.slice(index + 1),\n                ];\n            });\n            return newCollection;\n        };\n\n        type GetListResult = Omit<OriginalGetListResult, 'data'> & {\n            data?: RecordType[];\n        };\n\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getList'] },\n            (res: GetListResult) => {\n                if (!res || !res.data) return res;\n                const newCollection = updateColl(res.data);\n                const recordWasFound = newCollection.length < res.data.length;\n                return recordWasFound\n                    ? {\n                          data: newCollection,\n                          total: res.total\n                              ? res.total -\n                                (res.data.length - newCollection.length)\n                              : undefined,\n                          pageInfo: res.pageInfo,\n                      }\n                    : res;\n            },\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getInfiniteList'] },\n            (\n                res: UseInfiniteQueryResult<\n                    InfiniteData<GetInfiniteListResult>\n                >['data']\n            ) => {\n                if (!res || !res.pages) return res;\n                return {\n                    ...res,\n                    pages: res.pages.map(page => {\n                        const newCollection = updateColl(page.data);\n                        const recordWasFound =\n                            newCollection.length < page.data.length;\n                        return recordWasFound\n                            ? {\n                                  ...page,\n                                  data: newCollection,\n                                  total: page.total\n                                      ? page.total -\n                                        (page.data.length -\n                                            newCollection.length)\n                                      : undefined,\n                                  pageInfo: page.pageInfo,\n                              }\n                            : page;\n                    }),\n                };\n            },\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getMany'] },\n            (coll: RecordType[]) =>\n                coll && coll.length > 0 ? updateColl(coll) : coll,\n            { updatedAt }\n        );\n        queryClient.setQueriesData(\n            { queryKey: [resource, 'getManyReference'] },\n            (res: GetListResult) => {\n                if (!res || !res.data) return res;\n                const newCollection = updateColl(res.data);\n                const recordWasFound = newCollection.length < res.data.length;\n                if (!recordWasFound) {\n                    return res;\n                }\n                if (res.total) {\n                    return {\n                        data: newCollection,\n                        total:\n                            res.total -\n                            (res.data.length - newCollection.length),\n                    };\n                }\n                if (res.pageInfo) {\n                    return {\n                        data: newCollection,\n                        pageInfo: res.pageInfo,\n                    };\n                }\n                throw new Error(\n                    'Found getList result in cache without total or pageInfo'\n                );\n            },\n            { updatedAt }\n        );\n    };\n\n    const mutation = useMutation<\n        RecordType['id'][],\n        MutationError,\n        Partial<UseDeleteManyMutateParams<RecordType>>\n    >({\n        mutationFn: ({\n            resource: callTimeResource = resource,\n            ids: callTimeIds = paramsRef.current.ids,\n            meta: callTimeMeta = paramsRef.current.meta,\n        } = {}) => {\n            if (!callTimeResource) {\n                throw new Error(\n                    'useDeleteMany mutation requires a non-empty resource'\n                );\n            }\n            if (!callTimeIds) {\n                throw new Error(\n                    'useDeleteMany mutation requires an array of ids'\n                );\n            }\n            if (callTimeIds.length === 0) {\n                return Promise.resolve([]);\n            }\n            return dataProvider\n                .deleteMany<RecordType>(callTimeResource, {\n                    ids: callTimeIds,\n                    meta: callTimeMeta,\n                })\n                .then(({ data }) => data || []);\n        },\n        ...mutationOptions,\n        onMutate: async (\n            variables: Partial<UseDeleteManyMutateParams<RecordType>>\n        ) => {\n            if (mutationOptions.onMutate) {\n                const userContext =\n                    (await mutationOptions.onMutate(variables)) || {};\n                return {\n                    snapshot: snapshot.current,\n                    // @ts-ignore\n                    ...userContext,\n                };\n            } else {\n                // Return a context object with the snapshot value\n                return { snapshot: snapshot.current };\n            }\n        },\n        onError: (\n            error: MutationError,\n            variables: Partial<UseDeleteManyMutateParams<RecordType>> = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // If the mutation fails, use the context returned from onMutate to rollback\n                context.snapshot.forEach(([key, value]) => {\n                    queryClient.setQueryData(key, value);\n                });\n            }\n\n            if (mutationOptions.onError && !hasCallTimeOnError.current) {\n                return mutationOptions.onError(error, variables, context);\n            }\n            // call-time error callback is executed by react-query\n        },\n        onSuccess: (\n            data: RecordType['id'][],\n            variables: Partial<UseDeleteManyMutateParams<RecordType>> = {},\n            context: unknown\n        ) => {\n            if (mode.current === 'pessimistic') {\n                // update the getOne and getList query cache with the new result\n                const {\n                    resource: callTimeResource = resource,\n                    ids: callTimeIds = ids,\n                } = variables;\n                updateCache({\n                    resource: callTimeResource,\n                    ids: callTimeIds,\n                });\n\n                if (\n                    mutationOptions.onSuccess &&\n                    !hasCallTimeOnSuccess.current\n                ) {\n                    mutationOptions.onSuccess(data, variables, context);\n                }\n                // call-time success callback is executed by react-query\n            }\n        },\n        onSettled: (\n            data: RecordType['id'][],\n            error: MutationError,\n            variables: Partial<UseDeleteManyMutateParams<RecordType>> = {},\n            context: { snapshot: Snapshot }\n        ) => {\n            if (mode.current === 'optimistic' || mode.current === 'undoable') {\n                // Always refetch after error or success:\n                context.snapshot.forEach(([queryKey]) => {\n                    queryClient.invalidateQueries({ queryKey });\n                });\n            }\n\n            if (mutationOptions.onSettled && !hasCallTimeOnSettled.current) {\n                return mutationOptions.onSettled(\n                    data,\n                    error,\n                    variables,\n                    context\n                );\n            }\n        },\n    });\n\n    const mutate = async (\n        callTimeResource: string | undefined = resource,\n        callTimeParams: Partial<DeleteManyParams<RecordType>> = {},\n        callTimeOptions: MutateOptions<\n            RecordType['id'][],\n            unknown,\n            Partial<UseDeleteManyMutateParams<RecordType>>,\n            unknown\n        > & { mutationMode?: MutationMode } = {}\n    ) => {\n        const { mutationMode, ...otherCallTimeOptions } = callTimeOptions;\n        hasCallTimeOnError.current = !!callTimeOptions.onError;\n        hasCallTimeOnSuccess.current = !!callTimeOptions.onSuccess;\n        hasCallTimeOnSettled.current = !!callTimeOptions.onSettled;\n        // store the hook time params *at the moment of the call*\n        // because they may change afterwards, which would break the undoable mode\n        // as the previousData would be overwritten by the optimistic update\n        paramsRef.current = params;\n\n        if (mutationMode) {\n            mode.current = mutationMode;\n        }\n\n        if (mode.current === 'pessimistic') {\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                {\n                    onSuccess: otherCallTimeOptions.onSuccess,\n                    onSettled: otherCallTimeOptions.onSettled,\n                    onError: otherCallTimeOptions.onError,\n                }\n            );\n        }\n\n        const { ids: callTimeIds = ids } = callTimeParams;\n        if (!callTimeIds) {\n            throw new Error('useDeleteMany mutation requires an array of ids');\n        }\n\n        // optimistic update as documented in https://react-query-v5.tanstack.com/guides/optimistic-updates\n        // except we do it in a mutate wrapper instead of the onMutate callback\n        // to have access to success side effects\n\n        const queryKeys = [\n            [callTimeResource, 'getList'],\n            [callTimeResource, 'getInfiniteList'],\n            [callTimeResource, 'getMany'],\n            [callTimeResource, 'getManyReference'],\n        ];\n\n        /**\n         * Snapshot the previous values via queryClient.getQueriesData()\n         *\n         * The snapshotData ref will contain an array of tuples [query key, associated data]\n         *\n         * @example\n         * [\n         *   [['posts', 'getList'], { data: [{ id: 1, title: 'Hello' }], total: 1 }],\n         *   [['posts', 'getMany'], [{ id: 1, title: 'Hello' }]],\n         * ]\n         *\n         * @see https://tanstack.com/query/v5/docs/react/reference/QueryClient#queryclientgetqueriesdata\n         */\n        snapshot.current = queryKeys.reduce(\n            (prev, queryKey) =>\n                prev.concat(queryClient.getQueriesData({ queryKey })),\n            [] as Snapshot\n        );\n\n        // Cancel any outgoing re-fetches (so they don't overwrite our optimistic update)\n        await Promise.all(\n            snapshot.current.map(([queryKey]) =>\n                queryClient.cancelQueries({ queryKey })\n            )\n        );\n\n        // Optimistically update to the new value\n        updateCache({\n            resource: callTimeResource,\n            ids: callTimeIds,\n        });\n\n        // run the success callbacks during the next tick\n        setTimeout(() => {\n            if (otherCallTimeOptions.onSuccess) {\n                otherCallTimeOptions.onSuccess(\n                    callTimeIds,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            } else if (mutationOptions.onSuccess) {\n                mutationOptions.onSuccess(\n                    callTimeIds,\n                    { resource: callTimeResource, ...callTimeParams },\n                    { snapshot: snapshot.current }\n                );\n            }\n        }, 0);\n\n        if (mode.current === 'optimistic') {\n            // call the mutate method without success side effects\n            return mutation.mutate(\n                { resource: callTimeResource, ...callTimeParams },\n                {\n                    onSettled: otherCallTimeOptions.onSettled,\n                    onError: otherCallTimeOptions.onError,\n                }\n            );\n        } else {\n            // undoable mutation: register the mutation for later\n            undoableEventEmitter.once('end', ({ isUndo }) => {\n                if (isUndo) {\n                    // rollback\n                    snapshot.current.forEach(([key, value]) => {\n                        queryClient.setQueryData(key, value);\n                    });\n                } else {\n                    // call the mutate method without success side effects\n                    mutation.mutate(\n                        { resource: callTimeResource, ...callTimeParams },\n                        {\n                            onSettled: otherCallTimeOptions.onSettled,\n                            onError: otherCallTimeOptions.onError,\n                        }\n                    );\n                }\n            });\n        }\n    };\n\n    const mutationResult = useMemo(\n        () => ({\n            isLoading: mutation.isPending,\n            ...mutation,\n        }),\n        [mutation]\n    );\n\n    return [useEvent(mutate), mutationResult];\n};\n\ntype Snapshot = [key: QueryKey, value: any][];\n\nexport interface UseDeleteManyMutateParams<RecordType extends RaRecord = any> {\n    resource?: string;\n    ids?: RecordType['id'][];\n    meta?: any;\n}\n\nexport type UseDeleteManyOptions<\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n> = UseMutationOptions<\n    RecordType['id'][],\n    MutationError,\n    Partial<UseDeleteManyMutateParams<RecordType>>\n> & { mutationMode?: MutationMode };\n\nexport type UseDeleteManyResult<\n    RecordType extends RaRecord = any,\n    MutationError = unknown,\n> = [\n    (\n        resource?: string,\n        params?: Partial<DeleteManyParams<RecordType>>,\n        options?: MutateOptions<\n            RecordType['id'][],\n            MutationError,\n            Partial<UseDeleteManyMutateParams<RecordType>>,\n            unknown\n        > & { mutationMode?: MutationMode }\n    ) => Promise<void>,\n    UseMutationResult<\n        RecordType['id'][],\n        MutationError,\n        Partial<DeleteManyParams<RecordType> & { resource?: string }>,\n        unknown\n    > & { isLoading: boolean },\n];\n", "import {\n    InfiniteData,\n    QueryKey,\n    useInfiniteQuery,\n    UseInfiniteQueryOptions,\n    UseInfiniteQueryResult,\n    useQueryClient,\n} from '@tanstack/react-query';\n\nimport { RaRecord, GetListParams, GetInfiniteListResult } from '../types';\nimport { useDataProvider } from './useDataProvider';\nimport { useEffect, useRef } from 'react';\nimport { useEvent } from '../util';\n\nconst MAX_DATA_LENGTH_TO_CACHE = 100;\n\n/**\n * Call the dataProvider.getList() method and return the resolved result\n * as well as the loading state. The return from useInfiniteGetList is equivalent to the return from react-hook form useInfiniteQuery.\n *\n * @see https://tanstack.com/query/v5/docs/react/reference/useInfiniteQuery\n *\n * This hook will return the cached result when called a second time\n * with the same parameters, until the response arrives.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Params} params The getList parameters { pagination, sort, filter, meta }\n * @param {Object} options Options object to pass to the queryClient.\n * May include side effects to be executed upon success or failure, e.g. { onSuccess: () => { fetchNextPage(); } }\n *\n * @typedef Params\n * @prop params.pagination The request pagination { page, perPage }, e.g. { page: 1, perPage: 10 }\n * @prop params.sort The request sort { field, order }, e.g. { field: 'id', order: 'DESC' }\n * @prop params.filter The request filters, e.g. { title: 'hello, world' }\n * @prop params.meta Optional meta parameters\n *\n * @returns The current request state. Destructure as { data, total, error, isPending, isSuccess, hasNextPage, fetchNextPage }.\n *\n * @example\n *\n * import { useInfiniteGetList } from 'react-admin';\n *\n * const LatestNews = () => {\n *     const { data, total, isPending, error, hasNextPage, fetchNextPage } = useInfiniteGetList(\n *         'posts',\n *         { pagination: { page: 1, perPage: 10 }, sort: { field: 'published_at', order: 'DESC' } }\n *     );\n *     if (isPending) { return <Loading />; }\n *     if (error) { return <p>ERROR</p>; }\n *     return (\n *        <>\n *            <ul>\n *                {data?.pages.map(page => {\n *                    return page.data.map(post => (\n *                        <li key={post.id}>{post.title}</li>\n *                    ));\n *                })}\n *            </ul>\n *            <div>\n *                <button disabled={!hasNextPage} onClick={() => fetchNextPage()}>\n *                    Fetch next page\n *                </button>\n *            </div>\n *        </>\n *    );\n * };\n */\n\nexport const useInfiniteGetList = <RecordType extends RaRecord = any>(\n    resource: string,\n    params: Partial<GetListParams> = {},\n    options: UseInfiniteGetListOptions<RecordType> = {}\n): UseInfiniteGetListHookValue<RecordType> => {\n    const {\n        pagination = { page: 1, perPage: 25 },\n        sort = { field: 'id', order: 'DESC' },\n        filter = {},\n        meta,\n    } = params;\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const {\n        onSuccess = noop,\n        onError = noop,\n        onSettled = noop,\n        ...queryOptions\n    } = options;\n    const onSuccessEvent = useEvent(onSuccess);\n    const onErrorEvent = useEvent(onError);\n    const onSettledEvent = useEvent(onSettled);\n\n    const result = useInfiniteQuery<\n        GetInfiniteListResult<RecordType>,\n        Error,\n        InfiniteData<GetInfiniteListResult<RecordType>>,\n        QueryKey,\n        number\n    >({\n        queryKey: [\n            resource,\n            'getInfiniteList',\n            { pagination, sort, filter, meta },\n        ],\n        queryFn: queryParams => {\n            const { pageParam = pagination.page } = queryParams;\n            return dataProvider\n                .getList<RecordType>(resource, {\n                    pagination: {\n                        page: pageParam,\n                        perPage: pagination.perPage,\n                    },\n                    sort,\n                    filter,\n                    meta,\n                    signal:\n                        dataProvider.supportAbortSignal === true\n                            ? queryParams.signal\n                            : undefined,\n                })\n                .then(({ data, pageInfo, total }) => ({\n                    data,\n                    total,\n                    pageParam,\n                    pageInfo,\n                }));\n        },\n        initialPageParam: pagination.page,\n        ...queryOptions,\n        getNextPageParam: lastLoadedPage => {\n            if (lastLoadedPage.pageInfo) {\n                return lastLoadedPage.pageInfo.hasNextPage\n                    ? lastLoadedPage.pageParam + 1\n                    : undefined;\n            }\n            const totalPages = Math.ceil(\n                (lastLoadedPage.total || 0) / pagination.perPage\n            );\n\n            return lastLoadedPage.pageParam < totalPages\n                ? Number(lastLoadedPage.pageParam) + 1\n                : undefined;\n        },\n        getPreviousPageParam: lastLoadedPage => {\n            if (lastLoadedPage.pageInfo) {\n                return lastLoadedPage.pageInfo.hasPreviousPage\n                    ? lastLoadedPage.pageParam - 1\n                    : undefined;\n            }\n\n            return lastLoadedPage.pageParam === 1\n                ? undefined\n                : lastLoadedPage.pageParam - 1;\n        },\n    });\n\n    const metaValue = useRef(meta);\n    const resourceValue = useRef(resource);\n\n    useEffect(() => {\n        metaValue.current = meta;\n    }, [meta]);\n\n    useEffect(() => {\n        resourceValue.current = resource;\n    }, [resource]);\n\n    useEffect(() => {\n        if (\n            result.data === undefined ||\n            result.error != null ||\n            result.isFetching\n        )\n            return;\n        // optimistically populate the getOne cache\n        const allPagesDataLength = result.data.pages.reduce(\n            (acc, page) => acc + page.data.length,\n            0\n        );\n        if (allPagesDataLength <= MAX_DATA_LENGTH_TO_CACHE) {\n            result.data.pages.forEach(page => {\n                page.data.forEach(record => {\n                    queryClient.setQueryData(\n                        [\n                            resourceValue.current,\n                            'getOne',\n                            { id: String(record.id), meta: metaValue.current },\n                        ],\n                        oldRecord => oldRecord ?? record\n                    );\n                });\n            });\n        }\n\n        onSuccessEvent(result.data);\n    }, [\n        onSuccessEvent,\n        queryClient,\n        result.data,\n        result.error,\n        result.isFetching,\n    ]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return (\n        result.data\n            ? {\n                  ...result,\n                  data: result.data,\n                  total: result.data?.pages[0]?.total ?? undefined,\n              }\n            : result\n    ) as UseInfiniteQueryResult<\n        InfiniteData<GetInfiniteListResult<RecordType>>,\n        Error\n    > & {\n        total?: number;\n    };\n};\n\nconst noop = () => undefined;\n\nexport type UseInfiniteGetListOptions<RecordType extends RaRecord = any> = Omit<\n    UseInfiniteQueryOptions<\n        GetInfiniteListResult<RecordType>,\n        Error,\n        InfiniteData<GetInfiniteListResult<RecordType>>,\n        GetInfiniteListResult<RecordType>,\n        QueryKey,\n        number\n    >,\n    | 'queryKey'\n    | 'queryFn'\n    | 'getNextPageParam'\n    | 'getPreviousPageParam'\n    | 'initialPageParam'\n> & {\n    onSuccess?: (data: InfiniteData<GetInfiniteListResult<RecordType>>) => void;\n    onError?: (error: Error) => void;\n    onSettled?: (\n        data?: InfiniteData<GetInfiniteListResult<RecordType>>,\n        error?: Error | null\n    ) => void;\n};\n\nexport type UseInfiniteGetListHookValue<RecordType extends RaRecord = any> =\n    UseInfiniteQueryResult<InfiniteData<GetInfiniteListResult<RecordType>>> & {\n        total?: number;\n        pageParam?: number;\n    };\n", "import {\n    useState,\n    useCallback,\n    ReactEventHandler,\n    SyntheticEvent,\n} from 'react';\nimport { UseMutationOptions } from '@tanstack/react-query';\n\nimport { useDelete } from '../../dataProvider';\nimport { useUnselect } from '../../controller';\nimport { useRedirect, RedirectionSideEffect } from '../../routing';\nimport { useNotify } from '../../notification';\nimport { RaRecord, MutationMode, DeleteParams } from '../../types';\nimport { useResourceContext } from '../../core';\n\n/**\n * Prepare a set of callbacks for a delete button guarded by confirmation dialog\n *\n * @example\n *\n * const DeleteButton = ({\n *     resource,\n *     record,\n *     redirect,\n *     onClick,\n *     ...rest\n * }) => {\n *     const {\n *         open,\n *         isPending,\n *         handleDialogOpen,\n *         handleDialogClose,\n *         handleDelete,\n *     } = useDeleteWithConfirmController({\n *         resource,\n *         record,\n *         redirect,\n *         onClick,\n *     });\n *\n *     return (\n *         <Fragment>\n *             <Button\n *                 onClick={handleDialogOpen}\n *                 label=\"ra.action.delete\"\n *                 {...rest}\n *             >\n *                 {icon}\n *             </Button>\n *             <Confirm\n *                 isOpen={open}\n *                 loading={isPending}\n *                 title=\"ra.message.delete_title\"\n *                 content=\"ra.message.delete_content\"\n *                 translateOptions={{\n *                     name: resource,\n *                     id: record.id,\n *                 }}\n *                 onConfirm={handleDelete}\n *                 onClose={handleDialogClose}\n *             />\n *         </Fragment>\n *     );\n * };\n */\nconst useDeleteWithConfirmController = <RecordType extends RaRecord = any>(\n    props: UseDeleteWithConfirmControllerParams<RecordType>\n): UseDeleteWithConfirmControllerReturn => {\n    const {\n        record,\n        redirect: redirectTo = 'list',\n        mutationMode,\n        onClick,\n        mutationOptions = {},\n        successMessage = 'ra.notification.deleted',\n    } = props;\n    const { meta: mutationMeta, ...otherMutationOptions } = mutationOptions;\n    const resource = useResourceContext(props);\n    const [open, setOpen] = useState(false);\n    const notify = useNotify();\n    const unselect = useUnselect(resource);\n    const redirect = useRedirect();\n    const [deleteOne, { isPending }] = useDelete<RecordType>(\n        resource,\n        undefined,\n        {\n            onSuccess: () => {\n                setOpen(false);\n                notify(successMessage, {\n                    type: 'info',\n                    messageArgs: { smart_count: 1 },\n                    undoable: mutationMode === 'undoable',\n                });\n                record && unselect([record.id]);\n                redirect(redirectTo, resource);\n            },\n            onError: (error: Error) => {\n                setOpen(false);\n\n                notify(\n                    typeof error === 'string'\n                        ? error\n                        : error.message || 'ra.notification.http_error',\n                    {\n                        type: 'error',\n                        messageArgs: {\n                            _:\n                                typeof error === 'string'\n                                    ? error\n                                    : error && error.message\n                                      ? error.message\n                                      : undefined,\n                        },\n                    }\n                );\n            },\n        }\n    );\n\n    const handleDialogOpen = e => {\n        setOpen(true);\n        e.stopPropagation();\n    };\n\n    const handleDialogClose = e => {\n        setOpen(false);\n        e.stopPropagation();\n    };\n\n    const handleDelete = useCallback(\n        event => {\n            event.stopPropagation();\n            if (!record) {\n                throw new Error(\n                    'The record cannot be deleted because no record has been passed'\n                );\n            }\n            deleteOne(\n                resource,\n                {\n                    id: record.id,\n                    previousData: record,\n                    meta: mutationMeta,\n                },\n                {\n                    mutationMode,\n                    ...otherMutationOptions,\n                }\n            );\n            if (typeof onClick === 'function') {\n                onClick(event);\n            }\n        },\n        [\n            deleteOne,\n            mutationMeta,\n            mutationMode,\n            otherMutationOptions,\n            onClick,\n            record,\n            resource,\n        ]\n    );\n\n    return {\n        open,\n        isPending,\n        isLoading: isPending,\n        handleDialogOpen,\n        handleDialogClose,\n        handleDelete,\n    };\n};\n\nexport interface UseDeleteWithConfirmControllerParams<\n    RecordType extends RaRecord = any,\n    MutationOptionsError = unknown,\n> {\n    mutationMode?: MutationMode;\n    record?: RecordType;\n    redirect?: RedirectionSideEffect;\n    resource?: string;\n    onClick?: ReactEventHandler<any>;\n    mutationOptions?: UseMutationOptions<\n        RecordType,\n        MutationOptionsError,\n        DeleteParams<RecordType>\n    >;\n    successMessage?: string;\n}\n\nexport interface UseDeleteWithConfirmControllerReturn {\n    open: boolean;\n    isLoading: boolean;\n    isPending: boolean;\n    handleDialogOpen: (e: SyntheticEvent) => void;\n    handleDialogClose: (e: SyntheticEvent) => void;\n    handleDelete: ReactEventHandler<any>;\n}\n\nexport default useDeleteWithConfirmController;\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport {\n    useCreateController,\n    CreateControllerProps,\n} from './useCreateController';\nimport { CreateContextProvider } from './CreateContextProvider';\nimport { Identifier, RaRecord } from '../../types';\nimport { ResourceContextProvider } from '../../core';\n\n/**\n * Call useCreateController and put the value in a CreateContext\n *\n * Base class for <Create> components, without UI.\n *\n * Accepts any props accepted by useCreateController:\n * - id: The record identifier\n * - resource: The resource\n *\n * @example // Custom edit layout\n *\n * const PostCreate = () => (\n *     <CreateBase>\n *         <Grid container>\n *             <Grid item xs={8}>\n *                 <SimpleForm>\n *                     ...\n *                 </SimpleForm>\n *             </Grid>\n *             <Grid item xs={4}>\n *                 Create instructions...\n *             </Grid>\n *         </Grid>\n *         <div>\n *             Post related links...\n *         </div>\n *     </CreateBase>\n * );\n */\nexport const CreateBase = <\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n>({\n    children,\n    ...props\n}: CreateControllerProps<RecordType, Error, ResultRecordType> & {\n    children: ReactNode;\n}) => {\n    const controllerProps = useCreateController<\n        RecordType,\n        Error,\n        ResultRecordType\n    >(props);\n    const body = (\n        <CreateContextProvider value={controllerProps}>\n            {children}\n        </CreateContextProvider>\n    );\n    return props.resource ? (\n        // support resource override via props\n        <ResourceContextProvider value={props.resource}>\n            {body}\n        </ResourceContextProvider>\n    ) : (\n        body\n    );\n};\n", "import { useCallback } from 'react';\nimport { parse } from 'query-string';\nimport { useLocation, Location } from 'react-router-dom';\nimport { UseMutationOptions } from '@tanstack/react-query';\n\nimport { useAuthenticated } from '../../auth';\nimport {\n    HttpError,\n    useCreate,\n    UseCreateMutateParams,\n} from '../../dataProvider';\nimport { useRedirect, RedirectionSideEffect } from '../../routing';\nimport { useNotify } from '../../notification';\nimport {\n    SaveContextValue,\n    SaveHandlerCallbacks,\n    useMutationMiddlewares,\n} from '../saveContext';\nimport { useTranslate } from '../../i18n';\nimport { Identifier, RaRecord, TransformData } from '../../types';\nimport {\n    useResourceContext,\n    useResourceDefinition,\n    useGetResourceLabel,\n} from '../../core';\n\n/**\n * Prepare data for the Create view\n *\n * @param {Object} props The props passed to the Create component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Create view\n *\n * @example\n *\n * import { useCreateController } from 'react-admin';\n * import CreateView from './CreateView';\n *\n * const MyCreate = props => {\n *     const controllerProps = useCreateController(props);\n *     return <CreateView {...controllerProps} {...props} />;\n * }\n */\nexport const useCreateController = <\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    MutationOptionsError = Error,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n>(\n    props: CreateControllerProps<\n        RecordType,\n        MutationOptionsError,\n        ResultRecordType\n    > = {}\n): CreateControllerResult<RecordType> => {\n    const {\n        disableAuthentication,\n        record,\n        redirect: redirectTo,\n        transform,\n        mutationOptions = {},\n    } = props;\n\n    useAuthenticated({ enabled: !disableAuthentication });\n    const resource = useResourceContext(props);\n    if (!resource) {\n        throw new Error(\n            'useCreateController requires a non-empty resource prop or context'\n        );\n    }\n    const { hasEdit, hasShow } = useResourceDefinition(props);\n    const finalRedirectTo =\n        redirectTo ?? getDefaultRedirectRoute(hasShow, hasEdit);\n    const location = useLocation();\n    const translate = useTranslate();\n    const notify = useNotify();\n    const redirect = useRedirect();\n    const recordToUse = record ?? getRecordFromLocation(location) ?? undefined;\n    const { onSuccess, onError, meta, ...otherMutationOptions } =\n        mutationOptions;\n    const {\n        registerMutationMiddleware,\n        getMutateWithMiddlewares,\n        unregisterMutationMiddleware,\n    } = useMutationMiddlewares();\n\n    const [create, { isPending: saving }] = useCreate<\n        RecordType,\n        MutationOptionsError,\n        ResultRecordType\n    >(resource, undefined, {\n        onSuccess: async (data, variables, context) => {\n            if (onSuccess) {\n                return onSuccess(data, variables, context);\n            }\n\n            notify('ra.notification.created', {\n                type: 'info',\n                messageArgs: { smart_count: 1 },\n            });\n            redirect(finalRedirectTo, resource, data.id, data);\n        },\n        onError: (error: MutationOptionsError, variables, context) => {\n            if (onError) {\n                return onError(error, variables, context);\n            }\n            // Don't trigger a notification if this is a validation error\n            // (notification will be handled by the useNotifyIsFormInvalid hook)\n            const validationErrors = (error as HttpError)?.body?.errors;\n            const hasValidationErrors =\n                !!validationErrors && Object.keys(validationErrors).length > 0;\n            if (!hasValidationErrors) {\n                notify(\n                    typeof error === 'string'\n                        ? error\n                        : (error as Error).message ||\n                              'ra.notification.http_error',\n                    {\n                        type: 'error',\n                        messageArgs: {\n                            _:\n                                typeof error === 'string'\n                                    ? error\n                                    : error instanceof Error ||\n                                        (typeof error === 'object' &&\n                                            error !== null &&\n                                            error.hasOwnProperty('message'))\n                                      ? // @ts-ignore\n                                        error.message\n                                      : undefined,\n                        },\n                    }\n                );\n            }\n        },\n        ...otherMutationOptions,\n        returnPromise: true,\n        getMutateWithMiddlewares,\n    });\n\n    const save = useCallback(\n        (\n            data: Partial<RecordType>,\n            {\n                transform: transformFromSave,\n                meta: metaFromSave,\n                ...callTimeOptions\n            } = {} as SaveHandlerCallbacks\n        ) =>\n            Promise.resolve(\n                transformFromSave\n                    ? transformFromSave(data)\n                    : transform\n                      ? transform(data)\n                      : data\n            ).then(async (data: Partial<RecordType>) => {\n                try {\n                    await create(\n                        resource,\n                        { data, meta: metaFromSave ?? meta },\n                        callTimeOptions\n                    );\n                } catch (error) {\n                    if (\n                        (error instanceof HttpError ||\n                            (typeof error === 'object' &&\n                                error !== null &&\n                                error.hasOwnProperty('body'))) &&\n                        error.body?.errors != null\n                    ) {\n                        return error.body.errors;\n                    }\n                }\n            }),\n        [create, meta, resource, transform]\n    );\n\n    const getResourceLabel = useGetResourceLabel();\n    const defaultTitle = translate('ra.page.create', {\n        name: getResourceLabel(resource, 1),\n    });\n\n    return {\n        isFetching: false,\n        isLoading: false,\n        isPending: saving,\n        saving,\n        defaultTitle,\n        save,\n        resource,\n        record: recordToUse,\n        redirect: finalRedirectTo,\n        registerMutationMiddleware,\n        unregisterMutationMiddleware,\n    };\n};\n\nexport interface CreateControllerProps<\n    RecordType extends Omit<RaRecord, 'id'> = any,\n    MutationOptionsError = Error,\n    ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n> {\n    disableAuthentication?: boolean;\n    hasEdit?: boolean;\n    hasShow?: boolean;\n    record?: Partial<RecordType>;\n    redirect?: RedirectionSideEffect;\n    resource?: string;\n    mutationOptions?: UseMutationOptions<\n        ResultRecordType,\n        MutationOptionsError,\n        UseCreateMutateParams<RecordType>\n    > & { meta?: any };\n    transform?: TransformData;\n}\n\nexport interface CreateControllerResult<\n    RecordType extends Omit<RaRecord, 'id'> = any,\n> extends SaveContextValue {\n    defaultTitle?: string;\n    isFetching: boolean;\n    isPending: boolean;\n    isLoading: boolean;\n    record?: Partial<RecordType>;\n    redirect: RedirectionSideEffect;\n    resource: string;\n}\n\n/**\n * Get the initial record from the location, whether it comes from the location\n * state or is serialized in the url search part.\n */\nexport const getRecordFromLocation = ({ state, search }: Location) => {\n    if (state && (state as StateWithRecord).record) {\n        return (state as StateWithRecord).record;\n    }\n    if (search) {\n        try {\n            const searchParams = parse(search);\n            if (searchParams.source) {\n                if (Array.isArray(searchParams.source)) {\n                    console.error(\n                        `Failed to parse location search parameter '${search}'. To pre-fill some fields in the Create form, pass a stringified source parameter (e.g. '?source={\"title\":\"foo\"}')`\n                    );\n                    return;\n                }\n                return JSON.parse(searchParams.source);\n            }\n        } catch (e) {\n            console.error(\n                `Failed to parse location search parameter '${search}'. To pre-fill some fields in the Create form, pass a stringified source parameter (e.g. '?source={\"title\":\"foo\"}')`\n            );\n        }\n    }\n    return null;\n};\n\ntype StateWithRecord = {\n    record?: Partial<RaRecord>;\n};\n\nconst getDefaultRedirectRoute = (hasShow, hasEdit) => {\n    if (hasEdit) {\n        return 'edit';\n    }\n    if (hasShow) {\n        return 'show';\n    }\n    return 'list';\n};\n", "import { createContext } from 'react';\nimport {\n    RaRecord,\n    OnError,\n    OnSuccess,\n    TransformData,\n    MutationMode,\n} from '../../types';\nimport { Middleware } from './useMutationMiddlewares';\n\nexport interface SaveContextValue<\n    RecordType extends RaRecord = any,\n    MutateFunc extends (...args: any[]) => any = (...args: any[]) => any,\n> {\n    save?: SaveHandler<RecordType>;\n    /**\n     * @deprecated. Rely on the form isSubmitting value instead\n     */\n    saving?: boolean;\n    mutationMode?: MutationMode;\n    registerMutationMiddleware?: (callback: Middleware<MutateFunc>) => void;\n    unregisterMutationMiddleware?: (callback: Middleware<MutateFunc>) => void;\n}\n\nexport type SaveHandler<RecordType> = (\n    record: Partial<RecordType>,\n    callbacks?: SaveHandlerCallbacks\n) => Promise<void | RecordType> | Record<string, string>;\n\nexport type SaveHandlerCallbacks = {\n    onSuccess?: OnSuccess;\n    onError?: OnError;\n    transform?: TransformData;\n    meta?: any;\n};\nexport const SaveContext = createContext<SaveContextValue>({});\n", "import * as React from 'react';\nimport { SaveContext } from './SaveContext';\n\nexport const SaveContextProvider = ({ children, value }) => (\n    <SaveContext.Provider value={value}>{children}</SaveContext.Provider>\n);\n", "import { useMemo } from 'react';\nimport pick from 'lodash/pick';\nimport { SaveContextValue } from './SaveContext';\n\n/**\n * This hook extracts the `save`, `saving` and mutationMode properties from either the `CreateContext` or `EditContext`. This ensures the `SaveContext` doesn't rerender when those two contexts have other properties changes.\n */\nexport const usePickSaveContext = <\n    ContextType extends SaveContextValue = SaveContextValue,\n>(\n    context: ContextType\n): SaveContextValue => {\n    const value = useMemo(\n        () =>\n            pick(context, [\n                'save',\n                'saving',\n                'mutationMode',\n                'registerMutationMiddleware',\n                'unregisterMutationMiddleware',\n            ]),\n        /* eslint-disable react-hooks/exhaustive-deps */\n        [\n            context.save,\n            context.saving,\n            context.mutationMode,\n            context.registerMutationMiddleware,\n            context.unregisterMutationMiddleware,\n        ]\n        /* eslint-enable react-hooks/exhaustive-deps */\n    );\n\n    return value;\n};\n", "import { useContext } from 'react';\nimport { SaveContext, SaveContextValue } from './SaveContext';\n/**\n * Get the save() function and its status\n *\n * Used in forms.\n *\n * @example\n *\n * const {\n *     save,\n *     saving\n * } = useSaveContext();\n */\nexport const useSaveContext = <\n    PropsType extends SaveContextValue = SaveContextValue,\n>(\n    _props?: PropsType\n): SaveContextValue => {\n    return useContext(SaveContext);\n};\n", "import { useCallback, useMemo, useRef } from 'react';\n\n/**\n * Internal hook used to handle mutation middlewares.\n *\n * @example\n * // We have a form creating an order for a new customer.\n * // The form contains the customer fields in addition to the order fields\n * // but they should be saved as a new customer resource record\n * // and the order should only reference this new customer\n * type Order = { id: string; reference: string };\n * type OrderCreateFormData = { id: string; reference: string; customer: Customer };\n * type Customer = { id: string; email: string; firstName: string; lastName: string };\n *\n * const CustomerForm = props => {\n *     const [createCustomer] = useCreate<Customer>();\n *     const middleware: Middleware<UseCreateResult<OrderCreateFormData>[0]> = useCallback(async (resource, params, next) => {\n *         const { data } = params;\n *         const { user, ...orderData } = data;\n *         const { data = newCustomer } = await createCustomer('customers', { data: user });\n *         const orderDataWithCustomer = { ...orderData, customerId: newCustomer.id };\n *         next(resource, { data: orderDataWithCustomer });\n *     }, [createCustomer]);\n *     useRegisterMutationMiddleware(middleware);\n *\n *     return (\n *         <>\n *             <TextInput source=\"user.email\" />\n *             <TextInput source=\"user.firstName\" />\n *             <TextInput source=\"user.lastName\" />\n *         </>\n *     );\n * }\n */\nexport const useMutationMiddlewares = <\n    MutateFunc extends (...args: any[]) => any = (...args: any[]) => any,\n>(): UseMutationMiddlewaresResult<MutateFunc> => {\n    const callbacks = useRef<Middleware<MutateFunc>[]>([]);\n\n    const registerMutationMiddleware = useCallback(\n        (callback: Middleware<MutateFunc>) => {\n            callbacks.current.push(callback);\n        },\n        []\n    );\n\n    const unregisterMutationMiddleware = useCallback(\n        (callback: Middleware<MutateFunc>) => {\n            callbacks.current = callbacks.current.filter(cb => cb !== callback);\n        },\n        []\n    );\n\n    const getMutateWithMiddlewares = useCallback((fn: MutateFunc) => {\n        // Stores the current callbacks in a closure to avoid losing them if the calling component is unmounted\n        const currentCallbacks = [...callbacks.current];\n        return (...args: Parameters<MutateFunc>): ReturnType<MutateFunc> => {\n            let index = currentCallbacks.length - 1;\n\n            // Called by middlewares to call the next middleware function\n            // Should take the same arguments as the original mutation function\n            const next = (...newArgs: any) => {\n                // Decrement the middlewares counter so that when next is called again, we\n                // call the next middleware\n                index--;\n\n                // If there are no more middlewares, we call the original mutation function\n                if (index >= 0) {\n                    return currentCallbacks[index](...newArgs, next);\n                } else {\n                    return fn(...newArgs);\n                }\n            };\n\n            if (currentCallbacks.length > 0) {\n                // Call the first middleware with the same args as the original mutation function\n                // with an additional next function\n                return currentCallbacks[index](...args, next);\n            }\n\n            return fn(...args);\n        };\n    }, []);\n\n    const functions = useMemo<UseMutationMiddlewaresResult<MutateFunc>>(\n        () => ({\n            registerMutationMiddleware,\n            getMutateWithMiddlewares,\n            unregisterMutationMiddleware,\n        }),\n        [\n            registerMutationMiddleware,\n            getMutateWithMiddlewares,\n            unregisterMutationMiddleware,\n        ]\n    );\n\n    return functions;\n};\n\nexport interface UseMutationMiddlewaresResult<\n    MutateFunc extends (...args: any[]) => any = (...args: any[]) => any,\n> {\n    registerMutationMiddleware: (callback: Middleware<MutateFunc>) => void;\n    getMutateWithMiddlewares: (\n        mutate: MutateFunc\n    ) => (...args: Parameters<MutateFunc>) => ReturnType<MutateFunc>;\n    unregisterMutationMiddleware: (callback: Middleware<MutateFunc>) => void;\n}\n\nexport type Middleware<MutateFunc = (...args: any[]) => any> =\n    MutateFunc extends (...a: any[]) => infer R\n        ? (...a: [...U: Parameters<MutateFunc>, next: MutateFunc]) => R\n        : never;\n", "import { useEffect } from 'react';\nimport { Middleware } from './useMutationMiddlewares';\nimport { useSaveContext } from './useSaveContext';\n\n/**\n * Internal hook that registers a middleware for the save function in the current SaveContext.\n * @param callback The middleware function.\n */\nexport const useRegisterMutationMiddleware = <\n    MutateFunc extends (...args: any[]) => any = (...args: any[]) => any,\n>(\n    callback: Middleware<MutateFunc>\n) => {\n    const { registerMutationMiddleware, unregisterMutationMiddleware } =\n        useSaveContext();\n\n    useEffect(() => {\n        if (!registerMutationMiddleware || !unregisterMutationMiddleware) {\n            return;\n        }\n        registerMutationMiddleware(callback);\n        return () => {\n            unregisterMutationMiddleware(callback);\n        };\n    }, [callback, registerMutationMiddleware, unregisterMutationMiddleware]);\n};\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\n\nimport { RaRecord } from '../../types';\nimport { RecordContextProvider } from '../record/RecordContext';\nimport { CreateContext } from './CreateContext';\nimport { CreateControllerResult } from './useCreateController';\nimport { SaveContextProvider, usePickSaveContext } from '../saveContext';\n\n/**\n * Create a Create Context.\n *\n * @example\n *\n * const MyCreate = (props) => {\n *     const controllerProps = useCreateController(props);\n *     return (\n *         <CreateContextProvider value={controllerProps}>\n *             <MyCreateView>\n *         </CreateContextProvider>\n *     );\n * };\n *\n * const MyCreateView = () => {\n *     const record = useRecordContext();\n *     // or, to rerender only when the save operation change but not data\n *     const { saving } = useCreateContext();\n * }\n *\n * @see CreateContext\n * @see RecordContext\n */\nexport const CreateContextProvider = ({\n    children,\n    value,\n}: {\n    children: ReactNode;\n    value: CreateControllerResult;\n}) => (\n    <CreateContext.Provider value={value}>\n        <SaveContextProvider\n            value={{\n                ...usePickSaveContext(value),\n                mutationMode: 'pessimistic',\n            }}\n        >\n            <RecordContextProvider<Partial<RaRecord>>\n                value={value && value.record}\n            >\n                {children}\n            </RecordContextProvider>\n        </SaveContextProvider>\n    </CreateContext.Provider>\n);\n", "import * as React from 'react';\nimport { createContext, ReactNode } from 'react';\nimport { RaRecord } from '../../types';\n\n/**\n * Context to store a record.\n *\n * @see RecordContextProvider\n * @see useRecordContext\n */\nexport const RecordContext = createContext<\n    RaRecord | Omit<RaRecord, 'id'> | undefined\n>(undefined);\n\nRecordContext.displayName = 'RecordContext';\n\n/**\n * Provider for the Record Context, to store a record.\n *\n * Use the useRecordContext() hook to read the context.\n * That's what the Edit and Show components do in react-admin.\n *\n * Many react-admin components read the RecordContext, including all Field\n * components.\n *\n * @example\n *\n * import { useGetOne, RecordContextProvider } from 'ra-core';\n *\n * const Show = ({ resource, id }) => {\n *     const { data } = useGetOne(resource, { id });\n *     return (\n *         <RecordContextProvider value={data}>\n *             ...\n *         </RecordContextProvider>\n *     );\n * };\n */\nexport const RecordContextProvider = <\n    RecordType extends RaRecord | Omit<RaRecord, 'id'> = RaRecord,\n>({\n    children,\n    value,\n}: RecordContextProviderProps<RecordType>) => (\n    <RecordContext.Provider value={value}>{children}</RecordContext.Provider>\n);\n\nexport interface RecordContextProviderProps<RecordType> {\n    children: ReactNode;\n    value?: RecordType;\n}\n", "import { createContext } from 'react';\nimport { CreateControllerResult } from './useCreateController';\n\n/**\n * Context to store the result of the useCreateController() hook.\n *\n * Use the useCreateContext() hook to read the context. That's what the Create components do in react-admin.\n *\n * @example\n *\n * import { useCreateController, CreateContextProvider } from 'ra-core';\n *\n * const Create = props => {\n *     const controllerProps = useCreateController(props);\n *     return (\n *         <CreateContextProvider value={controllerProps}>\n *             ...\n *         </CreateContextProvider>\n *     );\n * };\n */\nexport const CreateContext = createContext<CreateControllerResult | null>(null);\n\nCreateContext.displayName = 'CreateContext';\n", "import { ReactNode } from 'react';\nimport {\n    useCreateController,\n    CreateControllerProps,\n    CreateControllerResult,\n} from './useCreateController';\n\n/**\n * Render prop version of the useCreateController hook\n *\n * @see useCreateController\n * @example\n *\n * const CreateView = () => <div>...</div>\n * const MyCreate = props => (\n *     <CreateController {...props}>\n *         {controllerProps => <CreateView {...controllerProps} {...props} />}\n *     </CreateController>\n * );\n */\nexport const CreateController = ({\n    children,\n    ...props\n}: {\n    children: (params: CreateControllerResult) => ReactNode;\n} & CreateControllerProps) => {\n    const controllerProps = useCreateController(props);\n    return children(controllerProps);\n};\n", "import { useContext } from 'react';\n\nimport { RaRecord } from '../../types';\nimport { CreateContext } from './CreateContext';\nimport { CreateControllerResult } from './useCreateController';\n\n/**\n * Hook to read the create controller props from the CreateContext.\n *\n * Used within a <CreateContextProvider> (e.g. as a descendent of <Create>).\n *\n * @returns {CreateControllerResult} create controller props\n *\n * @see useCreateController for how it is filled\n */\nexport const useCreateContext = <\n    RecordType extends RaRecord = RaRecord,\n>(): CreateControllerResult<RecordType> => {\n    const context = useContext(CreateContext);\n    if (!context) {\n        throw new Error(\n            'useCreateContext must be used inside a CreateContextProvider'\n        );\n    }\n    return context;\n};\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\n\nimport { RaRecord } from '../../types';\nimport { useEditController, EditControllerProps } from './useEditController';\nimport { EditContextProvider } from './EditContextProvider';\nimport { ResourceContextProvider } from '../../core';\n\n/**\n * Call useEditController and put the value in a EditContext\n *\n * Base class for <Edit> components, without UI.\n *\n * Accepts any props accepted by useEditController:\n * - id: The record identifier\n * - resource: The resource\n *\n * @example // Custom edit layout\n *\n * const PostEdit = () => (\n *     <EditBase resource=\"posts\">\n *         <Grid container>\n *             <Grid item xs={8}>\n *                 <SimpleForm>\n *                     ...\n *                 </SimpleForm>\n *             </Grid>\n *             <Grid item xs={4}>\n *                 Edit instructions...\n *             </Grid>\n *         </Grid>\n *         <div>\n *             Post related links...\n *         </div>\n *     </EditBase>\n * );\n */\nexport const EditBase = <RecordType extends RaRecord = any>({\n    children,\n    ...props\n}: { children: ReactNode } & EditControllerProps<RecordType>) => {\n    const controllerProps = useEditController<RecordType>(props);\n    const body = (\n        <EditContextProvider value={controllerProps}>\n            {children}\n        </EditContextProvider>\n    );\n    return props.resource ? (\n        // support resource override via props\n        <ResourceContextProvider value={props.resource}>\n            {body}\n        </ResourceContextProvider>\n    ) : (\n        body\n    );\n};\n", "import { useCallback } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { useAuthenticated } from '../../auth';\nimport { RaRecord, MutationMode, TransformData } from '../../types';\nimport { useRedirect, RedirectionSideEffect } from '../../routing';\nimport { useNotify } from '../../notification';\nimport {\n    useGetOne,\n    useUpdate,\n    useRefresh,\n    UseGetOneHookValue,\n    HttpError,\n    UseGetOneOptions,\n    UseUpdateOptions,\n} from '../../dataProvider';\nimport { useTranslate } from '../../i18n';\nimport {\n    useResourceContext,\n    useGetResourceLabel,\n    useGetRecordRepresentation,\n} from '../../core';\nimport {\n    SaveContextValue,\n    SaveHandlerCallbacks,\n    useMutationMiddlewares,\n} from '../saveContext';\n\n/**\n * Prepare data for the Edit view.\n *\n * useEditController does a few things:\n * - it grabs the id from the URL and the resource name from the ResourceContext,\n * - it fetches the record via useGetOne,\n * - it prepares the page title.\n *\n * @param {Object} props The props passed to the Edit component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Edit view\n *\n * @example\n *\n * import { useEditController } from 'react-admin';\n * import EditView from './EditView';\n *\n * const MyEdit = () => {\n *     const controllerProps = useEditController({ resource: 'posts', id: 123 });\n *     return <EditView {...controllerProps} {...props} />;\n * }\n */\nexport const useEditController = <\n    RecordType extends RaRecord = any,\n    ErrorType = Error,\n>(\n    props: EditControllerProps<RecordType, ErrorType> = {}\n): EditControllerResult<RecordType> => {\n    const {\n        disableAuthentication,\n        id: propsId,\n        mutationMode = 'undoable',\n        mutationOptions = {},\n        queryOptions = {},\n        redirect: redirectTo = DefaultRedirect,\n        transform,\n    } = props;\n    useAuthenticated({ enabled: !disableAuthentication });\n    const resource = useResourceContext(props);\n    if (!resource) {\n        throw new Error(\n            'useEditController requires a non-empty resource prop or context'\n        );\n    }\n    const getRecordRepresentation = useGetRecordRepresentation(resource);\n    const translate = useTranslate();\n    const notify = useNotify();\n    const redirect = useRedirect();\n    const refresh = useRefresh();\n    const { id: routeId } = useParams<'id'>();\n    if (!routeId && !propsId) {\n        throw new Error(\n            'useEditController requires an id prop or a route with an /:id? parameter.'\n        );\n    }\n    const id = propsId ?? decodeURIComponent(routeId!);\n    const { meta: queryMeta, ...otherQueryOptions } = queryOptions;\n    const {\n        meta: mutationMeta,\n        onSuccess,\n        onError,\n        ...otherMutationOptions\n    } = mutationOptions;\n    const {\n        registerMutationMiddleware,\n        getMutateWithMiddlewares,\n        unregisterMutationMiddleware,\n    } = useMutationMiddlewares();\n    const {\n        data: record,\n        error,\n        isLoading,\n        isFetching,\n        isPending,\n        refetch,\n    } = useGetOne<RecordType>(\n        resource,\n        { id, meta: queryMeta },\n        {\n            onError: () => {\n                notify('ra.notification.item_doesnt_exist', {\n                    type: 'error',\n                });\n                redirect('list', resource);\n                refresh();\n            },\n            refetchOnReconnect: false,\n            refetchOnWindowFocus: false,\n            retry: false,\n            ...otherQueryOptions,\n        }\n    );\n\n    // eslint-disable-next-line eqeqeq\n    if (record && record.id && record.id != id) {\n        throw new Error(\n            `useEditController: Fetched record's id attribute (${record.id}) must match the requested 'id' (${id})`\n        );\n    }\n\n    const getResourceLabel = useGetResourceLabel();\n    const recordRepresentation = getRecordRepresentation(record);\n    const defaultTitle = translate('ra.page.edit', {\n        name: getResourceLabel(resource, 1),\n        id,\n        record,\n        recordRepresentation:\n            typeof recordRepresentation === 'string'\n                ? recordRepresentation\n                : '',\n    });\n\n    const recordCached = { id, previousData: record };\n\n    const [update, { isPending: saving }] = useUpdate<RecordType, ErrorType>(\n        resource,\n        recordCached,\n        {\n            onSuccess: async (data, variables, context) => {\n                if (onSuccess) {\n                    return onSuccess(data, variables, context);\n                }\n                notify('ra.notification.updated', {\n                    type: 'info',\n                    messageArgs: { smart_count: 1 },\n                    undoable: mutationMode === 'undoable',\n                });\n                redirect(redirectTo, resource, data.id, data);\n            },\n            onError: (error, variables, context) => {\n                if (onError) {\n                    return onError(error, variables, context);\n                }\n                // Don't trigger a notification if this is a validation error\n                // (notification will be handled by the useNotifyIsFormInvalid hook)\n                const validationErrors = (error as HttpError)?.body?.errors;\n                const hasValidationErrors =\n                    !!validationErrors &&\n                    Object.keys(validationErrors).length > 0;\n                if (!hasValidationErrors || mutationMode !== 'pessimistic') {\n                    notify(\n                        typeof error === 'string'\n                            ? error\n                            : (error as Error).message ||\n                                  'ra.notification.http_error',\n                        {\n                            type: 'error',\n                            messageArgs: {\n                                _:\n                                    typeof error === 'string'\n                                        ? error\n                                        : error instanceof Error ||\n                                            (typeof error === 'object' &&\n                                                error !== null &&\n                                                error.hasOwnProperty('message'))\n                                          ? // @ts-ignore\n                                            error.message\n                                          : undefined,\n                            },\n                        }\n                    );\n                }\n            },\n            ...otherMutationOptions,\n            mutationMode,\n            returnPromise: mutationMode === 'pessimistic',\n            getMutateWithMiddlewares,\n        }\n    );\n\n    const save = useCallback(\n        (\n            data: Partial<RecordType>,\n            {\n                onSuccess: onSuccessFromSave,\n                onError: onErrorFromSave,\n                transform: transformFromSave,\n                meta: metaFromSave,\n            } = {} as SaveHandlerCallbacks\n        ) =>\n            Promise.resolve(\n                transformFromSave\n                    ? transformFromSave(data, {\n                          previousData: recordCached.previousData,\n                      })\n                    : transform\n                      ? transform(data, {\n                            previousData: recordCached.previousData,\n                        })\n                      : data\n            ).then(async (data: Partial<RecordType>) => {\n                try {\n                    await update(\n                        resource,\n                        {\n                            id,\n                            data,\n                            meta: metaFromSave ?? mutationMeta,\n                        },\n                        {\n                            onError: onErrorFromSave,\n                            onSuccess: onSuccessFromSave,\n                        }\n                    );\n                } catch (error) {\n                    if ((error as HttpError).body?.errors != null) {\n                        return (error as HttpError).body.errors;\n                    }\n                }\n            }),\n        [\n            id,\n            mutationMeta,\n            resource,\n            transform,\n            update,\n            recordCached.previousData,\n        ]\n    );\n\n    return {\n        defaultTitle,\n        error,\n        isFetching,\n        isLoading,\n        isPending,\n        mutationMode,\n        record,\n        redirect: redirectTo,\n        refetch,\n        registerMutationMiddleware,\n        resource,\n        save,\n        saving,\n        unregisterMutationMiddleware,\n    } as EditControllerResult<RecordType>;\n};\n\nconst DefaultRedirect = 'list';\n\nexport interface EditControllerProps<\n    RecordType extends RaRecord = any,\n    ErrorType = Error,\n> {\n    disableAuthentication?: boolean;\n    id?: RecordType['id'];\n    mutationMode?: MutationMode;\n    mutationOptions?: UseUpdateOptions<RecordType, ErrorType>;\n    queryOptions?: UseGetOneOptions<RecordType>;\n    redirect?: RedirectionSideEffect;\n    resource?: string;\n    transform?: TransformData;\n    [key: string]: any;\n}\n\nexport interface EditControllerBaseResult<RecordType extends RaRecord = any>\n    extends SaveContextValue<RecordType> {\n    defaultTitle?: string;\n    isFetching: boolean;\n    isLoading: boolean;\n    refetch: UseGetOneHookValue<RecordType>['refetch'];\n    redirect: RedirectionSideEffect;\n    resource: string;\n}\n\nexport interface EditControllerLoadingResult<RecordType extends RaRecord = any>\n    extends EditControllerBaseResult<RecordType> {\n    record: undefined;\n    error: null;\n    isPending: true;\n}\nexport interface EditControllerLoadingErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends EditControllerBaseResult<RecordType> {\n    record: undefined;\n    error: TError;\n    isPending: false;\n}\nexport interface EditControllerRefetchErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends EditControllerBaseResult<RecordType> {\n    record: RecordType;\n    error: TError;\n    isPending: false;\n}\nexport interface EditControllerSuccessResult<RecordType extends RaRecord = any>\n    extends EditControllerBaseResult<RecordType> {\n    record: RecordType;\n    error: null;\n    isPending: false;\n}\n\nexport type EditControllerResult<RecordType extends RaRecord = any> =\n    | EditControllerLoadingResult<RecordType>\n    | EditControllerLoadingErrorResult<RecordType>\n    | EditControllerRefetchErrorResult<RecordType>\n    | EditControllerSuccessResult<RecordType>;\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { RaRecord } from '../../types';\nimport { RecordContextProvider } from '../record';\nimport { SaveContextProvider, usePickSaveContext } from '../saveContext';\nimport { EditContext } from './EditContext';\nimport { EditControllerResult } from './useEditController';\n\n/**\n * Create an Edit Context.\n *\n * @example\n *\n * const MyEdit = (props) => {\n *     const controllerProps = useEditController(props);\n *     return (\n *         <EditContextProvider value={controllerProps}>\n *             <MyEditView>\n *         </EditContextProvider>\n *     );\n * };\n *\n * const MyEditView = () => {\n *     const record = useRecordContext();\n *     // or, to rerender only when the save operation change but not data\n *     const { saving } = useEditContext();\n * }\n *\n * @see EditContext\n * @see RecordContext\n */\nexport const EditContextProvider = ({\n    children,\n    value,\n}: {\n    children: ReactNode;\n    value: EditControllerResult;\n}) => (\n    <EditContext.Provider value={value}>\n        <SaveContextProvider value={usePickSaveContext(value)}>\n            <RecordContextProvider<Partial<RaRecord>>\n                value={value && value.record}\n            >\n                {children}\n            </RecordContextProvider>\n        </SaveContextProvider>\n    </EditContext.Provider>\n);\n", "import { useContext } from 'react';\nimport { RecordContext } from './RecordContext';\nimport { RaRecord } from '../../types';\n\n/**\n * Hook to read the record from a RecordContext.\n *\n * Must be used within a <RecordContext> such as provided by the <EditContextProvider>\n * (e.g. as a descendent of <Edit> or <EditBase>) or within a <ShowContextProvider>\n * (e.g. as a descendent of <Show> or <ShowBase>)\n *\n * @example // basic usage\n *\n * import { useRecordContext } from 'ra-core';\n *\n * const TitleField = () => {\n *     const record = useRecordContext();\n *     return <span>{record && record.title}</span>;\n * };\n *\n * @example // allow record override via props\n *\n * import { useRecordContext } from 'ra-core';\n *\n * const TitleField = (props) => {\n *     const record = useRecordContext(props);\n *     return <span>{record && record.title}</span>;\n * };\n * render(<TextField record={record} />);\n *\n * @returns {RaRecord} A record object\n */\nexport const useRecordContext = <\n    RecordType extends RaRecord | Omit<RaRecord, 'id'> = RaRecord,\n>(\n    props?: UseRecordContextParams<RecordType>\n): RecordType | undefined => {\n    // Can't find a way to specify the RecordType when CreateContext is declared\n    // @ts-ignore\n    const context = useContext<RecordType | undefined>(RecordContext);\n\n    return (props && props.record) || context;\n};\n\nexport interface UseRecordContextParams<\n    RecordType extends RaRecord | Omit<RaRecord, 'id'> = RaRecord,\n> {\n    record?: RecordType;\n    [key: string]: any;\n}\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { useRecordContext } from './useRecordContext';\n\n/**\n * Render prop version of useRecordContext\n *\n * @example\n * const BookShow = () => (\n *    <Show>\n *       <SimpleShowLayout>\n *          <WithRecord render={record => <span>{record.title}</span>} />\n *      </SimpleShowLayout>\n *   </Show>\n * );\n */\nexport const WithRecord = <RecordType extends Record<string, any> = any>({\n    render,\n}: WithRecordProps<RecordType>) => {\n    const record = useRecordContext<RecordType>();\n    return record ? <>{render(record)}</> : null;\n};\n\nexport interface WithRecordProps<RecordType extends Record<string, any> = any> {\n    render: (record: RecordType) => ReactNode;\n    label?: string;\n}\n", "import * as React from 'react';\nimport { ReactElement } from 'react';\nimport { RaRecord } from '../../types';\nimport { RecordContextProvider } from './RecordContext';\n\n/**\n * Wrap children with a RecordContext provider only if the value is defined.\n *\n * Allows a component to work outside of a record context.\n *\n * @example\n *\n * import { OptionalRecordContextProvider, TextField } from 'react-admin';\n *\n * const RecordTitle = ({ record }) => (\n *     <OptionalRecordContextProvider value={record}>\n *         <TextField source=\"title\" />\n *     </OptionalRecordContextProvider>\n * );\n */\nexport const OptionalRecordContextProvider = <\n    RecordType extends RaRecord | Omit<RaRecord, 'id'> = RaRecord,\n>({\n    value,\n    children,\n}: {\n    children: ReactElement;\n    value?: RecordType;\n}) =>\n    value ? (\n        <RecordContextProvider value={value}>{children}</RecordContextProvider>\n    ) : (\n        children\n    );\n", "import * as React from 'react';\nimport { useGetRecordRepresentation, useResourceContext } from '../../core';\nimport { RaRecord } from '../../types';\nimport { useRecordContext } from './useRecordContext';\n\n/**\n * Render the record representation as specified on its parent <Resource>.\n * @param props The component props\n * @param {string} props.resource The resource name\n * @param {RaRecord} props.record The record to render\n */\nexport const RecordRepresentation = (props: {\n    record?: RaRecord;\n    resource?: string;\n}) => {\n    const record = useRecordContext(props);\n    const resource = useResourceContext(props);\n    const getRecordRepresentation = useGetRecordRepresentation(resource);\n\n    return <>{getRecordRepresentation(record)}</>;\n};\n", "import { createContext } from 'react';\nimport { EditControllerResult } from './useEditController';\n\n/**\n * Context to store the result of the useEditController() hook.\n *\n * Use the useEditContext() hook to read the context. That's what the Edit components do in react-admin.\n *\n * @example\n *\n * import { useEditController, EditContextProvider } from 'ra-core';\n *\n * const Edit = props => {\n *     const controllerProps = useEditController(props);\n *     return (\n *         <EditContextProvider value={controllerProps}>\n *             ...\n *         </EditContextProvider>\n *     );\n * };\n */\nexport const EditContext = createContext<EditControllerResult | null>(null);\n\nEditContext.displayName = 'EditContext';\n", "import { ReactNode } from 'react';\nimport {\n    useEditController,\n    EditControllerProps,\n    EditControllerResult,\n} from './useEditController';\n\n/**\n * Render prop version of the useEditController hook\n *\n * @see useEditController\n * @example\n *\n * const EditView = () => <div>...</div>\n * const MyEdit = props => (\n *     <EditController {...props}>\n *         {controllerProps => <EditView {...controllerProps} {...props} />}\n *     </EditController>\n * );\n */\nexport const EditController = ({\n    children,\n    ...props\n}: {\n    children: (params: EditControllerResult) => ReactNode;\n} & EditControllerProps) => {\n    const controllerProps = useEditController(props);\n    return children(controllerProps);\n};\n", "import { useContext } from 'react';\n\nimport { RaRecord } from '../../types';\nimport { EditContext } from './EditContext';\nimport { EditControllerResult } from './useEditController';\n\n/**\n * Hook to read the edit controller props from the EditContext.\n *\n * Used within a <EditContextProvider> (e.g. as a descendent of <Edit>).\n *\n * @returns {EditControllerResult} edit controller props\n *\n * @see useEditController for how it is filled\n */\nexport const useEditContext = <\n    RecordType extends RaRecord = any,\n>(): EditControllerResult<RecordType> => {\n    const context = useContext(EditContext);\n    if (!context) {\n        throw new Error(\n            'useEditContext must be used inside an EditContextProvider'\n        );\n    }\n    return context;\n};\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { UseQueryOptions } from '@tanstack/react-query';\nimport { ReferenceFieldContextProvider } from './ReferenceFieldContext';\nimport { RaRecord } from '../../types';\nimport { useReferenceFieldController } from './useReferenceFieldController';\nimport { ResourceContextProvider } from '../../core';\nimport { RecordContextProvider } from '../record';\n\n/**\n * Fetch reference record, and render its representation, or delegate rendering to child component.\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example // using recordRepresentation\n * <ReferenceFieldBase label=\"User\" source=\"userId\" reference=\"users\" />\n *\n * @example // using a Field component to represent the record\n * <ReferenceFieldBase label=\"User\" source=\"userId\" reference=\"users\">\n *     <TextField source=\"name\" />\n * </ReferenceFieldBase>\n *\n * @example // By default, includes a link to the <Edit> page of the related record\n * // (`/users/:userId` in the previous example).\n * // Set the `link` prop to \"show\" to link to the <Show> page instead.\n * <ReferenceFieldBase label=\"User\" source=\"userId\" reference=\"users\" link=\"show\" />\n *\n * @example // You can also prevent `<ReferenceFieldBase>` from adding link to children\n * // by setting `link` to false.\n * <ReferenceFieldBase label=\"User\" source=\"userId\" reference=\"users\" link={false} />\n *\n * @example // Alternatively, you can also pass a custom function to `link`.\n * // It must take reference and record as arguments and return a string\n * <ReferenceFieldBase label=\"User\" source=\"userId\" reference=\"users\" link={(record, reference) => \"/path/to/${reference}/${record}\"} />\n *\n * @default\n * In previous versions of React-Admin, the prop `linkType` was used. It is now deprecated and replaced with `link`. However\n * backward-compatibility is still kept\n */\nexport const ReferenceFieldBase = <\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    props: ReferenceFieldBaseProps<ReferenceRecordType>\n) => {\n    const { children } = props;\n\n    const controllerProps =\n        useReferenceFieldController<ReferenceRecordType>(props);\n\n    return (\n        <ResourceContextProvider value={props.reference}>\n            <ReferenceFieldContextProvider value={controllerProps}>\n                <RecordContextProvider value={controllerProps.referenceRecord}>\n                    {children}\n                </RecordContextProvider>\n            </ReferenceFieldContextProvider>\n        </ResourceContextProvider>\n    );\n};\n\nexport interface ReferenceFieldBaseProps<\n    ReferenceRecordType extends RaRecord = RaRecord,\n> {\n    children?: ReactNode;\n    className?: string;\n    error?: ReactNode;\n    queryOptions?: Partial<\n        UseQueryOptions<ReferenceRecordType[], Error> & {\n            meta?: any;\n        }\n    >;\n    reference: string;\n    source: string;\n}\n", "import { createContext, useContext } from 'react';\nimport type { UseReferenceFieldControllerResult } from './useReferenceFieldController';\n\nexport const ReferenceFieldContext =\n    createContext<UseReferenceFieldControllerResult | null>(null);\n\nexport const ReferenceFieldContextProvider = ReferenceFieldContext.Provider;\n\nexport const useReferenceFieldContext = () => {\n    const context = useContext(ReferenceFieldContext);\n    if (!context) {\n        throw new Error(\n            'useReferenceFieldContext must be used inside a ReferenceFieldContextProvider'\n        );\n    }\n    return context;\n};\n", "import { useMemo } from 'react';\nimport { UseQueryOptions } from '@tanstack/react-query';\n\nimport { RaRecord } from '../../types';\nimport { LinkToType, useGetPathForRecord } from '../../routing';\nimport { UseReferenceResult, useReference } from '../useReference';\nimport { useFieldValue } from '../../util';\n\nexport const useReferenceFieldController = <\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    options: UseReferenceFieldControllerOptions<ReferenceRecordType>\n): UseReferenceFieldControllerResult<ReferenceRecordType> => {\n    const { link, reference, queryOptions } = options;\n    if (!reference) {\n        throw new Error(\n            'useReferenceFieldController: missing reference prop. You must provide a reference, e.g. reference=\"posts\".'\n        );\n    }\n    const id = useFieldValue(options);\n    const referenceRecordQuery = useReference<ReferenceRecordType>({\n        reference,\n        id,\n        options: {\n            ...queryOptions,\n            enabled:\n                (queryOptions?.enabled == null ||\n                    queryOptions?.enabled === true) &&\n                id != null,\n        },\n    });\n\n    const path = useGetPathForRecord({\n        record: referenceRecordQuery.referenceRecord,\n        resource: reference,\n        link,\n    });\n\n    const result = useMemo(\n        () =>\n            ({\n                ...referenceRecordQuery,\n                link: path,\n            }) as const,\n        [path, referenceRecordQuery]\n    );\n\n    return result;\n};\n\nexport interface UseReferenceFieldControllerOptions<\n    ReferenceRecordType extends RaRecord = RaRecord,\n> {\n    source: string;\n    queryOptions?: Partial<\n        UseQueryOptions<ReferenceRecordType[], Error> & {\n            meta?: any;\n        }\n    >;\n    reference: string;\n    link?: LinkToType<ReferenceRecordType>;\n}\n\nexport interface UseReferenceFieldControllerResult<\n    ReferenceRecordType extends RaRecord = RaRecord,\n> extends UseReferenceResult<ReferenceRecordType> {\n    link?: string | false;\n}\n", "import { RaRecord, Identifier } from '../types';\nimport { UseGetManyHookValue, useGetManyAggregate } from '../dataProvider';\nimport { UseQueryOptions } from '@tanstack/react-query';\n\ninterface UseReferenceProps<RecordType extends RaRecord = any> {\n    id: Identifier;\n    reference: string;\n    options?: Omit<UseQueryOptions<RecordType[]>, 'queryFn' | 'queryKey'> & {\n        meta?: any;\n    };\n}\n\nexport interface UseReferenceResult<RecordType extends RaRecord = any> {\n    isLoading: boolean;\n    isPending: boolean;\n    isFetching: boolean;\n    referenceRecord?: RecordType;\n    error?: any;\n    refetch: UseGetManyHookValue<RecordType>['refetch'];\n}\n\n/**\n * @typedef UseReferenceResult\n * @type {Object}\n * @property {boolean} isFetching: boolean indicating if the reference is loading\n * @property {boolean} isLoading: boolean indicating if the reference has loaded at least once\n * @property {Object} referenceRecord: the referenced record.\n */\n\n/**\n * Fetch reference record, and return it when available\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example\n *\n * const { isLoading, referenceRecord } = useReference({\n *     id: 7,\n *     reference: 'users',\n * });\n *\n * @param {Object} option\n * @param {string} option.reference The linked resource name\n * @param {string} option.id The id of the reference\n * @param {Object} option.options Options passed to the dataProvider\n *\n * @returns {UseReferenceResult} The reference record\n */\nexport const useReference = <RecordType extends RaRecord = RaRecord>({\n    reference,\n    id,\n    options = {},\n}: UseReferenceProps<RecordType>): UseReferenceResult<RecordType> => {\n    const { meta, ...otherQueryOptions } = options;\n    const { data, error, isLoading, isFetching, isPending, refetch } =\n        useGetManyAggregate<RecordType>(\n            reference,\n            { ids: [id], meta },\n            otherQueryOptions\n        );\n    return {\n        referenceRecord: error ? undefined : data ? data[0] : undefined,\n        refetch,\n        error,\n        isLoading,\n        isFetching,\n        isPending,\n    };\n};\n", "import get from 'lodash/get';\nimport { RaRecord, SortPayload } from '../../types';\nimport { useGetManyAggregate } from '../../dataProvider';\nimport { ListControllerResult, useList } from '../list';\nimport { useNotify } from '../../notification';\nimport { UseQueryOptions } from '@tanstack/react-query';\n\nexport interface UseReferenceArrayFieldControllerParams<\n    RecordType extends RaRecord = RaRecord,\n    ReferenceRecordType extends RaRecord = RaRecord,\n> {\n    filter?: any;\n    page?: number;\n    perPage?: number;\n    record?: RecordType;\n    reference: string;\n    resource?: string;\n    sort?: SortPayload;\n    source: string;\n    queryOptions?: Omit<\n        UseQueryOptions<ReferenceRecordType[]>,\n        'queryFn' | 'queryKey'\n    >;\n}\n\nconst emptyArray = [];\nconst defaultFilter = {};\n\n/**\n * Hook that fetches records from another resource specified\n * by an array of *ids* in current record.\n *\n * @example\n *\n * const { data, error, isFetching, isPending } = useReferenceArrayFieldController({\n *      record: { referenceIds: ['id1', 'id2']};\n *      reference: 'reference';\n *      resource: 'resource';\n *      source: 'referenceIds';\n * });\n *\n * @param {Object} props\n * @param {Object} props.record The current resource record\n * @param {string} props.reference The linked resource name\n * @param {string} props.resource The current resource name\n * @param {string} props.source The key of the linked resource identifier\n *\n * @param {Props} props\n *\n * @returns {ListControllerResult} The reference props\n */\nexport const useReferenceArrayFieldController = <\n    RecordType extends RaRecord = RaRecord,\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    props: UseReferenceArrayFieldControllerParams<\n        RecordType,\n        ReferenceRecordType\n    >\n): ListControllerResult => {\n    const {\n        filter = defaultFilter,\n        page = 1,\n        perPage = 1000,\n        record,\n        reference,\n        sort,\n        source,\n        queryOptions = {},\n    } = props;\n    const notify = useNotify();\n    const value = get(record, source);\n    const { meta, ...otherQueryOptions } = queryOptions;\n    const ids = Array.isArray(value) ? value : emptyArray;\n\n    const { data, error, isLoading, isFetching, isPending, refetch } =\n        useGetManyAggregate<ReferenceRecordType>(\n            reference,\n            { ids, meta },\n            {\n                onError: error =>\n                    notify(\n                        typeof error === 'string'\n                            ? error\n                            : error.message || 'ra.notification.http_error',\n                        {\n                            type: 'error',\n                            messageArgs: {\n                                _:\n                                    typeof error === 'string'\n                                        ? error\n                                        : error && error.message\n                                          ? error.message\n                                          : undefined,\n                            },\n                        }\n                    ),\n                ...otherQueryOptions,\n            }\n        );\n\n    const listProps = useList<ReferenceRecordType>({\n        data,\n        error,\n        filter,\n        isFetching,\n        isLoading,\n        isPending,\n        page,\n        perPage,\n        sort,\n    });\n\n    return {\n        ...listProps,\n        defaultTitle: undefined,\n        refetch,\n        resource: reference,\n    };\n};\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport {\n    useInfiniteListController,\n    InfiniteListControllerProps,\n} from './useInfiniteListController';\nimport { ResourceContextProvider } from '../../core';\nimport { RaRecord } from '../../types';\nimport { ListContextProvider } from './ListContextProvider';\nimport { InfinitePaginationContext } from './InfinitePaginationContext';\n\n/**\n * Call useInfiniteListController and put the value in a ListContext\n *\n * Base class for <InfiniteList> components, without UI.\n *\n * Accepts any props accepted by useInfiniteListController:\n * - filter: permanent filter applied to the list\n * - filters: Filter element, to display the filters\n * - filterDefaultValues: object;\n * - perPage: Number of results per page\n * - sort: Default sort\n * - exporter: exported function\n *\n * @example // Custom list layout\n *\n * const PostList = () => (\n *     <InfiniteListBase perPage={10}>\n *         <div>\n *              List metrics...\n *         </div>\n *         <Grid container>\n *             <Grid item xs={8}>\n *                 <SimpleList primaryText={record => record.title} />\n *             </Grid>\n *             <Grid item xs={4}>\n *                 List instructions...\n *             </Grid>\n *         </Grid>\n *         <div>\n *             Post related links...\n *         </div>\n *     </ListBase>\n * );\n */\nexport const InfiniteListBase = <RecordType extends RaRecord = any>({\n    children,\n    ...props\n}: InfiniteListControllerProps<RecordType> & { children: ReactNode }) => {\n    const controllerProps = useInfiniteListController<RecordType>(props);\n    return (\n        <ResourceContextProvider value={props.resource}>\n            <ListContextProvider value={controllerProps}>\n                <InfinitePaginationContext.Provider\n                    value={{\n                        hasNextPage: controllerProps.hasNextPage,\n                        fetchNextPage: controllerProps.fetchNextPage,\n                        isFetchingNextPage: controllerProps.isFetchingNextPage,\n                        hasPreviousPage: controllerProps.hasPreviousPage,\n                        fetchPreviousPage: controllerProps.fetchPreviousPage,\n                        isFetchingPreviousPage:\n                            controllerProps.isFetchingPreviousPage,\n                    }}\n                >\n                    {children}\n                </InfinitePaginationContext.Provider>\n            </ListContextProvider>\n        </ResourceContextProvider>\n    );\n};\n", "import { isValidElement, useEffect, useMemo } from 'react';\nimport {\n    InfiniteQueryObserverBaseResult,\n    InfiniteData,\n} from '@tanstack/react-query';\n\nimport { useAuthenticated } from '../../auth';\nimport { useTranslate } from '../../i18n';\nimport { useNotify } from '../../notification';\nimport {\n    UseInfiniteGetListOptions,\n    useInfiniteGetList,\n} from '../../dataProvider';\nimport { defaultExporter } from '../../export';\nimport {\n    RaRecord,\n    SortPayload,\n    FilterPayload,\n    Exporter,\n    GetInfiniteListResult,\n} from '../../types';\nimport { useResourceContext, useGetResourceLabel } from '../../core';\nimport { useRecordSelection } from './useRecordSelection';\nimport { useListParams } from './useListParams';\n\nimport { ListControllerResult } from './useListController';\n\n/**\n * Prepare data for the InfiniteList view\n *\n * @param {Object} props The props passed to the InfiniteList component.\n *\n * @return {Object} controllerProps Fetched and computed data for the List view\n *\n * @example\n *\n * import { useInfiniteListController } from 'react-admin';\n * import ListView from './ListView';\n *\n * const MyList = props => {\n *     const controllerProps = useInfiniteListController(props);\n *     return <ListView {...controllerProps} {...props} />;\n * }\n */\nexport const useInfiniteListController = <RecordType extends RaRecord = any>(\n    props: InfiniteListControllerProps<RecordType> = {}\n): InfiniteListControllerResult<RecordType> => {\n    const {\n        debounce = 500,\n        disableAuthentication,\n        disableSyncWithLocation,\n        exporter = defaultExporter,\n        filter,\n        filterDefaultValues,\n        perPage = 10,\n        queryOptions,\n        sort,\n        storeKey,\n    } = props;\n    useAuthenticated({ enabled: !disableAuthentication });\n    const resource = useResourceContext(props);\n    const { meta, ...otherQueryOptions } = queryOptions ?? {};\n\n    if (!resource) {\n        throw new Error(\n            `<InfiniteList> was called outside of a ResourceContext and without a resource prop. You must set the resource prop.`\n        );\n    }\n    if (filter && isValidElement(filter)) {\n        throw new Error(\n            '<InfiniteList> received a React element as `filter` props. If you intended to set the list filter elements, use the `filters` (with an s) prop instead. The `filter` prop is internal and should not be set by the developer.'\n        );\n    }\n\n    const translate = useTranslate();\n    const notify = useNotify();\n\n    const [query, queryModifiers] = useListParams({\n        debounce,\n        disableSyncWithLocation,\n        filterDefaultValues,\n        perPage,\n        resource,\n        sort,\n        storeKey,\n    });\n\n    const [selectedIds, selectionModifiers] = useRecordSelection({ resource });\n\n    const {\n        data,\n        total,\n        error,\n        isLoading,\n        isPending,\n        isFetching,\n        hasNextPage,\n        hasPreviousPage,\n        fetchNextPage,\n        isFetchingNextPage,\n        fetchPreviousPage,\n        isFetchingPreviousPage,\n        refetch,\n    } = useInfiniteGetList<RecordType>(\n        resource,\n        {\n            pagination: {\n                page: query.page,\n                perPage: query.perPage,\n            },\n            sort: { field: query.sort, order: query.order },\n            filter: { ...query.filter, ...filter },\n            meta,\n        },\n        {\n            placeholderData: previousData => previousData,\n            retry: false,\n            onError: error =>\n                notify(error?.message || 'ra.notification.http_error', {\n                    type: 'error',\n                    messageArgs: {\n                        _: error?.message,\n                    },\n                }),\n            ...otherQueryOptions,\n        }\n    );\n\n    // change page if there is no data\n    useEffect(() => {\n        if (\n            query.page <= 0 ||\n            (!isFetching &&\n                query.page > 1 &&\n                (data == null || data?.pages.length === 0))\n        ) {\n            // Query for a page that doesn't exist, set page to 1\n            queryModifiers.setPage(1);\n            return;\n        }\n        if (total == null) {\n            return;\n        }\n        const totalPages = Math.ceil(total / query.perPage) || 1;\n        if (!isFetching && query.page > totalPages) {\n            // Query for a page out of bounds, set page to the last existing page\n            // It occurs when deleting the last element of the last page\n            queryModifiers.setPage(totalPages);\n        }\n    }, [isFetching, query.page, query.perPage, data, queryModifiers, total]);\n\n    const currentSort = useMemo(\n        () => ({\n            field: query.sort,\n            order: query.order,\n        }),\n        [query.sort, query.order]\n    );\n\n    const getResourceLabel = useGetResourceLabel();\n    const defaultTitle = translate('ra.page.list', {\n        name: getResourceLabel(resource, 2),\n    });\n\n    const unwrappedData = useMemo(\n        () => data?.pages?.reduce((acc, page) => [...acc, ...page.data], []),\n        [data]\n    );\n\n    return {\n        sort: currentSort,\n        data: unwrappedData,\n        defaultTitle,\n        displayedFilters: query.displayedFilters,\n        error,\n        exporter,\n        filter,\n        filterValues: query.filterValues,\n        hideFilter: queryModifiers.hideFilter,\n        isFetching,\n        isLoading,\n        isPending,\n        onSelect: selectionModifiers.select,\n        onToggleItem: selectionModifiers.toggle,\n        onUnselectItems: selectionModifiers.clearSelection,\n        page: query.page,\n        perPage: query.perPage,\n        refetch,\n        resource,\n        selectedIds,\n        setFilters: queryModifiers.setFilters,\n        setPage: queryModifiers.setPage,\n        setPerPage: queryModifiers.setPerPage,\n        setSort: queryModifiers.setSort,\n        showFilter: queryModifiers.showFilter,\n        total: total,\n        hasNextPage,\n        hasPreviousPage,\n        fetchNextPage,\n        isFetchingNextPage,\n        fetchPreviousPage,\n        isFetchingPreviousPage,\n    } as InfiniteListControllerResult<RecordType>;\n};\n\nexport interface InfiniteListControllerProps<\n    RecordType extends RaRecord = any,\n> {\n    debounce?: number;\n    disableAuthentication?: boolean;\n    /**\n     * Whether to disable the synchronization of the list parameters with the current location (URL search parameters)\n     */\n    disableSyncWithLocation?: boolean;\n    exporter?: Exporter | false;\n    filter?: FilterPayload;\n    filterDefaultValues?: object;\n    perPage?: number;\n    queryOptions?: UseInfiniteGetListOptions<RecordType>;\n    resource?: string;\n    sort?: SortPayload;\n    storeKey?: string | false;\n}\n\nexport type InfiniteListControllerResult<RecordType extends RaRecord = any> =\n    ListControllerResult<RecordType> & {\n        fetchNextPage: InfiniteQueryObserverBaseResult<\n            InfiniteData<GetInfiniteListResult<RecordType>>\n        >['fetchNextPage'];\n        fetchPreviousPage: InfiniteQueryObserverBaseResult<\n            InfiniteData<GetInfiniteListResult<RecordType>>\n        >['fetchPreviousPage'];\n        isFetchingNextPage: InfiniteQueryObserverBaseResult<\n            InfiniteData<GetInfiniteListResult<RecordType>>\n        >['isFetchingNextPage'];\n        isFetchingPreviousPage: InfiniteQueryObserverBaseResult<\n            InfiniteData<GetInfiniteListResult<RecordType>>\n        >['isFetchingPreviousPage'];\n    };\n", "import jsonExport from 'jsonexport/dist';\n\nimport { downloadCSV } from './downloadCSV';\nimport { Exporter } from '../types';\n\nexport const defaultExporter: Exporter = (data, _, __, resource) =>\n    jsonExport(data, (err, csv) => downloadCSV(csv, resource));\n", "export const downloadCSV = (csv: string, filename: string = 'export'): void => {\n    const fakeLink = document.createElement('a');\n    fakeLink.style.display = 'none';\n    document.body.appendChild(fakeLink);\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });\n    // @ts-ignore\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n        // Manage IE11+ & Edge\n        // @ts-ignore\n        window.navigator.msSaveOrOpenBlob(blob, `${filename}.csv`);\n    } else {\n        fakeLink.setAttribute('href', URL.createObjectURL(blob));\n        fakeLink.setAttribute('download', `${filename}.csv`);\n        fakeLink.click();\n    }\n};\n", "import { createContext } from 'react';\n\nimport { Exporter } from '../types';\nimport { defaultExporter } from './defaultExporter';\n\nexport const ExporterContext = createContext<Exporter | false>(defaultExporter);\n\nExporterContext.displayName = 'ExporterContext';\n", "import { RaRecord, Identifier } from '../types';\n\n/**\n * Extracts, aggregates and deduplicates the ids of related records\n *\n * @example\n *     const books = [\n *         { id: 1, author_id: 123, title: 'Pride and Prejudice' },\n *         { id: 2, author_id: 123, title: 'Sense and Sensibility' },\n *         { id: 3, author_id: 456, title: 'War and Peace' },\n *     ];\n *     getRelatedIds(books, 'author_id'); => [123, 456]\n *\n * @example\n *     const books = [\n *         { id: 1, tag_ids: [1, 2], title: 'Pride and Prejudice' },\n *         { id: 2, tag_ids: [2, 3], title: 'Sense and Sensibility' },\n *         { id: 3, tag_ids: [4], title: 'War and Peace' },\n *     ];\n *     getRelatedIds(records, 'tag_ids'); => [1, 2, 3, 4]\n *\n * @param {Object[]} records An array of records\n * @param {string} field the identifier of the record field to use\n */\nexport const getRelatedIds = (\n    records: RaRecord[],\n    field: string\n): Identifier[] =>\n    Array.from(\n        new Set(\n            records\n                .filter(record => record[field] != null)\n                .map(record => record[field])\n                .reduce((ids, value) => ids.concat(value), [])\n        )\n    );\n", "import { DataProvider, FetchRelatedRecords } from '../types';\nimport { getRelatedIds } from './getRelatedIds';\n\n/**\n * Helper function for calling the dataProvider.getMany() method,\n * and getting a Promise for the records indexed by id in return.\n *\n * @example\n *     fetchRelatedRecords(dataProvider)(records, 'post_id', 'posts').then(posts =>\n *         posts.map(record => ({\n *             ...record,\n *             post_title: posts[record.post_id].title,\n *         }))\n *     );\n */\nexport const fetchRelatedRecords =\n    (dataProvider: DataProvider): FetchRelatedRecords =>\n    (data, field, resource) =>\n        dataProvider\n            .getMany(resource, { ids: getRelatedIds(data, field) })\n            .then(({ data }) =>\n                data.reduce((acc, post) => {\n                    acc[post.id] = post;\n                    return acc;\n                }, {})\n            );\n", "import { useCallback, useMemo, useState } from 'react';\n\nimport { useStore, useRemoveFromStore } from '../../store';\nimport { RaRecord } from '../../types';\n\ntype UseRecordSelectionWithResourceArgs = {\n    resource: string;\n    disableSyncWithStore?: false;\n};\ntype UseRecordSelectionWithNoStoreArgs = {\n    resource?: string;\n    disableSyncWithStore: true;\n};\n\nexport type UseRecordSelectionArgs =\n    | UseRecordSelectionWithResourceArgs\n    | UseRecordSelectionWithNoStoreArgs;\n\nexport type UseRecordSelectionResult<RecordType extends RaRecord = any> = [\n    RecordType['id'][],\n    {\n        select: (ids: RecordType['id'][]) => void;\n        unselect: (ids: RecordType['id'][]) => void;\n        toggle: (id: RecordType['id']) => void;\n        clearSelection: () => void;\n    },\n];\n\n/**\n * Get the list of selected items for a resource, and callbacks to change the selection\n *\n * @param args.resource The resource name, e.g. 'posts'\n * @param args.disableSyncWithStore Controls the selection syncronization with the store\n *\n * @returns {Object} Destructure as [selectedIds, { select, toggle, clearSelection }].\n */\nexport const useRecordSelection = <RecordType extends RaRecord = any>(\n    args: UseRecordSelectionArgs\n): UseRecordSelectionResult<RecordType> => {\n    const { resource = '', disableSyncWithStore = false } = args;\n\n    const storeKey = `${resource}.selectedIds`;\n\n    const [localIds, setLocalIds] =\n        useState<RecordType['id'][]>(defaultSelection);\n    // As we can't conditionally call a hook, if the storeKey is false,\n    // we'll ignore the params variable later on and won't call setParams either.\n    const [storeIds, setStoreIds] = useStore<RecordType['id'][]>(\n        storeKey,\n        defaultSelection\n    );\n    const resetStore = useRemoveFromStore(storeKey);\n\n    const ids = disableSyncWithStore ? localIds : storeIds;\n    const setIds = disableSyncWithStore ? setLocalIds : setStoreIds;\n\n    const reset = useCallback(() => {\n        if (disableSyncWithStore) {\n            setLocalIds(defaultSelection);\n        } else {\n            resetStore();\n        }\n    }, [disableSyncWithStore, resetStore]);\n\n    const selectionModifiers = useMemo(\n        () => ({\n            select: (idsToAdd: RecordType['id'][]) => {\n                if (!idsToAdd) return;\n                setIds([...idsToAdd]);\n            },\n            unselect(idsToRemove: RecordType['id'][]) {\n                if (!idsToRemove || idsToRemove.length === 0) return;\n                setIds(ids => {\n                    if (!Array.isArray(ids)) return [];\n                    return ids.filter(id => !idsToRemove.includes(id));\n                });\n            },\n            toggle: (id: RecordType['id']) => {\n                if (typeof id === 'undefined') return;\n                setIds(ids => {\n                    if (!Array.isArray(ids)) return [...ids];\n                    const index = ids.indexOf(id);\n                    return index > -1\n                        ? [...ids.slice(0, index), ...ids.slice(index + 1)]\n                        : [...ids, id];\n                });\n            },\n            clearSelection: () => {\n                reset();\n            },\n        }),\n        [setIds, reset]\n    );\n\n    return [ids, selectionModifiers];\n};\n\nconst defaultSelection = [];\n", "import { useCallback, useMemo, useEffect, useState, useRef } from 'react';\nimport { parse, stringify } from 'query-string';\nimport lodashDebounce from 'lodash/debounce';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nimport { useStore } from '../../store';\nimport queryReducer, {\n    SET_FILTER,\n    HIDE_FILTER,\n    SHOW_FILTER,\n    SET_PAGE,\n    SET_PER_PAGE,\n    SET_SORT,\n    SORT_ASC,\n} from './queryReducer';\nimport { SortPayload, FilterPayload } from '../../types';\nimport removeEmpty from '../../util/removeEmpty';\nimport { useIsMounted } from '../../util/hooks';\n\nexport interface ListParams {\n    sort: string;\n    order: 'ASC' | 'DESC';\n    page: number;\n    perPage: number;\n    filter: any;\n    displayedFilters: any;\n}\n\n/**\n * Get the list parameters (page, sort, filters) and modifiers.\n *\n * These parameters are merged from 3 sources:\n *   - the query string from the URL\n *   - the params stored in the state (from previous navigation)\n *   - the options passed to the hook (including the filter defaultValues)\n *\n * @returns {Array} A tuple [parameters, modifiers].\n * Destructure as [\n *    { page, perPage, sort, order, filter, filterValues, displayedFilters, requestSignature },\n *    { setFilters, hideFilter, showFilter, setPage, setPerPage, setSort }\n * ]\n *\n * @example\n *\n * const [listParams, listParamsActions] = useListParams({\n *      resource: 'posts',\n *      location: location // From react-router. Injected to your component by react-admin inside a List\n *      filterDefaultValues: {\n *          published: true\n *      },\n *      sort: {\n *          field: 'published_at',\n *          order: 'DESC'\n *      },\n *      perPage: 25\n * });\n *\n * const {\n *      page,\n *      perPage,\n *      sort,\n *      order,\n *      filter,\n *      filterValues,\n *      displayedFilters,\n *      requestSignature\n * } = listParams;\n *\n * const {\n *      setFilters,\n *      hideFilter,\n *      showFilter,\n *      setPage,\n *      setPerPage,\n *      setSort,\n * } = listParamsActions;\n */\nexport const useListParams = ({\n    debounce = 500,\n    disableSyncWithLocation = false,\n    filterDefaultValues,\n    perPage = 10,\n    resource,\n    sort = defaultSort,\n    storeKey = `${resource}.listParams`,\n}: ListParamsOptions): [Parameters, Modifiers] => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const [localParams, setLocalParams] = useState(defaultParams);\n    // As we can't conditionally call a hook, if the storeKey is false,\n    // we'll ignore the params variable later on and won't call setParams either.\n    const [params, setParams] = useStore(\n        storeKey || `${resource}.listParams`,\n        defaultParams\n    );\n    const tempParams = useRef<ListParams>();\n    const isMounted = useIsMounted();\n    const disableSyncWithStore = storeKey === false;\n\n    const requestSignature = [\n        location.search,\n        resource,\n        storeKey,\n        JSON.stringify(\n            disableSyncWithLocation || disableSyncWithStore\n                ? localParams\n                : params\n        ),\n        JSON.stringify(filterDefaultValues),\n        JSON.stringify(sort),\n        perPage,\n        disableSyncWithLocation,\n    ];\n\n    const queryFromLocation = disableSyncWithLocation\n        ? {}\n        : parseQueryFromLocation(location);\n\n    const query = useMemo(\n        () =>\n            getQuery({\n                queryFromLocation,\n                params:\n                    disableSyncWithLocation || disableSyncWithStore\n                        ? localParams\n                        : params,\n                filterDefaultValues,\n                sort,\n                perPage,\n            }),\n        requestSignature // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    // if the location includes params (for example from a link like\n    // the categories products on the demo), we need to persist them in the\n    // store as well so that we don't lose them after a redirection back\n    // to the list\n    useEffect(() => {\n        if (\n            Object.keys(queryFromLocation).length > 0 &&\n            !disableSyncWithStore\n        ) {\n            setParams(query);\n        }\n    }, [location.search]); // eslint-disable-line\n\n    const changeParams = useCallback(\n        action => {\n            // do not change params if the component is already unmounted\n            // this is necessary because changeParams can be debounced, and therefore\n            // executed after the component is unmounted\n            if (!isMounted.current) return;\n\n            if (!tempParams.current) {\n                // no other changeParams action dispatched this tick\n                tempParams.current = queryReducer(query, action);\n                // schedule side effects for next tick\n                setTimeout(() => {\n                    if (!tempParams.current) {\n                        // the side effects were already processed by another changeParams\n                        return;\n                    }\n                    if (disableSyncWithLocation) {\n                        setLocalParams(tempParams.current);\n                    } else {\n                        // the useEffect above will apply the changes to the params in the store\n                        navigate(\n                            {\n                                search: `?${stringify({\n                                    ...tempParams.current,\n                                    filter: JSON.stringify(\n                                        tempParams.current.filter\n                                    ),\n                                    displayedFilters: JSON.stringify(\n                                        tempParams.current.displayedFilters\n                                    ),\n                                })}`,\n                            },\n                            {\n                                state: {\n                                    _scrollToTop: action.type === SET_PAGE,\n                                },\n                            }\n                        );\n                    }\n                    tempParams.current = undefined;\n                }, 0);\n            } else {\n                // side effects already scheduled, just change the params\n                tempParams.current = queryReducer(tempParams.current, action);\n            }\n        },\n        [...requestSignature, navigate] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const setSort = useCallback(\n        (sort: SortPayload) =>\n            changeParams({\n                type: SET_SORT,\n                payload: sort,\n            }),\n        [changeParams]\n    );\n\n    const setPage = useCallback(\n        (newPage: number) => changeParams({ type: SET_PAGE, payload: newPage }),\n        [changeParams]\n    );\n\n    const setPerPage = useCallback(\n        (newPerPage: number) =>\n            changeParams({ type: SET_PER_PAGE, payload: newPerPage }),\n        [changeParams]\n    );\n\n    const filterValues = query.filter || emptyObject;\n    const displayedFilterValues = query.displayedFilters || emptyObject;\n\n    const debouncedSetFilters = lodashDebounce((filter, displayedFilters) => {\n        changeParams({\n            type: SET_FILTER,\n            payload: {\n                filter: removeEmpty(filter),\n                displayedFilters,\n            },\n        });\n    }, debounce);\n\n    const setFilters = useCallback(\n        (filter, displayedFilters = undefined, debounce = false) =>\n            debounce\n                ? debouncedSetFilters(filter, displayedFilters)\n                : changeParams({\n                      type: SET_FILTER,\n                      payload: {\n                          filter: removeEmpty(filter),\n                          displayedFilters,\n                      },\n                  }),\n        [changeParams] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const hideFilter = useCallback(\n        (filterName: string) => {\n            changeParams({\n                type: HIDE_FILTER,\n                payload: filterName,\n            });\n        },\n        [changeParams]\n    );\n\n    const showFilter = useCallback(\n        (filterName: string, defaultValue: any) => {\n            changeParams({\n                type: SHOW_FILTER,\n                payload: {\n                    filterName,\n                    defaultValue,\n                },\n            });\n        },\n        [changeParams]\n    );\n\n    return [\n        {\n            filterValues,\n            requestSignature,\n            ...query,\n            displayedFilters: displayedFilterValues,\n        },\n        {\n            changeParams,\n            setPage,\n            setPerPage,\n            setSort,\n            setFilters,\n            hideFilter,\n            showFilter,\n        },\n    ];\n};\n\nconst parseObject = (query, field) => {\n    if (query[field] && typeof query[field] === 'string') {\n        try {\n            query[field] = JSON.parse(query[field]);\n        } catch (err) {\n            delete query[field];\n        }\n    }\n};\n\nexport const parseQueryFromLocation = ({ search }): Partial<ListParams> => {\n    const query = parse(search);\n    parseObject(query, 'filter');\n    parseObject(query, 'displayedFilters');\n    return query;\n};\n\n/**\n * Check if user has already set custom sort, page, or filters for this list\n *\n * User params come from the store as the params props. By default,\n * this object is:\n *\n * { filter: {}, order: null, page: 1, perPage: null, sort: null }\n *\n * To check if the user has custom params, we must compare the params\n * to these initial values.\n *\n * @param {Object} params\n */\nexport const hasCustomParams = (params: ListParams) => {\n    return (\n        params &&\n        params.filter &&\n        (Object.keys(params.filter).length > 0 ||\n            params.order != null ||\n            params.page !== 1 ||\n            params.perPage != null ||\n            params.sort != null)\n    );\n};\n\n/**\n * Merge list params from 3 different sources:\n *   - the query string\n *   - the params stored in the state (from previous navigation)\n *   - the props passed to the List component (including the filter defaultValues)\n */\nexport const getQuery = ({\n    queryFromLocation,\n    params,\n    filterDefaultValues,\n    sort,\n    perPage,\n}) => {\n    const query: Partial<ListParams> =\n        Object.keys(queryFromLocation).length > 0\n            ? queryFromLocation\n            : hasCustomParams(params)\n              ? { ...params }\n              : { filter: filterDefaultValues || {} };\n\n    if (!query.sort) {\n        query.sort = sort.field;\n        query.order = sort.order;\n    }\n    if (query.perPage == null) {\n        query.perPage = perPage;\n    }\n    if (query.page == null) {\n        query.page = 1;\n    }\n\n    return {\n        ...query,\n        page: getNumberOrDefault(query.page, 1),\n        perPage: getNumberOrDefault(query.perPage, 10),\n    } as ListParams;\n};\n\nexport const getNumberOrDefault = (\n    possibleNumber: string | number | undefined,\n    defaultValue: number\n) => {\n    if (typeof possibleNumber === 'undefined') {\n        return defaultValue;\n    }\n    const parsedNumber =\n        typeof possibleNumber === 'string'\n            ? parseInt(possibleNumber, 10)\n            : possibleNumber;\n\n    return isNaN(parsedNumber) ? defaultValue : parsedNumber;\n};\n\nexport interface ListParamsOptions {\n    debounce?: number;\n    // Whether to disable the synchronization of the list parameters with\n    // the current location (URL search parameters)\n    disableSyncWithLocation?: boolean;\n    // default value for a filter when displayed but not yet set\n    filterDefaultValues?: FilterPayload;\n    perPage?: number;\n    resource: string;\n    sort?: SortPayload;\n    storeKey?: string | false;\n}\n\ninterface Parameters extends ListParams {\n    filterValues: object;\n    displayedFilters: {\n        [key: string]: boolean;\n    };\n    requestSignature: any[];\n}\n\ninterface Modifiers {\n    changeParams: (action: any) => void;\n    setPage: (page: number) => void;\n    setPerPage: (pageSize: number) => void;\n    setSort: (sort: SortPayload) => void;\n    setFilters: (\n        filters: any,\n        displayedFilters?: any,\n        debounce?: boolean\n    ) => void;\n    hideFilter: (filterName: string) => void;\n    showFilter: (filterName: string, defaultValue: any) => void;\n}\n\nconst emptyObject = {};\n\nconst defaultSort = {\n    field: 'id',\n    order: SORT_ASC,\n} as const;\n\nconst defaultParams = {};\n", "import * as React from 'react';\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport isEqual from 'lodash/isEqual';\n\n// thanks Kent C Dodds for the following helpers\n\nexport function useSafeSetState<T>(\n    initialState?: T | (() => T)\n): [T | undefined, React.Dispatch<React.SetStateAction<T>>] {\n    const [state, setState] = useState(initialState);\n\n    const mountedRef = useRef(false);\n    useEffect(() => {\n        mountedRef.current = true;\n        return () => {\n            mountedRef.current = false;\n        };\n    }, []);\n    const safeSetState = useCallback(\n        args => {\n            if (mountedRef.current) {\n                return setState(args);\n            }\n        },\n        [mountedRef, setState]\n    );\n\n    return [state, safeSetState];\n}\n\nexport function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current = value;\n    });\n    return ref.current;\n}\n\nexport function useDeepCompareEffect(callback, inputs) {\n    const cleanupRef = useRef();\n    useEffect(() => {\n        if (!isEqual(previousInputs, inputs)) {\n            cleanupRef.current = callback();\n        }\n        return cleanupRef.current;\n    });\n    const previousInputs = usePrevious(inputs);\n}\n\n/**\n * A hook that returns true once a delay has expired.\n * @param ms The delay in milliseconds\n * @param key A key that can be used to reset the timer\n * @returns true if the delay has expired, false otherwise\n */\nexport function useTimeout(ms = 0, key = '') {\n    const [ready, setReady] = useSafeSetState(false);\n\n    useEffect(() => {\n        setReady(false);\n        let timer = setTimeout(() => {\n            setReady(true);\n        }, ms);\n\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [key, ms, setReady]);\n\n    return ready;\n}\n\nexport function useIsMounted() {\n    const isMounted = useRef(true);\n    useEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return isMounted;\n}\n", "import * as React from 'react';\nimport { ListContext } from './ListContext';\nimport { ListFilterContext, usePickFilterContext } from './ListFilterContext';\nimport { ListSortContext, usePickSortContext } from './ListSortContext';\nimport {\n    ListPaginationContext,\n    usePickPaginationContext,\n} from './ListPaginationContext';\nimport { ListControllerResult } from './useListController';\n\n/**\n * Create a List Context and several thematic List subcontext.\n *\n * Allows children to subscribe to part of the ListContext, and bail out of\n * rendering when some parts of the context that they don't depend on change\n * (because unfortunately React doesn't allow to use context selectors yet).\n *\n * @example\n *\n * const MyList = (props) => {\n *     const controllerProps = useListController(props);\n *     return (\n *         <ListContextProvider value={controllerProps}>\n *             <MyListView>\n *         </ListContextProvider>\n *     );\n * };\n *\n * const MyListView = () => {\n *     const { data, filterValues, setFilters } = useListContext();\n *     // or, to rerender only when filters change but not data\n *     const { filterValues, setFilters } = useListFilterContext();\n * }\n *\n * @see ListContext\n * @see ListFilterContext\n */\nexport const ListContextProvider = ({\n    value,\n    children,\n}: {\n    value: ListControllerResult;\n    children: React.ReactNode;\n}) => (\n    <ListContext.Provider value={value}>\n        <ListFilterContext.Provider value={usePickFilterContext(value)}>\n            <ListSortContext.Provider value={usePickSortContext(value)}>\n                <ListPaginationContext.Provider\n                    value={usePickPaginationContext(value)}\n                >\n                    {children}\n                </ListPaginationContext.Provider>\n            </ListSortContext.Provider>\n        </ListFilterContext.Provider>\n    </ListContext.Provider>\n);\n", "import { createContext } from 'react';\nimport { ListControllerResult } from './useListController';\n\n/**\n * Context to store the result of the useListController() hook.\n *\n * Use the useListContext() hook to read the context. That's what many\n * List components do in react-admin (e.g. <Datagrid>, <FilterForm>, <Pagination>).\n *\n * @typedef {Object} ListControllerProps\n * @prop {Array}    data an array of the list records, e.g. [{ id: 123, title: 'hello world' }, { ... }]\n * @prop {integer}  total the total number of results for the current filters, excluding pagination. Useful to build the pagination controls. e.g. 23\n * @prop {boolean}  isFetching boolean that is true on mount, and false once the data was fetched\n * @prop {boolean}  isLoading boolean that is false until the data is available\n * @prop {integer}  page the current page. Starts at 1\n * @prop {Function} setPage a callback to change the page, e.g. setPage(3)\n * @prop {integer}  perPage the number of results per page. Defaults to 25\n * @prop {Function} setPerPage a callback to change the number of results per page, e.g. setPerPage(25)\n * @prop {Object}   sort a sort object { field, order }, e.g. { field: 'date', order: 'DESC' }\n * @prop {Function} setSort a callback to change the sort, e.g. setSort({ field: 'name', order: 'ASC' })\n * @prop {Object}   filterValues a dictionary of filter values, e.g. { title: 'lorem', nationality: 'fr' }\n * @prop {Function} setFilters a callback to update the filters, e.g. setFilters(filters, displayedFilters)\n * @prop {Object}   displayedFilters a dictionary of the displayed filters, e.g. { title: true, nationality: true }\n * @prop {Function} showFilter a callback to show one of the filters, e.g. showFilter('title', defaultValue)\n * @prop {Function} hideFilter a callback to hide one of the filters, e.g. hideFilter('title')\n * @prop {Array}    selectedIds an array listing the ids of the selected rows, e.g. [123, 456]\n * @prop {Function} onSelect callback to change the list of selected rows, e.g. onSelect([456, 789])\n * @prop {Function} onToggleItem callback to toggle the selection of a given record based on its id, e.g. onToggleItem(456)\n * @prop {Function} onUnselectItems callback to clear the selection, e.g. onUnselectItems();\n * @prop {string}   defaultTitle the translated title based on the resource, e.g. 'Posts'\n * @prop {string}   resource the resource name, deduced from the location. e.g. 'posts'\n * @prop {Function} refetch a function for triggering a refetch of the list data\n *\n * @typedef Props\n * @prop {ListControllerResult} value\n *\n * @param {Props}\n *\n * @see useListController\n * @see useListContext\n *\n * @example\n *\n * import { useListController, ListContext } from 'ra-core';\n *\n * const List = props => {\n *     const controllerProps = useListController(props);\n *     return (\n *         <ListContext.Provider value={controllerProps}>\n *             ...\n *         </ListContext.Provider>\n *     );\n * };\n */\nexport const ListContext = createContext<ListControllerResult | null>(null);\n\nListContext.displayName = 'ListContext';\n", "import { createContext, useMemo } from 'react';\nimport pick from 'lodash/pick';\nimport { ListControllerResult } from './useListController';\n\n/**\n * Context to store the filter part of the useListController() result.\n *\n * Use the useListFilterContext() hook to read the context. That's what many\n * List components do in react-admin (e.g. <FilterForm>, <FilterListItem>).\n *\n * @typedef {Object} ListFilterContextValue\n * @prop {Object}   filterValues a dictionary of filter values, e.g. { title: 'lorem', nationality: 'fr' }\n * @prop {Function} setFilters a callback to update the filters, e.g. setFilters(filters, displayedFilters)\n * @prop {Object}   displayedFilters a dictionary of the displayed filters, e.g. { title: true, nationality: true }\n * @prop {Function} showFilter a callback to show one of the filters, e.g. showFilter('title', defaultValue)\n * @prop {Function} hideFilter a callback to hide one of the filters, e.g. hideFilter('title')\n * @prop {string}   resource the resource name, deduced from the location. e.g. 'posts'\n *\n * @typedef Props\n * @prop {ListFilterContextValue} value\n *\n * @param {Props}\n *\n * @see useListController\n * @see useListFilterContext\n *\n * @example\n *\n * import { useListController, usePickFilterContext, ListFilterContext } from 'ra-core';\n *\n * const List = props => {\n *     const controllerProps = useListController(props);\n *     return (\n *         <ListFilterContext.Provider value={usePickFilterContext(controllerProps)}>\n *             ...\n *         </ListFilterContext.Provider>\n *     );\n * };\n */\nexport const ListFilterContext = createContext<\n    ListFilterContextValue | undefined\n>(undefined);\n\nexport type ListFilterContextValue = Pick<\n    ListControllerResult,\n    | 'displayedFilters'\n    | 'filterValues'\n    | 'hideFilter'\n    | 'setFilters'\n    | 'showFilter'\n    | 'resource'\n>;\n\nexport const usePickFilterContext = (\n    context: ListControllerResult\n): ListFilterContextValue =>\n    useMemo(\n        () =>\n            pick(context, [\n                'displayedFilters',\n                'filterValues',\n                'hideFilter',\n                'setFilters',\n                'showFilter',\n                'resource',\n            ]),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [\n            context.displayedFilters,\n            context.filterValues,\n            context.hideFilter,\n            context.setFilters,\n            context.showFilter,\n        ]\n    );\n\nListFilterContext.displayName = 'ListFilterContext';\n", "import { createContext, useMemo } from 'react';\nimport pick from 'lodash/pick';\nimport { ListControllerResult } from './useListController';\n\n/**\n * Context to store the sort part of the useListController() result.\n *\n * Use the useListSortContext() hook to read the context. That's what many\n * List components do in react-admin (e.g. <SortButton>).\n *\n * @typedef {Object} ListSortContextValue\n * @prop {Object}   sort a sort object { field, order }, e.g. { field: 'date', order: 'DESC' }\n * @prop {Function} setSort a callback to change the sort, e.g. setSort({ field: 'name', order: 'ASC' })\n * @prop {string}   resource the resource name, deduced from the location. e.g. 'posts'\n *\n * @typedef Props\n * @prop {ListSortContextValue} value\n *\n * @param {Props}\n *\n * @see useListController\n * @see useListSortContext\n *\n * @example\n *\n * import { useListController, usePickSortContext, ListSortContext } from 'ra-core';\n *\n * const List = props => {\n *     const controllerProps = useListController(props);\n *     return (\n *         <ListSortContext.Provider value={usePickSortContext(controllerProps)}>\n *             ...\n *         </ListSortContext.Provider>\n *     );\n * };\n */\nexport const ListSortContext = createContext<ListSortContextValue | undefined>(\n    undefined\n);\n\nexport type ListSortContextValue = Pick<\n    ListControllerResult,\n    'sort' | 'setSort' | 'resource'\n>;\n\nexport const usePickSortContext = (\n    context: ListControllerResult\n): ListSortContextValue =>\n    useMemo(\n        () => pick(context, ['sort', 'setSort', 'resource']),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [context.sort, context.setSort]\n    );\n\nListSortContext.displayName = 'ListSortContext';\n", "import { createContext, useMemo } from 'react';\nimport pick from 'lodash/pick';\nimport { ListControllerResult } from './useListController';\n\n/**\n * Context to store the pagination part of the useListController() result.\n *\n * Use the useListPaginationContext() hook to read the pagination information.\n * That's what List components do in react-admin (e.g. <Pagination>).\n *\n * @typedef {Object} ListPaginationContextValue\n * @prop {boolean}  isLoading boolean that is false until the data is available\n * @prop {integer}  total the total number of results for the current filters, excluding pagination. Useful to build the pagination controls. e.g. 23\n * @prop {integer}  page the current page. Starts at 1\n * @prop {Function} setPage a callback to change the page, e.g. setPage(3)\n * @prop {integer}  perPage the number of results per page. Defaults to 25\n * @prop {Function} setPerPage a callback to change the number of results per page, e.g. setPerPage(25)\n * @prop {Boolean}  hasPreviousPage true if the current page is not the first one\n * @prop {Boolean}  hasNextPage true if the current page is not the last one\n\n * @prop {string}   resource the resource name, deduced from the location. e.g. 'posts'\n *\n * @typedef Props\n * @prop {ListPaginationContextValue} value\n *\n * @param {Props}\n *\n * @see useListController\n * @see useListContext\n *\n * @example\n *\n * import { useListController, ListPaginationContext } from 'ra-core';\n *\n * const List = props => {\n *     const controllerProps = useListController(props);\n *     return (\n *         <ListPaginationContext.Provider value={controllerProps}>\n *             ...\n *         </ListPaginationContext.Provider>\n *     );\n * };\n */\nexport const ListPaginationContext = createContext<\n    ListPaginationContextValue | undefined\n>(undefined);\n\nListPaginationContext.displayName = 'ListPaginationContext';\n\nexport type ListPaginationContextValue = Pick<\n    ListControllerResult,\n    | 'isLoading'\n    | 'isPending'\n    | 'hasPreviousPage'\n    | 'hasNextPage'\n    | 'page'\n    | 'perPage'\n    | 'setPage'\n    | 'setPerPage'\n    | 'total'\n    | 'resource'\n>;\n\nexport const usePickPaginationContext = (\n    context: ListControllerResult\n): ListPaginationContextValue =>\n    useMemo(\n        () =>\n            pick(context, [\n                'isLoading',\n                'isPending',\n                'hasPreviousPage',\n                'hasNextPage',\n                'page',\n                'perPage',\n                'setPage',\n                'setPerPage',\n                'total',\n                'resource',\n            ]),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [\n            context.isLoading,\n            context.isPending,\n            context.hasPreviousPage,\n            context.hasNextPage,\n            context.page,\n            context.perPage,\n            context.setPage,\n            context.setPerPage,\n            context.total,\n        ]\n    );\n", "import { createContext } from 'react';\nimport { InfiniteListControllerResult } from './useInfiniteListController';\n\n/**\n * Context to store the pagination callbacks from the useInfiniteListController() result.\n *\n * Use the useInfinitePaginationContext() hook to read the pagination callbacks.\n *\n * @typedef {Object} InfinitePaginationContextValue\n * @prop {Function} fetchNextPage a callback to fetch the next page\n * @prop {Function} fetchPreviousPage a callback to fetch the previous page\n\n * @example\n *\n * import { useListController, ListPaginationContext } from 'ra-core';\n *\n * const List = props => {\n *     const { fetchNextPage, fetchPreviousPage } = useInfiniteListController(props);\n *     return (\n *         <InfinitePaginationContext.Provider value={{ fetchNextPage, fetchPreviousPage }}>\n *             ...\n *         </InfinitePaginationContext.Provider>\n *     );\n * };\n */\nexport const InfinitePaginationContext =\n    createContext<InfinitePaginationContextValue>({\n        hasNextPage: false,\n        fetchNextPage: () => Promise.reject('not implemented'),\n        isFetchingNextPage: false,\n        hasPreviousPage: false,\n        fetchPreviousPage: () => Promise.reject('not implemented'),\n        isFetchingPreviousPage: false,\n    });\n\nInfinitePaginationContext.displayName = 'InfinitePaginationContext';\n\nexport type InfinitePaginationContextValue = Pick<\n    InfiniteListControllerResult,\n    | 'fetchNextPage'\n    | 'fetchPreviousPage'\n    | 'isFetchingNextPage'\n    | 'hasNextPage'\n    | 'hasPreviousPage'\n    | 'isFetchingPreviousPage'\n>;\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { useListController, ListControllerProps } from './useListController';\nimport { ResourceContextProvider } from '../../core';\nimport { RaRecord } from '../../types';\nimport { ListContextProvider } from './ListContextProvider';\n\n/**\n * Call useListController and put the value in a ListContext\n *\n * Base class for <List> components, without UI.\n *\n * Accepts any props accepted by useListController:\n * - filter: permanent filter applied to the list\n * - filters: Filter element, to display the filters\n * - filterDefaultValues: object;\n * - perPage: Number of results per page\n * - sort: Default sort\n * - exporter: exported function\n *\n * @example // Custom list layout\n *\n * const PostList = () => (\n *     <ListBase perPage={10}>\n *         <div>\n *              List metrics...\n *         </div>\n *         <Grid container>\n *             <Grid item xs={8}>\n *                 <SimpleList primaryText={record => record.title} />\n *             </Grid>\n *             <Grid item xs={4}>\n *                 List instructions...\n *             </Grid>\n *         </Grid>\n *         <div>\n *             Post related links...\n *         </div>\n *     </ListBase>\n * );\n */\nexport const ListBase = <RecordType extends RaRecord = any>({\n    children,\n    ...props\n}: ListControllerProps<RecordType> & { children: ReactNode }) => (\n    <ResourceContextProvider value={props.resource}>\n        <ListContextProvider value={useListController<RecordType>(props)}>\n            {children}\n        </ListContextProvider>\n    </ResourceContextProvider>\n);\n", "import { isValidElement, useEffect, useMemo } from 'react';\n\nimport { useAuthenticated } from '../../auth';\nimport { useTranslate } from '../../i18n';\nimport { useNotify } from '../../notification';\nimport {\n    useGetList,\n    UseGetListHookValue,\n    UseGetListOptions,\n} from '../../dataProvider';\nimport { SORT_ASC } from './queryReducer';\nimport { defaultExporter } from '../../export';\nimport { FilterPayload, SortPayload, RaRecord, Exporter } from '../../types';\nimport { useResourceContext, useGetResourceLabel } from '../../core';\nimport { useRecordSelection } from './useRecordSelection';\nimport { useListParams } from './useListParams';\n\n/**\n * Prepare data for the List view\n *\n * @param {Object} props The props passed to the List component.\n *\n * @return {Object} controllerProps Fetched and computed data for the List view\n *\n * @example\n *\n * import { useListController } from 'react-admin';\n * import ListView from './ListView';\n *\n * const MyList = props => {\n *     const controllerProps = useListController(props);\n *     return <ListView {...controllerProps} {...props} />;\n * }\n */\nexport const useListController = <RecordType extends RaRecord = any>(\n    props: ListControllerProps<RecordType> = {}\n): ListControllerResult<RecordType> => {\n    const {\n        debounce = 500,\n        disableAuthentication,\n        disableSyncWithLocation,\n        exporter = defaultExporter,\n        filter,\n        filterDefaultValues,\n        perPage = 10,\n        queryOptions = {},\n        sort = defaultSort,\n        storeKey,\n    } = props;\n    useAuthenticated({ enabled: !disableAuthentication });\n    const resource = useResourceContext(props);\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    if (!resource) {\n        throw new Error(\n            `useListController requires a non-empty resource prop or context`\n        );\n    }\n    if (\n        filter &&\n        (isValidElement(filter) ||\n            (Array.isArray(filter) && filter.some(isValidElement)))\n    ) {\n        throw new Error(\n            'useListController received a React element as `filter` props. If you intended to set the list filter elements, use the `filters` (with an s) prop instead. The `filter` prop is internal and should not be set by the developer.'\n        );\n    }\n\n    const translate = useTranslate();\n    const notify = useNotify();\n\n    const [query, queryModifiers] = useListParams({\n        debounce,\n        disableSyncWithLocation,\n        filterDefaultValues,\n        perPage,\n        resource,\n        sort,\n        storeKey,\n    });\n\n    const [selectedIds, selectionModifiers] = useRecordSelection({\n        resource,\n        disableSyncWithStore: storeKey === false,\n    });\n\n    const {\n        data,\n        pageInfo,\n        total,\n        error,\n        isLoading,\n        isFetching,\n        isPending,\n        refetch,\n    } = useGetList<RecordType>(\n        resource,\n        {\n            pagination: {\n                page: query.page,\n                perPage: query.perPage,\n            },\n            sort: { field: query.sort, order: query.order },\n            filter: { ...query.filter, ...filter },\n            meta,\n        },\n        {\n            placeholderData: previousData => previousData,\n            retry: false,\n            onError: error =>\n                notify(error?.message || 'ra.notification.http_error', {\n                    type: 'error',\n                    messageArgs: {\n                        _: error?.message,\n                    },\n                }),\n            ...otherQueryOptions,\n        }\n    );\n\n    // change page if there is no data\n    useEffect(() => {\n        if (\n            query.page <= 0 ||\n            (!isFetching &&\n                query.page > 1 &&\n                (data == null || data?.length === 0))\n        ) {\n            // Query for a page that doesn't exist, set page to 1\n            queryModifiers.setPage(1);\n            return;\n        }\n        if (total == null) {\n            return;\n        }\n        const totalPages = Math.ceil(total / query.perPage) || 1;\n        if (!isFetching && query.page > totalPages) {\n            // Query for a page out of bounds, set page to the last existing page\n            // It occurs when deleting the last element of the last page\n            queryModifiers.setPage(totalPages);\n        }\n    }, [isFetching, query.page, query.perPage, data, queryModifiers, total]);\n\n    const currentSort = useMemo(\n        () => ({\n            field: query.sort,\n            order: query.order,\n        }),\n        [query.sort, query.order]\n    );\n\n    const getResourceLabel = useGetResourceLabel();\n    const defaultTitle = translate('ra.page.list', {\n        name: getResourceLabel(resource, 2),\n    });\n\n    return {\n        sort: currentSort,\n        data,\n        defaultTitle,\n        displayedFilters: query.displayedFilters,\n        error,\n        exporter,\n        filter,\n        filterValues: query.filterValues,\n        hideFilter: queryModifiers.hideFilter,\n        isFetching,\n        isLoading,\n        isPending,\n        onSelect: selectionModifiers.select,\n        onToggleItem: selectionModifiers.toggle,\n        onUnselectItems: selectionModifiers.clearSelection,\n        page: query.page,\n        perPage: query.perPage,\n        refetch,\n        resource,\n        selectedIds,\n        setFilters: queryModifiers.setFilters,\n        setPage: queryModifiers.setPage,\n        setPerPage: queryModifiers.setPerPage,\n        setSort: queryModifiers.setSort,\n        showFilter: queryModifiers.showFilter,\n        total: total,\n        hasNextPage: pageInfo\n            ? pageInfo.hasNextPage\n            : total != null\n              ? query.page * query.perPage < total\n              : undefined,\n        hasPreviousPage: pageInfo ? pageInfo.hasPreviousPage : query.page > 1,\n    } as ListControllerResult<RecordType>;\n};\n\nexport interface ListControllerProps<RecordType extends RaRecord = any> {\n    /**\n     * The debounce delay for filter queries in milliseconds. Defaults to 500ms.\n     *\n     * @see https://marmelab.com/react-admin/List.html#debounce\n     * @example\n     * // wait 1 seconds instead of 500 milliseconds befoce calling the dataProvider\n     * const PostList = () => (\n     *     <List debounce={1000}>\n     *         ...\n     *     </List>\n     * );\n     */\n    debounce?: number;\n\n    /**\n     * Allow anonymous access to the list view. Defaults to false.\n     *\n     * @see https://marmelab.com/react-admin/List.html#disableauthentication\n     * @example\n     * import { List } from 'react-admin';\n     *\n     * const BoolkList = () => (\n     *     <List disableAuthentication>\n     *         ...\n     *     </List>\n     * );\n     */\n    disableAuthentication?: boolean;\n\n    /**\n     * Whether to disable the synchronization of the list parameters with the current location (URL search parameters)\n     *\n     * @see https://marmelab.com/react-admin/List.html#disablesyncwithlocation\n     * @example\n     * const Dashboard = () => (\n     *     <div>\n     *         // ...\n     *         <ResourceContextProvider value=\"posts\">\n     *             <List disableSyncWithLocation>\n     *                 <SimpleList\n     *                     primaryText={record => record.title}\n     *                     secondaryText={record => `${record.views} views`}\n     *                     tertiaryText={record => new Date(record.published_at).toLocaleDateString()}\n     *                 />\n     *             </List>\n     *         </ResourceContextProvider>\n     *         <ResourceContextProvider value=\"comments\">\n     *             <List disableSyncWithLocation>\n     *                 <SimpleList\n     *                     primaryText={record => record.title}\n     *                     secondaryText={record => `${record.views} views`}\n     *                     tertiaryText={record => new Date(record.published_at).toLocaleDateString()}\n     *                 />\n     *             </List>\n     *         </ResourceContextProvider>\n     *     </div>\n     * )\n     */\n    disableSyncWithLocation?: boolean;\n\n    /**\n     * The function called when a user exports the list\n     *\n     * @see https://marmelab.com/react-admin/List.html#exporter\n     * @example\n     * import { List, downloadCSV } from 'react-admin';\n     * import jsonExport from 'jsonexport/dist';\n     *\n     * const exporter = posts => {\n     *     const postsForExport = posts.map(post => {\n     *         const { backLinks, author, ...postForExport } = post; // omit backLinks and author\n     *         postForExport.author_name = post.author.name; // add a field\n     *         return postForExport;\n     *     });\n     *     jsonExport(postsForExport, {\n     *         headers: ['id', 'title', 'author_name', 'body'] // order fields in the export\n     *     }, (err, csv) => {\n     *         downloadCSV(csv, 'posts'); // download as 'posts.csv` file\n     *     });\n     * };\n     *\n     * const PostList = () => (\n     *     <List exporter={exporter}>\n     *         ...\n     *     </List>\n     * )\n     */\n    exporter?: Exporter<RecordType> | false;\n\n    /**\n     * Permanent filter applied to all getList queries, regardless of the user selected filters.\n     *\n     * @see https://marmelab.com/react-admin/List.html#filter\n     * @example\n     * export const PostList = () => (\n     *     <List filter={{ is_published: true }}>\n     *         ...\n     *     </List>\n     * );\n     */\n    filter?: FilterPayload;\n\n    /**\n     * The filter to apply when calling getList if the filter is empty.\n     *\n     * @see https://marmelab.com/react-admin/List.html#filterdefaultvalues\n     * @example\n     * const postFilters = [\n     *     <TextInput label=\"Search\" source=\"q\" alwaysOn />,\n     *     <BooleanInput source=\"is_published\" alwaysOn />,\n     *     <TextInput source=\"title\" defaultValue=\"Hello, World!\" />,\n     * ];\n     *\n     * export const PostList = () => (\n     *     <List filters={postFilters} filterDefaultValues={{ is_published: true }}>\n     *         ...\n     *     </List>\n     * );\n     */\n    filterDefaultValues?: object;\n\n    /**\n     * The number of results per page. Defaults to 10.\n     *\n     * @see https://marmelab.com/react-admin/List.html#perpage\n     * @example\n     * export const PostList = () => (\n     *     <List perPage={25}>\n     *         ...\n     *     </List>\n     * );\n     */\n    perPage?: number;\n\n    /**\n     * The options passed to react-query's useQuery when calling getList.\n     *\n     * @see https://marmelab.com/react-admin/List.html#queryoptions\n     * @example\n     * import { useNotify, useRedirect, List } from 'react-admin';\n     *\n     * const PostList = () => {\n     *     const notify = useNotify();\n     *     const redirect = useRedirect();\n     *\n     *     const onError = (error) => {\n     *         notify(`Could not load list: ${error.message}`, { type: 'error' });\n     *         redirect('/dashboard');\n     *     };\n     *\n     *     return (\n     *         <List queryOptions={{ onError }}>\n     *             ...\n     *         </List>\n     *     );\n     * }\n     */\n    queryOptions?: UseGetListOptions<RecordType>;\n\n    /**\n     * The resource name. Defaults to the resource from ResourceContext.\n     *\n     * @see https://marmelab.com/react-admin/List.html#resource\n     * @example\n     * import { List } from 'react-admin';\n     *\n     * const PostList = () => (\n     *    <List resource=\"posts\">\n     *       ...\n     *   </List>\n     * );\n     */\n    resource?: string;\n\n    /**\n     * The default sort field and order. Defaults to { field: 'id', order: 'ASC' }.\n     *\n     * @see https://marmelab.com/react-admin/List.html#sort\n     * @example\n     * export const PostList = () => (\n     *     <List sort={{ field: 'published_at', order: 'DESC' }}>\n     *         ...\n     *     </List>\n     * );\n     */\n    sort?: SortPayload;\n\n    /**\n     * The key to use to store the current filter & sort. Pass false to disable.\n     *\n     * @see https://marmelab.com/react-admin/List.html#storekey\n     * @example\n     * const NewerBooks = () => (\n     *     <List\n     *         resource=\"books\"\n     *         storeKey=\"newerBooks\"\n     *         sort={{ field: 'year', order: 'DESC' }}\n     *     >\n     *         ...\n     *     </List>\n     * );\n     */\n    storeKey?: string | false;\n}\n\nconst defaultSort = {\n    field: 'id',\n    order: SORT_ASC,\n} as const;\n\nexport const injectedProps = [\n    'sort',\n    'data',\n    'defaultTitle',\n    'displayedFilters',\n    'error',\n    'exporter',\n    'filterValues',\n    'hasNextPage',\n    'hasPreviousPage',\n    'hideFilter',\n    'isFetching',\n    'isLoading',\n    'isPending',\n    'onSelect',\n    'onToggleItem',\n    'onUnselectItems',\n    'page',\n    'perPage',\n    'refetch',\n    'refresh',\n    'resource',\n    'selectedIds',\n    'setFilters',\n    'setPage',\n    'setPerPage',\n    'setSort',\n    'showFilter',\n    'total',\n    'totalPages',\n];\n\n/**\n * Select the props injected by the useListController hook\n * to be passed to the List children need\n * This is an implementation of pick()\n */\nexport const getListControllerProps = props =>\n    injectedProps.reduce((acc, key) => ({ ...acc, [key]: props[key] }), {});\n\n/**\n * Select the props not injected by the useListController hook\n * to be used inside the List children to sanitize props injected by List\n * This is an implementation of omit()\n */\nexport const sanitizeListRestProps = props =>\n    Object.keys(props)\n        .filter(propName => !injectedProps.includes(propName))\n        .reduce((acc, key) => ({ ...acc, [key]: props[key] }), {});\n\nexport interface ListControllerBaseResult<RecordType extends RaRecord = any> {\n    sort: SortPayload;\n    defaultTitle?: string;\n    displayedFilters: any;\n    exporter?: Exporter | false;\n    filter?: FilterPayload;\n    filterValues: any;\n    hideFilter: (filterName: string) => void;\n    onSelect: (ids: RecordType['id'][]) => void;\n    onToggleItem: (id: RecordType['id']) => void;\n    onUnselectItems: () => void;\n    page: number;\n    perPage: number;\n    refetch: (() => void) | UseGetListHookValue<RecordType>['refetch'];\n    resource: string;\n    selectedIds: RecordType['id'][];\n    setFilters: (\n        filters: any,\n        displayedFilters?: any,\n        debounce?: boolean\n    ) => void;\n    setPage: (page: number) => void;\n    setPerPage: (page: number) => void;\n    setSort: (sort: SortPayload) => void;\n    showFilter: (filterName: string, defaultValue: any) => void;\n    hasNextPage?: boolean;\n    hasPreviousPage?: boolean;\n    isFetching?: boolean;\n    isLoading?: boolean;\n}\n\nexport interface ListControllerLoadingResult<RecordType extends RaRecord = any>\n    extends ListControllerBaseResult<RecordType> {\n    data: undefined;\n    total: undefined;\n    error: null;\n    isPending: true;\n}\nexport interface ListControllerErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends ListControllerBaseResult<RecordType> {\n    data: undefined;\n    total: undefined;\n    error: TError;\n    isPending: false;\n}\nexport interface ListControllerRefetchErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends ListControllerBaseResult<RecordType> {\n    data: RecordType[];\n    total: number;\n    error: TError;\n    isPending: false;\n}\nexport interface ListControllerSuccessResult<RecordType extends RaRecord = any>\n    extends ListControllerBaseResult<RecordType> {\n    data: RecordType[];\n    total: number;\n    error: null;\n    isPending: false;\n}\n\nexport type ListControllerResult<RecordType extends RaRecord = any> =\n    | ListControllerLoadingResult<RecordType>\n    | ListControllerErrorResult<RecordType>\n    | ListControllerRefetchErrorResult<RecordType>\n    | ListControllerSuccessResult<RecordType>;\n", "import {\n    useListController,\n    ListControllerProps,\n    ListControllerResult,\n} from './useListController';\n\n/**\n * Render prop version of the useListController hook.\n *\n * @see useListController\n * @example\n *\n * const ListView = () => <div>...</div>;\n * const List = props => (\n *     <ListController {...props}>\n *        {controllerProps => <ListView {...controllerProps} {...props} />}\n *     </ListController>\n * )\n */\nexport const ListController = ({\n    children,\n    ...props\n}: {\n    children: (params: ListControllerResult) => JSX.Element;\n} & ListControllerProps) => {\n    const controllerProps = useListController(props);\n    return children(controllerProps);\n};\n", "import { useCallback } from 'react';\n\nimport { useStore } from '../../store';\nimport { Identifier } from '../../types';\n\n/**\n * State-like hook for controlling the expanded state of a list item\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {string|integer} id The record identifier, e.g. 123\n * @param {boolean} single Forces only one id to be expanded at a time\n * @returns {Object} Destructure as [expanded, toggleExpanded].\n *\n * @example\n *\n * const [expanded, toggleExpanded] = useExpanded('posts', 123);\n * const expandIcon = expanded ? ExpandLess : ExpandMore;\n * const onExpandClick = () => toggleExpanded();\n */\nexport const useExpanded = (\n    resource: string,\n    id: Identifier,\n    single: boolean = false\n): [boolean, () => void] => {\n    const [expandedIds, setExpandedIds] = useStore<Identifier[]>(\n        `${resource}.datagrid.expanded`,\n        []\n    );\n    const expanded = Array.isArray(expandedIds)\n        ? // eslint-disable-next-line eqeqeq\n          expandedIds.map(el => el == id).indexOf(true) !== -1\n        : false;\n\n    const toggleExpanded = useCallback(() => {\n        setExpandedIds(ids => {\n            if (!Array.isArray(ids)) {\n                return [id];\n            }\n            const index = ids.findIndex(el => el == id); // eslint-disable-line eqeqeq\n            return index > -1\n                ? single\n                    ? []\n                    : [...ids.slice(0, index), ...ids.slice(index + 1)]\n                : single\n                  ? [id]\n                  : [...ids, id];\n        });\n    }, [setExpandedIds, id, single]);\n\n    return [expanded, toggleExpanded];\n};\n\n/**\n * State-like hook for controlling the expanded state of many list items\n * expanded state is true when at least one item from ids is expanded.\n *\n * @param {string} resource The resource name, e.g. 'posts'\n * @param {Identifier[]} ids A list of record identifiers\n * @returns {Object} Destructure as [expanded, toggleExpanded].\n *\n * @example\n *\n * const [expanded, toggleExpanded] = useExpandAll('posts', [123, 124, 125]);\n * const expandIcon = expanded ? ExpandLess : ExpandMore;\n * const onExpandClick = () => toggleExpanded();\n */\nexport const useExpandAll = (\n    resource: string,\n    ids: Identifier[]\n): [boolean, () => void] => {\n    const [expandedIds, setExpandedIds] = useStore<Identifier[]>(\n        `${resource}.datagrid.expanded`,\n        []\n    );\n\n    const isExpanded = Array.isArray(expandedIds)\n        ? // eslint-disable-next-line eqeqeq\n          expandedIds.some(id => ids.some(id2 => id2 == id))\n        : false;\n\n    const toggleExpandedAll = useCallback(() => {\n        const unaffectedExpandedIds = expandedIds.filter(\n            // eslint-disable-next-line eqeqeq\n            expanded_id => !ids.some(id => id == expanded_id)\n        );\n        setExpandedIds(\n            isExpanded\n                ? unaffectedExpandedIds\n                : unaffectedExpandedIds.concat(ids)\n        );\n    }, [expandedIds, setExpandedIds, isExpanded, ids]);\n\n    return [isExpanded, toggleExpandedAll];\n};\n", "import { useContext } from 'react';\n\nimport {\n    InfinitePaginationContext,\n    InfinitePaginationContextValue,\n} from './InfinitePaginationContext';\n\n/**\n * Hook to read the infinite pagination callbacks from the InfinitePaginationContext.\n *\n * Must be used within a <InfinitePaginationContext.Provider> (e.g. as a descendent of <InfiniteList>\n * or <InfiniteListBase>).\n *\n * @typedef {Object} InfinitePaginationContextValue\n * @prop {Function} fetchNextPage a callback to fetch the next page\n * @prop {Function} fetchPreviousPage a callback to fetch the previous page\n *\n * @returns {InfinitePaginationContextValue} infinite pagination callbacks\n *\n * @see useInfiniteListController for how the callbacks are built\n */\nexport const useInfinitePaginationContext =\n    (): InfinitePaginationContextValue => useContext(InfinitePaginationContext);\n", "import { useCallback, useEffect, useRef } from 'react';\nimport get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport { removeEmpty, useSafeSetState } from '../../util';\nimport { FilterPayload, RaRecord, SortPayload } from '../../types';\nimport { useResourceContext } from '../../core';\nimport usePaginationState from '../usePaginationState';\nimport useSortState from '../useSortState';\nimport { useRecordSelection } from './useRecordSelection';\nimport { ListControllerResult } from './useListController';\nimport { flattenObject } from '../../dataProvider/fetch';\n\nconst refetch = () => {\n    throw new Error(\n        'refetch is not available for a ListContext built from useList based on local data'\n    );\n};\n\n/**\n * Handle filtering, sorting and pagination on local data.\n *\n * Returns the data and callbacks expected by <ListContext>.\n *\n * @example\n * const data = [\n *     { id: 1, name: 'Arnold' },\n *     { id: 2, name: 'Sylvester' },\n *     { id: 3, name: 'Jean-Claude' },\n * ]\n *\n * const MyComponent = () => {\n *     const listContext = useList({ data });\n *     return (\n *         <ListContextProvider value={listContext}>\n *             <Datagrid>\n *                 <TextField source=\"id\" />\n *                 <TextField source=\"name\" />\n *             </Datagrid>\n *         </ListContextProvider>\n *     );\n * };\n *\n * @param {UseListOptions} props\n * @param {RaRecord[]} props.data An array of records\n * @param {Boolean} props.isFetching: Optional. A boolean indicating whether the data is being loaded\n * @param {Boolean} props.isLoading: Optional. A boolean indicating whether the data has been loaded at least once\n * @param {Error | String} props.error: Optional. The error if any occurred while loading the data\n * @param {Object} props.filter: Optional. An object containing the filters applied on the data\n * @param {Number} props.page: Optional. The initial page index\n * @param {Number} props.perPage: Optional. The initial page size\n * @param {SortPayload} props.sort: Optional. The initial sort (field and order)\n * @param {filterCallback} prop.filterCallback Optional. A function that allows you to make a custom filter\n */\nexport const useList = <RecordType extends RaRecord = any>(\n    props: UseListOptions<RecordType>\n): UseListValue<RecordType> => {\n    const {\n        data,\n        error,\n        filter = defaultFilter,\n        isFetching = false,\n        isLoading = false,\n        isPending = false,\n        page: initialPage = 1,\n        perPage: initialPerPage = 1000,\n        sort: initialSort,\n        filterCallback = (record: RecordType) => Boolean(record),\n    } = props;\n    const resource = useResourceContext(props);\n\n    const [fetchingState, setFetchingState] = useSafeSetState<boolean>(\n        isFetching\n    ) as [boolean, (isFetching: boolean) => void];\n\n    const [loadingState, setLoadingState] = useSafeSetState<boolean>(\n        isLoading\n    ) as [boolean, (isLoading: boolean) => void];\n\n    const [pendingState, setPendingState] = useSafeSetState<boolean>(\n        isPending\n    ) as [boolean, (isPending: boolean) => void];\n\n    const [finalItems, setFinalItems] = useSafeSetState<{\n        data?: RecordType[];\n        total?: number;\n    }>(() => ({\n        data,\n        total: data ? data.length : undefined,\n    }));\n\n    // pagination logic\n    const { page, setPage, perPage, setPerPage } = usePaginationState({\n        page: initialPage,\n        perPage: initialPerPage,\n    });\n\n    // sort logic\n    const { sort, setSort: setSortState } = useSortState(initialSort);\n    const setSort = useCallback(\n        (sort: SortPayload) => {\n            setSortState(sort);\n            setPage(1);\n        },\n        [setPage, setSortState]\n    );\n\n    // selection logic\n    const [selectedIds, selectionModifiers] = useRecordSelection(\n        resource\n            ? {\n                  resource,\n              }\n            : { disableSyncWithStore: true }\n    );\n\n    // filter logic\n    const filterRef = useRef(filter);\n    const [displayedFilters, setDisplayedFilters] = useSafeSetState<{\n        [key: string]: boolean;\n    }>({});\n    const [filterValues, setFilterValues] = useSafeSetState<{\n        [key: string]: any;\n    }>(filter);\n    const hideFilter = useCallback(\n        (filterName: string) => {\n            setDisplayedFilters(previousState => {\n                const { [filterName]: _, ...newState } = previousState;\n                return newState;\n            });\n            setFilterValues(previousState => {\n                const { [filterName]: _, ...newState } = previousState;\n                return newState;\n            });\n        },\n        [setDisplayedFilters, setFilterValues]\n    );\n    const showFilter = useCallback(\n        (filterName: string, defaultValue: any) => {\n            setDisplayedFilters(previousState => ({\n                ...previousState,\n                [filterName]: true,\n            }));\n            setFilterValues(previousState =>\n                removeEmpty({\n                    ...previousState,\n                    [filterName]: defaultValue,\n                })\n            );\n        },\n        [setDisplayedFilters, setFilterValues]\n    );\n    const setFilters = useCallback(\n        (filters, displayedFilters = undefined) => {\n            setFilterValues(removeEmpty(filters));\n            if (displayedFilters) {\n                setDisplayedFilters(displayedFilters);\n            }\n            setPage(1);\n        },\n        [setDisplayedFilters, setFilterValues, setPage]\n    );\n    // handle filter prop change\n    useEffect(() => {\n        if (!isEqual(filter, filterRef.current)) {\n            filterRef.current = filter;\n            setFilterValues(filter);\n        }\n    });\n\n    // We do all the data processing (filtering, sorting, paginating) client-side\n    useEffect(\n        () => {\n            if (isLoading || !data) return;\n            let tempData = data;\n\n            // 1. filter\n            if (filterValues) {\n                const flattenFilterValues = flattenObject(filterValues);\n                tempData = data\n                    .filter(record =>\n                        Object.entries(flattenFilterValues).every(\n                            ([filterName, filterValue]) => {\n                                const recordValue = get(record, filterName);\n                                const result = Array.isArray(recordValue)\n                                    ? Array.isArray(filterValue)\n                                        ? recordValue.some(item =>\n                                              filterValue.includes(item)\n                                          )\n                                        : recordValue.includes(filterValue)\n                                    : Array.isArray(filterValue)\n                                      ? filterValue.includes(recordValue)\n                                      : filterName === 'q' // special full-text filter\n                                        ? Object.keys(record).some(\n                                              key =>\n                                                  typeof record[key] ===\n                                                      'string' &&\n                                                  record[key]\n                                                      .toLowerCase()\n                                                      .includes(\n                                                          (\n                                                              filterValue as string\n                                                          ).toLowerCase()\n                                                      )\n                                          )\n                                        : filterValue == recordValue; // eslint-disable-line eqeqeq\n                                return result;\n                            }\n                        )\n                    )\n                    .filter(filterCallback);\n            }\n            const filteredLength = tempData.length;\n\n            // 2. sort\n            if (sort.field) {\n                tempData = tempData.sort((a, b) => {\n                    if (get(a, sort.field) > get(b, sort.field)) {\n                        return sort.order === 'ASC' ? 1 : -1;\n                    }\n                    if (get(a, sort.field) < get(b, sort.field)) {\n                        return sort.order === 'ASC' ? -1 : 1;\n                    }\n                    return 0;\n                });\n            }\n\n            // 3. paginate\n            tempData = tempData.slice((page - 1) * perPage, page * perPage);\n\n            setFinalItems({\n                data: tempData,\n                total: filteredLength,\n            });\n        }, // eslint-disable-next-line react-hooks/exhaustive-deps\n        [\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            JSON.stringify(data),\n            filterValues,\n            isLoading,\n            page,\n            perPage,\n            setFinalItems,\n            sort.field,\n            sort.order,\n        ]\n    );\n\n    useEffect(() => {\n        if (isFetching !== fetchingState) {\n            setFetchingState(isFetching);\n        }\n    }, [isFetching, fetchingState, setFetchingState]);\n\n    useEffect(() => {\n        if (isLoading !== loadingState) {\n            setLoadingState(isLoading);\n        }\n    }, [isLoading, loadingState, setLoadingState]);\n\n    useEffect(() => {\n        if (isPending !== pendingState) {\n            setPendingState(isPending);\n        }\n    }, [isPending, pendingState, setPendingState]);\n\n    return {\n        sort,\n        data: pendingState ? undefined : finalItems?.data ?? [],\n        defaultTitle: '',\n        error: error ?? null,\n        displayedFilters,\n        filterValues,\n        hasNextPage:\n            finalItems?.total == null\n                ? false\n                : page * perPage < finalItems.total,\n        hasPreviousPage: page > 1,\n        hideFilter,\n        isFetching: fetchingState,\n        isLoading: loadingState,\n        isPending: pendingState,\n        onSelect: selectionModifiers.select,\n        onToggleItem: selectionModifiers.toggle,\n        onUnselectItems: selectionModifiers.clearSelection,\n        page,\n        perPage,\n        resource: '',\n        refetch,\n        selectedIds,\n        setFilters,\n        setPage,\n        setPerPage,\n        setSort,\n        showFilter,\n        total: finalItems?.total,\n    } as UseListValue<RecordType>;\n};\n\nexport interface UseListOptions<RecordType extends RaRecord = any> {\n    data?: RecordType[];\n    error?: any;\n    filter?: FilterPayload;\n    isFetching?: boolean;\n    isLoading?: boolean;\n    isPending?: boolean;\n    page?: number;\n    perPage?: number;\n    sort?: SortPayload;\n    resource?: string;\n    filterCallback?: (record: RecordType) => boolean;\n}\n\nexport type UseListValue<RecordType extends RaRecord = any> =\n    ListControllerResult<RecordType>;\n\nconst defaultFilter = {};\n", "import { useContext } from 'react';\n\nimport { ListContext } from './ListContext';\nimport { ListControllerResult } from './useListController';\nimport { RaRecord } from '../../types';\n\n/**\n * Hook to read the list controller props from the ListContext.\n *\n * Used within a <ListContextProvider> (e.g. as a descendent of <List>).\n *\n * @returns {ListControllerResult} list controller props\n *\n * @see useListController for how it is filled\n *\n * @example // custom list view\n *\n * import { useListContext } from 'react-admin';\n *\n * const MyList = () => {\n *     const { data, isPending } = useListContext();\n *     if (isPending) {\n *         return <>Loading...</>;\n *     }\n *     return (\n *         <ul>\n *             {data.map(record => (\n *                 <li key={record.id}>{record.name}</li>\n *             ))}\n *         </ul>\n *     );\n * }\n *\n * @example // custom pagination\n *\n * import { useListContext } from 'react-admin';\n * import { Button, Toolbar } from '@mui/material';\n * import ChevronLeft from '@mui/icons-material/ChevronLeft';\n * import ChevronRight from '@mui/icons-material/ChevronRight';\n *\n * const PrevNextPagination = () => {\n *     const { page, perPage, total, setPage } = useListContext();\n *     const nbPages = Math.ceil(total / perPage) || 1;\n *     return (\n *         nbPages > 1 &&\n *             <Toolbar>\n *                 {page > 1 &&\n *                     <Button color=\"primary\" key=\"prev\" onClick={() => setPage(page - 1)}>\n *                         <ChevronLeft />\n *                         Prev\n *                     </Button>\n *                 }\n *                 {page !== nbPages &&\n *                     <Button color=\"primary\" key=\"next\" onClick={() => setPage(page + 1)}>\n *                         Next\n *                         <ChevronRight />\n *                     </Button>\n *                 }\n *             </Toolbar>\n *     );\n * }\n */\nexport const useListContext = <\n    RecordType extends RaRecord = any,\n>(): ListControllerResult<RecordType> => {\n    const context = useContext(ListContext);\n    if (!context) {\n        throw new Error(\n            'useListContext must be used inside a ListContextProvider'\n        );\n    }\n    return context;\n};\n", "import { useContext, useMemo } from 'react';\nimport defaults from 'lodash/defaults';\n\nimport { ListContext } from './ListContext';\nimport { ListControllerResult } from './useListController';\nimport { RaRecord } from '../../types';\n\n/**\n * Hook to read the list controller props from the ListContext.\n *\n * Mostly used within a <ListContext.Provider> (e.g. as a descendent of <List>\n * or <ListBase>).\n *\n * But you can also use it without a <ListContext.Provider>. In this case, it is up to you\n * to pass all the necessary props (see the list below).\n *\n * The given props will take precedence over context values.\n *\n * @typedef {Object} ListControllerProps\n * @prop {Object}   data an array of the list records, e.g. [{ id: 123, title: 'hello world' }, { ... }]\n * @prop {integer}  total the total number of results for the current filters, excluding pagination. Useful to build the pagination controls. e.g. 23\n * @prop {boolean}  isFetching boolean that is true on mount, and false once the data was fetched\n * @prop {boolean}  isLoading boolean that is false until the data is available\n * @prop {integer}  page the current page. Starts at 1\n * @prop {Function} setPage a callback to change the page, e.g. setPage(3)\n * @prop {integer}  perPage the number of results per page. Defaults to 25\n * @prop {Function} setPerPage a callback to change the number of results per page, e.g. setPerPage(25)\n * @prop {Object}   sort a sort object { field, order }, e.g. { field: 'date', order: 'DESC' }\n * @prop {Function} setSort a callback to change the sort, e.g. setSort({ field : 'name', order: 'ASC' })\n * @prop {Object}   filterValues a dictionary of filter values, e.g. { title: 'lorem', nationality: 'fr' }\n * @prop {Function} setFilters a callback to update the filters, e.g. setFilters(filters, displayedFilters)\n * @prop {Object}   displayedFilters a dictionary of the displayed filters, e.g. { title: true, nationality: true }\n * @prop {Function} showFilter a callback to show one of the filters, e.g. showFilter('title', defaultValue)\n * @prop {Function} hideFilter a callback to hide one of the filters, e.g. hideFilter('title')\n * @prop {Array}    selectedIds an array listing the ids of the selected rows, e.g. [123, 456]\n * @prop {Function} onSelect callback to change the list of selected rows, e.g. onSelect([456, 789])\n * @prop {Function} onToggleItem callback to toggle the selection of a given record based on its id, e.g. onToggleItem(456)\n * @prop {Function} onUnselectItems callback to clear the selection, e.g. onUnselectItems();\n * @prop {string}   defaultTitle the translated title based on the resource, e.g. 'Posts'\n * @prop {string}   resource the resource name, deduced from the location. e.g. 'posts'\n *\n * @param {ListControllerProps} props Props passed to the useListContext hook\n *\n * @returns {ListControllerResult} list controller props\n *\n * @see useListController for how it is filled\n */\nexport const useListContextWithProps = <RecordType extends RaRecord = any>(\n    props?: any\n): Partial<ListControllerResult<RecordType>> => {\n    const context = useContext(ListContext);\n    // Props take precedence over the context\n    return useMemo(\n        () =>\n            defaults(\n                {},\n                props != null ? extractListContextProps<RecordType>(props) : {},\n                context\n            ),\n        [context, props]\n    );\n};\n\n/**\n * Extract only the list controller props\n *\n * @param {Object} props Props passed to the useListContext hook\n *\n * @returns {ListControllerResult} List controller props\n */\nconst extractListContextProps = <RecordType extends RaRecord = any>({\n    sort,\n    data,\n    defaultTitle,\n    displayedFilters,\n    exporter,\n    filterValues,\n    hasCreate,\n    hideFilter,\n    isFetching,\n    isLoading,\n    isPending,\n    onSelect,\n    onToggleItem,\n    onUnselectItems,\n    page,\n    perPage,\n    refetch,\n    resource,\n    selectedIds,\n    setFilters,\n    setPage,\n    setPerPage,\n    setSort,\n    showFilter,\n    total,\n}: Partial<ListControllerResult<RecordType>> & Record<string, any>) => ({\n    sort,\n    data,\n    defaultTitle,\n    displayedFilters,\n    exporter,\n    filterValues,\n    hasCreate,\n    hideFilter,\n    isFetching,\n    isLoading,\n    isPending,\n    onSelect,\n    onToggleItem,\n    onUnselectItems,\n    page,\n    perPage,\n    refetch,\n    resource,\n    selectedIds,\n    setFilters,\n    setPage,\n    setPerPage,\n    setSort,\n    showFilter,\n    total,\n});\n", "import { useContext } from 'react';\n\nimport { ListFilterContext, ListFilterContextValue } from './ListFilterContext';\n\n/**\n * Hook to read the list props from the ListFilterContext.\n *\n * Must be used within a <ListFilterContextProvider>.\n *\n * @returns {ListFilterContextValue} list controller props\n *\n * @see useListController for how it is filled\n */\nexport const useListFilterContext = (): ListFilterContextValue => {\n    const context = useContext(ListFilterContext);\n    if (!context) {\n        throw new Error(\n            'useListFilterContext must be used inside a ListFilterContextProvider'\n        );\n    }\n    return context;\n};\n", "import { useContext } from 'react';\n\nimport {\n    ListPaginationContext,\n    ListPaginationContextValue,\n} from './ListPaginationContext';\n\n/**\n * Hook to read the list pagination controller props from the ListPaginationContext.\n *\n * Must be used within a <ListPaginationContext> (e.g. as a descendent of <List>\n * or <ListBase>).\n *\n * @returns {ListPaginationContextValue} list controller props\n *\n * @see useListController for how it is filled\n */\nexport const useListPaginationContext = (): ListPaginationContextValue => {\n    const context = useContext(ListPaginationContext);\n    if (!context) {\n        throw new Error(\n            'useListPaginationContext must be used inside a ListPaginationContextProvider'\n        );\n    }\n    return context;\n};\n", "import { useContext } from 'react';\n\nimport { ListSortContext, ListSortContextValue } from './ListSortContext';\n\n/**\n * Hook to read the list sort controller props from the ListSortContext.\n *\n * Must be used within a <ListSortContextProvider> (e.g. as a descendent of <List>\n * or <ListBase>).\n *\n * @returns {ListSortContextValue} list controller props\n *\n * @see useListController for how it is filled\n */\nexport const useListSortContext = (): ListSortContextValue => {\n    const context = useContext(ListSortContext);\n    if (!context) {\n        throw new Error(\n            'useListSortContext must be used inside a ListSortContextProvider'\n        );\n    }\n    return context;\n};\n", "import { useCallback } from 'react';\n\nimport { useRecordSelection } from './useRecordSelection';\nimport { Identifier } from '../../types';\n\n/**\n * Hook to Unselect the rows of a datagrid\n *\n * @example\n *\n * const unselect = useUnselect('posts');\n * unselect([123, 456]);\n */\nexport const useUnselect = (resource?: string) => {\n    const [, { unselect }] = useRecordSelection(\n        resource ? { resource } : { disableSyncWithStore: true }\n    );\n    return useCallback(\n        (ids: Identifier[]) => {\n            unselect(ids);\n        },\n        [unselect]\n    );\n};\n", "import { useCallback } from 'react';\n\nimport { useRecordSelection } from './useRecordSelection';\n\n/**\n * Hook to unselect all row of a datagrid\n *\n * @example\n *\n * const unselectAll = useUnselectAll('posts');\n * unselectAll();\n */\nexport const useUnselectAll = (resource?: string) => {\n    const [, { clearSelection }] = useRecordSelection(\n        resource ? { resource } : { disableSyncWithStore: true }\n    );\n    return useCallback(() => {\n        clearSelection();\n    }, [clearSelection]);\n};\n", "import { ReactElement } from 'react';\nimport { RaRecord } from '../../types';\nimport { ListControllerResult } from './useListController';\nimport { useListContext } from './useListContext';\n\n/**\n * Render prop version of useListContext\n *\n * @example\n * const BookList = () => (\n *    <List>\n *       <WithListContext render={({ data }) => (\n *          <ul>\n *            {data && data.map(record => (\n *              <li key={record.id}>{record.title}</li>\n *            ))}\n *          </ul>\n *       )} />\n *   </List>\n * );\n */\nexport const WithListContext = <RecordType extends RaRecord>({\n    render,\n}: WithListContextProps<RecordType>) =>\n    render(useListContext<RecordType>()) || null;\n\nexport interface WithListContextProps<RecordType extends RaRecord> {\n    render: (\n        context: ListControllerResult<RecordType>\n    ) => ReactElement | false | null;\n    label?: string;\n}\n", "import { useCallback, useEffect, useRef } from 'react';\nimport { UseQueryOptions } from '@tanstack/react-query';\nimport get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport lodashDebounce from 'lodash/debounce';\n\nimport { useSafeSetState, removeEmpty } from '../../util';\nimport { useGetManyReference } from '../../dataProvider';\nimport { useNotify } from '../../notification';\nimport { Identifier, RaRecord, SortPayload } from '../../types';\nimport { ListControllerResult } from '../list';\nimport usePaginationState from '../usePaginationState';\nimport { useRecordSelection } from '../list/useRecordSelection';\nimport useSortState from '../useSortState';\nimport { useResourceContext } from '../../core';\n\nexport interface UseReferenceManyFieldControllerParams<\n    RecordType extends RaRecord = RaRecord,\n    ReferenceRecordType extends RaRecord = RaRecord,\n> {\n    debounce?: number;\n    filter?: any;\n    page?: number;\n    perPage?: number;\n    record?: RecordType;\n    reference: string;\n    resource?: string;\n    sort?: SortPayload;\n    source?: string;\n    target: string;\n    queryOptions?: UseQueryOptions<\n        { data: ReferenceRecordType[]; total: number },\n        Error\n    >;\n}\n\nconst defaultFilter = {};\n\n/**\n * Fetch reference records, and return them when available\n *\n * Uses dataProvider.getManyReference() internally.\n *\n * @example // fetch the comments related to the current post\n * const { isPending, data } = useReferenceManyFieldController({\n *     reference: 'comments',\n *     target: 'post_id',\n *     record: { id: 123, title: 'hello, world' },\n *     resource: 'posts',\n * });\n *\n * @param {Object} props\n * @param {string} props.reference The linked resource name. Required.\n * @param {string} props.target The target resource key. Required.\n * @param {Object} props.filter The filter applied on the recorded records list\n * @param {number} props.page the page number\n * @param {number} props.perPage the number of item per page\n * @param {Object} props.record The current resource record\n * @param {string} props.resource The current resource name\n * @param {Object} props.sort the sort to apply to the referenced records\n * @param {string} props.source The key of the linked resource identifier\n * @param {UseQuery Options} props.queryOptions `react-query` options`\n *\n * @returns {ListControllerResult} The reference many props\n */\nexport const useReferenceManyFieldController = <\n    RecordType extends RaRecord = RaRecord,\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    props: UseReferenceManyFieldControllerParams<\n        RecordType,\n        ReferenceRecordType\n    >\n): ListControllerResult<ReferenceRecordType> => {\n    const {\n        debounce = 500,\n        reference,\n        record,\n        target,\n        filter = defaultFilter,\n        source = 'id',\n        page: initialPage,\n        perPage: initialPerPage,\n        sort: initialSort = { field: 'id', order: 'DESC' },\n        queryOptions = {} as UseQueryOptions<\n            { data: ReferenceRecordType[]; total: number },\n            Error\n        >,\n    } = props;\n    const notify = useNotify();\n    const resource = useResourceContext(props);\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    // pagination logic\n    const { page, setPage, perPage, setPerPage } = usePaginationState({\n        page: initialPage,\n        perPage: initialPerPage,\n    });\n\n    // sort logic\n    const { sort, setSort: setSortState } = useSortState(initialSort);\n    const setSort = useCallback(\n        (sort: SortPayload) => {\n            setSortState(sort);\n            setPage(1);\n        },\n        [setPage, setSortState]\n    );\n\n    // selection logic\n    const [selectedIds, selectionModifiers] = useRecordSelection({\n        resource: `${resource}.${record?.id}.${reference}`,\n    });\n\n    // filter logic\n    const filterRef = useRef(filter);\n    const [displayedFilters, setDisplayedFilters] = useSafeSetState<{\n        [key: string]: boolean;\n    }>({});\n    const [filterValues, setFilterValues] = useSafeSetState<{\n        [key: string]: any;\n    }>(filter);\n    const hideFilter = useCallback(\n        (filterName: string) => {\n            setDisplayedFilters(previousState => {\n                const { [filterName]: _, ...newState } = previousState;\n                return newState;\n            });\n            setFilterValues(previousState => {\n                const { [filterName]: _, ...newState } = previousState;\n                return newState;\n            });\n        },\n        [setDisplayedFilters, setFilterValues]\n    );\n    const showFilter = useCallback(\n        (filterName: string, defaultValue: any) => {\n            setDisplayedFilters(previousState => ({\n                ...previousState,\n                [filterName]: true,\n            }));\n            setFilterValues(previousState => ({\n                ...previousState,\n                [filterName]: defaultValue,\n            }));\n        },\n        [setDisplayedFilters, setFilterValues]\n    );\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const debouncedSetFilters = useCallback(\n        lodashDebounce((filters, displayedFilters) => {\n            setFilterValues(removeEmpty(filters));\n            setDisplayedFilters(displayedFilters);\n            setPage(1);\n        }, debounce),\n        [setDisplayedFilters, setFilterValues, setPage]\n    );\n\n    const setFilters = useCallback(\n        (filters, displayedFilters, debounce = false) => {\n            if (debounce) {\n                debouncedSetFilters(filters, displayedFilters);\n            } else {\n                setFilterValues(removeEmpty(filters));\n                setDisplayedFilters(displayedFilters);\n                setPage(1);\n            }\n        },\n        [setDisplayedFilters, setFilterValues, setPage, debouncedSetFilters]\n    );\n    // handle filter prop change\n    useEffect(() => {\n        if (!isEqual(filter, filterRef.current)) {\n            filterRef.current = filter;\n            setFilterValues(filter);\n        }\n    });\n\n    const {\n        data,\n        total,\n        pageInfo,\n        error,\n        isFetching,\n        isLoading,\n        isPending,\n        refetch,\n    } = useGetManyReference<ReferenceRecordType>(\n        reference,\n        {\n            target,\n            id: get(record, source) as Identifier,\n            pagination: { page, perPage },\n            sort,\n            filter: filterValues,\n            meta,\n        },\n        {\n            enabled: get(record, source) != null,\n            placeholderData: previousData => previousData,\n            onError: error =>\n                notify(\n                    typeof error === 'string'\n                        ? error\n                        : error.message || 'ra.notification.http_error',\n                    {\n                        type: 'error',\n                        messageArgs: {\n                            _:\n                                typeof error === 'string'\n                                    ? error\n                                    : error && error.message\n                                      ? error.message\n                                      : undefined,\n                        },\n                    }\n                ),\n            ...otherQueryOptions,\n        }\n    );\n\n    return {\n        sort,\n        data,\n        defaultTitle: undefined,\n        displayedFilters,\n        error,\n        filterValues,\n        hideFilter,\n        isFetching,\n        isLoading,\n        isPending,\n        onSelect: selectionModifiers.select,\n        onToggleItem: selectionModifiers.toggle,\n        onUnselectItems: selectionModifiers.clearSelection,\n        page,\n        perPage,\n        refetch,\n        resource: reference,\n        selectedIds,\n        setFilters,\n        setPage,\n        setPerPage,\n        hasNextPage: pageInfo\n            ? pageInfo.hasNextPage\n            : total != null\n              ? page * perPage < total\n              : undefined,\n        hasPreviousPage: pageInfo ? pageInfo.hasPreviousPage : page > 1,\n        setSort,\n        showFilter,\n        total,\n    } as ListControllerResult<ReferenceRecordType>;\n};\n", "import get from 'lodash/get';\nimport { UseQueryOptions } from '@tanstack/react-query';\n\nimport { useGetManyReference } from '../../dataProvider';\nimport { useNotify } from '../../notification';\nimport { RaRecord, SortPayload } from '../../types';\nimport { UseReferenceResult } from '../useReference';\n\nexport interface UseReferenceOneFieldControllerParams<\n    RecordType extends RaRecord = any,\n> {\n    record?: RaRecord;\n    reference: string;\n    source?: string;\n    target: string;\n    sort?: SortPayload;\n    filter?: any;\n    queryOptions?: Omit<\n        UseQueryOptions<{\n            data: RecordType[];\n            total: number;\n        }>,\n        'queryFn' | 'queryKey'\n    > & { meta?: any };\n}\n\n/**\n * Fetch a reference record in a one-to-one relationship, and return it when available\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example\n *\n * const { data, isPending, error } = useReferenceOneFieldController({\n *     record: { id: 7, name: 'James Joyce'}\n *     reference: 'bios',\n *     target: 'author_id',\n * });\n *\n * @typedef {Object} UseReferenceOneFieldControllerParams\n * @prop {Object} props.record The current resource record\n * @prop {string} props.reference The linked resource name\n * @prop {string} props.target The target resource key\n * @prop {string} props.source The key current record identifier ('id' by default)\n * @prop {Object} props.sort The sort to apply to the referenced records\n * @prop {Object} props.filter The filter to apply to the referenced records\n * @returns {UseReferenceResult} The request state. Destructure as { referenceRecord, isPending, error }.\n */\nexport const useReferenceOneFieldController = <\n    RecordType extends RaRecord = any,\n>(\n    props: UseReferenceOneFieldControllerParams<RecordType>\n): UseReferenceResult<RecordType> => {\n    const {\n        reference,\n        record,\n        target,\n        source = 'id',\n        sort = { field: 'id', order: 'ASC' },\n        filter = {},\n        queryOptions = {},\n    } = props;\n    const notify = useNotify();\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    const { data, error, isFetching, isLoading, isPending, refetch } =\n        useGetManyReference<RecordType>(\n            reference,\n            {\n                target,\n                id: get(record, source),\n                pagination: { page: 1, perPage: 1 },\n                sort,\n                filter,\n                meta,\n            },\n            {\n                enabled: !!record,\n                onError: error =>\n                    notify(\n                        typeof error === 'string'\n                            ? error\n                            : error.message || 'ra.notification.http_error',\n                        {\n                            type: 'error',\n                            messageArgs: {\n                                _:\n                                    typeof error === 'string'\n                                        ? error\n                                        : error && error.message\n                                          ? error.message\n                                          : undefined,\n                            },\n                        }\n                    ),\n                ...otherQueryOptions,\n            }\n        );\n\n    return {\n        referenceRecord: data ? data[0] : undefined,\n        error,\n        isFetching,\n        isLoading,\n        isPending,\n        refetch,\n    };\n};\n", "import { RaRecord, Translate } from '../../types';\nimport { MatchingReferencesError } from './types';\nimport { ControllerRenderProps } from 'react-hook-form';\n\ninterface GetStatusForInputParams<RecordType extends RaRecord = RaRecord> {\n    field: Pick<ControllerRenderProps, 'value'>;\n    matchingReferences: RecordType[] | MatchingReferencesError;\n    referenceRecord: RecordType;\n    translate: Translate;\n}\n\nconst isMatchingReferencesError = (\n    matchingReferences?: any\n): matchingReferences is MatchingReferencesError =>\n    matchingReferences && matchingReferences.error !== undefined;\n\nexport const getStatusForInput = <RecordType extends RaRecord = RaRecord>({\n    field,\n    matchingReferences,\n    referenceRecord,\n    translate = x => x,\n}: GetStatusForInputParams<RecordType>) => {\n    const matchingReferencesError = isMatchingReferencesError(\n        matchingReferences\n    )\n        ? translate(matchingReferences.error, {\n              _: matchingReferences.error,\n          })\n        : null;\n    const selectedReferenceError =\n        field.value && !referenceRecord\n            ? translate('ra.input.references.single_missing', {\n                  _: 'ra.input.references.single_missing',\n              })\n            : null;\n\n    return {\n        waiting:\n            (field.value && selectedReferenceError && !matchingReferences) ||\n            (!field.value && !matchingReferences),\n        error:\n            (field.value &&\n                selectedReferenceError &&\n                matchingReferencesError) ||\n            (!field.value && matchingReferencesError)\n                ? field.value\n                    ? selectedReferenceError\n                    : matchingReferencesError\n                : null,\n        warning: selectedReferenceError || matchingReferencesError,\n        choices: Array.isArray(matchingReferences)\n            ? matchingReferences\n            : [referenceRecord].filter(choice => choice),\n    };\n};\n\nexport const REFERENCES_STATUS_READY = 'REFERENCES_STATUS_READY';\nexport const REFERENCES_STATUS_INCOMPLETE = 'REFERENCES_STATUS_INCOMPLETE';\nexport const REFERENCES_STATUS_EMPTY = 'REFERENCES_STATUS_EMPTY';\n\nexport const getSelectedReferencesStatus = <RecordType extends RaRecord = any>(\n    field: Pick<ControllerRenderProps, 'value'>,\n    referenceRecords: RecordType[]\n) =>\n    !field.value || field.value.length === referenceRecords.length\n        ? REFERENCES_STATUS_READY\n        : referenceRecords.length > 0\n          ? REFERENCES_STATUS_INCOMPLETE\n          : REFERENCES_STATUS_EMPTY;\n\ninterface GetStatusForArrayInputParams<RecordType extends RaRecord = any> {\n    field: ControllerRenderProps;\n    matchingReferences: RecordType[] | MatchingReferencesError;\n    referenceRecords: RecordType[];\n    translate: Translate;\n}\n\nexport const getStatusForArrayInput = <RecordType extends RaRecord = any>({\n    field,\n    matchingReferences,\n    referenceRecords,\n    translate = x => x,\n}: GetStatusForArrayInputParams<RecordType>) => {\n    // selectedReferencesDataStatus can be \"empty\" (no data was found for references from input.value)\n    // or \"incomplete\" (Not all of the reference data was found)\n    // or \"ready\" (all references data was found or there is no references from input.value)\n    const selectedReferencesDataStatus = getSelectedReferencesStatus(\n        field,\n        referenceRecords\n    );\n\n    const matchingReferencesError = isMatchingReferencesError(\n        matchingReferences\n    )\n        ? translate(matchingReferences.error, {\n              _: matchingReferences.error,\n          })\n        : null;\n\n    const choices = Array.isArray(matchingReferences)\n        ? referenceRecords.concat(\n              matchingReferences.filter(\n                  choice =>\n                      referenceRecords.findIndex(c => c.id === choice.id) === -1\n              )\n          )\n        : referenceRecords;\n\n    return {\n        waiting:\n            (!matchingReferences &&\n                field.value &&\n                selectedReferencesDataStatus === REFERENCES_STATUS_EMPTY) ||\n            (!matchingReferences && !field.value),\n        error:\n            matchingReferencesError &&\n            (!field.value ||\n                (field.value &&\n                    selectedReferencesDataStatus === REFERENCES_STATUS_EMPTY))\n                ? translate('ra.input.references.all_missing', {\n                      _: 'ra.input.references.all_missing',\n                  })\n                : null,\n        warning:\n            matchingReferencesError ||\n            (field.value &&\n                selectedReferencesDataStatus !== REFERENCES_STATUS_READY)\n                ? matchingReferencesError ||\n                  translate('ra.input.references.many_missing', {\n                      _: 'ra.input.references.many_missing',\n                  })\n                : null,\n        choices,\n    };\n};\n", "import { useCallback, useMemo } from 'react';\nimport { useFormContext, useWatch } from 'react-hook-form';\nimport type { UseQueryOptions } from '@tanstack/react-query';\n\nimport { useGetList, useGetManyAggregate } from '../../dataProvider';\nimport { useReferenceParams } from './useReferenceParams';\nimport { useWrappedSource } from '../../core';\nimport type { FilterPayload, RaRecord, SortPayload } from '../../types';\nimport type { ChoicesContextValue } from '../../form';\n\n/**\n * Prepare data for the ReferenceArrayInput components\n *\n * @example\n *\n * const { allChoices, availableChoices, selectedChoices, error, isFetching, isLoading, isPending } = useReferenceArrayInputController({\n *      record: { referenceIds: ['id1', 'id2']};\n *      reference: 'reference';\n *      resource: 'resource';\n *      source: 'referenceIds';\n * });\n *\n * @param {Object} props\n * @param {Object} props.record The current resource record\n * @param {string} props.reference The linked resource name\n * @param {string} props.resource The current resource name\n * @param {string} props.source The key of the linked resource identifier\n *\n * @param {Props} props\n *\n * @return {Object} controllerProps Fetched data and callbacks for the ReferenceArrayInput components\n */\nexport const useReferenceArrayInputController = <\n    RecordType extends RaRecord = any,\n>(\n    props: UseReferenceArrayInputParams<RecordType>\n): ChoicesContextValue<RecordType> => {\n    const {\n        debounce,\n        enableGetChoices,\n        filter,\n        page: initialPage = 1,\n        perPage: initialPerPage = 25,\n        sort: initialSort = { field: 'id', order: 'DESC' },\n        queryOptions = {},\n        reference,\n        source,\n    } = props;\n    const { getValues } = useFormContext();\n    const finalSource = useWrappedSource(source);\n    // When we change the defaultValue of the child input using react-hook-form resetField function,\n    // useWatch does not seem to get the new value. We fallback to getValues to get it.\n    const value = useWatch({ name: finalSource }) ?? getValues(finalSource);\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    /**\n     * Get the records related to the current value (with getMany)\n     */\n    const {\n        data: referenceRecords,\n        error: errorGetMany,\n        isLoading: isLoadingGetMany,\n        isFetching: isFetchingGetMany,\n        isPending: isPendingGetMany,\n        refetch: refetchGetMany,\n    } = useGetManyAggregate<RecordType>(\n        reference,\n        {\n            ids: value || EmptyArray,\n            meta,\n        },\n        {\n            enabled: value != null && value.length > 0,\n        }\n    );\n\n    const [params, paramsModifiers] = useReferenceParams({\n        resource: reference,\n        page: initialPage,\n        perPage: initialPerPage,\n        sort: initialSort,\n        debounce,\n        filter,\n    });\n\n    // filter out not found references - happens when the dataProvider doesn't guarantee referential integrity\n    const finalReferenceRecords = referenceRecords\n        ? referenceRecords.filter(Boolean)\n        : [];\n\n    const isGetMatchingEnabled = enableGetChoices\n        ? enableGetChoices(params.filterValues)\n        : true;\n\n    const {\n        data: matchingReferences,\n        total,\n        pageInfo,\n        error: errorGetList,\n        isLoading: isLoadingGetList,\n        isFetching: isFetchingGetList,\n        isPending: isPendingGetList,\n        refetch: refetchGetMatching,\n    } = useGetList<RecordType>(\n        reference,\n        {\n            pagination: {\n                page: params.page,\n                perPage: params.perPage,\n            },\n            sort: { field: params.sort, order: params.order },\n            filter: { ...params.filter, ...filter },\n            meta,\n        },\n        {\n            retry: false,\n            enabled: isGetMatchingEnabled,\n            placeholderData: previousData => previousData,\n            ...otherQueryOptions,\n        }\n    );\n\n    // We merge the currently selected records with the matching ones, otherwise\n    // the component displaying the currently selected records may fail\n    const finalMatchingReferences =\n        matchingReferences && matchingReferences.length > 0\n            ? mergeReferences(matchingReferences, finalReferenceRecords)\n            : finalReferenceRecords.length > 0\n              ? finalReferenceRecords\n              : matchingReferences;\n\n    const refetch = useCallback(() => {\n        refetchGetMany();\n        refetchGetMatching();\n    }, [refetchGetMany, refetchGetMatching]);\n\n    const currentSort = useMemo(\n        () => ({\n            field: params.sort,\n            order: params.order,\n        }),\n        [params.sort, params.order]\n    );\n    return {\n        sort: currentSort,\n        allChoices: finalMatchingReferences,\n        availableChoices: matchingReferences,\n        selectedChoices: finalReferenceRecords,\n        displayedFilters: params.displayedFilters,\n        error: errorGetMany || errorGetList,\n        filter,\n        filterValues: params.filterValues,\n        hideFilter: paramsModifiers.hideFilter,\n        isFetching: isFetchingGetMany || isFetchingGetList,\n        isLoading: isLoadingGetMany || isLoadingGetList,\n        isPending: isPendingGetMany || isPendingGetList,\n        page: params.page,\n        perPage: params.perPage,\n        refetch,\n        resource: reference,\n        setFilters: paramsModifiers.setFilters,\n        setPage: paramsModifiers.setPage,\n        setPerPage: paramsModifiers.setPerPage,\n        setSort: paramsModifiers.setSort,\n        showFilter: paramsModifiers.showFilter,\n        // we return source and not finalSource because child inputs (e.g. AutocompleteArrayInput) already call useInput and compute the final source\n        source,\n        total: total,\n        hasNextPage: pageInfo\n            ? pageInfo.hasNextPage\n            : total != null\n              ? params.page * params.perPage < total\n              : undefined,\n        hasPreviousPage: pageInfo ? pageInfo.hasPreviousPage : params.page > 1,\n        isFromReference: true,\n    } as ChoicesContextValue<RecordType>;\n};\n\nconst EmptyArray = [];\n\n// concatenate and deduplicate two lists of records\nconst mergeReferences = <RecordType extends RaRecord = any>(\n    ref1: RecordType[],\n    ref2: RecordType[]\n): RecordType[] => {\n    const res = [...ref1];\n    const ids = ref1.map(ref => ref.id);\n    ref2.forEach(ref => {\n        if (!ids.includes(ref.id)) {\n            ids.push(ref.id);\n            res.push(ref);\n        }\n    });\n    return res;\n};\n\nexport interface UseReferenceArrayInputParams<\n    RecordType extends RaRecord = any,\n> {\n    debounce?: number;\n    filter?: FilterPayload;\n    queryOptions?: Omit<\n        UseQueryOptions<{\n            data: RecordType[];\n            total?: number;\n            pageInfo?: {\n                hasNextPage?: boolean;\n                hasPreviousPage?: boolean;\n            };\n        }>,\n        'queryFn' | 'queryKey'\n    > & { meta?: any };\n    page?: number;\n    perPage?: number;\n    record?: RecordType;\n    reference: string;\n    resource?: string;\n    sort?: SortPayload;\n    source: string;\n    enableGetChoices?: (filters: any) => boolean;\n}\n", "import { useCallback, useMemo, useState, useRef, useEffect } from 'react';\nimport lodashDebounce from 'lodash/debounce';\n\nimport { SortPayload, FilterPayload } from '../../types';\nimport removeEmpty from '../../util/removeEmpty';\nimport {\n    queryReducer,\n    HIDE_FILTER,\n    SET_FILTER,\n    SET_PAGE,\n    SET_PER_PAGE,\n    SET_SORT,\n    SHOW_FILTER,\n    SORT_ASC,\n} from '../list';\n\n/**\n * Get the reference inputs parameters (page, sort, filters) and modifiers.\n *\n * @returns {Array} A tuple [parameters, modifiers].\n * Destructure as [\n *    { page, perPage, sort, order, filter, filterValues, displayedFilters, requestSignature },\n *    { setFilters, hideFilter, showFilter, setPage, setPerPage, setSort }\n * ]\n *\n * @example\n *\n * const [referenceParams, referenceParamsActions] = useReferenceParams({\n *      resource: 'posts',\n *      filterDefaultValues: {\n *          published: true\n *      },\n *      sort: {\n *          field: 'published_at',\n *          order: 'DESC'\n *      },\n *      perPage: 25\n * });\n *\n * const {\n *      page,\n *      perPage,\n *      sort,\n *      order,\n *      filter,\n *      filterValues,\n *      displayedFilters,\n *      requestSignature\n * } = referenceParams;\n *\n * const {\n *      setFilters,\n *      hideFilter,\n *      showFilter,\n *      setPage,\n *      setPerPage,\n *      setSort,\n * } = referenceParamsActions;\n */\nexport const useReferenceParams = ({\n    resource,\n    filter,\n    sort = defaultSort,\n    page = 1,\n    perPage = 10,\n    debounce = 500,\n}: ReferenceParamsOptions): [Parameters, Modifiers] => {\n    const [params, setParams] = useState(defaultParams);\n    const tempParams = useRef<ReferenceParams>();\n\n    const requestSignature = [\n        resource,\n        JSON.stringify(params),\n        JSON.stringify(filter),\n        JSON.stringify(sort),\n        page,\n        perPage,\n    ];\n\n    const query = useMemo(\n        () =>\n            getQuery({\n                params: params,\n                filterDefaultValues: filter,\n                sort,\n                page,\n                perPage,\n            }),\n        requestSignature // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const changeParams = useCallback(action => {\n        if (!tempParams.current) {\n            // no other changeParams action dispatched this tick\n            const newTempParams = queryReducer(query, action);\n            tempParams.current = newTempParams;\n            // schedule side effects for next tick\n            setTimeout(() => {\n                setParams(newTempParams);\n                tempParams.current = undefined;\n            }, 0);\n        } else {\n            // side effects already scheduled, just change the params\n            tempParams.current = queryReducer(tempParams.current, action);\n        }\n    }, requestSignature); // eslint-disable-line react-hooks/exhaustive-deps\n\n    const setSort = useCallback(\n        (sort: SortPayload) =>\n            changeParams({\n                type: SET_SORT,\n                payload: sort,\n            }),\n        requestSignature // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const setPage = useCallback(\n        (newPage: number) => changeParams({ type: SET_PAGE, payload: newPage }),\n        requestSignature // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const setPerPage = useCallback(\n        (newPerPage: number) =>\n            changeParams({ type: SET_PER_PAGE, payload: newPerPage }),\n        requestSignature // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const filterValues = query.filter || emptyObject;\n    const displayedFilterValues = query.displayedFilters || emptyObject;\n\n    const debouncedSetFilters = useRef(\n        lodashDebounce((filter, displayedFilters = undefined) => {\n            changeParams({\n                type: SET_FILTER,\n                payload: {\n                    filter: removeEmpty(filter),\n                    displayedFilters,\n                },\n            });\n        }, debounce)\n    );\n    useEffect(() => {\n        return () => {\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            debouncedSetFilters.current.cancel();\n        };\n    }, []);\n\n    const setFilters = useCallback(\n        (filter, displayedFilters = undefined, debounce = false) => {\n            debounce\n                ? debouncedSetFilters.current(filter, displayedFilters)\n                : changeParams({\n                      type: SET_FILTER,\n                      payload: {\n                          filter: removeEmpty(filter),\n                          displayedFilters,\n                      },\n                  });\n        },\n        requestSignature // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    const hideFilter = useCallback((filterName: string) => {\n        changeParams({\n            type: HIDE_FILTER,\n            payload: filterName,\n        });\n    }, requestSignature); // eslint-disable-line react-hooks/exhaustive-deps\n\n    const showFilter = useCallback((filterName: string, defaultValue: any) => {\n        changeParams({\n            type: SHOW_FILTER,\n            payload: {\n                filterName,\n                defaultValue,\n            },\n        });\n    }, requestSignature); // eslint-disable-line react-hooks/exhaustive-deps\n    return [\n        {\n            filterValues,\n            requestSignature,\n            ...query,\n            displayedFilters: displayedFilterValues,\n        },\n        {\n            changeParams,\n            setPage,\n            setPerPage,\n            setSort,\n            setFilters,\n            hideFilter,\n            showFilter,\n        },\n    ];\n};\n\nexport const validQueryParams = [\n    'page',\n    'perPage',\n    'sort',\n    'order',\n    'filter',\n    'displayedFilters',\n];\n\n/**\n * Merge list params from 2 different sources:\n *   - the params stored in the local state\n *   - the props passed to the List component (including the filter defaultValues)\n */\nexport const getQuery = ({\n    params,\n    filterDefaultValues,\n    sort,\n    page,\n    perPage,\n}) => {\n    const query: Partial<ReferenceParams> = hasCustomParams(params)\n        ? { ...params }\n        : { filter: filterDefaultValues || {} };\n\n    if (!query.sort) {\n        query.sort = sort.field;\n        query.order = sort.order;\n    }\n    if (query.page == null) {\n        query.page = page;\n    }\n    if (query.perPage == null) {\n        query.perPage = perPage;\n    }\n    if (query.page == null) {\n        query.page = 1;\n    }\n\n    return {\n        ...query,\n        page: getNumberOrDefault(query.page, 1),\n        perPage: getNumberOrDefault(query.perPage, 10),\n    } as ReferenceParams;\n};\n\n/**\n * Check if user has already set custom sort, page, or filters for this list\n *\n * User params come from the Redux store as the params props. By default,\n * this object is:\n *\n * { filter: {}, order: null, page: 1, perPage: null, sort: null }\n *\n * To check if the user has custom params, we must compare the params\n * to these initial values.\n *\n * @param {Object} params\n */\nexport const hasCustomParams = (params: ReferenceParams) => {\n    return (\n        params &&\n        params.filter &&\n        (Object.keys(params.filter).length > 0 ||\n            params.order != null ||\n            params.page !== 1 ||\n            params.perPage != null ||\n            params.sort != null)\n    );\n};\n\nexport const getNumberOrDefault = (\n    possibleNumber: string | number | undefined,\n    defaultValue: number\n) => {\n    if (typeof possibleNumber === 'undefined') {\n        return defaultValue;\n    }\n    const parsedNumber =\n        typeof possibleNumber === 'string'\n            ? parseInt(possibleNumber, 10)\n            : possibleNumber;\n\n    return isNaN(parsedNumber) ? defaultValue : parsedNumber;\n};\n\nexport interface ReferenceParamsOptions {\n    resource: string;\n    page?: number;\n    perPage?: number;\n    sort?: SortPayload;\n    // default value for a filter when displayed but not yet set\n    filter?: FilterPayload;\n    debounce?: number;\n}\n\nexport interface ReferenceParams {\n    sort: string;\n    order: 'ASC' | 'DESC';\n    page: number;\n    perPage: number;\n    filter: any;\n    displayedFilters: any;\n}\n\ninterface Parameters extends ReferenceParams {\n    filterValues: object;\n    displayedFilters: {\n        [key: string]: boolean;\n    };\n    requestSignature: any[];\n}\n\ninterface Modifiers {\n    changeParams: (action: any) => void;\n    setPage: (page: number) => void;\n    setPerPage: (pageSize: number) => void;\n    setSort: (sort: SortPayload) => void;\n    setFilters: (\n        filters: any,\n        displayedFilters?: any,\n        debounce?: boolean\n    ) => void;\n    hideFilter: (filterName: string) => void;\n    showFilter: (filterName: string, defaultValue: any) => void;\n}\n\nconst emptyObject = {};\n\nconst defaultSort = {\n    field: 'id',\n    order: SORT_ASC,\n} as const;\n\nconst defaultParams = {};\n", "import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport type { UseQueryOptions } from '@tanstack/react-query';\n\nimport { useGetList } from '../../dataProvider';\nimport { useReference } from '../useReference';\nimport { useReferenceParams } from './useReferenceParams';\nimport { useWrappedSource } from '../../core';\nimport type { FilterPayload, RaRecord, SortPayload } from '../../types';\nimport type { ChoicesContextValue } from '../../form';\n\n/**\n * A hook for choosing a reference record. Useful for foreign keys.\n *\n * This hook fetches the possible values in the reference resource\n * (using `dataProvider.getList()`), it returns the possible choices\n * as the `choices` attribute.\n *\n * @example\n * const {\n *      choices, // the available reference resource\n * } = useReferenceInputController({\n *      input, // the input props\n *      resource: 'comments',\n *      reference: 'posts',\n *      source: 'post_id',\n * });\n *\n * The hook also allow to filter results. It returns a `setFilters`\n * function. It uses the value to create a filter for the query.\n * You can also add a permanentFilter to further filter the result:\n *\n * @example\n * const {\n *      choices, // the available reference resource\n *      setFilter,\n * } = useReferenceInputController({\n *      input, // the input props\n *      resource: 'comments',\n *      reference: 'posts',\n *      source: 'post_id',\n *      permanentFilter: {\n *          author: 'john'\n *      },\n * });\n */\nexport const useReferenceInputController = <RecordType extends RaRecord = any>(\n    props: UseReferenceInputControllerParams\n): ChoicesContextValue<RecordType> => {\n    const {\n        debounce,\n        enableGetChoices,\n        filter,\n        page: initialPage = 1,\n        perPage: initialPerPage = 25,\n        sort: initialSort,\n        queryOptions = {},\n        reference,\n        source,\n    } = props;\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    const [params, paramsModifiers] = useReferenceParams({\n        resource: reference,\n        page: initialPage,\n        perPage: initialPerPage,\n        sort: initialSort,\n        debounce,\n        filter,\n    });\n\n    // selection logic\n    const finalSource = useWrappedSource(source);\n    const currentValue = useWatch({ name: finalSource });\n\n    const isGetMatchingEnabled = enableGetChoices\n        ? enableGetChoices(params.filterValues)\n        : true;\n\n    // fetch possible values\n    const {\n        data: possibleValuesData = [],\n        total,\n        pageInfo,\n        isFetching: isFetchingPossibleValues,\n        isLoading: isLoadingPossibleValues,\n        isPending: isPendingPossibleValues,\n        error: errorPossibleValues,\n        refetch: refetchGetList,\n    } = useGetList<RecordType>(\n        reference,\n        {\n            pagination: {\n                page: params.page,\n                perPage: params.perPage,\n            },\n            sort: { field: params.sort, order: params.order },\n            filter: { ...params.filter, ...filter },\n            meta,\n        },\n        {\n            enabled: isGetMatchingEnabled,\n            placeholderData: previousData => previousData,\n            ...otherQueryOptions,\n        }\n    );\n\n    // fetch current value\n    const {\n        referenceRecord: currentReferenceRecord,\n        refetch: refetchReference,\n        error: errorReference,\n        isLoading: isLoadingReference,\n        isFetching: isFetchingReference,\n        isPending: isPendingReference,\n    } = useReference<RecordType>({\n        id: currentValue,\n        reference,\n        // @ts-ignore the types of the queryOptions for the getMAny and getList are not compatible\n        options: {\n            enabled: currentValue != null && currentValue !== '',\n            meta,\n            ...otherQueryOptions,\n        },\n    });\n\n    const isPending =\n        // The reference query isn't enabled when there is no value yet but as it has no data, react-query will flag it as pending\n        (currentValue != null && currentValue !== '' && isPendingReference) ||\n        isPendingPossibleValues;\n\n    // We need to delay the update of the referenceRecord and the finalData\n    // to the next React state update, because otherwise it can raise a warning\n    // with AutocompleteInput saying the current value is not in the list of choices\n    const [referenceRecord, setReferenceRecord] = useState<\n        RecordType | undefined\n    >(undefined);\n    useEffect(() => {\n        setReferenceRecord(currentReferenceRecord);\n    }, [currentReferenceRecord]);\n\n    // add current value to possible sources\n    let finalData: RecordType[], finalTotal: number | undefined;\n    if (\n        !referenceRecord ||\n        possibleValuesData.find(record => record.id === referenceRecord.id)\n    ) {\n        finalData = possibleValuesData;\n        finalTotal = total;\n    } else {\n        finalData = [referenceRecord, ...possibleValuesData];\n        finalTotal = total == null ? undefined : total + 1;\n    }\n\n    const refetch = useCallback(() => {\n        refetchGetList();\n        refetchReference();\n    }, [refetchGetList, refetchReference]);\n\n    const currentSort = useMemo(\n        () => ({\n            field: params.sort,\n            order: params.order,\n        }),\n        [params.sort, params.order]\n    );\n    return {\n        sort: currentSort,\n        allChoices: finalData,\n        availableChoices: possibleValuesData,\n        selectedChoices: referenceRecord ? [referenceRecord] : [],\n        displayedFilters: params.displayedFilters,\n        error: errorReference || errorPossibleValues,\n        filter: params.filter,\n        filterValues: params.filterValues,\n        hideFilter: paramsModifiers.hideFilter,\n        isFetching: isFetchingReference || isFetchingPossibleValues,\n        isLoading: isLoadingReference || isLoadingPossibleValues,\n        isPending: isPending,\n        page: params.page,\n        perPage: params.perPage,\n        refetch,\n        resource: reference,\n        setFilters: paramsModifiers.setFilters,\n        setPage: paramsModifiers.setPage,\n        setPerPage: paramsModifiers.setPerPage,\n        setSort: paramsModifiers.setSort,\n        showFilter: paramsModifiers.showFilter,\n        // we return source and not finalSource because child inputs (e.g. AutocompleteInput) already call useInput and compute the final source\n        source,\n        total: finalTotal,\n        hasNextPage: pageInfo\n            ? pageInfo.hasNextPage\n            : total != null\n              ? params.page * params.perPage < total\n              : undefined,\n        hasPreviousPage: pageInfo ? pageInfo.hasPreviousPage : params.page > 1,\n        isFromReference: true,\n    } as ChoicesContextValue<RecordType>;\n};\n\nexport interface UseReferenceInputControllerParams<\n    RecordType extends RaRecord = any,\n> {\n    debounce?: number;\n    filter?: FilterPayload;\n    queryOptions?: Omit<\n        UseQueryOptions<{\n            data: RecordType[];\n            total?: number;\n            pageInfo?: {\n                hasNextPage?: boolean;\n                hasPreviousPage?: boolean;\n            };\n        }>,\n        'queryFn' | 'queryKey'\n    > & { meta?: any };\n    page?: number;\n    perPage?: number;\n    record?: RaRecord;\n    reference: string;\n    resource?: string;\n    sort?: SortPayload;\n    source: string;\n    enableGetChoices?: (filters: any) => boolean;\n}\n", "import React, { ReactNode } from 'react';\n\nimport { ResourceContextProvider } from '../../core';\nimport { ChoicesContextProvider, InputProps } from '../../form';\nimport {\n    UseReferenceInputControllerParams,\n    useReferenceInputController,\n} from './useReferenceInputController';\n\n/**\n * An Input component for choosing a reference record. Useful for foreign keys.\n *\n * This component fetches the possible values in the reference resource\n * (using `dataProvider.getList()`), and renders the child you passed\n * to which it passes the possible choices via a `ChoicesContext`.\n *\n * You must pass a child selection component to customize the way the reference\n * selector is displayed (e.g. using `<SelectInput>` or `<RadioButtonGroupInput>`\n * instead of `<AutocompleteInput>` ).\n *\n * Note that the child component should handle the error and loading cases as this base component does not.\n *\n * @example // using a SelectInput as selector\n * export const CommentEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <ReferenceInputBase label=\"Post\" source=\"post_id\" reference=\"posts\">\n *                 <SelectInput optionText=\"title\" />\n *             </ReferenceInputBase>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * By default, restricts the possible values to 25. You can extend this limit\n * by setting the `perPage` prop.\n *\n * @example\n * <ReferenceInputBase source=\"post_id\" reference=\"posts\" perPage={100}/>\n *\n * By default, orders the possible values by id desc. You can change this order\n * by setting the `sort` prop (an object with `field` and `order` properties).\n *\n * @example\n * <ReferenceInputBase\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      sort={{ field: 'title', order: 'ASC' }}\n * >\n *     <SelectInput optionText=\"title\" />\n * </ReferenceInputBase>\n *\n * Also, you can filter the query used to populate the possible values. Use the\n * `filter` prop for that.\n *\n * @example\n * <ReferenceInputBase\n *      source=\"post_id\"\n *      reference=\"posts\"\n *      filter={{ is_published: true }}\n * >\n *      <SelectInput optionText=\"title\" />\n * </ReferenceInputBase>\n *\n * The enclosed component may filter results. ReferenceInputBase create a ChoicesContext which provides\n * a `setFilters` function. You can call this function to filter the results.\n */\nexport const ReferenceInputBase = (props: ReferenceInputBaseProps) => {\n    const {\n        children,\n        reference,\n        sort = { field: 'id', order: 'DESC' },\n        filter = {},\n    } = props;\n\n    const controllerProps = useReferenceInputController({\n        ...props,\n        sort,\n        filter,\n    });\n\n    return (\n        <ResourceContextProvider value={reference}>\n            <ChoicesContextProvider value={controllerProps}>\n                {children}\n            </ChoicesContextProvider>\n        </ResourceContextProvider>\n    );\n};\n\nexport interface ReferenceInputBaseProps\n    extends InputProps,\n        UseReferenceInputControllerParams {\n    children?: ReactNode;\n}\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { useFormContext, FieldValues } from 'react-hook-form';\nimport get from 'lodash/get';\nimport { useFormValues } from './useFormValues';\nimport { useWrappedSource } from '../core';\n\n/**\n * Get the current (edited) value of the record from the form and pass it\n * to a child function\n *\n * @example\n *\n * const PostEdit = () => (\n *     <Edit>\n *         <SimpleForm<FieldValues>>\n *             <BooleanInput source=\"hasEmail\" />\n *             <FormDataConsumer>\n *                 {({ formData }) => formData.hasEmail &&\n *                      <TextInput source=\"email\" />\n *                 }\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example\n *\n * const OrderEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <SelectInput source=\"country\" choices={countries} />\n *             <FormDataConsumer<FieldValues>>\n *                 {({ formData }) =>\n *                      <SelectInput\n *                          source=\"city\"\n *                          choices={getCitiesFor(formData.country)}\n *                      />\n *                 }\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     </Edit>\n * );\n */\nconst FormDataConsumer = <TFieldValues extends FieldValues = FieldValues>(\n    props: ConnectedProps<TFieldValues>\n) => {\n    const form = useFormContext<TFieldValues>();\n    const {\n        formState: {\n            // Don't know exactly why, but this is needed for the form values to be updated\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            isDirty,\n        },\n    } = form;\n    const formData = useFormValues<TFieldValues>();\n    return (\n        <FormDataConsumerView<TFieldValues> formData={formData} {...props} />\n    );\n};\n\nexport const FormDataConsumerView = <\n    TFieldValues extends FieldValues = FieldValues,\n>(\n    props: Props<TFieldValues>\n) => {\n    const { children, formData, source } = props;\n    let ret;\n\n    const finalSource = useWrappedSource(source || '');\n\n    // Passes an empty string here as we don't have the children sources and we just want to know if we are in an iterator\n    const matches = ArraySourceRegex.exec(finalSource);\n\n    // If we have an index, we are in an iterator like component (such as the SimpleFormIterator)\n    if (matches) {\n        const scopedFormData = get(formData, matches[0]);\n        ret = children({ formData, scopedFormData });\n    } else {\n        ret = children({ formData });\n    }\n\n    return ret === undefined ? null : ret;\n};\n\nexport default FormDataConsumer;\n\nconst ArraySourceRegex = new RegExp(/.+\\.\\d+$/);\n\nexport interface FormDataConsumerRenderParams<\n    TFieldValues extends FieldValues = FieldValues,\n    TScopedFieldValues extends FieldValues = TFieldValues,\n> {\n    formData: TFieldValues;\n    scopedFormData?: TScopedFieldValues;\n}\n\nexport type FormDataConsumerRender<\n    TFieldValues extends FieldValues = FieldValues,\n> = (params: FormDataConsumerRenderParams<TFieldValues>) => ReactNode;\n\ninterface ConnectedProps<TFieldValues extends FieldValues = FieldValues> {\n    children: FormDataConsumerRender<TFieldValues>;\n    form?: string;\n    record?: any;\n    source?: string;\n    [key: string]: any;\n}\n\ninterface Props<TFieldValues extends FieldValues> extends ConnectedProps {\n    formData: TFieldValues;\n    index?: number;\n}\n", "import { FieldValues, useFormContext, useWatch } from 'react-hook-form';\n\n// hook taken from https://react-hook-form.com/docs/usewatch/#rules\nexport const useFormValues = <\n    TFieldValues extends FieldValues = FieldValues,\n>() => {\n    const { getValues } = useFormContext<TFieldValues>();\n\n    return {\n        ...useWatch(), // subscribe to form value updates\n        ...getValues(), // always merge with latest form values\n    };\n};\n", "import { createContext } from 'react';\n\nexport const FormGroupsContext = createContext<\n    FormGroupsContextValue | undefined\n>(undefined);\n\nexport type FormGroupSubscriber = () => void;\n\nexport type FormGroupsContextValue = {\n    registerGroup: (name: string) => void;\n    unregisterGroup: (name: string) => void;\n    registerField: (source: string, group?: string) => void;\n    unregisterField: (source: string, group?: string) => void;\n    getGroupFields: (name: string) => string[];\n    /**\n     * Subscribe to any changes of the group content (fields added or removed).\n     * Subscribers can get the current fields of the group by calling getGroupFields.\n     * Returns a function to unsubscribe.\n     */\n    subscribe: (name: string, subscriber: FormGroupSubscriber) => () => void;\n};\n", "import * as React from 'react';\nimport {\n    ValidationErrorMessage,\n    ValidationErrorMessageWithArgs,\n} from './validate';\nimport { useTranslate } from '../i18n';\n\nexport interface ValidationErrorProps {\n    error: ValidationErrorMessage;\n}\n\nconst ValidationErrorSpecialFormatPrefix = '@@react-admin@@';\nconst ValidationError = (props: ValidationErrorProps) => {\n    const { error } = props;\n    let errorMessage = error;\n    const translate = useTranslate();\n    // react-hook-form expects errors to be plain strings but our validators can return objects\n    // that have message and args.\n    // To avoid double translation for users that validate with a schema instead of our validators\n    // we use a special format for our validators errors.\n    // The useInput hook handle the special formatting\n    if (\n        typeof error === 'string' &&\n        error.startsWith(ValidationErrorSpecialFormatPrefix)\n    ) {\n        errorMessage = JSON.parse(\n            error.substring(ValidationErrorSpecialFormatPrefix.length)\n        );\n    }\n    if ((errorMessage as ValidationErrorMessageWithArgs).message) {\n        const { message, args } =\n            errorMessage as ValidationErrorMessageWithArgs;\n        return <>{translate(message, { _: message, ...args })}</>;\n    }\n\n    return <>{translate(errorMessage as string, { _: errorMessage })}</>;\n};\n\nexport default ValidationError;\n", "import { FieldValues } from 'react-hook-form';\n\n/**\n * Convert a simple validation function that returns an object matching the form shape with errors\n * to a validation resolver compatible with react-hook-form.\n *\n * @example\n * const validate = (values: any) => {\n *     if (values.username == null || values.username.trim() === '') {\n *         return { username: 'Required' };\n *     }\n * }\n *\n * const validationResolver = getSimpleValidationResolver(validate);\n *\n * const UserForm = () => (\n *     <Form\n *         defaultValues={{ username: 'John' }}\n *         validationResolver={validationResolver}\n *     >\n *         <TextField source=\"username\" />\n *     </Form>\n * );\n */\nexport const getSimpleValidationResolver =\n    (validate: ValidateForm) => async (data: FieldValues) => {\n        const errors = await validate(data);\n\n        // If there are no errors, early return the form values\n        if (!errors || isEmptyObject(errors)) {\n            return { values: data, errors: {} };\n        }\n\n        // Else, we return an error object shaped like errors but having for each leaf\n        // `type: 'manual'` and a `message` prop like react-hook-form expects it\n        const transformedErrors = transformErrorFields(errors);\n\n        // Sometimes we still need to transform the error object to realize there are actually\n        // no errors in it.\n        //   e.g. with an ArrayInput we can get something like: `{backlinks: [{}, {}]}`\n        // If, after transformation, there are no errors, we return the form values\n        if (!transformedErrors || isEmptyObject(transformedErrors)) {\n            return { values: data, errors: {} };\n        }\n\n        // Else return the errors and no values\n        return {\n            values: {},\n            errors: transformedErrors,\n        };\n    };\n\nconst transformErrorFields = (error: object) => {\n    return Object.keys(error).reduce((acc, field) => {\n        // Handle arrays\n        if (Array.isArray(error[field])) {\n            let arrayHasErrors = false;\n            const transformedArrayErrors = error[field].map(item => {\n                if (!isEmptyObject(item)) {\n                    arrayHasErrors = true;\n                }\n                return transformErrorFields(item);\n            });\n            if (!arrayHasErrors) {\n                return acc;\n            }\n            return {\n                ...acc,\n                [field]: transformedArrayErrors,\n            };\n        }\n\n        // Handle objects\n        if (isEmptyObject(error[field])) {\n            return acc;\n        }\n        if (\n            typeof error[field] === 'object' &&\n            !isRaTranslationObj(error[field])\n        ) {\n            return {\n                ...acc,\n                [field]: transformErrorFields(error[field]),\n            };\n        }\n\n        // Handle leaf (either primary type or RaTranslationObj)\n        return {\n            ...acc,\n            [field]: addTypeAndMessage(error[field]),\n        };\n    }, {} as FieldValues);\n};\n\nconst addTypeAndMessage = (error: object) => ({\n    type: 'manual',\n    message: isRaTranslationObj(error) ? error : { message: error },\n});\n\nconst isRaTranslationObj = (obj: object) =>\n    Object.keys(obj).includes('message') && Object.keys(obj).includes('args');\n\nconst isEmptyObject = (obj: object) =>\n    Object.getOwnPropertyNames(obj).length === 0;\n\nexport type ValidateForm = (\n    data: FieldValues\n) => FieldValues | Promise<FieldValues>;\n", "import { createContext } from 'react';\nimport { UseGetListHookValue } from '../../dataProvider/useGetList';\nimport { FilterPayload, RaRecord, SortPayload } from '../../types';\n\n/**\n * Context to store choices and functions to retrieve them.\n *\n * Use the useChoicesContext() hook to read the context.\n */\nexport const ChoicesContext = createContext<ChoicesContextValue | undefined>(\n    undefined\n);\n\nexport type ChoicesContextBaseValue<RecordType extends RaRecord = any> = {\n    displayedFilters: any;\n    filter?: FilterPayload;\n    filterValues: any;\n    hasNextPage?: boolean;\n    hasPreviousPage?: boolean;\n    hideFilter: (filterName: string) => void;\n    isFetching: boolean;\n    isLoading: boolean;\n    page: number;\n    perPage: number;\n    refetch: (() => void) | UseGetListHookValue<RecordType>['refetch'];\n    resource: string;\n    setFilters: (\n        filters: any,\n        displayedFilters?: any,\n        debounce?: boolean\n    ) => void;\n    setPage: (page: number) => void;\n    setPerPage: (page: number) => void;\n    setSort: (sort: SortPayload) => void;\n    showFilter: (filterName: string, defaultValue: any) => void;\n    sort: SortPayload;\n    source: string;\n    isFromReference: boolean;\n};\n\nexport interface ChoicesContextLoadingResult<RecordType extends RaRecord = any>\n    extends ChoicesContextBaseValue<RecordType> {\n    allChoices: undefined;\n    availableChoices: undefined;\n    selectedChoices: undefined;\n    total: undefined;\n    error: null;\n    isPending: true;\n}\nexport interface ChoicesContextErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends ChoicesContextBaseValue<RecordType> {\n    allChoices: undefined;\n    availableChoices: undefined;\n    selectedChoices: undefined;\n    total: undefined;\n    error: TError;\n    isPending: false;\n}\nexport interface ChoicesContextRefetchErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends ChoicesContextBaseValue<RecordType> {\n    allChoices: RecordType[];\n    availableChoices: RecordType[];\n    selectedChoices: RecordType[];\n    total: number;\n    error: TError;\n    isPending: false;\n}\nexport interface ChoicesContextSuccessResult<RecordType extends RaRecord = any>\n    extends ChoicesContextBaseValue<RecordType> {\n    allChoices: RecordType[];\n    availableChoices: RecordType[];\n    selectedChoices: RecordType[];\n    total: number;\n    error: null;\n    isPending: false;\n}\n\nexport type ChoicesContextValue<RecordType extends RaRecord = any> =\n    | ChoicesContextLoadingResult<RecordType>\n    | ChoicesContextErrorResult<RecordType>\n    | ChoicesContextRefetchErrorResult<RecordType>\n    | ChoicesContextSuccessResult<RecordType>;\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { ChoicesContext, ChoicesContextValue } from './ChoicesContext';\n\nexport const ChoicesContextProvider = ({\n    children,\n    value,\n}: {\n    children: ReactNode;\n    value: ChoicesContextValue;\n}) => (\n    <ChoicesContext.Provider value={value}>{children}</ChoicesContext.Provider>\n);\n", "import { useContext, useMemo } from 'react';\nimport { RaRecord } from '../../types';\nimport { useList } from '../../controller';\nimport { ChoicesContext, ChoicesContextValue } from './ChoicesContext';\n\nexport const useChoicesContext = <ChoicesType extends RaRecord = RaRecord>(\n    options: Partial<ChoicesContextValue> & {\n        choices?: ChoicesType[];\n    } = {}\n): ChoicesContextValue<ChoicesType> => {\n    const context = useContext(\n        ChoicesContext\n    ) as ChoicesContextValue<ChoicesType>;\n    const choices =\n        options.choices && isArrayOfStrings(options.choices)\n            ? convertOptionsToChoices(options.choices)\n            : options.choices;\n    // @ts-ignore cannot satisfy the type of useList because of ability to pass partial options\n    const { data, ...list } = useList<any>({\n        data: choices,\n        isLoading: options.isLoading ?? false,\n        isPending: options.isPending ?? false,\n        isFetching: options.isFetching ?? false,\n        error: options.error,\n        // When not in a ChoicesContext, paginating does not make sense (e.g. AutocompleteInput).\n        perPage: Infinity,\n    });\n    const result = useMemo(() => {\n        // Props take precedence over context.\n        if (options.choices || !context) {\n            return {\n                allChoices: data,\n                availableChoices: options.availableChoices ?? data,\n                selectedChoices: options.selectedChoices ?? data,\n                displayedFilters:\n                    options.selectedChoices ?? list.displayedFilters,\n                error: options.error,\n                filter: options.filter ?? list.filter,\n                filterValues: options.filterValues ?? list.filterValues,\n                hasNextPage: options.hasNextPage ?? list.hasNextPage,\n                hasPreviousPage:\n                    options.hasPreviousPage ?? list.hasPreviousPage,\n                hideFilter: options.hideFilter ?? list.hideFilter,\n                isLoading: list.isLoading ?? false, // we must take the one for useList, otherwise the loading state isn't synchronized with the data\n                isPending: list.isPending ?? false, // same\n                isFetching: list.isFetching ?? false, // same\n                page: options.page ?? list.page,\n                perPage: options.perPage ?? list.perPage,\n                refetch: options.refetch ?? list.refetch,\n                resource: options.resource ?? list.resource,\n                setFilters: options.setFilters ?? list.setFilters,\n                setPage: options.setPage ?? list.setPage,\n                setPerPage: options.setPerPage ?? list.setPerPage,\n                setSort: options.setSort ?? list.setSort,\n                showFilter: options.showFilter ?? list.showFilter,\n                sort: options.sort ?? list.sort,\n                source: options.source,\n                total: options.total ?? list.total,\n                isFromReference: false,\n            };\n        }\n        return context;\n    }, [context, data, list, options]);\n\n    return result as ChoicesContextValue<ChoicesType>;\n};\n\nconst isArrayOfStrings = (choices: any[]): choices is string[] =>\n    Array.isArray(choices) &&\n    choices.every(choice => typeof choice === 'string');\n\nconst convertOptionsToChoices = (options: string[]) =>\n    options.map(choice => ({\n        id: choice,\n        name: choice,\n    }));\n", "import * as React from 'react';\nimport { ReactNode, useContext } from 'react';\nimport {\n    FormProvider,\n    FieldValues,\n    UseFormProps,\n    SubmitHandler,\n} from 'react-hook-form';\nimport {\n    UNSAFE_DataRouterContext,\n    UNSAFE_DataRouterStateContext,\n} from 'react-router';\n\nimport { FormGroupsProvider } from './FormGroupsProvider';\nimport { RaRecord } from '../types';\nimport {\n    useRecordContext,\n    OptionalRecordContextProvider,\n    SaveHandler,\n} from '../controller';\nimport {\n    SourceContextProvider,\n    SourceContextValue,\n    useResourceContext,\n} from '../core';\nimport { ValidateForm } from './getSimpleValidationResolver';\nimport { WarnWhenUnsavedChanges } from './WarnWhenUnsavedChanges';\nimport { useAugmentedForm } from './useAugmentedForm';\n\n/**\n * Creates a form element, initialized with the current record, calling the saveContext on submit\n *\n * Wrapper around react-hook-form's useForm, FormContextProvider, and <form>.\n * Also sets up a FormGroupContext, and handles submission validation.\n *\n * @example\n *\n * const MyForm = ({ record, defaultValues, validate }) => (\n *    <Form record={record} defaultValues={defaultValues} validate={validate}>\n *        <Stack>\n *            <TextInput source=\"title\" />\n *            <SaveButton />\n *        </Stack>\n *    </Form>\n * );\n *\n * @typedef {Object} Props the props you can use\n * @prop {Object} defaultValues\n * @prop {Function} validate\n * @prop {Function} save\n *\n * @see useForm\n * @see FormGroupContext\n *\n * @link https://react-hook-form.com/docs/useformcontext\n */\nexport function Form<RecordType = any>(props: FormProps<RecordType>) {\n    const {\n        children,\n        id,\n        className,\n        noValidate = false,\n        formRootPathname,\n        warnWhenUnsavedChanges,\n        WarnWhenUnsavedChangesComponent = WarnWhenUnsavedChanges,\n    } = props;\n    const record = useRecordContext(props);\n    const resource = useResourceContext(props);\n    const { form, formHandleSubmit } = useAugmentedForm(props);\n    const sourceContext = React.useMemo<SourceContextValue>(\n        () => ({\n            getSource: (source: string) => source,\n            getLabel: (source: string) =>\n                `resources.${resource}.fields.${source}`,\n        }),\n        [resource]\n    );\n    const dataRouterContext = useContext(UNSAFE_DataRouterContext);\n    const dataRouterStateContext = useContext(UNSAFE_DataRouterStateContext);\n    if (\n        warnWhenUnsavedChanges &&\n        (!dataRouterContext || !dataRouterStateContext) &&\n        process.env.NODE_ENV === 'development'\n    ) {\n        console.error(\n            'Cannot use the warnWhenUnsavedChanges feature outside of a DataRouter. ' +\n                'The warnWhenUnsavedChanges feature is disabled. ' +\n                'Remove the warnWhenUnsavedChanges prop or convert your custom router to a Data Router.'\n        );\n    }\n\n    return (\n        <OptionalRecordContextProvider value={record}>\n            <SourceContextProvider value={sourceContext}>\n                <FormProvider {...form}>\n                    <FormGroupsProvider>\n                        <form\n                            onSubmit={formHandleSubmit}\n                            noValidate={noValidate}\n                            id={id}\n                            className={className}\n                        >\n                            {children}\n                        </form>\n                        {warnWhenUnsavedChanges &&\n                            dataRouterContext &&\n                            dataRouterStateContext && (\n                                <WarnWhenUnsavedChangesComponent\n                                    enable\n                                    formRootPathName={formRootPathname}\n                                    formControl={form.control}\n                                />\n                            )}\n                    </FormGroupsProvider>\n                </FormProvider>\n            </SourceContextProvider>\n        </OptionalRecordContextProvider>\n    );\n}\n\nexport type FormProps<RecordType = any> = FormOwnProps<RecordType> &\n    Omit<UseFormProps, 'onSubmit'> & {\n        validate?: ValidateForm;\n        noValidate?: boolean;\n        WarnWhenUnsavedChangesComponent?: React.ComponentType<{\n            enable?: boolean;\n            formRootPathName?: string;\n            formControl?: any;\n        }>;\n    };\n\nexport interface FormOwnProps<RecordType = any> {\n    children: ReactNode;\n    className?: string;\n    defaultValues?: any;\n    formRootPathname?: string;\n    id?: string;\n    record?: Partial<RaRecord>;\n    resource?: string;\n    onSubmit?: SubmitHandler<FieldValues> | SaveHandler<RecordType>;\n    warnWhenUnsavedChanges?: boolean;\n    sanitizeEmptyValues?: boolean;\n    disableInvalidFormNotification?: boolean;\n}\n", "import * as React from 'react';\nimport { ReactNode, useMemo, useRef } from 'react';\nimport {\n    FormGroupsContext,\n    FormGroupsContextValue,\n    FormGroupSubscriber,\n} from './FormGroupsContext';\n\n/**\n * This component provides functions through context to manage form groups,\n * allowing to link or unlink an input to a group.\n * @see FormGroupContextProvider\n * @see useFormGroup\n * @see useFormGroups\n */\nexport const FormGroupsProvider = ({ children }: { children: ReactNode }) => {\n    const formGroups = useRef<{ [key: string]: string[] }>({});\n    const subscribers = useRef<{\n        [key: string]: FormGroupSubscriber[];\n    }>({});\n\n    const formContextValue = useMemo<FormGroupsContextValue>(\n        () => ({\n            /**\n             * Register a subscriber function for the specified group. The subscriber\n             * will be called whenever the group content changes (fields added or removed).\n             */\n            subscribe: (group, subscriber) => {\n                if (!subscribers.current[group]) {\n                    subscribers.current[group] = [];\n                }\n                subscribers.current[group].push(subscriber);\n\n                return () => {\n                    subscribers.current[group] = subscribers.current[\n                        group\n                    ].filter(s => s !== subscriber);\n                };\n            },\n            getGroupFields: name => formGroups.current[name] || [],\n            registerGroup: name => {\n                formGroups.current[name] = formGroups.current[name] || [];\n            },\n            unregisterGroup: name => {\n                delete formGroups[name];\n            },\n            registerField: (source, group) => {\n                if (group != null) {\n                    if (!(formGroups.current[group] || []).includes(source)) {\n                        formGroups.current[group] = [\n                            ...(formGroups.current[group] || []),\n                            source,\n                        ];\n                        // Notify subscribers that the group fields have changed\n                        if (subscribers.current[group]) {\n                            subscribers.current[group].forEach(subscriber =>\n                                subscriber()\n                            );\n                        }\n                    }\n                }\n            },\n            unregisterField: (source, group) => {\n                if (group != null) {\n                    if (!formGroups.current[group]) {\n                        console.warn(`Invalid form group ${group}`);\n                    } else {\n                        const fields = new Set(formGroups.current[group]);\n                        fields.delete(source);\n                        formGroups.current[group] = Array.from(fields);\n\n                        // Notify subscribers that the group fields have changed\n                        if (subscribers.current[group]) {\n                            subscribers.current[group].forEach(subscriber =>\n                                subscriber()\n                            );\n                        }\n                    }\n                }\n            },\n        }),\n        []\n    );\n\n    return (\n        <FormGroupsContext.Provider value={formContextValue}>\n            {children}\n        </FormGroupsContext.Provider>\n    );\n};\n", "import { useEffect, useState } from 'react';\nimport { Control, useFormState } from 'react-hook-form';\nimport { useBlocker } from 'react-router-dom';\nimport { useTranslate } from '../i18n';\n\n/**\n * Display a confirmation dialog if the form has unsaved changes.\n * - If the user confirms, the navigation continues and the changes are lost.\n * - If the user cancels, the navigation is cancelled and the changes are kept.\n */\nexport const useWarnWhenUnsavedChanges = (\n    enable: boolean,\n    formRootPathname?: string,\n    control?: Control\n) => {\n    const translate = useTranslate();\n    const { isSubmitSuccessful, dirtyFields } = useFormState(\n        control ? { control } : undefined\n    );\n    const isDirty = Object.keys(dirtyFields).length > 0;\n    const [shouldNotify, setShouldNotify] = useState(false);\n\n    const shouldNotBlock = !enable || !isDirty || isSubmitSuccessful;\n\n    const blocker = useBlocker(({ currentLocation, nextLocation }) => {\n        if (shouldNotBlock) return false;\n\n        // Also check if the new location is inside the form\n        const initialLocation = formRootPathname || currentLocation.pathname;\n        const newLocationIsInsideCurrentLocation =\n            nextLocation.pathname.startsWith(initialLocation);\n        const newLocationIsShowView = nextLocation.pathname.startsWith(\n            `${initialLocation}/show`\n        );\n        const newLocationIsInsideForm =\n            newLocationIsInsideCurrentLocation && !newLocationIsShowView;\n        if (newLocationIsInsideForm) return false;\n\n        return true;\n    });\n\n    useEffect(() => {\n        if (blocker.state === 'blocked') {\n            // Corner case: the blocker might be triggered by a redirect in the onSuccess side effect,\n            // happening during the same tick the form is reset after a successful save.\n            // In that case, the blocker will block but shouldNotBlock will be true one tick after.\n            // If we are in that case, we can proceed immediately.\n            if (shouldNotBlock) {\n                blocker.proceed();\n                return;\n            }\n\n            setShouldNotify(true);\n        }\n        // This effect should only run when the blocker state changes, not when shouldNotBlock changes.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [blocker.state]);\n\n    useEffect(() => {\n        if (shouldNotify) {\n            const shouldProceed = window.confirm(\n                translate('ra.message.unsaved_changes')\n            );\n            if (shouldProceed) {\n                blocker.proceed && blocker.proceed();\n            } else {\n                blocker.reset && blocker.reset();\n            }\n        }\n        setShouldNotify(false);\n        // Can't use blocker in the dependency array because it is not stable across rerenders\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [shouldNotify, translate]);\n\n    // This effect handles document navigation, e.g. closing the tab\n    useEffect(() => {\n        const beforeunload = (e: BeforeUnloadEvent) => {\n            // Invoking event.preventDefault() will trigger a warning dialog when the user closes or navigates the tab\n            // https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event#examples\n            e.preventDefault();\n            // Included for legacy support, e.g. Chrome/Edge < 119\n            e.returnValue = true;\n        };\n\n        if (shouldNotBlock) {\n            return;\n        }\n\n        window.addEventListener('beforeunload', beforeunload);\n\n        return () => {\n            window.removeEventListener('beforeunload', beforeunload);\n        };\n    }, [shouldNotBlock]);\n};\n", "import { useWarnWhenUnsavedChanges } from './useWarnWhenUnsavedChanges';\n\nexport const WarnWhenUnsavedChanges = ({\n    enable = true,\n    formRootPathName,\n    formControl,\n}) => {\n    useWarnWhenUnsavedChanges(enable, formRootPathName, formControl);\n    return null;\n};\n", "import { BaseSyntheticEvent, useCallback, useMemo, useRef } from 'react';\nimport {\n    FieldValues,\n    SubmitHandler,\n    useForm,\n    UseFormProps,\n} from 'react-hook-form';\n\nimport { RaRecord } from '../types';\nimport { SaveHandler, useSaveContext } from '../controller';\nimport { useRecordContext } from '../controller';\nimport getFormInitialValues from './getFormInitialValues';\nimport {\n    getSimpleValidationResolver,\n    ValidateForm,\n} from './getSimpleValidationResolver';\nimport { setSubmissionErrors } from './setSubmissionErrors';\nimport { useNotifyIsFormInvalid } from './useNotifyIsFormInvalid';\nimport { sanitizeEmptyValues as sanitizeValues } from './sanitizeEmptyValues';\n\n/**\n * Wrapper around react-hook-form's useForm\n *\n * This hook adds the following features to react-hook-form's useForm:\n *\n * - form initialization based on RecordContext\n * - validation based on a validate function\n * - sanitization of empty values\n * - notification on invalid form\n * - stop form submission event propagation\n */\nexport const useAugmentedForm = <RecordType = any>(\n    props: UseAugmentedFormProps<RecordType>\n) => {\n    const {\n        criteriaMode = 'firstError',\n        defaultValues,\n        formRootPathname,\n        resolver,\n        reValidateMode = 'onChange',\n        onSubmit,\n        sanitizeEmptyValues,\n        validate,\n        disableInvalidFormNotification,\n        ...rest\n    } = props;\n    const record = useRecordContext(props);\n    const saveContext = useSaveContext();\n\n    const defaultValuesIncludingRecord = useMemo(\n        () => getFormInitialValues(defaultValues, record),\n        // eslint-disable-next-line\n        [\n            // eslint-disable-next-line\n            JSON.stringify({\n                defaultValues:\n                    typeof defaultValues === 'function'\n                        ? 'function'\n                        : defaultValues,\n                record,\n            }),\n        ]\n    );\n\n    const finalResolver = resolver\n        ? resolver\n        : validate\n          ? getSimpleValidationResolver(validate)\n          : undefined;\n\n    const form = useForm({\n        criteriaMode,\n        values: defaultValuesIncludingRecord,\n        reValidateMode,\n        resolver: finalResolver,\n        ...rest,\n    });\n\n    const formRef = useRef(form);\n\n    // notify on invalid form\n    useNotifyIsFormInvalid(form.control, !disableInvalidFormNotification);\n\n    // submit callbacks\n    const handleSubmit = useCallback(\n        async (values, event) => {\n            let errors;\n            const finalValues = sanitizeEmptyValues\n                ? sanitizeValues(values, record)\n                : values;\n            if (onSubmit) {\n                errors = await onSubmit(finalValues, event);\n            }\n            if (onSubmit == null && saveContext?.save) {\n                errors = await saveContext.save(finalValues, event);\n            }\n            if (errors != null) {\n                setSubmissionErrors(errors, formRef.current.setError);\n            }\n        },\n        [onSubmit, saveContext, sanitizeEmptyValues, record]\n    );\n\n    const formHandleSubmit = useCallback(\n        (event: BaseSyntheticEvent) => {\n            if (!event.defaultPrevented) {\n                // Prevent outer forms to receive the event\n                event.stopPropagation();\n                form.handleSubmit(handleSubmit)(event);\n            }\n            return;\n        },\n        [form, handleSubmit]\n    );\n\n    return {\n        form,\n        handleSubmit,\n        formHandleSubmit,\n    };\n};\n\nexport type UseAugmentedFormProps<RecordType = any> =\n    UseFormOwnProps<RecordType> &\n        Omit<UseFormProps, 'onSubmit'> & {\n            validate?: ValidateForm;\n        };\n\nexport interface UseFormOwnProps<RecordType = any> {\n    defaultValues?: any;\n    formRootPathname?: string;\n    record?: Partial<RaRecord>;\n    onSubmit?: SubmitHandler<FieldValues> | SaveHandler<RecordType>;\n    sanitizeEmptyValues?: boolean;\n    disableInvalidFormNotification?: boolean;\n}\n", "import merge from 'lodash/merge';\nimport { RaRecord } from '../types';\n\nexport default function getFormInitialValues(\n    defaultValues: DefaultValue,\n    record?: Partial<RaRecord>\n) {\n    const finalInitialValues = merge(\n        {},\n        getValues(defaultValues, record),\n        record\n    );\n    return finalInitialValues;\n}\n\nfunction getValues(values, record) {\n    if (typeof values === 'object') {\n        return values;\n    }\n\n    if (typeof values === 'function') {\n        return values(record);\n    }\n\n    return {};\n}\n\ninterface DefaultValueObject {\n    [key: string]: any;\n}\ntype DefaultValueFunction = (record: RaRecord) => DefaultValueObject;\ntype DefaultValue = DefaultValueObject | DefaultValueFunction;\n", "import { FieldValues, UseFormSetError } from 'react-hook-form';\n\n/**\n * This internal function is used to convert an object matching the form shape with errors to a\n * format compatible with react-hook-form. It's used to handle submission errors. Only useful when\n * you are implementing a custom form without leveraging our Form component.\n *\n * @example\n * const MyForm = () => {\n *     const { register, handleSubmit, setError } = useForm();\n *     const onSubmit = data => {\n *         return saveAsync(data).catch(error => setSubmissionErrors(error.body.details));\n *     };\n *\n *     return (\n *         <form onSubmit={handleSubmit(onSubmit)}>\n *             ...\n *         </form>\n *     );\n * };\n */\nexport const setSubmissionErrors = (\n    errors: FieldValues,\n    setError: UseFormSetError<FieldValues>\n) => {\n    const setErrorFromObject = (errors: FieldValues, rootPath: string) => {\n        Object.entries(errors).forEach(([name, error]) => {\n            if (typeof error === 'object') {\n                setErrorFromObject(error, `${rootPath}${name}.`);\n                return;\n            }\n            setError(`${rootPath}${name}`, {\n                type: 'server',\n                message: error.toString(),\n            });\n        });\n    };\n    setErrorFromObject(errors, '');\n};\n", "import { useEffect, useRef } from 'react';\nimport { useFormState, Control } from 'react-hook-form';\nimport { useNotify } from '../notification';\n\n/**\n * This hook display an error message on submit in Form and SaveButton.\n *\n * We can't do the form validity check in the form submit handler\n * as the form state may not have been updated yet when onSubmit validation mode is enabled\n * or when the form hasn't been touched at all.\n */\nexport const useNotifyIsFormInvalid = (\n    control?: Control,\n    enabled: boolean = true\n) => {\n    const { submitCount, errors } = useFormState(\n        control ? { control } : undefined\n    );\n    const submitCountRef = useRef(submitCount);\n    const notify = useNotify();\n\n    useEffect(() => {\n        // Checking the submit count allows us to only display the notification after users\n        // tried to submit\n        if (submitCount > submitCountRef.current && enabled) {\n            submitCountRef.current = submitCount;\n\n            if (Object.keys(errors).length > 0) {\n                const serverError =\n                    typeof errors.root?.serverError?.message === 'string'\n                        ? errors.root.serverError.message\n                        : undefined;\n                notify(serverError || 'ra.message.invalid_form', {\n                    type: 'error',\n                });\n            }\n        }\n    }, [errors, submitCount, notify, enabled]);\n};\n", "/**\n * Remove empty strings from form state\n *\n * @example\n * sanitizeEmptyValues({ foo: '', bar: 'baz' }) // { bar: 'baz' }\n */\nexport const sanitizeEmptyValues = (values: any, record: any = {}): any => {\n    const sanitizedValues = {};\n    Object.keys(values).forEach(key => {\n        if (values[key] == null || values[key] === '') {\n            if (record.hasOwnProperty(key)) {\n                // user has emptied a field, make the value null\n                sanitizedValues[key] = null;\n            } else {\n                // user has emptied a field, but the initial value was undefined\n                // so we don't include it in the sanitized values\n            }\n        } else {\n            // this is a non-empty value, so we include it in the sanitized values\n            sanitizedValues[key] = values[key];\n        }\n    });\n    return sanitizedValues;\n};\n", "import lodashMemoize from 'lodash/memoize';\n\n/* eslint-disable no-underscore-dangle */\n/* @link http://stackoverflow.com/questions/46155/validate-email-address-in-javascript */\nconst EMAIL_REGEX =\n    /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; // eslint-disable-line no-useless-escape\n\nexport const isEmpty = (value: any) =>\n    typeof value === 'undefined' ||\n    value === null ||\n    value === '' ||\n    (Array.isArray(value) && value.length === 0);\n\nexport interface ValidationErrorMessageWithArgs {\n    message: string;\n    args: {\n        [key: string]: ValidationErrorMessageWithArgs | any;\n    };\n}\n\nexport type ValidationErrorMessage = string | ValidationErrorMessageWithArgs;\n\nexport type Validator = (\n    value: any,\n    values: any,\n    props: any\n) =>\n    | ValidationErrorMessage\n    | null\n    | undefined\n    | Promise<ValidationErrorMessage | null | undefined>;\n\n// type predicate, see https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates\nfunction isValidationErrorMessageWithArgs(\n    error: ReturnType<Validator>\n): error is ValidationErrorMessageWithArgs {\n    return error ? error.hasOwnProperty('message') : false;\n}\n\ninterface MessageFuncParams {\n    args: any;\n    value: any;\n    values: any;\n}\n\ntype MessageFunc = (params: MessageFuncParams) => ValidationErrorMessage;\n\nconst getMessage = (\n    message: string | MessageFunc,\n    messageArgs: any,\n    value: any,\n    values: any\n) =>\n    typeof message === 'function'\n        ? message({\n              args: messageArgs,\n              value,\n              values,\n          })\n        : messageArgs\n          ? {\n                message,\n                args: messageArgs,\n            }\n          : message;\n\ntype Memoize = <T extends (...args: any[]) => any>(\n    func: T,\n    resolver?: (...args: any[]) => any\n) => T;\n\n// If we define validation functions directly in JSX, it will\n// result in a new function at every render, and then trigger infinite re-render.\n// Hence, we memoize every built-in validator to prevent a \"Maximum call stack\" error.\nconst memoize: Memoize = (fn: any) =>\n    lodashMemoize(fn, (...args) => JSON.stringify(args));\n\nconst isFunction = value => typeof value === 'function';\n\nexport const combine2Validators = (\n    validator1: Validator,\n    validator2: Validator\n): Validator => {\n    return (value, values, meta) => {\n        const result1 = validator1(value, values, meta);\n        if (!result1) {\n            return validator2(value, values, meta);\n        }\n        if (\n            typeof result1 === 'string' ||\n            isValidationErrorMessageWithArgs(result1)\n        ) {\n            return result1;\n        }\n\n        return result1.then(resolvedResult1 => {\n            if (!resolvedResult1) {\n                return validator2(value, values, meta);\n            }\n            return resolvedResult1;\n        });\n    };\n};\n\n// Compose multiple validators into a single one for use with react-hook-form\nexport const composeValidators = (...validators) => {\n    const allValidators = (\n        Array.isArray(validators[0]) ? validators[0] : validators\n    ).filter(isFunction) as Validator[];\n    return allValidators.reduce(combine2Validators, () => null);\n};\n\n// Compose multiple validators into a single one for use with react-hook-form\nexport const composeSyncValidators =\n    (...validators) =>\n    (value, values, meta) => {\n        const allValidators = (\n            Array.isArray(validators[0]) ? validators[0] : validators\n        ).filter(isFunction) as Validator[];\n\n        for (const validator of allValidators) {\n            const error = validator(value, values, meta);\n\n            if (error) {\n                return error;\n            }\n        }\n    };\n\n/**\n * Required validator\n *\n * Returns an error if the value is null, undefined, or empty\n *\n * @param {string|Function} message\n *\n * @example\n *\n * const titleValidators = [required('The title is required')];\n * <TextInput name=\"title\" validate={titleValidators} />\n */\nexport const required = memoize((message = 'ra.validation.required') =>\n    Object.assign(\n        (value, values) =>\n            isEmpty(value)\n                ? getMessage(message, undefined, value, values)\n                : undefined,\n        { isRequired: true }\n    )\n);\n\n/**\n * Minimum length validator\n *\n * Returns an error if the value has a length less than the parameter\n *\n * @param {integer} min\n * @param {string|Function} message\n *\n * @example\n *\n * const passwordValidators = [minLength(10, 'Should be at least 10 characters')];\n * <TextInput type=\"password\" name=\"password\" validate={passwordValidators} />\n */\nexport const minLength = memoize(\n    (min, message = 'ra.validation.minLength') =>\n        (value, values) =>\n            !isEmpty(value) && value.length < min\n                ? getMessage(message, { min }, value, values)\n                : undefined\n);\n\n/**\n * Maximum length validator\n *\n * Returns an error if the value has a length higher than the parameter\n *\n * @param {integer} max\n * @param {string|Function} message\n *\n * @example\n *\n * const nameValidators = [maxLength(10, 'Should be at most 10 characters')];\n * <TextInput name=\"name\" validate={nameValidators} />\n */\nexport const maxLength = memoize(\n    (max, message = 'ra.validation.maxLength') =>\n        (value, values) =>\n            !isEmpty(value) && value.length > max\n                ? getMessage(message, { max }, value, values)\n                : undefined\n);\n\n/**\n * Minimum validator\n *\n * Returns an error if the value is less than the parameter\n *\n * @param {integer} min\n * @param {string|Function} message\n *\n * @example\n *\n * const fooValidators = [minValue(5, 'Should be more than 5')];\n * <NumberInput name=\"foo\" validate={fooValidators} />\n */\nexport const minValue = memoize(\n    (min, message = 'ra.validation.minValue') =>\n        (value, values) =>\n            !isEmpty(value) && value < min\n                ? getMessage(message, { min }, value, values)\n                : undefined\n);\n\n/**\n * Maximum validator\n *\n * Returns an error if the value is higher than the parameter\n *\n * @param {integer} max\n * @param {string|Function} message\n *\n * @example\n *\n * const fooValidators = [maxValue(10, 'Should be less than 10')];\n * <NumberInput name=\"foo\" validate={fooValidators} />\n */\nexport const maxValue = memoize(\n    (max, message = 'ra.validation.maxValue') =>\n        (value, values) =>\n            !isEmpty(value) && value > max\n                ? getMessage(message, { max }, value, values)\n                : undefined\n);\n\n/**\n * Number validator\n *\n * Returns an error if the value is not a number\n *\n * @param {string|Function} message\n *\n * @example\n *\n * const ageValidators = [number('Must be a number')];\n * <TextInput name=\"age\" validate={ageValidators} />\n */\nexport const number = memoize(\n    (message = 'ra.validation.number') =>\n        (value, values) =>\n            !isEmpty(value) && isNaN(Number(value))\n                ? getMessage(message, undefined, value, values)\n                : undefined\n);\n\n/**\n * Regular expression validator\n *\n * Returns an error if the value does not match the pattern given as parameter\n *\n * @param {RegExp} pattern\n * @param {string|Function} message\n *\n * @example\n *\n * const zipValidators = [regex(/^\\d{5}(?:[-\\s]\\d{4})?$/, 'Must be a zip code')];\n * <TextInput name=\"zip\" validate={zipValidators} />\n */\nexport const regex = lodashMemoize(\n    (pattern, message = 'ra.validation.regex') =>\n        (value, values?) =>\n            !isEmpty(value) && typeof value === 'string' && !pattern.test(value)\n                ? getMessage(message, { pattern }, value, values)\n                : undefined,\n    (pattern, message) => {\n        return pattern.toString() + message;\n    }\n);\n\n/**\n * Email validator\n *\n * Returns an error if the value is not a valid email\n *\n * @param {string|Function} message\n *\n * @example\n *\n * const emailValidators = [email('Must be an email')];\n * <TextInput name=\"email\" validate={emailValidators} />\n */\nexport const email = memoize((message = 'ra.validation.email') =>\n    regex(EMAIL_REGEX, message)\n);\n\nconst oneOfTypeMessage: MessageFunc = ({ args }) => ({\n    message: 'ra.validation.oneOf',\n    args,\n});\n\n/**\n * Choices validator\n *\n * Returns an error if the value is not among the list passed as parameter\n *\n * @param {array} list\n * @param {string|Function} message\n *\n * @example\n *\n * const genderValidators = [choices(['male', 'female'], 'Must be either Male or Female')];\n * <TextInput name=\"gender\" validate={genderValidators} />\n */\nexport const choices = memoize(\n    (list, message = oneOfTypeMessage) =>\n        (value, values) =>\n            !isEmpty(value) && list.indexOf(value) === -1\n                ? getMessage(message, { list }, value, values)\n                : undefined\n);\n\n/**\n * Given a validator, returns a boolean indicating whether the field is required or not.\n */\nexport const isRequired = validate => {\n    if (validate && validate.isRequired) {\n        return true;\n    }\n    if (Array.isArray(validate)) {\n        return !!validate.find(it => it.isRequired);\n    }\n    return false;\n};\n", "import { createContext } from 'react';\n\n/**\n * Context allowing inputs to register to a specific group.\n * This enables other components in the group to access group properties such as its\n * validation (valid/invalid) or whether its inputs have been updated (dirty/pristine).\n *\n * This should only be used through a FormGroupContextProvider.\n */\nexport const FormGroupContext = createContext<FormGroupContextValue | null>(\n    null\n);\n\nexport type FormGroupContextValue = string;\n", "import * as React from 'react';\nimport { ReactNode, useEffect } from 'react';\nimport { FormGroupContext } from './FormGroupContext';\nimport { useFormGroups } from './useFormGroups';\n\n/**\n * This provider allows its input children to register to a specific group.\n * This enables other components in the group to access group properties such as its\n * validation (valid/invalid) or whether its inputs have been updated (dirty/pristine).\n *\n * @example\n * import { Edit, SimpleForm, TextInput, FormGroupContextProvider, useFormGroup } from 'react-admin';\n * import { Accordion, AccordionDetails, AccordionSummary, Typography } from '@mui/material';\n *\n * const PostEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <TextInput source=\"title\" />\n *             <FormGroupContextProvider name=\"options\">\n *                 <Accordion>\n *                     <AccordionSummary\n *                         expandIcon={<ExpandMoreIcon />}\n *                         aria-controls=\"options-content\"\n *                         id=\"options-header\"\n *                     >\n *                         <AccordionSectionTitle name=\"options\">Options</AccordionSectionTitle>\n *                     </AccordionSummary>\n *                     <AccordionDetails id=\"options-content\" aria-labelledby=\"options-header\">\n *                         <TextInput source=\"teaser\" validate={minLength(20)} />\n *                     </AccordionDetails>\n *                 </Accordion>\n *             </FormGroupContextProvider>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * const AccordionSectionTitle = ({ children, name }) => {\n *     const formGroupState = useFormGroup(name);\n *     return (\n *         <Typography color={formGroupState.invalid && formGroupState.dirty ? 'error' : 'inherit'}>\n *             {children}\n *         </Typography>\n *     );\n * }\n *\n * @param props The component props\n * @param {ReactNode} props.children The form group content\n * @param {String} props.name The form group name\n */\nexport const FormGroupContextProvider = ({\n    children,\n    name,\n}: {\n    children: ReactNode;\n    name: string;\n}) => {\n    const formGroups = useFormGroups();\n\n    useEffect(() => {\n        if (\n            !formGroups ||\n            !formGroups.registerGroup ||\n            !formGroups.unregisterGroup\n        ) {\n            console.warn(\n                `The FormGroupContextProvider can only be used inside a FormContext such as provided by the SimpleForm and TabbedForm components`\n            );\n            return;\n        }\n        formGroups.registerGroup(name);\n\n        return () => {\n            formGroups.unregisterGroup(name);\n        };\n    }, [formGroups, name]);\n\n    return (\n        <FormGroupContext.Provider value={name}>\n            {children}\n        </FormGroupContext.Provider>\n    );\n};\n", "import { useContext } from 'react';\nimport { FormGroupsContext } from './FormGroupsContext';\n\n/**\n * Retrieve the form groups management context. Used by inputs to register themselves into a form group.\n */\nexport const useFormGroups = () => {\n    const context = useContext(FormGroupsContext);\n    return context;\n};\n", "import { useEffect } from 'react';\nimport {\n    FieldValues,\n    UseFieldArrayReturn,\n    useFormContext,\n} from 'react-hook-form';\nimport get from 'lodash/get';\nimport { useRecordContext } from '../controller';\nimport { InputProps } from './useInput';\nimport { useWrappedSource } from '../core';\n\ninterface StandardInput {\n    inputProps: Partial<InputProps> & { source: string };\n    isArrayInput?: undefined;\n    fieldArrayInputControl?: undefined;\n}\n\ninterface ArrayInput {\n    inputProps: Partial<InputProps> & { source: string };\n    isArrayInput: true;\n    fieldArrayInputControl: UseFieldArrayReturn<FieldValues, string, 'id'>;\n}\n\ntype Props = StandardInput | ArrayInput;\n\n/*\n * This hook updates the input with the default value if default value is present\n * and field input is not already populated or dirty\n */\nexport const useApplyInputDefaultValues = ({\n    inputProps,\n    isArrayInput,\n    fieldArrayInputControl,\n}: Props) => {\n    const { defaultValue, source } = inputProps;\n    const finalSource = useWrappedSource(source);\n\n    const record = useRecordContext(inputProps);\n    const { getValues, resetField, formState, reset } = useFormContext();\n    const recordValue = get(record, finalSource);\n    const formValue = get(getValues(), finalSource);\n    const { dirtyFields } = formState;\n    const isDirty = Object.keys(dirtyFields).includes(finalSource);\n\n    useEffect(() => {\n        if (\n            defaultValue == null ||\n            formValue != null ||\n            recordValue != null ||\n            isDirty\n        ) {\n            return;\n        }\n\n        // Side note: For Array Input but checked for all to avoid possible regression\n        // Since we use get(record, source), if source is like foo.23.bar,\n        // this effect will run. However we only want to set the default value\n        // for the subfield bar if the record actually has a value for foo.23\n        const pathContainsIndex = finalSource\n            .split('.')\n            .some(pathPart => numericRegex.test(pathPart));\n        if (pathContainsIndex) {\n            const parentPath = finalSource.split('.').slice(0, -1).join('.');\n            const parentValue = get(getValues(), parentPath);\n            if (parentValue == null) {\n                // the parent is undefined, so we don't want to set the default value\n                return;\n            }\n        }\n\n        if (isArrayInput) {\n            if (!fieldArrayInputControl) {\n                throw new Error(\n                    'useApplyInputDefaultValues: No fieldArrayInputControl passed in props for array input usage'\n                );\n            }\n\n            // We need to update inputs nested in array using react hook forms\n            // own array controller rather then the generic reset to prevent control losing\n            // context of the nested inputs\n            fieldArrayInputControl.replace(defaultValue);\n            // resets the form so that control no longer sees the form as dirty after\n            // defaults applied\n            reset({}, { keepValues: true });\n\n            return;\n        }\n\n        resetField(finalSource, { defaultValue });\n    });\n};\n\nconst numericRegex = /^\\d+$/;\n", "import * as React from 'react';\nimport { ReactElement, isValidElement, useCallback } from 'react';\nimport get from 'lodash/get';\n\nimport { useTranslate } from '../i18n';\nimport { RaRecord } from '../types';\nimport { RecordContextProvider } from '../controller';\n\nexport type OptionTextElement = ReactElement<{\n    record: RaRecord;\n}>;\nexport type OptionTextFunc = (choice: any) => React.ReactNode;\nexport type OptionText = OptionTextElement | OptionTextFunc | string;\n\nexport interface ChoicesProps {\n    choices?: any[];\n    isFetching?: boolean;\n    isLoading?: boolean;\n    isPending?: boolean;\n    optionValue?: string;\n    optionText?: OptionText;\n    translateChoice?: boolean;\n}\n\nexport interface UseChoicesOptions {\n    optionValue?: string;\n    optionText?: OptionText;\n    disableValue?: string;\n    translateChoice?: boolean;\n}\n\n/*\n * Returns helper functions for choices handling.\n *\n * @param optionText Either a string defining the property to use to get the choice text, a function or a React element\n * @param optionValue The property to use to get the choice value\n * @param translateChoice A boolean indicating whether to option text should be translated\n *\n * @returns An object with helper functions:\n * - getChoiceText: Returns the choice text or a React element\n * - getChoiceValue: Returns the choice value\n */\nexport const useChoices = ({\n    optionText = 'name',\n    optionValue = 'id',\n    disableValue = 'disabled',\n    translateChoice = true,\n}: UseChoicesOptions) => {\n    const translate = useTranslate();\n\n    const getChoiceText = useCallback(\n        choice => {\n            if (isValidElement<{ record: any }>(optionText)) {\n                return (\n                    <RecordContextProvider value={choice}>\n                        {optionText}\n                    </RecordContextProvider>\n                );\n            }\n            const choiceName =\n                typeof optionText === 'function'\n                    ? optionText(choice)\n                    : get(choice, optionText);\n\n            return isValidElement(choiceName)\n                ? choiceName\n                : translateChoice\n                  ? translate(String(choiceName), { _: choiceName })\n                  : String(choiceName);\n        },\n        [optionText, translate, translateChoice]\n    );\n\n    const getChoiceValue = useCallback(\n        choice => get(choice, optionValue),\n        [optionValue]\n    );\n\n    const getDisableValue = useCallback(\n        choice => get(choice, disableValue),\n        [disableValue]\n    );\n\n    return {\n        getChoiceText,\n        getChoiceValue,\n        getDisableValue,\n    };\n};\n", "import { useEffect, useState } from 'react';\nimport get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport { useFormState } from 'react-hook-form';\nimport { useFormGroups } from './useFormGroups';\nimport { useEvent } from '../util';\n\ntype FieldState = {\n    name: string;\n    error?: any;\n    isDirty: boolean;\n    isTouched: boolean;\n    isValid: boolean;\n    isValidating: boolean;\n};\n\ntype FormGroupState = {\n    errors?: object;\n    isDirty: boolean;\n    isTouched: boolean;\n    isValid: boolean;\n    isValidating: boolean;\n};\n\n/**\n * Retrieve a specific form group data such as its validation status (valid/invalid) or\n * or whether its inputs have been updated (dirty/pristine)\n *\n * @example\n * import { Edit, SimpleForm, TextInput, FormGroupContextProvider, useFormGroup, minLength } from 'react-admin';\n * import { Accordion, AccordionDetails, AccordionSummary, Typography } from '@mui/material';\n * import ExpandMoreIcon from '@mui/icons-material/ExpandMoreIcon';\n *\n * const PostEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <TextInput source=\"title\" />\n *             <FormGroupContextProvider name=\"options\">\n *                 <Accordion>\n *                     <AccordionSummary\n *                         expandIcon={<ExpandMoreIcon />}\n *                         aria-controls=\"options-content\"\n *                         id=\"options-header\"\n *                     >\n *                         <AccordionSectionTitle name=\"options\">Options</AccordionSectionTitle>\n *                     </AccordionSummary>\n *                     <AccordionDetails id=\"options-content\" aria-labelledby=\"options-header\">\n *                         <TextInput source=\"teaser\" validate={minLength(20)} />\n *                     </AccordionDetails>\n *                 </Accordion>\n *             </FormGroupContextProvider>\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * const AccordionSectionTitle = ({ children, name }) => {\n *     const formGroupState = useFormGroup(name);\n *     return (\n *         <Typography color={!formGroupState.isValid && formGroupState.isDirty ? 'error' : 'inherit'}>\n *             {children}\n *         </Typography>\n *     );\n * }\n *\n * @param {string} name The form group name\n * @returns {FormGroupState} The form group state\n */\nexport const useFormGroup = (name: string): FormGroupState => {\n    const { dirtyFields, touchedFields, validatingFields, errors } =\n        useFormState();\n\n    // dirtyFields, touchedFields and validatingFields are objects with keys being the field names\n    // Ex: { title: true }\n    // However, they are not correctly serialized when using JSON.stringify\n    // To avoid our effects to not be triggered when they should, we extract the keys and use that as a dependency\n    const dirtyFieldsNames = Object.keys(dirtyFields);\n    const touchedFieldsNames = Object.keys(touchedFields);\n    const validatingFieldsNames = Object.keys(validatingFields);\n\n    const formGroups = useFormGroups();\n    const [state, setState] = useState<FormGroupState>({\n        errors: undefined,\n        isDirty: false,\n        isTouched: false,\n        isValid: true,\n        isValidating: true,\n    });\n\n    const updateGroupState = useEvent(() => {\n        if (!formGroups) return;\n        const fields = formGroups.getGroupFields(name);\n        const fieldStates = fields\n            .map<FieldState>(field => {\n                return {\n                    name: field,\n                    error: get(errors, field, undefined),\n                    isDirty: get(dirtyFields, field, false) !== false,\n                    isValid: get(errors, field, undefined) == null,\n                    isValidating:\n                        get(validatingFields, field, undefined) == null,\n                    isTouched: get(touchedFields, field, false) !== false,\n                };\n            })\n            .filter(fieldState => fieldState != undefined); // eslint-disable-line\n\n        const newState = getFormGroupState(fieldStates);\n        setState(oldState => {\n            if (!isEqual(oldState, newState)) {\n                return newState;\n            }\n\n            return oldState;\n        });\n    });\n\n    useEffect(\n        () => {\n            updateGroupState();\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            JSON.stringify(dirtyFieldsNames),\n            errors,\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            JSON.stringify(touchedFieldsNames),\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            JSON.stringify(validatingFieldsNames),\n            updateGroupState,\n            name,\n            formGroups,\n        ]\n    );\n\n    useEffect(() => {\n        if (!formGroups) return;\n        // Whenever the group content changes (input are added or removed)\n        // we must update its state\n        const unsubscribe = formGroups.subscribe(name, () => {\n            updateGroupState();\n        });\n        return unsubscribe;\n    }, [formGroups, name, updateGroupState]);\n\n    return state;\n};\n\n/**\n * Get the state of a form group\n *\n * @param {FieldState[]} fieldStates A map of field states from react-hook-form where the key is the field name.\n * @returns {FormGroupState} The state of the group.\n */\nexport const getFormGroupState = (\n    fieldStates: FieldState[]\n): FormGroupState => {\n    return fieldStates.reduce<FormGroupState>(\n        (acc, fieldState) => {\n            let errors = acc.errors || {};\n\n            if (fieldState.error) {\n                errors[fieldState.name] = fieldState.error;\n            }\n\n            const newState = {\n                isDirty: acc.isDirty || fieldState.isDirty,\n                errors,\n                isTouched: acc.isTouched || fieldState.isTouched,\n                isValid: acc.isValid && fieldState.isValid,\n                isValidating: acc.isValidating && fieldState.isValidating,\n            };\n\n            return newState;\n        },\n        {\n            isDirty: false,\n            errors: undefined,\n            isValid: true,\n            isTouched: false,\n            isValidating: false,\n        }\n    );\n};\n", "import { useContext } from 'react';\nimport { FormGroupContext } from './FormGroupContext';\n\n/**\n * Retrieve the name of the form group the consumer belongs to. May be undefined if the consumer is not inside a form group.\n */\nexport const useFormGroupContext = () => {\n    const context = useContext(FormGroupContext);\n    return context;\n};\n", "import {\n    ValidationErrorMessage,\n    ValidationErrorMessageWithArgs,\n} from './validate';\nimport { useTranslate } from '../i18n';\n\n/**\n * @deprecated\n * This internal hook returns a function that can translate an error message.\n * It handles simple string errors and those which have a message and args.\n * Only useful if you are implementing custom inputs without leveraging our useInput hook.\n *\n * @example\n * const MyInput = props => {\n *      const { field, fieldState } = useController(props);\n *      useEffect(() => {\n *          if (fieldState.error) {\n *              const errorMessage = useGetValidationErrorMessage(fieldState.error);\n *              alert(errorMessage);\n *          }\n *      }, [fieldState.error]);\n *\n *      return (\n *          <input {...field} />\n *      );\n * }\n *\n * @see ValidationErrorMessage\n * @see ValidationErrorMessageWithArgs\n */\nexport const useGetValidationErrorMessage = () => {\n    const translate = useTranslate();\n\n    return (error: ValidationErrorMessage) => {\n        if ((error as ValidationErrorMessageWithArgs).message != null) {\n            const { message, args } = error as ValidationErrorMessageWithArgs;\n            return translate(message, { _: message, ...args });\n        }\n        return translate(error as string, { _: error });\n    };\n};\n", "import { ReactElement, useEffect, useId } from 'react';\nimport {\n    ControllerFieldState,\n    ControllerRenderProps,\n    useController,\n    UseControllerProps,\n    UseControllerReturn,\n    UseFormStateReturn,\n} from 'react-hook-form';\nimport get from 'lodash/get';\n\nimport { useRecordContext } from '../controller';\nimport { composeValidators, Validator } from './validate';\nimport isRequired from './isRequired';\nimport { useFormGroupContext } from './useFormGroupContext';\nimport { useFormGroups } from './useFormGroups';\nimport { useApplyInputDefaultValues } from './useApplyInputDefaultValues';\nimport { useEvent } from '../util';\nimport { useWrappedSource } from '../core';\n\n// replace null or undefined values by empty string to avoid controlled/uncontrolled input warning\nconst defaultFormat = (value: any) => (value == null ? '' : value);\n// parse empty string into null as it's more suitable for a majority of backends\nconst defaultParse = (value: string) => (value === '' ? null : value);\n\nexport const useInput = <ValueType = any>(\n    props: InputProps<ValueType>\n): UseInputValue => {\n    const {\n        defaultValue,\n        format = defaultFormat,\n        id,\n        isRequired: isRequiredOption,\n        name,\n        onBlur: initialOnBlur,\n        onChange: initialOnChange,\n        parse: parseProp = defaultParse,\n        source,\n        validate,\n        ...options\n    } = props;\n    const finalSource = useWrappedSource(source);\n    const finalName = name || finalSource;\n    const formGroupName = useFormGroupContext();\n    const formGroups = useFormGroups();\n    const record = useRecordContext();\n    // @ts-ignore\n    const parse = useEvent(parseProp);\n    const defaultId = useId();\n\n    if (\n        !source &&\n        props.label == null &&\n        process.env.NODE_ENV === 'development'\n    ) {\n        console.warn(\n            'Input components require either a source or a label prop.'\n        );\n    }\n\n    useEffect(() => {\n        if (!formGroups || formGroupName == null) {\n            return;\n        }\n\n        formGroups.registerField(finalSource, formGroupName);\n\n        return () => {\n            formGroups.unregisterField(finalSource, formGroupName);\n        };\n    }, [formGroups, formGroupName, finalSource]);\n\n    const sanitizedValidate = Array.isArray(validate)\n        ? composeValidators(validate)\n        : validate;\n\n    // Fetch the defaultValue from the record if available or apply the provided defaultValue.\n    // This ensures dynamically added inputs have their value set correctly (ArrayInput for example).\n    // We don't do this for the form level defaultValues so that it works as it should in react-hook-form\n    // (i.e. field level defaultValue override form level defaultValues for this field).\n    const {\n        field: controllerField,\n        fieldState,\n        formState,\n    } = useController({\n        name: finalName,\n        defaultValue: get(record, finalSource, defaultValue),\n        rules: {\n            validate: async (value, values) => {\n                if (!sanitizedValidate) return true;\n                const error = await sanitizedValidate(value, values, props);\n\n                if (!error) return true;\n                // react-hook-form expects errors to be plain strings but our validators can return objects\n                // that have message and args.\n                // To avoid double translation for users that validate with a schema instead of our validators\n                // we use a special format for our validators errors.\n                // The ValidationError component will check for this format and extract the message and args\n                // to translate.\n                return `@@react-admin@@${JSON.stringify(error)}`;\n            },\n        },\n        ...options,\n        // Workaround for https://github.com/react-hook-form/react-hook-form/issues/10907\n        // FIXME - remove when fixed\n        // @ts-ignore - only exists since react-hook-form 7.46.0\n        disabled: options.disabled || undefined,\n    });\n\n    // Because our forms may receive an asynchronously loaded record for instance,\n    // they may reset their default values which would override the input default value.\n    // This hook ensures that the input default value is applied when a new record is loaded but has\n    // no value for the input.\n    useApplyInputDefaultValues({ inputProps: props });\n\n    const onBlur = useEvent((...event: any[]) => {\n        controllerField.onBlur();\n        if (initialOnBlur) {\n            initialOnBlur(...event);\n        }\n    });\n\n    const onChange = useEvent((...event: any[]) => {\n        const eventOrValue = (\n            props.type === 'checkbox' && event[0]?.target?.value === 'on'\n                ? event[0].target.checked\n                : event[0]?.target?.value ?? event[0]\n        ) as any;\n        controllerField.onChange(parse ? parse(eventOrValue) : eventOrValue);\n        if (initialOnChange) {\n            initialOnChange(...event);\n        }\n    });\n\n    const field = {\n        ...controllerField,\n        value: format ? format(controllerField.value) : controllerField.value,\n        onBlur,\n        onChange,\n    };\n\n    return {\n        id: id || defaultId,\n        field,\n        fieldState,\n        formState,\n        isRequired: isRequiredOption || isRequired(validate),\n    };\n};\n\nexport type InputProps<ValueType = any> = Omit<\n    UseControllerProps,\n    'name' | 'defaultValue' | 'rules'\n> &\n    Partial<UseControllerReturn> & {\n        alwaysOn?: any;\n        defaultValue?: any;\n        format?: (value: ValueType) => any;\n        id?: string;\n        isRequired?: boolean;\n        label?: string | ReactElement | false;\n        helperText?: string | ReactElement | false;\n        name?: string;\n        onBlur?: (...event: any[]) => void;\n        onChange?: (...event: any[]) => void;\n        parse?: (value: any) => ValueType;\n        type?: string;\n        resource?: string;\n        source: string;\n        validate?: Validator | Validator[];\n        readOnly?: boolean;\n        disabled?: boolean;\n    };\n\nexport type UseInputValue = {\n    id: string;\n    isRequired: boolean;\n    field: ControllerRenderProps;\n    formState: UseFormStateReturn<Record<string, string>>;\n    fieldState: ControllerFieldState;\n};\n", "const isRequired = validate => {\n    if (validate && validate.isRequired) {\n        return true;\n    }\n    if (Array.isArray(validate)) {\n        return validate.some(it => it.isRequired);\n    }\n    return false;\n};\n\nexport default isRequired;\n", "import { useCallback, isValidElement, ReactElement } from 'react';\nimport set from 'lodash/set';\nimport { useChoices, OptionText, UseChoicesOptions } from './useChoices';\nimport { useTranslate } from '../i18n';\n\n/*\n * Returns helper functions for suggestions handling.\n *\n * @param allowDuplicates A boolean indicating whether a suggestion can be added several times\n * @param choices An array of available choices\n * @param limitChoicesToValue A boolean indicating whether the initial suggestions should be limited to the currently selected one(s)\n * @param matchSuggestion Optional unless `optionText` is a React element. Function which check whether a choice matches a filter. Must return a boolean.\n * @param optionText Either a string defining the property to use to get the choice text, a function or a React element\n * @param optionValue The property to use to get the choice value\n * @param selectedItem The currently selected item. Maybe an array of selected items\n * @param suggestionLimit The maximum number of suggestions returned\n * @param translateChoice A boolean indicating whether to option text should be translated\n *\n * @returns An object with helper functions:\n * - getChoiceText: Returns the choice text or a React element\n * - getChoiceValue: Returns the choice value\n * - getSuggestions: A function taking a filter value (string) and returning the matching suggestions\n */\nexport const useSuggestions = ({\n    allowCreate,\n    choices,\n    createText = 'ra.action.create',\n    createValue = '@@create',\n    limitChoicesToValue,\n    matchSuggestion,\n    optionText,\n    optionValue,\n    selectedItem,\n    suggestionLimit = 0,\n    translateChoice,\n}: UseSuggestionsOptions) => {\n    const translate = useTranslate();\n    const { getChoiceText, getChoiceValue } = useChoices({\n        optionText,\n        optionValue,\n        translateChoice,\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const getSuggestions = useCallback(\n        getSuggestionsFactory({\n            allowCreate,\n            choices,\n            createText,\n            createValue,\n            getChoiceText,\n            getChoiceValue,\n            limitChoicesToValue,\n            matchSuggestion,\n            optionText,\n            optionValue,\n            selectedItem,\n            suggestionLimit,\n        }),\n        [\n            allowCreate,\n            choices,\n            createText,\n            createValue,\n            getChoiceText,\n            getChoiceValue,\n            limitChoicesToValue,\n            matchSuggestion,\n            optionText,\n            optionValue,\n            selectedItem,\n            suggestionLimit,\n            translate,\n        ]\n    );\n\n    return {\n        getChoiceText,\n        getChoiceValue,\n        getSuggestions,\n    };\n};\n\nconst escapeRegExp = value =>\n    value ? value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') : ''; // $& means the whole matched string\n\nexport interface UseSuggestionsOptions extends UseChoicesOptions {\n    allowCreate?: boolean;\n    allowDuplicates?: boolean;\n    choices?: any[];\n    createText?: string;\n    createValue?: any;\n    limitChoicesToValue?: boolean;\n    matchSuggestion?: (\n        filter: string,\n        suggestion: any,\n        exact?: boolean\n    ) => boolean;\n    suggestionLimit?: number;\n    selectedItem?: any | any[];\n}\n\n/**\n * Default matcher implementation which check whether the suggestion text matches the filter.\n */\nconst defaultMatchSuggestion =\n    getChoiceText =>\n    (filter, suggestion, exact = false) => {\n        const suggestionText = getChoiceText(suggestion);\n\n        const isReactElement = isValidElement(suggestionText);\n        const regex = escapeRegExp(filter);\n\n        return isReactElement\n            ? false\n            : suggestionText &&\n                  !!suggestionText.match(\n                      // We must escape any RegExp reserved characters to avoid errors\n                      // For example, the filter might contain * which must be escaped as \\*\n                      new RegExp(exact ? `^${regex}$` : regex, 'i')\n                  );\n    };\n\n/**\n * Get the suggestions to display after applying a fuzzy search on the available choices\n *\n * @example\n *\n * getSuggestions({\n *   choices: [{ id: 1, name: 'admin' }, { id: 2, name: 'publisher' }],\n *   optionText: 'name',\n *   optionValue: 'id',\n *   getSuggestionText: choice => choice[optionText],\n * })('pub')\n *\n * // Will return [{ id: 2, name: 'publisher' }]\n * getSuggestions({\n *   choices: [{ id: 1, name: 'admin' }, { id: 2, name: 'publisher' }],\n *   optionText: 'name',\n *   optionValue: 'id',\n *   getSuggestionText: choice => choice[optionText],\n * })('pub')\n *\n * // Will return [{ id: 2, name: 'publisher' }]\n */\nexport const getSuggestionsFactory =\n    ({\n        allowCreate = false,\n        choices = [],\n        createText = 'ra.action.create',\n        createValue = '@@create',\n        optionText = 'name',\n        optionValue = 'id',\n        getChoiceText,\n        getChoiceValue,\n        limitChoicesToValue = false,\n        matchSuggestion = defaultMatchSuggestion(getChoiceText),\n        selectedItem,\n        suggestionLimit = 0,\n    }: UseSuggestionsOptions & {\n        getChoiceText: (choice: any) => string | ReactElement;\n        getChoiceValue: (choice: any) => string;\n    }) =>\n    filter => {\n        let suggestions: any[] = [];\n        // if an item is selected and matches the filter\n        if (\n            selectedItem &&\n            !Array.isArray(selectedItem) &&\n            matchSuggestion(filter, selectedItem)\n        ) {\n            if (limitChoicesToValue) {\n                // display only the selected item\n                suggestions = choices.filter(\n                    choice =>\n                        getChoiceValue(choice) === getChoiceValue(selectedItem)\n                );\n            } else {\n                suggestions = [...choices];\n            }\n        } else {\n            suggestions = choices.filter(\n                choice =>\n                    matchSuggestion(filter, choice) ||\n                    (selectedItem != null &&\n                        (!Array.isArray(selectedItem)\n                            ? getChoiceValue(choice) ===\n                              getChoiceValue(selectedItem)\n                            : selectedItem.some(\n                                  selected =>\n                                      getChoiceValue(choice) ===\n                                      getChoiceValue(selected)\n                              )))\n            );\n        }\n\n        suggestions = limitSuggestions(suggestions, suggestionLimit);\n\n        const hasExactMatch = suggestions.some(suggestion =>\n            matchSuggestion(filter, suggestion, true)\n        );\n\n        if (allowCreate) {\n            const filterIsSelectedItem =\n                // If the selectedItem is an array (for example AutocompleteArrayInput)\n                // we shouldn't try to match\n                !!selectedItem && !Array.isArray(selectedItem)\n                    ? matchSuggestion(filter, selectedItem, true)\n                    : false;\n            if (!hasExactMatch && !filterIsSelectedItem) {\n                suggestions.push(\n                    getSuggestion({\n                        optionText,\n                        optionValue,\n                        text: createText,\n                        value: createValue,\n                    })\n                );\n            }\n        }\n\n        // Only keep unique items. Necessary because we might have fetched\n        // the currently selected choice in addition of the possible choices\n        // that may also contain it\n        const result = suggestions.filter(\n            (suggestion, index) => suggestions.indexOf(suggestion) === index\n        );\n        return result;\n    };\n\n/**\n * @example\n *\n * limitSuggestions(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n *  1\n * );\n *\n * // Will return [{ id: 1, name: 'foo' }]\n *\n * @param suggestions List of suggestions\n * @param limit\n */\nconst limitSuggestions = (suggestions: any[], limit: any = 0) =>\n    Number.isInteger(limit) && limit > 0\n        ? suggestions.slice(0, limit)\n        : suggestions;\n\n/**\n * addSuggestion(\n *  [{ id: 1, name: 'foo'}, { id: 2, name: 'bar' }],\n * );\n *\n * // Will return [{ id: null, name: '' }, { id: 1, name: 'foo' }, { id: 2, name: 'bar' }]\n *\n * @param suggestions List of suggestions\n * @param options\n * @param options.optionText\n */\nconst getSuggestion = ({\n    optionText = 'name',\n    optionValue = 'id',\n    text = '',\n    value = null,\n}: {\n    optionText: OptionText;\n    optionValue: string;\n    text: string;\n    value: any;\n}) => {\n    const suggestion = {};\n    set(suggestion, optionValue, value);\n    if (typeof optionText === 'string') {\n        set(suggestion, optionText, text);\n    }\n\n    return suggestion;\n};\n", "import merge from 'lodash/merge';\nimport { useResourceContext } from '../core';\nimport { useDataProvider } from '../dataProvider';\nimport { useTranslate, useTranslateLabel } from '../i18n';\nimport { InputProps } from './useInput';\nimport { useCallback, useRef } from 'react';\nimport set from 'lodash/set';\nimport { asyncDebounce } from '../util';\nimport { useRecordContext } from '../controller';\nimport { isEmpty } from './validate';\n\n/**\n * A hook that returns a validation function checking for a record field uniqueness\n * by calling the dataProvider getList function with a filter.\n *\n * @example // Passing options at declaration time\n * const UserCreateForm = () => {\n *     const unique = useUnique({ message: 'Username is already used'});\n *     return (\n *         <SimpleForm>\n *             <TextInput source=\"username\" validate={unique()} />\n *         </SimpleForm>\n *     );\n * }\n *\n * @example // Passing options at call time\n * const UserCreateForm = () => {\n *     const unique = useUnique();\n *     return (\n *         <SimpleForm>\n *             <TextInput source=\"username\" validate={unique({ message: 'Username is already used'})} />\n *         </SimpleForm>\n *     );\n * }\n *\n * @example // With additional filters\n * const UserCreateForm = () => {\n *     const unique = useUnique();\n *     return (\n *         <SimpleForm>\n *             <ReferenceInput source=\"organization_id\" reference=\"organizations\" />\n *             <FormDataConsumer>\n *                 {({ formData }) => (\n *                     <TextInput\n *                         source=\"username\"\n *                         validate={unique({ filter: { organization_id: formData.organization_id })}\n *                     />\n *                 )}\n *             </FormDataConsumer>\n *         </SimpleForm>\n *     );\n * }\n */\nexport const useUnique = (options?: UseUniqueOptions) => {\n    const dataProvider = useDataProvider();\n    const translateLabel = useTranslateLabel();\n    const resource = useResourceContext(options);\n    if (!resource) {\n        throw new Error('useUnique: missing resource prop or context');\n    }\n    const translate = useTranslate();\n    const record = useRecordContext();\n\n    const debouncedGetList = useRef(\n        // The initial value is here to set the correct type on useRef\n        asyncDebounce(\n            dataProvider.getList,\n            options?.debounce ?? DEFAULT_DEBOUNCE\n        )\n    );\n\n    const validateUnique = useCallback(\n        (callTimeOptions?: UseUniqueOptions) => {\n            const {\n                message,\n                filter,\n                debounce: interval,\n            } = merge<UseUniqueOptions, any, any>(\n                {\n                    debounce: DEFAULT_DEBOUNCE,\n                    filter: {},\n                    message: 'ra.validation.unique',\n                },\n                options,\n                callTimeOptions\n            );\n\n            debouncedGetList.current = asyncDebounce(\n                dataProvider.getList,\n                interval\n            );\n\n            return async (value: any, allValues: any, props: InputProps) => {\n                if (isEmpty(value)) {\n                    return undefined;\n                }\n                try {\n                    const finalFilter = set(\n                        merge({}, filter),\n                        props.source,\n                        value\n                    );\n                    const { data, total } = await debouncedGetList.current(\n                        resource,\n                        {\n                            filter: finalFilter,\n                            pagination: { page: 1, perPage: 1 },\n                            sort: { field: 'id', order: 'ASC' },\n                        }\n                    );\n\n                    if (\n                        typeof total !== 'undefined' &&\n                        total > 0 &&\n                        !data.some(r => r.id === record?.id)\n                    ) {\n                        return {\n                            message,\n                            args: {\n                                source: props.source,\n                                value,\n                                field: translateLabel({\n                                    label: props.label,\n                                    source: props.source,\n                                    resource,\n                                }),\n                            },\n                        };\n                    }\n                } catch (error) {\n                    return translate('ra.notification.http_error');\n                }\n\n                return undefined;\n            };\n        },\n        [dataProvider, options, record, resource, translate, translateLabel]\n    );\n\n    return validateUnique;\n};\n\nconst DEFAULT_DEBOUNCE = 1000;\n\nexport type UseUniqueOptions = {\n    debounce?: number;\n    resource?: string;\n    message?: string;\n    filter?: Record<string, any>;\n};\n", "import * as React from 'react';\nimport { ReactElement } from 'react';\n\nimport { RaRecord } from '../../types';\nimport { useShowController, ShowControllerProps } from './useShowController';\nimport { ShowContextProvider } from './ShowContextProvider';\nimport { ResourceContextProvider } from '../../core';\n\n/**\n * Call useShowController and put the value in a ShowContext\n *\n * Base class for <Show> components, without UI.\n *\n * Accepts any props accepted by useShowController:\n * - id: The record identifier\n * - resource: The resource\n *\n * @example // Custom show layout\n *\n * const PostShow = () => (\n *     <ShowBase resource=\"posts\">\n *         <Grid container>\n *             <Grid item xs={8}>\n *                 <SimpleForm>\n *                     ...\n *                 </SimpleForm>\n *             </Grid>\n *             <Grid item xs={4}>\n *                 Show instructions...\n *             </Grid>\n *         </Grid>\n *         <div>\n *             Post related links...\n *         </div>\n *     </ShowBase>\n * );\n */\nexport const ShowBase = <RecordType extends RaRecord = any>({\n    children,\n    ...props\n}: { children: ReactElement } & ShowControllerProps<RecordType>) => {\n    const controllerProps = useShowController<RecordType>(props);\n    const body = (\n        <ShowContextProvider value={controllerProps}>\n            {children}\n        </ShowContextProvider>\n    );\n    return props.resource ? (\n        // support resource override via props\n        <ResourceContextProvider value={props.resource}>\n            {body}\n        </ResourceContextProvider>\n    ) : (\n        body\n    );\n};\n", "import { useParams } from 'react-router-dom';\n\nimport { useAuthenticated } from '../../auth';\nimport { RaRecord } from '../../types';\nimport {\n    useGetOne,\n    useRefresh,\n    UseGetOneHookValue,\n    UseGetOneOptions,\n} from '../../dataProvider';\nimport { useTranslate } from '../../i18n';\nimport { useRedirect } from '../../routing';\nimport { useNotify } from '../../notification';\nimport {\n    useResourceContext,\n    useGetResourceLabel,\n    useGetRecordRepresentation,\n} from '../../core';\n\n/**\n * Prepare data for the Show view.\n *\n * useShowController does a few things:\n * - it grabs the id from the URL and the resource name from the ResourceContext,\n * - it fetches the record via useGetOne,\n * - it prepares the page title.\n *\n * @param {Object} props The props passed to the Show component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Show view\n *\n * @example\n *\n * import { useShowController } from 'react-admin';\n * import ShowView from './ShowView';\n *\n * const MyShow = () => {\n *     const controllerProps = useShowController();\n *     return <ShowView {...controllerProps} />;\n * };\n *\n * @example // useShowController can also take its parameters from props\n *\n * import { useShowController } from 'react-admin';\n * import ShowView from './ShowView';\n *\n * const MyShow = () => {\n *     const controllerProps = useShowController({ resource: 'posts', id: 1234 });\n *     return <ShowView {...controllerProps} />;\n * };\n */\nexport const useShowController = <RecordType extends RaRecord = any>(\n    props: ShowControllerProps<RecordType> = {}\n): ShowControllerResult<RecordType> => {\n    const { disableAuthentication, id: propsId, queryOptions = {} } = props;\n    useAuthenticated({ enabled: !disableAuthentication });\n    const resource = useResourceContext(props);\n    if (!resource) {\n        throw new Error(\n            `useShowController requires a non-empty resource prop or context`\n        );\n    }\n    const getRecordRepresentation = useGetRecordRepresentation(resource);\n    const translate = useTranslate();\n    const notify = useNotify();\n    const redirect = useRedirect();\n    const refresh = useRefresh();\n    const { id: routeId } = useParams<'id'>();\n    if (!routeId && !propsId) {\n        throw new Error(\n            'useShowController requires an id prop or a route with an /:id? parameter.'\n        );\n    }\n    const id = propsId != null ? propsId : decodeURIComponent(routeId!);\n    const { meta, ...otherQueryOptions } = queryOptions;\n\n    const {\n        data: record,\n        error,\n        isLoading,\n        isFetching,\n        isPending,\n        refetch,\n    } = useGetOne<RecordType>(\n        resource,\n        { id, meta },\n        {\n            onError: () => {\n                notify('ra.notification.item_doesnt_exist', {\n                    type: 'error',\n                });\n                redirect('list', resource);\n                refresh();\n            },\n            retry: false,\n            ...otherQueryOptions,\n        }\n    );\n\n    // eslint-disable-next-line eqeqeq\n    if (record && record.id && record.id != id) {\n        throw new Error(\n            `useShowController: Fetched record's id attribute (${record.id}) must match the requested 'id' (${id})`\n        );\n    }\n\n    const getResourceLabel = useGetResourceLabel();\n    const recordRepresentation = getRecordRepresentation(record);\n    const defaultTitle = translate('ra.page.show', {\n        name: getResourceLabel(resource, 1),\n        id,\n        record,\n        recordRepresentation:\n            typeof recordRepresentation === 'string'\n                ? recordRepresentation\n                : '',\n    });\n\n    return {\n        defaultTitle,\n        error,\n        isLoading,\n        isFetching,\n        isPending,\n        record,\n        refetch,\n        resource,\n    } as ShowControllerResult<RecordType>;\n};\n\nexport interface ShowControllerProps<RecordType extends RaRecord = any> {\n    disableAuthentication?: boolean;\n    id?: RecordType['id'];\n    queryOptions?: UseGetOneOptions<RecordType>;\n    resource?: string;\n}\n\nexport interface ShowControllerBaseResult<RecordType extends RaRecord = any> {\n    defaultTitle?: string;\n    isFetching: boolean;\n    isLoading: boolean;\n    resource: string;\n    record?: RecordType;\n    refetch: UseGetOneHookValue<RecordType>['refetch'];\n}\n\nexport interface ShowControllerLoadingResult<RecordType extends RaRecord = any>\n    extends ShowControllerBaseResult<RecordType> {\n    record: undefined;\n    error: null;\n    isPending: true;\n}\nexport interface ShowControllerLoadingErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends ShowControllerBaseResult<RecordType> {\n    record: undefined;\n    error: TError;\n    isPending: false;\n}\nexport interface ShowControllerRefetchErrorResult<\n    RecordType extends RaRecord = any,\n    TError = Error,\n> extends ShowControllerBaseResult<RecordType> {\n    record: RecordType;\n    error: TError;\n    isPending: false;\n}\nexport interface ShowControllerSuccessResult<RecordType extends RaRecord = any>\n    extends ShowControllerBaseResult<RecordType> {\n    record: RecordType;\n    error: null;\n    isPending: false;\n}\n\nexport type ShowControllerResult<RecordType extends RaRecord = any> =\n    | ShowControllerLoadingResult<RecordType>\n    | ShowControllerLoadingErrorResult<RecordType>\n    | ShowControllerRefetchErrorResult<RecordType>\n    | ShowControllerSuccessResult<RecordType>;\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { RaRecord } from '../../types';\nimport { RecordContextProvider } from '../record/RecordContext';\nimport { ShowContext } from './ShowContext';\nimport { ShowControllerResult } from './useShowController';\n\n/**\n * Create a Show Context.\n *\n * @example\n *\n * const MyShow = (props) => {\n *     const controllerProps = useShowController(props);\n *     return (\n *         <ShowContextProvider value={controllerProps}>\n *             <MyShowView>\n *         </ShowContextProvider>\n *     );\n * };\n *\n * const MyShowView = () => {\n *     const record = useRecordContext();\n * }\n *\n * @see ShowContext\n * @see RecordContext\n */\nexport const ShowContextProvider = ({\n    children,\n    value,\n}: {\n    children: ReactNode;\n    value: ShowControllerResult;\n}) => (\n    <ShowContext.Provider value={value}>\n        <RecordContextProvider<Partial<RaRecord>> value={value && value.record}>\n            {children}\n        </RecordContextProvider>\n    </ShowContext.Provider>\n);\n", "import { createContext } from 'react';\nimport { ShowControllerResult } from './useShowController';\n\n/**\n * Context to store the result of the useShowController() hook.\n *\n * Use the useShowContext() hook to read the context. That's what the Show components do in react-admin.\n *\n * @example\n *\n * import { useShowController, ShowContextProvider } from 'ra-core';\n *\n * const Show = props => {\n *     const controllerProps = useShowController(props);\n *     return (\n *         <ShowContextProvider value={controllerProps}>\n *             ...\n *         </ShowContextProvider>\n *     );\n * };\n */\nexport const ShowContext = createContext<ShowControllerResult | null>(null);\n\nShowContext.displayName = 'ShowContext';\n", "import {\n    useShowController,\n    ShowControllerProps,\n    ShowControllerResult,\n} from './useShowController';\n\n/**\n * Render prop version of the useShowController hook\n *\n * @see useShowController\n * @example\n *\n * const ShowView = () => <div>...</div>\n * const MyShow = () => (\n *     <ShowController>\n *         {controllerProps => <ShowView {...controllerProps} {...props} />}\n *     </ShowController>\n * );\n */\nexport const ShowController = ({\n    children,\n    ...props\n}: {\n    children: (params: ShowControllerResult) => JSX.Element;\n} & ShowControllerProps) => {\n    const controllerProps = useShowController(props);\n    return children(controllerProps);\n};\n", "import { useContext } from 'react';\n\nimport { RaRecord } from '../../types';\nimport { ShowContext } from './ShowContext';\nimport { ShowControllerResult } from './useShowController';\n\n/**\n * Hook to read the show controller props from the ShowContext.\n *\n * Used within a <ShowContextProvider> (e.g. as a descendent of <Show>).\n *\n * @returns {ShowControllerResult} create controller props\n *\n * @see useShowController for how it is filled\n */\nexport const useShowContext = <\n    RecordType extends RaRecord = any,\n>(): ShowControllerResult<RecordType> => {\n    const context = useContext(ShowContext);\n    // Props take precedence over the context\n    if (!context) {\n        throw new Error(\n            'useShowContext must be used inside a ShowContextProvider'\n        );\n    }\n    return context;\n};\n", "import {\n    UseQueryOptions,\n    useQuery,\n    useQueryClient,\n} from '@tanstack/react-query';\nimport { useResourceContext } from '../core';\nimport { useDataProvider } from '../dataProvider';\nimport { useStore } from '../store';\nimport { FilterPayload, RaRecord, SortPayload } from '../types';\nimport { ListParams, SORT_ASC } from './list';\nimport { useRecordContext } from './record';\nimport { useCreatePath } from '../routing';\n\n/**\n * A hook used to fetch the previous and next record identifiers for a given record and resource.\n *\n * It fetches the list of records according to the filters\n * and the sort order configured in the list, and merges\n * the filters and the sorting order passed as props.\n *\n * usePrevNextController can be used anywhere a record context is provided\n * (often inside a `<Show>` or `<Edit>` component).\n *\n * @example <caption>Simple usage</caption>\n *\n * import { usePrevNextControllerProps } from 'ra-core';\n * const {\n *         hasPrev,\n *         hasNext,\n *         prevPath,\n *         nextPath,\n *         index,\n *         total,\n *         error,\n *         isPending,\n *     } = usePrevNextController(props);\n *\n * @example <caption>Custom PrevNextButton</caption>\n *\n * import { UsePrevNextControllerProps, useTranslate } from 'ra-core';\n * import NavigateBefore from '@mui/icons-material/NavigateBefore';\n * import NavigateNext from '@mui/icons-material/NavigateNext';\n * import ErrorIcon from '@mui/icons-material/Error';\n * import { Link } from 'react-router-dom';\n * import { CircularProgress, IconButton } from '@mui/material';\n *\n * const MyPrevNextButtons = props => {\n *     const {\n *         hasPrev,\n *         hasNext,\n *         nextPath,\n *         prevPath,\n *         index,\n *         total,\n *         error,\n *         isPending,\n *     } = usePrevNextController(props);\n *\n *     const translate = useTranslate();\n *\n *     if (isPending) {\n *         return <CircularProgress size={14} />;\n *     }\n *\n *     if (error) {\n *         return (\n *             <ErrorIcon\n *                 color=\"error\"\n *                 fontSize=\"small\"\n *                 titleAccess=\"error\"\n *                 aria-errormessage={error.message}\n *             />\n *         );\n *     }\n *\n *     return (\n *         <ul>\n *             <li>\n *                 <IconButton\n *                     component={hasPrev ? Link : undefined}\n *                     to={navigateToPrev}\n *                     aria-label={translate('ra.navigation.previous')}\n *                     disabled={!hasPrev}\n *                 >\n *                     <NavigateBefore />\n *                 </IconButton>\n *             </li>\n *             {typeof index === 'number' && (\n *                 <li>\n *                     {index + 1} / {total}\n *                 </li>\n *             )}\n *             <li>\n *                 <IconButton\n *                     component={hasNext ? Link : undefined}\n *                     to={navigateToNext}\n *                     aria-label={translate('ra.navigation.next')}\n *                     disabled={!hasNext}\n *                 >\n *                     <NavigateNext />\n *                 </IconButton>\n *             </li>\n *         </ul>\n *     );\n * };\n */\n\nexport const usePrevNextController = <RecordType extends RaRecord = any>(\n    props: UsePrevNextControllerProps<RecordType>\n): UsePrevNextControllerResult => {\n    const {\n        linkType = 'edit',\n        storeKey,\n        limit = 1000,\n        sort: initialSort = { field: 'id', order: SORT_ASC },\n        filter: permanentFilter = {},\n        filterDefaultValues = {},\n        queryOptions = {\n            staleTime: 5 * 60 * 1000,\n        },\n    } = props;\n\n    const record = useRecordContext<RecordType>(props);\n    const resource = useResourceContext(props);\n    const createPath = useCreatePath();\n\n    if (!resource) {\n        throw new Error(\n            `useNextPrevController was called outside of a ResourceContext and without a resource prop. You must set the resource prop.`\n        );\n    }\n\n    const [storedParams] = useStore<ListParams>(\n        storeKey || `${resource}.listParams`,\n        {\n            filter: filterDefaultValues,\n            order: initialSort.order,\n            sort: initialSort.field,\n            page: 1,\n            perPage: 10,\n            displayedFilters: {},\n        }\n    );\n\n    const dataProvider = useDataProvider();\n    const queryClient = useQueryClient();\n    const pagination = { page: 1, perPage: limit };\n    const sort = {\n        field: storedParams.sort,\n        order: storedParams.order,\n    };\n    const filter = { ...storedParams.filter, ...permanentFilter };\n    const { meta, ...otherQueryOptions } = queryOptions;\n    const params = { pagination, sort, filter, meta };\n\n    // try to use data from the cache first\n    const queryData = queryClient.getQueryData<{\n        data: RaRecord[];\n        total: number;\n    }>([\n        resource,\n        'getList',\n        {\n            ...params,\n            pagination: {\n                page: storedParams.page,\n                perPage: storedParams.perPage,\n            },\n        },\n    ]);\n    const recordIndexInQueryData = queryData?.data?.findIndex(\n        r => r.id === record?.id\n    );\n    const isRecordIndexFirstInNonFirstPage =\n        recordIndexInQueryData === 0 && storedParams.page > 1;\n    const isRecordIndexLastInNonLastPage =\n        queryData?.data && queryData?.total\n            ? recordIndexInQueryData === queryData?.data?.length - 1 &&\n              storedParams.page < queryData?.total / storedParams.perPage\n            : undefined;\n    const canUseCacheData =\n        record &&\n        queryData?.data &&\n        recordIndexInQueryData !== -1 &&\n        !isRecordIndexFirstInNonFirstPage &&\n        !isRecordIndexLastInNonLastPage;\n\n    // If the previous and next ids are not in the cache, fetch the entire list.\n    // This is necessary e.g. when coming directly to a detail page,\n    // without displaying the list first\n    const { data, error, isFetching, isLoading, isPending } = useQuery({\n        queryKey: [resource, 'getList', params],\n        queryFn: queryParams => {\n            return dataProvider.getList(resource, {\n                ...params,\n                signal:\n                    dataProvider.supportAbortSignal === true\n                        ? queryParams.signal\n                        : undefined,\n            });\n        },\n        enabled: !canUseCacheData,\n        ...otherQueryOptions,\n    });\n\n    const finalData = canUseCacheData ? queryData.data : data?.data || [];\n\n    if (!record || (isPending && !canUseCacheData))\n        return {\n            isFetching: true,\n            isLoading: true,\n            isPending: true,\n            prevPath: undefined,\n            nextPath: undefined,\n            index: undefined,\n            total: undefined,\n            hasPrev: false,\n            hasNext: false,\n        };\n\n    const ids = finalData.map(record => record.id);\n    const index = ids.indexOf(record.id);\n    const previousId =\n        typeof ids[index - 1] !== 'undefined' ? ids[index - 1] : null; // could be 0\n    const nextId =\n        index !== -1 && index < ids.length - 1 ? ids[index + 1] : null;\n\n    return {\n        hasPrev: previousId !== null,\n        hasNext: nextId !== null,\n        prevPath:\n            previousId !== null\n                ? createPath({\n                      type: linkType,\n                      resource,\n                      id: previousId,\n                  })\n                : undefined,\n        nextPath:\n            nextId !== null\n                ? createPath({\n                      type: linkType,\n                      resource,\n                      id: nextId,\n                  })\n                : undefined,\n        index: index === -1 ? undefined : index,\n        total: canUseCacheData ? queryData?.total : data?.total,\n        error,\n        isFetching: canUseCacheData ? false : isFetching,\n        isLoading: canUseCacheData ? false : isLoading,\n        isPending: canUseCacheData ? false : isPending,\n    };\n};\n\nexport interface UsePrevNextControllerProps<RecordType extends RaRecord = any> {\n    linkType?: 'edit' | 'show';\n    storeKey?: string | false;\n    limit?: number;\n    filter?: FilterPayload;\n    filterDefaultValues?: FilterPayload;\n    sort?: SortPayload;\n    resource?: string;\n    queryOptions?: Omit<\n        UseQueryOptions<{\n            data: RecordType[];\n            total?: number;\n            pageInfo?: {\n                hasNextPage?: boolean;\n                hasPreviousPage?: boolean;\n            };\n        }>,\n        'queryFn' | 'queryKey'\n    > & { meta?: any };\n}\n\nexport type UsePrevNextControllerResult = {\n    isFetching: boolean;\n    isLoading: boolean;\n    isPending: boolean;\n    hasPrev: boolean;\n    hasNext: boolean;\n    prevPath: string | undefined;\n    nextPath: string | undefined;\n    index: number | undefined;\n    total: number | undefined;\n    error?: any;\n};\n", "import { useCallback } from 'react';\nimport { useResourceContext, useResourceDefinitions } from '../core';\nimport type { RaRecord } from '../types';\nimport { useCreatePath } from './useCreatePath';\nimport { UseGetRouteForRecordOptions } from './useGetPathForRecord';\n\nexport const useGetPathForRecordCallback = <\n    RecordType extends RaRecord = RaRecord,\n>(\n    options: UseGetPathForRecordCallbackOptions = {}\n) => {\n    const resource = useResourceContext(options);\n    const resourceDefinitions = useResourceDefinitions();\n    const createPath = useCreatePath();\n\n    return useCallback(\n        async (params: UseGetRouteForRecordOptions<RecordType>) => {\n            const { link, record } = params || {};\n            const finalResource = params.resource ?? resource;\n            if (!finalResource) {\n                throw new Error(\n                    'Cannot generate a link for a record without a resource. You must use useGetPathForRecordCallback within a ResourceContextProvider, or pass a resource parameter.'\n                );\n            }\n            const resourceDefinition = resourceDefinitions[finalResource] ?? {};\n            const linkFunc = typeof link === 'function' ? link : () => link;\n\n            const defaultLink = resourceDefinition.hasShow\n                ? 'show'\n                : resourceDefinition.hasEdit\n                  ? 'edit'\n                  : false;\n\n            const isLinkFalse =\n                link === false || (link == null && defaultLink === false);\n\n            if (record == null || isLinkFalse) {\n                return false;\n            }\n            const linkResult = linkFunc(record, finalResource) ?? defaultLink;\n            const linkResultIsPromise = isPromise(linkResult);\n\n            if (linkResultIsPromise) {\n                return linkResult.then(resolvedLink => {\n                    if (resolvedLink === false) {\n                        // already set to false by default\n                        return;\n                    }\n                    return createPath({\n                        resource: finalResource,\n                        id: record.id,\n                        type: resolvedLink,\n                    });\n                });\n            }\n\n            return linkResult === false || linkResultIsPromise\n                ? false\n                : createPath({\n                      resource: finalResource,\n                      id: record.id,\n                      type: linkResult,\n                  });\n        },\n        [createPath, resourceDefinitions, resource]\n    );\n};\n\nconst isPromise = (value: any): value is Promise<any> =>\n    value && typeof value.then === 'function';\n\nexport interface UseGetPathForRecordCallbackOptions {\n    resource?: string;\n}\n", "import { useCallback } from 'react';\nimport { useNavigate, To } from 'react-router-dom';\nimport { Identifier, RaRecord } from '../types';\n\nimport { useBasename } from './useBasename';\nimport { CreatePathType, useCreatePath } from './useCreatePath';\n\ntype RedirectToFunction = (\n    resource?: string,\n    id?: Identifier,\n    data?: Partial<RaRecord>,\n    state?: object\n) => To;\n\nexport type RedirectionSideEffect = CreatePathType | false | RedirectToFunction;\n\n/**\n * Hook for Redirection Side Effect\n *\n * @example\n *\n * const redirect = useRedirect();\n * // redirect to list view\n * redirect('list', 'posts');\n * // redirect to edit view\n * redirect('edit', 'posts', 123);\n * // redirect to edit view with state data\n * redirect('edit', 'comments', 123, {}, { record: { post_id: record.id } });\n * // do not redirect\n * redirect(false);\n * // redirect to the result of a function\n * redirect((resource, id, data) => ...)\n */\nexport const useRedirect = () => {\n    const navigate = useNavigate();\n    const basename = useBasename();\n    const createPath = useCreatePath();\n\n    return useCallback(\n        (\n            redirectTo: RedirectionSideEffect,\n            resource: string = '',\n            id?: Identifier,\n            data?: Partial<RaRecord>,\n            state: object = {}\n        ) => {\n            if (!redirectTo) {\n                return;\n            } else if (typeof redirectTo === 'function') {\n                const target: To = redirectTo(resource, id, data);\n                const absoluteTarget =\n                    typeof target === 'string'\n                        ? `${basename}/${target}`\n                        : {\n                              pathname: `${basename}/${target.pathname}`,\n                              ...target,\n                          };\n                navigate(absoluteTarget, {\n                    state: { _scrollToTop: true, ...state },\n                });\n                return;\n            } else if (\n                typeof redirectTo === 'string' &&\n                redirectTo.startsWith('http') &&\n                window\n            ) {\n                // redirection to an absolute url\n                // history doesn't handle that case, so we handle it by hand\n                window.location.href = redirectTo;\n                return;\n            } else {\n                // redirection to an internal link\n                navigate(createPath({ resource, id, type: redirectTo }), {\n                    state:\n                        // We force the scrollToTop except when navigating to a list\n                        // where this is already done by <RestoreScrollPosition> in <Resource>\n                        redirectTo === 'list'\n                            ? state\n                            : { _scrollToTop: true, ...state },\n                });\n                return;\n            }\n        },\n        [navigate, basename, createPath]\n    );\n};\n", "import { useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router';\n\n/**\n * A hook to use inside the component passed to FallbackComponent\n * of react-error-boundary. It resets the error boundary state whenever\n * the location changes\n * @param {Function} resetErrorBoundary\n */\nexport const useResetErrorBoundaryOnLocationChange = (\n    resetErrorBoundary: () => void\n) => {\n    const { pathname } = useLocation();\n    const originalPathname = useRef(pathname);\n\n    useEffect(() => {\n        if (pathname !== originalPathname.current) {\n            resetErrorBoundary();\n        }\n    }, [pathname, resetErrorBoundary]);\n};\n", "import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\n/**\n * Scroll the window to top when the target location contains the _scrollToTop state\n *\n * @see CoreAdminRouter where it's enabled by default\n *\n * @example // usage in buttons\n * import { Link } from 'react-router-dom';\n * import { Button } from '@mui/material';\n *\n * const FooButton = () => (\n *     <Button\n *         component={Link}\n *         to={{\n *             pathname: '/foo',\n *             state: { _scrollToTop: true },\n *         }}\n *     >\n *         Go to foo\n *     </Button>\n * );\n */\nexport const useScrollToTop = () => {\n    const location = useLocation();\n    useEffect(() => {\n        if (\n            (location.state as any)?._scrollToTop &&\n            typeof window != 'undefined' &&\n            typeof window.scrollTo === 'function'\n        ) {\n            window.scrollTo(0, 0);\n        }\n    }, [location]);\n};\n", "import * as React from 'react';\nimport {\n    createMemoryRouter,\n    RouterProvider,\n    useLocation,\n    Location,\n    useNavigate,\n    NavigateFunction,\n} from 'react-router-dom';\nimport type { InitialEntry } from '@remix-run/router';\n\nconst UseLocation = ({\n    locationCallback,\n}: {\n    locationCallback: (l: Location) => void;\n}) => {\n    const location = useLocation();\n    locationCallback(location);\n    return null;\n};\n\nconst UseNavigate = ({\n    navigateCallback,\n}: {\n    navigateCallback: (n: NavigateFunction) => void;\n}) => {\n    const navigate = useNavigate();\n    navigateCallback(navigate);\n    return null;\n};\n\n/**\n * Wrapper around react-router's `createMemoryRouter` to be used in test components.\n *\n * It is similar to `MemoryRouter` but it supports\n * [data APIs](https://reactrouter.com/en/main/routers/picking-a-router#data-apis).\n *\n * Additionally, it provides\n * - a `locationCallback` prop to get the location in the test\n * - a `navigateCallback` prop to be able to navigate in the test\n */\nexport const TestMemoryRouter = ({\n    children,\n    locationCallback,\n    navigateCallback,\n    ...rest\n}: {\n    children: React.ReactNode;\n    locationCallback?: (l: Location) => void;\n    navigateCallback?: (n: NavigateFunction) => void;\n    basename?: string;\n    initialEntries?: InitialEntry[];\n    initialIndex?: number;\n}) => {\n    const router = createMemoryRouter(\n        [\n            {\n                path: '*',\n                element: (\n                    <>\n                        {children}\n                        {locationCallback && (\n                            <UseLocation locationCallback={locationCallback} />\n                        )}\n                        {navigateCallback && (\n                            <UseNavigate navigateCallback={navigateCallback} />\n                        )}\n                    </>\n                ),\n            },\n        ],\n        { ...rest }\n    );\n    return <RouterProvider router={router} />;\n};\n", "import * as React from 'react';\nimport { ReactElement, useCallback, useMemo, useState } from 'react';\nimport {\n    PreferencesEditorContext,\n    PreferencesEditorContextValue,\n} from './PreferencesEditorContext';\n\nexport const PreferencesEditorContextProvider = ({ children }) => {\n    const [isEnabled, setIsEnabled] = useState(false);\n    const [editor, setEditor] = useState<ReactElement | null>(null);\n    const [preferenceKey, setPreferenceKey] = useState<string | null>(null);\n    const [path, setPath] = useState<string | null>(null);\n    const [title, setTitleString] = useState<string | null>(null);\n    const [titleOptions, setTitleOptions] = useState<any>();\n    const enable = useCallback(() => setIsEnabled(true), []);\n    const disable = useCallback(() => {\n        setIsEnabled(false);\n        setEditor(null);\n    }, []);\n\n    const setTitle = useCallback((title: string, titleOptions?: any) => {\n        setTitleString(title);\n        setTitleOptions(titleOptions);\n    }, []);\n\n    const context = useMemo<PreferencesEditorContextValue>(() => {\n        return {\n            editor,\n            setEditor,\n            preferenceKey,\n            setPreferenceKey,\n            title,\n            titleOptions,\n            setTitle,\n            isEnabled,\n            disable,\n            enable,\n            path,\n            setPath,\n        };\n    }, [\n        disable,\n        enable,\n        editor,\n        preferenceKey,\n        isEnabled,\n        path,\n        setPath,\n        title,\n        titleOptions,\n        setTitle,\n    ]);\n\n    return (\n        <PreferencesEditorContext.Provider value={context}>\n            {children}\n        </PreferencesEditorContext.Provider>\n    );\n};\n", "import * as React from 'react';\nimport { createContext, ReactElement } from 'react';\n\nexport const PreferencesEditorContext = createContext<\n    PreferencesEditorContextValue | undefined\n>(undefined);\n\nexport type PreferencesEditorContextValue = {\n    editor: ReactElement | null;\n    setEditor: React.Dispatch<React.SetStateAction<ReactElement | null>>;\n    preferenceKey: string | null;\n    setPreferenceKey: React.Dispatch<React.SetStateAction<string | null>>;\n    title: string | null;\n    titleOptions?: any;\n    setTitle: (title: string, titleOptions?: any) => void;\n    isEnabled: boolean;\n    enable: () => void;\n    disable: () => void;\n    path: string | null;\n    setPath: (path: string) => void;\n};\n", "import * as React from 'react';\nimport { createContext, useCallback, useState, useMemo } from 'react';\nimport isEqual from 'lodash/isEqual';\n\nimport { AdminChildren, ResourceDefinition, ResourceOptions } from '../types';\n\nexport type ResourceDefinitions<OptionsType extends ResourceOptions = any> = {\n    [name: string]: ResourceDefinition<OptionsType>;\n};\n\nexport type ResourceDefinitionContextValue = {\n    definitions: ResourceDefinitions;\n    register: (config: ResourceDefinition) => void;\n    unregister: (config: ResourceDefinition) => void;\n};\n\nexport const ResourceDefinitionContext =\n    createContext<ResourceDefinitionContextValue>({\n        definitions: {},\n        register: () => {},\n        unregister: () => {},\n    });\n\n/**\n * Context to store the current resource Definition.\n *\n * Use the useResourceDefinition() hook to read the context.\n *\n * @example\n *\n * import { useResourceDefinition, useTranslate } from 'ra-core';\n *\n * const PostMenuItem = () => {\n *     const { name, icon } = useResourceDefinition({ resource: 'posts' });\n *\n *     return (\n *          <MenuItem>\n *              <ListItemIcon>{icon}</ListItemIcon>\n *              {name}\n *          </MenuItem>\n *     );\n * };\n */\nexport const ResourceDefinitionContextProvider = ({\n    definitions: defaultDefinitions = {},\n    children,\n}: {\n    definitions?: ResourceDefinitions;\n    children: AdminChildren;\n}) => {\n    const [definitions, setState] =\n        useState<ResourceDefinitions>(defaultDefinitions);\n\n    const register = useCallback((config: ResourceDefinition) => {\n        setState(prev =>\n            isEqual(prev[config.name], config)\n                ? prev\n                : {\n                      ...prev,\n                      [config.name]: config,\n                  }\n        );\n    }, []);\n\n    const unregister = useCallback((config: ResourceDefinition) => {\n        setState(prev => {\n            const { [config.name]: _, ...rest } = prev;\n            return rest;\n        });\n    }, []);\n\n    const contextValue = useMemo(\n        () => ({ definitions, register, unregister }),\n        [definitions] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n\n    return (\n        <ResourceDefinitionContext.Provider value={contextValue}>\n            {/* Had to cast here because Provider only accepts ReactNode but we might have a render function */}\n            {children as React.ReactNode}\n        </ResourceDefinitionContext.Provider>\n    );\n};\n", "import * as React from 'react';\nimport {\n    ComponentType,\n    useEffect,\n    isValidElement,\n    createElement,\n    useState,\n    ErrorInfo,\n    ReactElement,\n} from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { ErrorBoundary } from 'react-error-boundary';\n\nimport { CoreAdminRoutes } from './CoreAdminRoutes';\nimport { useResetErrorBoundaryOnLocationChange } from '../routing';\nimport { Ready } from '../util';\nimport { DefaultTitleContextProvider } from './DefaultTitleContext';\nimport type {\n    TitleComponent,\n    LoginComponent,\n    LayoutComponent,\n    AdminChildren,\n    CatchAllComponent,\n    DashboardComponent,\n    LoadingComponent,\n} from '../types';\n\nexport type ChildrenFunction = () => ComponentType[];\n\nconst DefaultLayout = ({ children }: { children: React.ReactNode }) => (\n    <>{children}</>\n);\nconst DefaultError = ({ error, errorInfo, resetErrorBoundary }) => {\n    useResetErrorBoundaryOnLocationChange(resetErrorBoundary);\n    return (\n        <div>\n            <h1>Error</h1>\n            <pre>\n                {error.message}\n                {errorInfo?.componentStack}\n            </pre>\n        </div>\n    );\n};\n\nexport interface CoreAdminUIProps {\n    /**\n     * The content displayed when the user visits the /auth-callback page, used for redirection by third-party authentication providers\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#authcallbackpage\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     * import { authProvider } from './authProvider';\n     * import MyAuthCallbackPage from './MyAuthCallbackPage';\n     *\n     * const App = () => (\n     *     <Admin\n     *         authCallbackPage={MyAuthCallbackPage}\n     *         authProvider={authProvider}\n     *         dataProvider={dataProvider}\n     *     >\n     *         ...\n     *     </Admin>\n     * );\n     */\n    authCallbackPage?: ComponentType | boolean;\n\n    /**\n     * A catch-all react component to display when the URL does not match any\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#catchall\n     * @example\n     * // in src/NotFound.js\n     * import Card from '@mui/material/Card';\n     * import CardContent from '@mui/material/CardContent';\n     * import { Title } from 'react-admin';\n     *\n     * export const NotFound = () => (\n     *     <Card>\n     *         <Title title=\"Not Found\" />\n     *         <CardContent>\n     *             <h1>404: Page not found</h1>\n     *         </CardContent>\n     *     </Card>\n     * );\n     *\n     * // in src/App.js\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     * import { NotFound } from './NotFound';\n     *\n     * const App = () => (\n     *     <Admin catchAll={NotFound} dataProvider={dataProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    catchAll?: CatchAllComponent;\n\n    children?: AdminChildren;\n\n    /**\n     * The component to use for the dashboard page (displayed on the `/` route).\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#dashboard\n     * @example\n     * import { Admin } from 'react-admin';\n     * import Dashboard from './Dashboard';\n     * import { dataProvider } from './dataProvider';\n     *\n     * const App = () => (\n     *     <Admin dashboard={Dashboard} dataProvider={dataProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    dashboard?: DashboardComponent;\n\n    /**\n     * Set to true to disable anonymous telemetry collection\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#disabletelemetry\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     *\n     * const App = () => (\n     *     <Admin disableTelemetry dataProvider={dataProvider}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    disableTelemetry?: boolean;\n\n    /**\n     * The component displayed when an error is caught in a child component\n     * @see https://marmelab.com/react-admin/Admin.html#error\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { MyError } from './error';\n     *\n     * const App = () => (\n     *     <Admin error={MyError}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    error?: ({\n        errorInfo,\n        error,\n        resetErrorBoundary,\n    }: {\n        errorInfo?: ErrorInfo;\n        error: Error;\n        resetErrorBoundary: (args) => void;\n    }) => ReactElement;\n\n    /**\n     * The main app layout component\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#layout\n     * @example\n     * import { Admin, Layout } from 'react-admin';\n     *\n     * const MyLayout = ({ children }) => (\n     *     <Layout appBarAlwaysOn>\n     *        {children}\n     *     </Layout>\n     * );\n     *\n     * export const App = () => (\n     *     <Admin dataProvider={dataProvider} layout={MyLayout}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    layout?: LayoutComponent;\n\n    /**\n     * The component displayed while fetching the auth provider if the admin child is an async function\n     */\n    loading?: LoadingComponent;\n\n    /**\n     * The component displayed when the user visits the /login page\n     * @see https://marmelab.com/react-admin/Admin.html#loginpage\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     * import { authProvider } from './authProvider';\n     * import MyLoginPage from './MyLoginPage';\n     *\n     * const App = () => (\n     *     <Admin\n     *         loginPage={MyLoginPage}\n     *         authProvider={authProvider}\n     *         dataProvider={dataProvider}\n     *     >\n     *         ...\n     *     </Admin>\n     * );\n     */\n    loginPage?: LoginComponent | boolean;\n\n    /**\n     * Flag to require authentication for all routes. Defaults to false.\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#requireauth\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     * import { authProvider } from './authProvider';\n     *\n     * const App = () => (\n     *     <Admin\n     *         requireAuth\n     *         authProvider={authProvider}\n     *         dataProvider={dataProvider}\n     *     >\n     *         ...\n     *     </Admin>\n     * );\n     */\n    requireAuth?: boolean;\n\n    /**\n     * The page to display when the admin has no Resource children\n     *\n     * @see https://marmelab.com/react-admin/Admin.html#ready\n     * @example\n     * import { Admin } from 'react-admin';\n     *\n     * const Ready = () => (\n     *     <div>\n     *         <h1>Admin ready</h1>\n     *         <p>You can now add resources</p>\n     *     </div>\n     * )\n     *\n     * const App = () => (\n     *     <Admin ready={Ready}>\n     *         ...\n     *     </Admin>\n     * );\n     */\n    ready?: ComponentType;\n\n    /**\n     * The title of the error page\n     * @see https://marmelab.com/react-admin/Admin.html#title\n     * @example\n     * import { Admin } from 'react-admin';\n     * import { dataProvider } from './dataProvider';\n     *\n     * const App = () => (\n     *    <Admin title=\"My Admin\" dataProvider={dataProvider}>\n     *       ...\n     *   </Admin>\n     * );\n     */\n    title?: TitleComponent;\n}\n\nexport const CoreAdminUI = (props: CoreAdminUIProps) => {\n    const [errorInfo, setErrorInfo] = useState<ErrorInfo>({});\n    const {\n        authCallbackPage: LoginCallbackPage = false,\n        catchAll = Noop,\n        children,\n        dashboard,\n        disableTelemetry = false,\n        error: ErrorComponent = DefaultError,\n        layout = DefaultLayout,\n        loading = Noop,\n        loginPage: LoginPage = false,\n        ready = Ready,\n        requireAuth = false,\n        title = 'React Admin',\n    } = props;\n\n    useEffect(() => {\n        if (\n            disableTelemetry ||\n            process.env.NODE_ENV !== 'production' ||\n            typeof window === 'undefined' ||\n            typeof window.location === 'undefined' ||\n            typeof Image === 'undefined'\n        ) {\n            return;\n        }\n        const img = new Image();\n        img.src = `https://react-admin-telemetry.marmelab.com/react-admin-telemetry?domain=${window.location.hostname}`;\n    }, [disableTelemetry]);\n\n    const handleError = (error: Error, info: ErrorInfo) => setErrorInfo(info);\n\n    return (\n        <DefaultTitleContextProvider value={title}>\n            <ErrorBoundary\n                onError={handleError}\n                fallbackRender={({ error, resetErrorBoundary }) => (\n                    <div style={{ minHeight: '100vh' }}>\n                        <ErrorComponent\n                            error={error}\n                            errorInfo={errorInfo}\n                            resetErrorBoundary={resetErrorBoundary}\n                        />\n                    </div>\n                )}\n            >\n                <Routes>\n                    {LoginPage !== false && LoginPage !== true ? (\n                        <Route\n                            path=\"/login\"\n                            element={createOrGetElement(LoginPage)}\n                        />\n                    ) : null}\n\n                    {LoginCallbackPage !== false &&\n                    LoginCallbackPage !== true ? (\n                        <Route\n                            path=\"/auth-callback\"\n                            element={createOrGetElement(LoginCallbackPage)}\n                        />\n                    ) : null}\n\n                    <Route\n                        path=\"/*\"\n                        element={\n                            <CoreAdminRoutes\n                                catchAll={catchAll}\n                                dashboard={dashboard}\n                                layout={layout}\n                                loading={loading}\n                                requireAuth={requireAuth}\n                                ready={ready}\n                            >\n                                {children}\n                            </CoreAdminRoutes>\n                        }\n                    />\n                </Routes>\n            </ErrorBoundary>\n        </DefaultTitleContextProvider>\n    );\n};\n\nconst createOrGetElement = el => (isValidElement(el) ? el : createElement(el));\n\nconst Noop = () => null;\n", "import * as React from 'react';\nimport { useState, useEffect, Children, ComponentType } from 'react';\nimport { Navigate, Route, Routes } from 'react-router-dom';\n\nimport { WithPermissions, useCheckAuth, LogoutOnMount } from '../auth';\nimport { useScrollToTop, useCreatePath } from '../routing';\nimport {\n    AdminChildren,\n    CatchAllComponent,\n    DashboardComponent,\n    LayoutComponent,\n    LoadingComponent,\n} from '../types';\nimport { useConfigureAdminRouterFromChildren } from './useConfigureAdminRouterFromChildren';\nimport { HasDashboardContextProvider } from './HasDashboardContext';\n\nexport const CoreAdminRoutes = (props: CoreAdminRoutesProps) => {\n    useScrollToTop();\n    const createPath = useCreatePath();\n\n    const {\n        customRoutesWithLayout,\n        customRoutesWithoutLayout,\n        status,\n        resources,\n    } = useConfigureAdminRouterFromChildren(props.children);\n\n    const {\n        layout: Layout,\n        catchAll: CatchAll,\n        dashboard,\n        loading: LoadingPage,\n        requireAuth,\n        ready: Ready,\n    } = props;\n\n    const [onlyAnonymousRoutes, setOnlyAnonymousRoutes] = useState(requireAuth);\n    const [checkAuthLoading, setCheckAuthLoading] = useState(requireAuth);\n    const checkAuth = useCheckAuth();\n\n    useEffect(() => {\n        if (requireAuth) {\n            // do not log the user out on failure to allow access to custom routes with no layout\n            // for other routes, the LogoutOnMount component will log the user out\n            checkAuth(undefined, false)\n                .then(() => {\n                    setOnlyAnonymousRoutes(false);\n                })\n                .catch(() => {})\n                .finally(() => {\n                    setCheckAuthLoading(false);\n                });\n        }\n    }, [checkAuth, requireAuth]);\n\n    if (status === 'empty') {\n        if (!Ready) {\n            throw new Error(\n                'The admin is empty. Please provide an empty component, or pass Resource or CustomRoutes as children.'\n            );\n        }\n        return <Ready />;\n    }\n\n    // Note: custom routes with no layout are always rendered, regardless of the auth status\n\n    if (status === 'loading' || checkAuthLoading) {\n        return (\n            <Routes>\n                {customRoutesWithoutLayout}\n                <Route\n                    path=\"*\"\n                    element={\n                        <div style={{ height: '100vh' }}>\n                            <LoadingPage />\n                        </div>\n                    }\n                />\n            </Routes>\n        );\n    }\n\n    if (onlyAnonymousRoutes) {\n        return (\n            <Routes>\n                {customRoutesWithoutLayout}\n                <Route path=\"*\" element={<LogoutOnMount />} />\n            </Routes>\n        );\n    }\n\n    return (\n        <Routes>\n            {/*\n                Render the custom routes that were outside the child function.\n            */}\n            {customRoutesWithoutLayout}\n            <Route\n                path=\"/*\"\n                element={\n                    <HasDashboardContextProvider value={!!dashboard}>\n                        <Layout>\n                            <Routes>\n                                {customRoutesWithLayout}\n                                {Children.map(resources, resource => (\n                                    <Route\n                                        key={resource.props.name}\n                                        path={`${resource.props.name}/*`}\n                                        element={resource}\n                                    />\n                                ))}\n                                <Route\n                                    path=\"/\"\n                                    element={\n                                        dashboard ? (\n                                            <WithPermissions\n                                                authParams={defaultAuthParams}\n                                                component={dashboard}\n                                            />\n                                        ) : resources.length > 0 ? (\n                                            <Navigate\n                                                to={createPath({\n                                                    resource:\n                                                        resources[0].props.name,\n                                                    type: 'list',\n                                                })}\n                                            />\n                                        ) : null\n                                    }\n                                />\n                                <Route path=\"*\" element={<CatchAll />} />\n                            </Routes>\n                        </Layout>\n                    </HasDashboardContextProvider>\n                }\n            />\n        </Routes>\n    );\n};\n\nexport interface CoreAdminRoutesProps {\n    dashboard?: DashboardComponent;\n    layout: LayoutComponent;\n    catchAll: CatchAllComponent;\n    children?: AdminChildren;\n    loading: LoadingComponent;\n    requireAuth?: boolean;\n    ready?: ComponentType;\n}\n\nconst defaultAuthParams = { params: { route: 'dashboard' } };\n", "import * as React from 'react';\nimport {\n    Children,\n    Dispatch,\n    Fragment,\n    ReactElement,\n    ReactNode,\n    SetStateAction,\n    useCallback,\n    useEffect,\n    useState,\n} from 'react';\nimport { useLogout, usePermissions } from '../auth';\nimport { useSafeSetState } from '../util';\nimport {\n    AdminChildren,\n    RenderResourcesFunction,\n    ResourceDefinition,\n    ResourceProps,\n} from '../types';\nimport { CustomRoutesProps } from './CustomRoutes';\nimport { useResourceDefinitionContext } from './useResourceDefinitionContext';\n\n/**\n * This hook inspects the CoreAdminRouter children and returns them separated in three groups:\n * - Custom routes without layout\n * - Custom routes with layout\n * - Resources\n *\n * It also returns a status:\n * - loading: still loading children from a function child\n * - empty: no resources were provided among children\n * - ready: admin is ready to be rendered\n *\n * @example\n * const {\n *    customRoutesWithLayout,\n *    customRoutesWithoutLayout,\n *    resources,\n *    status,\n * } = useConfigureAdminRouterFromChildren(children);\n */\nexport const useConfigureAdminRouterFromChildren = (\n    children: AdminChildren\n): RoutesAndResources & { status: AdminRouterStatus } => {\n    const { permissions, isPending } = usePermissions();\n\n    // Whenever children are updated, update our custom routes and resources\n    const [routesAndResources, status] = useRoutesAndResourcesFromChildren(\n        children,\n        permissions,\n        isPending\n    );\n\n    // Whenever the resources change, we must ensure they're all registered\n    useRegisterResources(routesAndResources.resources, permissions);\n\n    return {\n        customRoutesWithLayout: routesAndResources.customRoutesWithLayout,\n        customRoutesWithoutLayout: routesAndResources.customRoutesWithoutLayout,\n        status,\n        resources: routesAndResources.resources,\n    };\n};\n\n/**\n * A hook that determine the routes and resources from React nodes and permissions.\n * Returns a tuple with the routes and resources as a single object, and the status.\n * @param children React nodes to inspect\n * @param permissions The permissions\n */\nconst useRoutesAndResourcesFromChildren = (\n    children: AdminChildren,\n    permissions: any,\n    isLoading: boolean\n): [RoutesAndResources, AdminRouterStatus] => {\n    // Gather custom routes and resources that were declared as direct children of CoreAdminRouter\n    // e.g. Not returned from the child function (if any)\n    // We need to know right away whether some resources were declared to correctly\n    // initialize the status at the next stop\n    const doLogout = useLogout();\n    const [routesAndResources, setRoutesAndResources, mergeRoutesAndResources] =\n        useRoutesAndResourcesState(getRoutesAndResourceFromNodes(children));\n\n    const [status, setStatus] = useSafeSetState<AdminRouterStatus>(() =>\n        getStatus({\n            children,\n            ...routesAndResources,\n        })\n    );\n    if (!status) {\n        throw new Error('Status should be defined');\n    }\n\n    useEffect(() => {\n        const resolveChildFunction = async (\n            childFunc: RenderResourcesFunction\n        ) => {\n            try {\n                const childrenFuncResult = childFunc(permissions);\n                if ((childrenFuncResult as Promise<ReactNode>)?.then) {\n                    (childrenFuncResult as Promise<ReactNode>).then(\n                        resolvedChildren => {\n                            mergeRoutesAndResources(\n                                getRoutesAndResourceFromNodes(resolvedChildren)\n                            );\n                            setStatus('ready');\n                        }\n                    );\n                } else {\n                    mergeRoutesAndResources(\n                        getRoutesAndResourceFromNodes(\n                            childrenFuncResult as ReactNode\n                        )\n                    );\n                    setStatus('ready');\n                }\n            } catch (error) {\n                console.error(error);\n                doLogout();\n            }\n        };\n\n        const updateFromChildren = async () => {\n            const functionChild = getSingleChildFunction(children);\n            const newRoutesAndResources =\n                getRoutesAndResourceFromNodes(children);\n            setRoutesAndResources(newRoutesAndResources);\n            setStatus(\n                !!functionChild\n                    ? 'loading'\n                    : newRoutesAndResources.resources.length > 0 ||\n                        newRoutesAndResources.customRoutesWithLayout.length >\n                            0 ||\n                        newRoutesAndResources.customRoutesWithoutLayout.length >\n                            0\n                      ? 'ready'\n                      : 'empty'\n            );\n\n            if (functionChild) {\n                resolveChildFunction(functionChild);\n            }\n        };\n        if (!isLoading) {\n            updateFromChildren();\n        }\n    }, [\n        children,\n        doLogout,\n        isLoading,\n        mergeRoutesAndResources,\n        permissions,\n        setRoutesAndResources,\n        setStatus,\n    ]);\n\n    return [routesAndResources, status];\n};\n\n/*\n * A hook that store the routes and resources just like setState but also provides an additional function\n * to merge new routes and resources with the existing ones.\n */\nconst useRoutesAndResourcesState = (\n    initialState: RoutesAndResources\n): [\n    RoutesAndResources,\n    Dispatch<SetStateAction<RoutesAndResources>>,\n    (newRoutesAndResources: RoutesAndResources) => void,\n] => {\n    const [routesAndResources, setRoutesAndResources] = useState(initialState);\n\n    const mergeRoutesAndResources = useCallback(\n        (newRoutesAndResources: RoutesAndResources) => {\n            setRoutesAndResources(previous => ({\n                customRoutesWithLayout: previous.customRoutesWithLayout.concat(\n                    newRoutesAndResources.customRoutesWithLayout\n                ),\n                customRoutesWithoutLayout:\n                    previous.customRoutesWithoutLayout.concat(\n                        newRoutesAndResources.customRoutesWithoutLayout\n                    ),\n                resources: previous.resources.concat(\n                    newRoutesAndResources.resources\n                ),\n            }));\n        },\n        []\n    );\n\n    return [routesAndResources, setRoutesAndResources, mergeRoutesAndResources];\n};\n\n/**\n * A hook that register resources and unregister them when the calling component is unmounted.\n * @param resources: An array of Resource elements\n * @param permissions: The permissions\n */\nconst useRegisterResources = (\n    resources: (ReactElement & ResourceWithRegisterFunction)[],\n    permissions: any\n) => {\n    const { register, unregister } = useResourceDefinitionContext();\n\n    useEffect(() => {\n        resources.forEach(resource => {\n            if (\n                typeof (\n                    resource.type as unknown as ResourceWithRegisterFunction\n                ).registerResource === 'function'\n            ) {\n                const definition = (\n                    resource.type as unknown as ResourceWithRegisterFunction\n                ).registerResource(resource.props, permissions);\n                register(definition);\n            } else {\n                throw new Error(\n                    'When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition'\n                );\n            }\n        });\n        return () => {\n            resources.forEach(resource => {\n                if (\n                    typeof (\n                        resource.type as unknown as ResourceWithRegisterFunction\n                    ).registerResource === 'function'\n                ) {\n                    const definition = (\n                        resource.type as unknown as ResourceWithRegisterFunction\n                    ).registerResource(resource.props, permissions);\n                    unregister(definition);\n                } else {\n                    throw new Error(\n                        'When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition'\n                    );\n                }\n            });\n        };\n    }, [permissions, register, resources, unregister]);\n};\n\nconst getStatus = ({\n    children,\n    resources,\n    customRoutesWithLayout,\n    customRoutesWithoutLayout,\n}: {\n    children: AdminChildren;\n    resources: ReactNode[];\n    customRoutesWithLayout: ReactNode[];\n    customRoutesWithoutLayout: ReactNode[];\n}): AdminRouterStatus => {\n    return getSingleChildFunction(children)\n        ? 'loading'\n        : resources.length > 0 ||\n            customRoutesWithLayout.length > 0 ||\n            customRoutesWithoutLayout.length > 0\n          ? 'ready'\n          : 'empty';\n};\n\n/**\n * Inspect the children of a CoreAdminRouter to see if one of them is a function.\n * Throws an error if there are more than one function child.\n * Returns the function child if one was provided, or null otherwise.\n */\nconst getSingleChildFunction = (\n    children: AdminChildren\n): RenderResourcesFunction | null => {\n    const childrenArray = Array.isArray(children) ? children : [children];\n\n    const functionChildren = childrenArray.filter(\n        child => typeof child === 'function'\n    );\n\n    if (functionChildren.length > 1) {\n        throw new Error(\n            'You can only provide one function child to AdminRouter'\n        );\n    }\n\n    if (functionChildren.length === 0) {\n        return null;\n    }\n\n    return functionChildren[0] as RenderResourcesFunction;\n};\n\n/**\n * Inspect the children and return an object with the following keys:\n * - customRoutesWithLayout: an array of the custom routes to render inside the layout\n * - customRoutesWithoutLayout: an array of custom routes to render outside the layout\n * - resources: an array of resources elements\n */\nconst getRoutesAndResourceFromNodes = (\n    children: AdminChildren\n): RoutesAndResources => {\n    const customRoutesWithLayout: ReactNode[] = [];\n    const customRoutesWithoutLayout: ReactNode[] = [];\n    const resources: (ReactElement & ResourceWithRegisterFunction)[] = [];\n\n    if (typeof children === 'function') {\n        return {\n            customRoutesWithLayout: [],\n            customRoutesWithoutLayout: [],\n            resources: [],\n        };\n    }\n    // @ts-ignore\n    Children.forEach(children, element => {\n        if (!React.isValidElement(element)) {\n            // Ignore non-elements. This allows people to more easily inline\n            // conditionals in their route config.\n            return;\n        }\n        if (element.type === Fragment) {\n            const customRoutesFromFragment = getRoutesAndResourceFromNodes(\n                element.props.children\n            );\n            customRoutesWithLayout.push(\n                ...customRoutesFromFragment.customRoutesWithLayout\n            );\n            customRoutesWithoutLayout.push(\n                ...customRoutesFromFragment.customRoutesWithoutLayout\n            );\n            resources.push(...customRoutesFromFragment.resources);\n        }\n\n        if ((element.type as any).raName === 'CustomRoutes') {\n            const customRoutesElement =\n                element as ReactElement<CustomRoutesProps>;\n\n            if (customRoutesElement.props.noLayout) {\n                customRoutesWithoutLayout.push(\n                    customRoutesElement.props.children\n                );\n            } else {\n                customRoutesWithLayout.push(customRoutesElement.props.children);\n            }\n        } else if ((element.type as any).raName === 'Resource') {\n            resources.push(\n                element as ReactElement & ResourceWithRegisterFunction\n            );\n        }\n    });\n\n    return {\n        customRoutesWithLayout,\n        customRoutesWithoutLayout,\n        resources,\n    };\n};\n\ntype RoutesAndResources = {\n    customRoutesWithLayout: ReactNode[];\n    customRoutesWithoutLayout: ReactNode[];\n    resources: (ReactElement & ResourceWithRegisterFunction)[];\n};\n\ntype ResourceWithRegisterFunction = {\n    registerResource: (\n        props: ResourceProps,\n        permissions: any\n    ) => ResourceDefinition;\n};\n\ntype AdminRouterStatus = 'loading' | 'empty' | 'ready';\n", "import { useContext } from 'react';\n\nimport { ResourceDefinitionContext } from './ResourceDefinitionContext';\n\nexport const useResourceDefinitionContext = () =>\n    useContext(ResourceDefinitionContext);\n", "import { createContext, useContext } from 'react';\n\nexport const HasDashboardContext = createContext<boolean>(false);\n\nexport const HasDashboardContextProvider = HasDashboardContext.Provider;\n\n/**\n * Returns true if the app has a dashboard defined at the <Admin> level.\n *\n * @private\n * @example\n * import { useHasDashboard } from 'react-admin';\n *\n * const MyMenu = () => {\n *    const hasDashboard = useHasDashboard();\n *    return (\n *       <Menu>\n *          {hasDashboard && <DashboardMenuItem />}\n *          <MenuItemLink to=\"/posts\" />\n *          <MenuItemLink to=\"/comments\" />\n *       </Menu>\n *     );\n * }\n */\nexport const useHasDashboard = () => useContext(HasDashboardContext);\n", "import { createContext, useContext } from 'react';\nimport type { TitleComponent } from '../types';\n\nexport const DefaultTitleContext = createContext<TitleComponent>('React Admin');\n\nexport const DefaultTitleContextProvider = DefaultTitleContext.Provider;\n\n/**\n * Get the application title defined at the `<Admin>` level\n *\n * @example\n * import { useDefaultTitle } from 'react-admin';\n *\n * const AppBar = () => {\n *    const defaultTitle = useDefaultTitle();\n *    return <span>{defaultTitle}</span>;\n * }\n */\nexport const useDefaultTitle = () => useContext(DefaultTitleContext);\n", "import { ReactNode } from 'react';\n\n/**\n * This component allows you to provide custom routes to the Admin.\n * @param props The component props\n * @param props.children The custom routes.\n * @param props.noLayout A boolean indicating whether to render the routes outside the Layout. Defaults to false.\n * @returns Nothing. This is a configuration component.\n */\nexport const CustomRoutes = (_props: CustomRoutesProps) => {\n    return null;\n};\n\nCustomRoutes.raName = 'CustomRoutes';\n\nexport type CustomRoutesProps = {\n    children: ReactNode;\n    noLayout?: boolean;\n};\n", "import * as React from 'react';\nimport { ReactElement } from 'react';\nimport { ResourceContextValue } from './ResourceContext';\nimport { ResourceContextProvider } from './ResourceContextProvider';\n\n/**\n * Wrap children with a ResourceContext provider only if the value is defined.\n *\n * Allows a component to work outside of a resource context.\n *\n * @example\n *\n * import { OptionalResourceContextProvider, EditButton } from 'react-admin';\n *\n * const Button = ({ resource }) => (\n *     <OptionalResourceContextProvider value={resource}>\n *         <EditButton />\n *     </OptionalResourceContextProvider>\n * );\n */\nexport const OptionalResourceContextProvider = ({\n    value,\n    children,\n}: {\n    value?: ResourceContextValue;\n    children: ReactElement;\n}) =>\n    value ? (\n        <ResourceContextProvider value={value}>\n            {children}\n        </ResourceContextProvider>\n    ) : (\n        children\n    );\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { ResourceContext, ResourceContextValue } from './ResourceContext';\n\n/**\n * Create a Resource Context with the resource name\n *\n * Some react-admin components rely on the resource name to be available in the context.\n * This component provides it.\n *\n * If the value is empty, the context is not provided.\n *\n * @param {string} value the resource name\n * @example\n *\n * import { ResourceContextProvider } from 'react-admin';\n *\n * const MyComponent = () => (\n *    <ResourceContextProvider value=\"posts\">\n *       <MyResourceSpecificComponent />\n *   </ResourceContextProvider>\n * );\n */\nexport const ResourceContextProvider = ({\n    children,\n    value,\n}: {\n    children: ReactNode;\n    value?: ResourceContextValue;\n}) =>\n    value ? (\n        <ResourceContext.Provider value={value}>\n            {children}\n        </ResourceContext.Provider>\n    ) : (\n        children\n    );\n", "import { createContext } from 'react';\n\n/**\n * Context to store the current resource name.\n *\n * Use the useResource() hook to read the context. That's what most components do in react-admin.\n *\n * @example\n *\n * import { useResourceContext, useTranslate } from 'ra-core';\n *\n * const MyCustomEditTitle = props => {\n *     const name = useResourceContext(props);\n *\n *     return (\n *         <h1>{translate(`${name}.name`)}</h1>\n *     );\n * };\n */\nexport const ResourceContext = createContext<ResourceContextValue>(undefined);\n\nexport type ResourceContextValue = string | undefined;\n", "import * as React from 'react';\nimport { ComponentType, ReactElement, isValidElement } from 'react';\nimport { Route, Routes } from 'react-router-dom';\nimport { isValidElementType } from 'react-is';\n\nimport { ResourceProps } from '../types';\nimport { ResourceContextProvider } from './ResourceContextProvider';\nimport { RestoreScrollPosition } from '../routing/RestoreScrollPosition';\n\nexport const Resource = (props: ResourceProps) => {\n    const { create, edit, list, name, show } = props;\n\n    return (\n        <ResourceContextProvider value={name}>\n            <Routes>\n                {create && (\n                    <Route path=\"create/*\" element={getElement(create)} />\n                )}\n                {show && <Route path=\":id/show/*\" element={getElement(show)} />}\n                {edit && <Route path=\":id/*\" element={getElement(edit)} />}\n                {list && (\n                    <Route\n                        path=\"/*\"\n                        element={\n                            <RestoreScrollPosition\n                                storeKey={`${name}.list.scrollPosition`}\n                            >\n                                {getElement(list)}\n                            </RestoreScrollPosition>\n                        }\n                    />\n                )}\n                {props.children}\n            </Routes>\n        </ResourceContextProvider>\n    );\n};\n\nconst getElement = (ElementOrComponent: ComponentType<any> | ReactElement) => {\n    if (isValidElement(ElementOrComponent)) {\n        return ElementOrComponent;\n    }\n\n    if (isValidElementType(ElementOrComponent)) {\n        const Element = ElementOrComponent as ComponentType<any>;\n        return <Element />;\n    }\n\n    return null;\n};\n\nResource.raName = 'Resource';\n\nResource.registerResource = ({\n    create,\n    edit,\n    icon,\n    list,\n    name,\n    options,\n    show,\n    recordRepresentation,\n    hasCreate,\n    hasEdit,\n    hasShow,\n}: ResourceProps) => ({\n    name,\n    options,\n    hasList: !!list,\n    hasCreate: !!create || !!hasCreate,\n    hasEdit: !!edit || !!hasEdit,\n    hasShow: !!show || !!hasShow,\n    icon,\n    recordRepresentation,\n});\n", "import { createContext, useContext } from 'react';\n\nexport type SourceContextValue = {\n    /*\n     * Returns the source for a field or input, modified according to the context.\n     */\n    getSource: (source: string) => string;\n    /*\n     * Returns the label for a field or input, modified according to the context. Returns a translation key.\n     */\n    getLabel: (source: string) => string;\n};\n\n/**\n * Context that provides a function that accept a source and return getters for the modified source and label.\n *\n * This allows some special inputs to prefix or suffix the source of their children.\n *\n * @example\n * const sourceContext = {\n *  getSource: source => `coordinates.${source}`,\n *  getLabel: source => `resources.posts.fields.${source}`,\n * }\n * const CoordinatesInput = () => {\n *   return (\n *     <SourceContextProvider value={sourceContext}>\n *       <TextInput source=\"lat\" />\n *       <TextInput source=\"lng\" />\n *     </SourceContextProvider>\n *   );\n * };\n */\nexport const SourceContext = createContext<SourceContextValue | undefined>(\n    undefined\n);\n\nconst defaultContextValue = {\n    getSource: (source: string) => source,\n    getLabel: (source: string) => source,\n};\nexport const SourceContextProvider = SourceContext.Provider;\n\nexport const useSourceContext = () => {\n    const context = useContext(SourceContext);\n    if (!context) {\n        return defaultContextValue;\n    }\n    return context;\n};\n\nexport const useOptionalSourceContext = () => useContext(SourceContext);\n", "import type { ResourceOptions } from '../types';\nimport type { ResourceDefinitions } from './ResourceDefinitionContext';\nimport { useResourceDefinitionContext } from './useResourceDefinitionContext';\n\n/**\n * Get the definition of the all resources\n *\n * @example\n *\n * const definitions = useResourceDefinitions();\n * console.log(definitions.posts);\n * // {\n * //   name: 'posts',\n * //   hasList: true,\n * //   hasEdit: true,\n * //   hasShow: true,\n * //   hasCreate: true,\n * //   options: {},\n * //   icon: PostIcon,\n * //   recordRepresentation: 'title',\n * // }\n */\nexport const useResourceDefinitions = <\n    OptionsType extends ResourceOptions = any,\n>(): ResourceDefinitions<OptionsType> =>\n    useResourceDefinitionContext().definitions;\n", "import { useResourceDefinitions } from './useResourceDefinitions';\nimport { useTranslate } from '../i18n';\nimport { humanize, pluralize, singularize } from 'inflection';\n\n/**\n * A hook which returns function to get a translated resource name. It will use the label option of the `Resource` component if it was provided.\n *\n * @returns {GetResourceLabel} A function which takes a resource name and an optional number indicating the number of items (used for pluralization) and returns a translated string.\n * @example\n * const Menu = () => {\n *     const resources = useResourceDefinitions();\n *     const getResourceLabel = useGetResourceLabel();\n *\n *     return (\n *         <ul>\n *             {Object.keys(resources).map(name => (\n *                 <li key={name}>\n *                     {getResourceLabel(name, 2)}\n *                 </li>\n *             ))}\n *         </ul>\n *     )\n * }\n */\nexport const useGetResourceLabel = (): GetResourceLabel => {\n    const translate = useTranslate();\n    const definitions = useResourceDefinitions();\n\n    return (resource: string, count = 2): string => {\n        const resourceDefinition = definitions[resource];\n\n        const label = translate(`resources.${resource}.name`, {\n            smart_count: count,\n            _:\n                resourceDefinition &&\n                resourceDefinition.options &&\n                resourceDefinition.options.label\n                    ? translate(resourceDefinition.options.label, {\n                          smart_count: count,\n                          _: resourceDefinition.options.label,\n                      })\n                    : humanize(\n                          count > 1\n                              ? pluralize(resource)\n                              : singularize(resource)\n                      ),\n        });\n\n        return label;\n    };\n};\n\nexport type GetResourceLabel = (resource: string, count?: number) => string;\n", "import { useContext } from 'react';\nimport { ResourceContext, ResourceContextValue } from './ResourceContext';\n\n/**\n * Hook to read the resource from the ResourceContext.\n *\n * Must be used within a <ResourceContextProvider> (e.g. as a descendent of <Resource>\n * or any reference related components), or called with a resource prop.\n *\n * @example\n *\n * const ResourceName = (props) => {\n *   const resource = useResourceContext(props);\n *   const getResourceLabel = useGetResourceLabel();\n *   return <>{getResourceLabel(resource, 1)}</>;\n * }\n *\n * // use it in a resource context\n * const MyComponent = () => (\n *   <ResourceContextProvider value=\"posts\">\n *     <ResourceName />\n *     ...\n *   </ResourceContextProvider>\n * );\n *\n * // override resource via props\n * const MyComponent = () => (\n *   <>\n *     <ResourceName resource=\"posts\"/>\n *     ...\n *   </>\n * );\n *\n * @returns {ResourceContextValue} The resource name, e.g. 'posts'\n */\nexport const useResourceContext = <\n    ResourceInformationsType extends Partial<{ resource: string }>,\n>(\n    props?: ResourceInformationsType\n): ResourceContextValue => {\n    const context = useContext(ResourceContext);\n    return (props && props.resource) || context;\n};\n", "import { useMemo } from 'react';\nimport defaults from 'lodash/defaults';\n\nimport { useResourceDefinitions } from './useResourceDefinitions';\nimport { useResourceContext } from './useResourceContext';\nimport { ResourceDefinition, ResourceOptions } from '../types';\n\n/**\n * Hook to get the definition of a given resource\n *\n * @example // Get the current resource definition (based on ResourceContext)\n *\n * const definition = useResourceDefinition();\n * console.log(definition);\n * // {\n * //   name: 'posts',\n * //   hasList: true,\n * //   hasEdit: true,\n * //   hasShow: true,\n * //   hasCreate: true,\n * //   options: {},\n * //   icon: PostIcon,\n * // }\n *\n * @example // Pass a resource prop to check a different resource definition\n *\n * const definition = useResourceDefinition({ resource: 'posts' });\n */\nexport const useResourceDefinition = <\n    OptionsType extends ResourceOptions = any,\n>(\n    props?: UseResourceDefinitionOptions\n): ResourceDefinition<OptionsType> => {\n    const resource = useResourceContext(props);\n    const resourceDefinitions = useResourceDefinitions();\n    const { hasCreate, hasEdit, hasList, hasShow, recordRepresentation } =\n        props || {};\n\n    const definition = useMemo(() => {\n        return defaults(\n            {},\n            {\n                hasCreate,\n                hasEdit,\n                hasList,\n                hasShow,\n                recordRepresentation,\n            },\n            resource ? resourceDefinitions[resource] : {}\n        ) as ResourceDefinition<OptionsType>;\n    }, [\n        resource,\n        resourceDefinitions,\n        hasCreate,\n        hasEdit,\n        hasList,\n        hasShow,\n        recordRepresentation,\n    ]);\n\n    return definition;\n};\n\nexport interface UseResourceDefinitionOptions {\n    readonly resource?: string;\n    readonly hasList?: boolean;\n    readonly hasEdit?: boolean;\n    readonly hasShow?: boolean;\n    readonly hasCreate?: boolean;\n    readonly recordRepresentation?:\n        | string\n        | React.ReactElement\n        | ((record: any) => string);\n}\n", "import * as React from 'react';\nimport { useCallback, ReactNode } from 'react';\nimport get from 'lodash/get';\n\nimport { useResourceDefinition } from './useResourceDefinition';\n\n/**\n * Get default string representation of a record\n *\n * @example // No customization\n * const getRecordRepresentation = useGetRecordRepresentation('posts');\n * getRecordRepresentation({ id: 1, title: 'Hello' }); // => \"#1\"\n *\n * @example // With <Resource name=\"posts\" recordRepresentation=\"title\" />\n * const getRecordRepresentation = useGetRecordRepresentation('posts');\n * getRecordRepresentation({ id: 1, title: 'Hello' }); // => \"Hello\"\n */\nexport const useGetRecordRepresentation = (\n    resource?: string\n): ((record: any) => ReactNode) => {\n    const { recordRepresentation } = useResourceDefinition({ resource });\n    return useCallback(\n        record => {\n            if (!record) return '';\n            if (typeof recordRepresentation === 'function') {\n                return recordRepresentation(record);\n            }\n            if (typeof recordRepresentation === 'string') {\n                return get(record, recordRepresentation);\n            }\n            if (React.isValidElement(recordRepresentation)) {\n                return recordRepresentation;\n            }\n            if (record?.name != null && record?.name !== '') {\n                return record.name;\n            }\n            if (record?.title != null && record?.title !== '') {\n                return record.title;\n            }\n            if (record?.label != null && record?.label !== '') {\n                return record.label;\n            }\n            if (record?.reference != null && record?.reference !== '') {\n                return record.reference;\n            }\n            return `#${record.id}`;\n        },\n        [recordRepresentation]\n    );\n};\n", "import { useSourceContext } from './SourceContext';\n\n/**\n * Get the source prop for a field or input by checking if a source context is available.\n * @param {string} source The original source prop\n * @returns {string} The source prop, either the original one or the one modified by the SourceContext.\n * @example\n * const MyInput = ({ source, ...props }) => {\n *   const finalSource = useWrappedSource(source);\n *   return <input name={finalSource} {...props} />;\n * };\n */\nexport const useWrappedSource = (source: string) => {\n    const sourceContext = useSourceContext();\n    return sourceContext.getSource(source);\n};\n", "export const DEFAULT_LOCALE = 'en';\n\nexport * from './substituteTokens';\nexport * from './TestTranslationProvider';\nexport * from './I18nContext';\nexport * from './I18nContextProvider';\nexport * from './TranslationMessages';\nexport * from './TranslatableContext';\nexport * from './TranslatableContextProvider';\nexport * from './TranslationUtils';\nexport * from './useLocaleState';\nexport * from './useLocale';\nexport * from './useLocales';\nexport * from './useSetLocale';\nexport * from './useTranslatable';\nexport * from './useTranslatableContext';\nexport * from './useTranslate';\nexport * from './useTranslateLabel';\nexport * from './useI18nProvider';\n", "import * as React from 'react';\nimport { useState } from 'react';\n\nconst styles = {\n    root: {\n        width: '100vw',\n        height: '100vh',\n        display: 'flex',\n        flexDirection: 'column' as 'column',\n        fontFamily: '\"Roboto\", sans-serif',\n    },\n    main: {\n        flex: 1,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        textAlign: 'center' as 'center',\n        flexDirection: 'column' as 'column',\n        background:\n            'linear-gradient(135deg, #00023b 0%, #00023b 50%, #313264 100%)',\n        color: 'white',\n        fontSize: '1.5em',\n        fontWeight: 'bold' as 'bold',\n    },\n    secondary: {\n        height: '20vh',\n        background: '#e8e8e8',\n        color: 'black',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-evenly',\n    },\n    link: {\n        textAlign: 'center' as 'center',\n        width: 150,\n        display: 'block',\n        textDecoration: 'none',\n        color: 'black',\n        opacity: 0.7,\n    },\n    linkHovered: {\n        opacity: 1,\n    },\n    image: {\n        width: 50,\n    },\n    logo: {\n        height: 100,\n    },\n};\n\nconst Button = ({ img, label, href }) => {\n    const [hovered, setHovered] = useState(false);\n    return (\n        <div>\n            <a\n                href={href}\n                style={\n                    hovered\n                        ? { ...styles.link, ...styles.linkHovered }\n                        : styles.link\n                }\n                onMouseEnter={() => setHovered(true)}\n                onMouseLeave={() => setHovered(false)}\n            >\n                <img src={img} alt={label} style={styles.image} />\n                <br />\n                {label}\n            </a>\n        </div>\n    );\n};\n\nexport default () =>\n    process.env.NODE_ENV === 'production' ? (\n        <span />\n    ) : (\n        <div style={styles.root}>\n            <div style={styles.main}>\n                <img\n                    style={styles.logo}\n                    src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhbHF1ZV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTMxIDEzMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTMxIDEzMTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiMyMjI0NTg7fQoJLnN0MXtmaWxsOiM1MTUzN0Q7fQoJLnN0MntmaWxsOiNBM0E0Qjk7fQoJLnN0M3tmaWxsOiMwMDAyM0I7fQoJLnN0NHtmaWxsOiNGRkZGRkY7fQoJLnN0NXtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30KPC9zdHlsZT4KPHRpdGxlPkxvZ29fc29tYnJlX2FpPC90aXRsZT4KPGcgaWQ9IlJlY3RhbmdsZV81NiI+Cgk8Zz4KCQk8cmVjdCB4PSIxOS4xIiB5PSIxOSIgdHJhbnNmb3JtPSJtYXRyaXgoMC41IC0wLjg2NiAwLjg2NiAwLjUgLTIzLjkyMjYgODkuNTQ2KSIgY2xhc3M9InN0MCIgd2lkdGg9IjkyLjkiIGhlaWdodD0iOTIuOSIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik04MywxMzAuM0wwLjgsODIuOUw0OC4yLDAuN2w4Mi4yLDQ3LjVMODMsMTMwLjN6IE0zLjUsODIuMWw3OC43LDQ1LjVsNDUuNS03OC43TDQ5LDMuNEwzLjUsODIuMXoiLz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjdGFuZ2xlXzU2LTIiPgoJPGc+CgkJPHJlY3QgeD0iMTkiIHk9IjE5LjEiIHRyYW5zZm9ybT0ibWF0cml4KDAuODY2IC0wLjUgMC41IDAuODY2IC0yMy45Nzc3IDQxLjUyNykiIGNsYXNzPSJzdDAiIHdpZHRoPSI5Mi45IiBoZWlnaHQ9IjkyLjkiLz4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNDcuOSwxMzFMMCw0OEw4My4xLDBsNDgsODMuMUw0Ny45LDEzMXogTTQuMSw0OS4xbDQ1LDc3LjlsNzcuOS00NUw4Miw0LjFMNC4xLDQ5LjF6Ii8+Cgk8L2c+CjwvZz4KPGcgaWQ9IlJlY3RhbmdsZV81Ni0zIj4KCTxnPgoJCTxyZWN0IHg9IjE5LjEiIHk9IjE5IiBjbGFzcz0ic3QzIiB3aWR0aD0iOTIuOSIgaGVpZ2h0PSI5Mi45Ii8+CgkJPHBhdGggY2xhc3M9InN0NCIgZD0iTTExNC41LDExNC41SDE2LjZWMTYuNWg5Ny45VjExNC41eiBNMjEuNiwxMDkuNWg4Ny45VjIxLjVIMjEuNlYxMDkuNXoiLz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmEiPgoJPGcgY2xhc3M9InN0NSI+CgkJPHBhdGggY2xhc3M9InN0NCIgZD0iTTU5LDg2LjdsLTYuNy0xOS4yaC0xLjJIMzguOXYxOS4yaC01LjZWMzguNWgxOC41YzMuNiwwLDYuMywwLjYsOC4xLDEuOGMxLjgsMS4yLDMsMi44LDMuNSw0LjgKCQkJYzAuNSwyLDAuOCw0LjYsMC44LDcuOGMwLDMuNS0wLjQsNi40LTEuMyw4LjdjLTAuOCwyLjMtMi42LDMuOS01LjMsNC44TDY1LDg2LjdINTl6IE01NS43LDYxLjZjMS4yLTAuNywyLTEuNywyLjQtMwoJCQljMC40LTEuMywwLjYtMy4yLDAuNi01LjZjMC0yLjUtMC4yLTQuMy0wLjUtNS42Yy0wLjMtMS4zLTEuMS0yLjItMi4zLTIuOWMtMS4yLTAuNy0zLTEtNS41LTFIMzguOXYxOS4xSDUwCgkJCUM1Mi41LDYyLjYsNTQuNCw2Mi4zLDU1LjcsNjEuNnoiLz4KCQk8cGF0aCBjbGFzcz0ic3Q0IiBkPSJNNzQuMyw4NWMtMS42LTEuNS0yLjUtNC4yLTIuNS04LjJjMC0yLjcsMC4zLTQuOCwwLjktNi4zYzAuNi0xLjUsMS42LTIuNiwzLTMuM2MxLjQtMC43LDMuNC0xLDYtMQoJCQljMS4zLDAsNS4xLDAuMSwxMS40LDAuM3YtMi40YzAtMi45LTAuMi01LTAuNy02LjJjLTAuNS0xLjItMS4zLTItMi42LTIuNGMtMS4yLTAuMy0zLjMtMC41LTYuMy0wLjVjLTEuMywwLTMsMC4xLTQuOSwwLjIKCQkJYy0yLDAuMS0zLjYsMC4zLTQuOCwwLjV2LTQuM2MzLjMtMC43LDcuMS0xLDExLjQtMWMzLjcsMCw2LjUsMC40LDguNCwxLjJjMS44LDAuOCwzLjEsMi4yLDMuOCw0LjFjMC43LDEuOSwxLDQuNywxLDguNHYyMi41aC00LjgKCQkJbC0wLjMtNWgtMC4zYy0wLjgsMi4yLTIuMiwzLjctNC4xLDQuNGMtMS45LDAuNy00LjEsMS4xLTYuNiwxLjFDNzguNiw4Ny4yLDc2LDg2LjUsNzQuMyw4NXogTTg5LjEsODJjMS4yLTAuNCwyLjItMS4yLDIuOC0yLjQKCQkJYzAuOS0xLjgsMS4zLTQuMywxLjMtNy4zdi0yaC0xMGMtMS43LDAtMywwLjItMy44LDAuNWMtMC44LDAuMy0xLjQsMC45LTEuNywxLjhjLTAuMywwLjktMC41LDIuMi0wLjUsNGMwLDEuOCwwLjIsMy4xLDAuNiwzLjkKCQkJYzAuNCwwLjgsMS4xLDEuNCwyLDEuOGMxLDAuMywyLjUsMC41LDQuNSwwLjVDODYuMiw4Mi42LDg3LjgsODIuNCw4OS4xLDgyeiIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=\"\n                    alt=\"react-admin logo\"\n                />\n                <h1>Welcome to React-admin</h1>\n                <div>\n                    Your application is properly configured.\n                    <br />\n                    Now you can add a &lt;Resource&gt; as child of\n                    &lt;Admin&gt;.\n                </div>\n            </div>\n            <div style={styles.secondary}>\n                <Button\n                    href=\"https://marmelab.com/react-admin/documentation.html\"\n                    img=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3giPgoJPHJlY3QgZmlsbD0ibm9uZSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ii8+CjwvZz4KPGcgaWQ9IkZsYXQiPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV8yIj4KCTwvZz4KCTxnPgoJCTxwYXRoIGQ9Ik0yMSw1Yy0xLjExLTAuMzUtMi4zMy0wLjUtMy41LTAuNWMtMS45NSwwLTQuMDUsMC40LTUuNSwxLjVjLTEuNDUtMS4xLTMuNTUtMS41LTUuNS0xLjVTMi40NSw0LjksMSw2djE0LjY1CgkJCWMwLDAuMjUsMC4yNSwwLjUsMC41LDAuNWMwLjEsMCwwLjE1LTAuMDUsMC4yNS0wLjA1QzMuMSwyMC40NSw1LjA1LDIwLDYuNSwyMGMxLjk1LDAsNC4wNSwwLjQsNS41LDEuNWMxLjM1LTAuODUsMy44LTEuNSw1LjUtMS41CgkJCWMxLjY1LDAsMy4zNSwwLjMsNC43NSwxLjA1YzAuMSwwLjA1LDAuMTUsMC4wNSwwLjI1LDAuMDVjMC4yNSwwLDAuNS0wLjI1LDAuNS0wLjVWNkMyMi40LDUuNTUsMjEuNzUsNS4yNSwyMSw1eiBNMywxOC41VjcKCQkJYzEuMS0wLjM1LDIuMy0wLjUsMy41LTAuNWMxLjM0LDAsMy4xMywwLjQxLDQuNSwwLjk5djExLjVDOS42MywxOC40MSw3Ljg0LDE4LDYuNSwxOEM1LjMsMTgsNC4xLDE4LjE1LDMsMTguNXogTTIxLDE4LjUKCQkJYy0xLjEtMC4zNS0yLjMtMC41LTMuNS0wLjVjLTEuMzQsMC0zLjEzLDAuNDEtNC41LDAuOTlWNy40OWMxLjM3LTAuNTksMy4xNi0wLjk5LDQuNS0wLjk5YzEuMiwwLDIuNCwwLjE1LDMuNSwwLjVWMTguNXoiLz4KCQk8cGF0aCBvcGFjaXR5PSIwLjMiIGQ9Ik0xMSw3LjQ5QzkuNjMsNi45MSw3Ljg0LDYuNSw2LjUsNi41QzUuMyw2LjUsNC4xLDYuNjUsMyw3djExLjVDNC4xLDE4LjE1LDUuMywxOCw2LjUsMTgKCQkJYzEuMzQsMCwzLjEzLDAuNDEsNC41LDAuOTlWNy40OXoiLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGQ9Ik0xNy41LDEwLjVjMC44OCwwLDEuNzMsMC4wOSwyLjUsMC4yNlY5LjI0QzE5LjIxLDkuMDksMTguMzYsOSwxNy41LDljLTEuMjgsMC0yLjQ2LDAuMTYtMy41LDAuNDd2MS41NwoJCQlDMTQuOTksMTAuNjksMTYuMTgsMTAuNSwxNy41LDEwLjV6Ii8+CgkJPHBhdGggZD0iTTE3LjUsMTMuMTZjMC44OCwwLDEuNzMsMC4wOSwyLjUsMC4yNlYxMS45Yy0wLjc5LTAuMTUtMS42NC0wLjI0LTIuNS0wLjI0Yy0xLjI4LDAtMi40NiwwLjE2LTMuNSwwLjQ3djEuNTcKCQkJQzE0Ljk5LDEzLjM2LDE2LjE4LDEzLjE2LDE3LjUsMTMuMTZ6Ii8+CgkJPHBhdGggZD0iTTE3LjUsMTUuODNjMC44OCwwLDEuNzMsMC4wOSwyLjUsMC4yNnYtMS41MmMtMC43OS0wLjE1LTEuNjQtMC4yNC0yLjUtMC4yNGMtMS4yOCwwLTIuNDYsMC4xNi0zLjUsMC40N3YxLjU3CgkJCUMxNC45OSwxNi4wMiwxNi4xOCwxNS44MywxNy41LDE1LjgzeiIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=\"\n                    label=\"Documentation\"\n                />\n                <Button\n                    href=\"https://github.com/marmelab/react-admin/tree/master/examples\"\n                    img=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDBWMHoiLz48cGF0aCBkPSJNOS40IDE2LjZMNC44IDEybDQuNi00LjZMOCA2bC02IDYgNiA2IDEuNC0xLjR6bTUuMiAwbDQuNi00LjYtNC42LTQuNkwxNiA2bDYgNi02IDYtMS40LTEuNHoiLz48L3N2Zz4=\"\n                    label=\"Examples\"\n                />\n                <Button\n                    href=\"https://stackoverflow.com/questions/tagged/react-admin\"\n                    img=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNHB4IgoJIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJCb3VuZGluZ19Cb3giPgoJPHJlY3QgZmlsbD0ibm9uZSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ii8+CjwvZz4KPGcgaWQ9IkZsYXQiPgoJPGcgaWQ9InVpX3g1Rl9zcGVjX3g1Rl9oZWFkZXJfY29weV8yIj4KCTwvZz4KCTxnPgoJCTxjaXJjbGUgb3BhY2l0eT0iMC4zIiBjeD0iOSIgY3k9IjgiIHI9IjIiLz4KCQk8cGF0aCBvcGFjaXR5PSIwLjMiIGQ9Ik05LDE1Yy0yLjcsMC01LjgsMS4yOS02LDIuMDFMMywxOGgxMnYtMUMxNC44LDE2LjI5LDExLjcsMTUsOSwxNXoiLz4KCQk8cGF0aCBkPSJNMTYuNjcsMTMuMTNDMTguMDQsMTQuMDYsMTksMTUuMzIsMTksMTd2M2g0di0zQzIzLDE0LjgyLDE5LjQzLDEzLjUzLDE2LjY3LDEzLjEzeiIvPgoJCTxwYXRoIGQ9Ik0xNSwxMmMyLjIxLDAsNC0xLjc5LDQtNGMwLTIuMjEtMS43OS00LTQtNGMtMC40NywwLTAuOTEsMC4xLTEuMzMsMC4yNEMxNC41LDUuMjcsMTUsNi41OCwxNSw4cy0wLjUsMi43My0xLjMzLDMuNzYKCQkJQzE0LjA5LDExLjksMTQuNTMsMTIsMTUsMTJ6Ii8+CgkJPHBhdGggZD0iTTksMTJjMi4yMSwwLDQtMS43OSw0LTRjMC0yLjIxLTEuNzktNC00LTRTNSw1Ljc5LDUsOEM1LDEwLjIxLDYuNzksMTIsOSwxMnogTTksNmMxLjEsMCwyLDAuOSwyLDJjMCwxLjEtMC45LDItMiwyCgkJCVM3LDkuMSw3LDhDNyw2LjksNy45LDYsOSw2eiIvPgoJCTxwYXRoIGQ9Ik05LDEzYy0yLjY3LDAtOCwxLjM0LTgsNHYzaDE2di0zQzE3LDE0LjM0LDExLjY3LDEzLDksMTN6IE0xNSwxOEgzbDAtMC45OUMzLjIsMTYuMjksNi4zLDE1LDksMTVzNS44LDEuMjksNiwyVjE4eiIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=\"\n                    label=\"Community\"\n                />\n            </div>\n        </div>\n    );\n", "export default (condition: any, message: string) => {\n    if (condition && process.env.NODE_ENV !== 'production') {\n        console.warn(message); // eslint-disable-line\n    }\n};\n", "import { useRef, useEffect } from 'react';\n\n/**\n * Debug hook showing which props updated between two renders\n * @example\n *\n * const MyComponent = React.memo(props => {\n *   useWhyDidYouUpdate('MyComponent', props);\n *   return <div...;\n * });\n *\n * @link https://usehooks.com/useWhyDidYouUpdate/\n */\nexport default function useWhyDidYouUpdate(name, props) {\n    // Get a mutable ref object where we can store props ...\n    // ... for comparison next time this hook runs.\n    const previousProps = useRef() as any;\n\n    useEffect(() => {\n        if (previousProps.current) {\n            // Get all keys from previous and current props\n            const allKeys = Object.keys({ ...previousProps.current, ...props });\n            // Use this object to keep track of changed props\n            const changesObj = {};\n            // Iterate through keys\n            allKeys.forEach(key => {\n                // If previous is different from current\n                if (previousProps.current[key] !== props[key]) {\n                    // Add to changesObj\n                    changesObj[key] = {\n                        from: previousProps.current[key],\n                        to: props[key],\n                    };\n                }\n            });\n\n            // If changesObj not empty then output to console\n            if (Object.keys(changesObj).length) {\n                console.log('[why-did-you-update]', name, changesObj);\n            }\n        }\n\n        // Finally update previousProps with current props for next hook call\n        previousProps.current = props;\n    });\n}\n", "export const getMutationMode = (mutationMode, undoable) => {\n    if (mutationMode) {\n        return mutationMode;\n    }\n    switch (undoable) {\n        case true:\n            return 'undoable';\n        case false:\n            return 'pessimistic';\n        default:\n            return 'undoable';\n    }\n};\n", "import { transform } from 'inflection';\n\ninterface Args {\n    label?: string;\n    defaultLabel?: string;\n    resource?: string;\n    resourceFromContext?: string;\n    source?: string;\n}\n\ntype TranslationArguments = [string, any?];\n\n/**\n * Returns an array of arguments to use with the translate function for the label of a field.\n * The label will be computed from the resource and source props.\n *\n * Usage:\n *  <span>\n *      {translate(...getFieldLabelTranslationArgs({ label, resource, source }))}\n *  </span>\n *\n * @see useTranslateLabel for a ready-to-use hook\n */\nexport const getFieldLabelTranslationArgs = (\n    options?: Args\n): TranslationArguments => {\n    if (!options) return [''];\n    const { label, defaultLabel, resource, resourceFromContext, source } =\n        options;\n\n    if (typeof label !== 'undefined') return [label, { _: label }];\n\n    if (typeof source === 'undefined') return [''];\n\n    const { sourceWithoutDigits, sourceSuffix } = getSourceParts(source);\n\n    const defaultLabelTranslation = transform(\n        sourceSuffix.replace(/\\./g, ' '),\n        ['underscore', 'humanize']\n    );\n\n    if (resource) {\n        return [\n            getResourceFieldLabelKey(resource, sourceWithoutDigits),\n            { _: defaultLabelTranslation },\n        ];\n    }\n\n    if (defaultLabel) {\n        return [defaultLabel, { _: defaultLabelTranslation }];\n    }\n\n    return [\n        getResourceFieldLabelKey(\n            resourceFromContext || 'undefined',\n            sourceWithoutDigits\n        ),\n        { _: defaultLabelTranslation },\n    ];\n};\n\nexport default getFieldLabelTranslationArgs;\n\nexport const getResourceFieldLabelKey = (resource: string, source: string) =>\n    `resources.${resource}.fields.${source}`;\n\n/**\n * Uses the source string to guess a translation message and a default label.\n *\n * @example\n * getSourceParts('pictures') // { sourceWithoutDigits: 'pictures', sourceSuffix: 'pictures' }\n * getSourceParts('pictures.url') // { sourceWithoutDigits: 'pictures.url', sourceSuffix: 'pictures.url' }\n * getSourceParts('pictures.0.url') // { sourceWithoutDigits: 'pictures.url', sourceSuffix: 'url' }\n * getSourceParts('pictures.12.urls.5.protocol') // { sourceWithoutDigits: 'pictures.urls.protocol', sourceSuffix: 'protocol' }\n */\nconst getSourceParts = (source: string) => {\n    // remove digits, e.g. 'book.authors.2.categories.3.identifier.name' => 'book.authors.categories.identifier.name'\n    const sourceWithoutDigits = source.replace(/\\.\\d+\\./g, '.');\n    // get final part, e.g. 'book.authors.2.categories.3.identifier.name' => 'identifier.name'\n    // we're not using a regexp here to avoid code scanning alert \"Polynomial regular expression used on uncontrolled data\"\n    const parts = source.split('.');\n    let lastPartWithDigits;\n    parts.forEach((part, index) => {\n        if (onlyDigits(part)) {\n            lastPartWithDigits = index;\n        }\n    });\n    const sourceSuffix =\n        lastPartWithDigits != null\n            ? parts.slice(lastPartWithDigits + 1).join('.')\n            : source;\n\n    return { sourceWithoutDigits, sourceSuffix };\n};\n\n// 48 and 57 are the char codes for \"0\" and \"9\", respectively\nconst onlyDigits = s => {\n    for (let i = s.length - 1; i >= 0; i--) {\n        const d = s.charCodeAt(i);\n        if (d < 48 || d > 57) return false;\n    }\n    return true;\n};\n", "import { LegacyRef, MutableRefObject, RefCallback } from 'react';\n\n// https://github.com/gregberge/react-merge-refs\nexport function mergeRefs<T = any>(\n    refs: Array<MutableRefObject<T> | LegacyRef<T>>\n): RefCallback<T> {\n    return value => {\n        refs.forEach(ref => {\n            if (typeof ref === 'function') {\n                ref(value);\n            } else if (ref != null) {\n                (ref as MutableRefObject<T | null>).current = value;\n            }\n        });\n    };\n}\n", "import * as React from 'react';\nimport { useCallback } from 'react';\n\n// allow the hook to work in SSR\nconst useLayoutEffect =\n    typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n\n/**\n * Alternative to useCallback that doesn't update the callback when dependencies change\n *\n * @see https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback\n * @see https://github.com/facebook/react/issues/14099#issuecomment-440013892\n */\nexport const useEvent = <Args extends unknown[], Return>(\n    fn: (...args: Args) => Return\n): ((...args: Args) => Return) => {\n    const ref = React.useRef<(...args: Args) => Return>(() => {\n        throw new Error('Cannot call an event handler while rendering.');\n    });\n\n    useLayoutEffect(() => {\n        ref.current = fn;\n    });\n\n    return useCallback((...args: Args) => ref.current(...args), []);\n};\n", "import get from 'lodash/get';\nimport { Call, Objects } from 'hotscript';\nimport { useRecordContext } from '../controller';\n\n/**\n * A hook that gets the value of a field of the current record.\n * @param params The hook parameters\n * @param params.source The field source\n * @param params.record The record to use. Uses the record from the RecordContext if not provided\n * @param params.defaultValue The value to return when the field value is empty\n * @returns The field value\n *\n * @example\n * const MyField = (props: { source: string }) => {\n *   const value = useFieldValue(props);\n *   return <span>{value}</span>;\n * }\n */\nexport const useFieldValue = <\n    RecordType extends Record<string, any> = Record<string, any>,\n>(\n    params: UseFieldValueOptions<RecordType>\n) => {\n    const { defaultValue, source } = params;\n    // We use the record from the RecordContext and do not rely on the SourceContext on purpose to\n    // avoid having the wrong source targeting the record.\n    // Indeed, some components may create a sub record context (SimpleFormIterator, TranslatableInputs, etc.). In this case,\n    // it they used the SourceContext as well, they would have the wrong source.\n    // Inputs needs the SourceContext as they rely on the Form value and you can't have nested forms.\n    // Fields needs the RecordContext as they rely on the Record value and you can have nested RecordContext.\n    const record = useRecordContext<RecordType>(params);\n\n    return get(record, source, defaultValue);\n};\n\nexport interface UseFieldValueOptions<\n    RecordType extends Record<string, any> = Record<string, any>,\n> {\n    // FIXME: Find a way to throw a type error when defaultValue is not of RecordType[Source] type\n    defaultValue?: any;\n    source: Call<Objects.AllPaths, RecordType> extends never\n        ? AnyString\n        : Call<Objects.AllPaths, RecordType>;\n    record?: RecordType;\n}\n\ntype AnyString = string & {};\n", "import debounce from 'lodash/debounce';\n\n/**\n * A version of lodash/debounce that always returns a promise but wait for the debounced function to return to resolve it.\n * @param func The function to debounce\n * @param wait The debounce delay\n * @returns A debounced function that returns a promise\n */\nexport function asyncDebounce<\n    FunctionType extends (...args: any[]) => Promise<any>,\n>(func: FunctionType, wait?: number) {\n    const resolveSet = new Set<(p: any) => void>();\n    const rejectSet = new Set<(p: any) => void>();\n\n    const debounced = debounce((args: Parameters<FunctionType>) => {\n        func(...args)\n            .then((...res) => {\n                resolveSet.forEach(resolve => resolve(...res));\n            })\n            .catch((...res) => {\n                rejectSet.forEach(reject => reject(...res));\n            })\n            .finally(() => {\n                resolveSet.clear();\n                rejectSet.clear();\n            });\n    }, wait);\n\n    return (...args: Parameters<FunctionType>): ReturnType<FunctionType> =>\n        new Promise((resolve, reject) => {\n            resolveSet.add(resolve);\n            rejectSet.add(reject);\n            debounced(args);\n        }) as ReturnType<FunctionType>;\n}\n", "import { useEffect, useRef } from 'react';\nimport { useEvent } from './useEvent';\n\n/**\n * Checks if the application code has changed and calls the provided onNewVersionAvailable function when needed.\n *\n * It checks for code update by downloading the provided URL (default to the HTML page) and\n * comparing the hash of the response with the hash of the current page.\n *\n * @param {UseCheckForApplicationUpdateOptions} options The options\n * @param {Function} options.onNewVersionAvailable The function to call when a new version of the application is available.\n * @param {string} options.url Optional. The URL to download to check for code update. Defaults to the current URL.\n * @param {RequestInit} options.fetchOptions Optional. The options passed to fetch function when checking for update.\n * @param {number} options.interval Optional. The interval in milliseconds between two checks. Defaults to 3600000 (1 hour).\n * @param {boolean} options.disabled Optional. Whether the check should be disabled. Defaults to false.\n */\nexport const useCheckForApplicationUpdate = (\n    options: UseCheckForApplicationUpdateOptions\n) => {\n    const {\n        url = window.location.href,\n        fetchOptions,\n        interval: delay = ONE_HOUR,\n        onNewVersionAvailable: onNewVersionAvailableProp,\n        disabled = process.env.NODE_ENV !== 'production',\n    } = options;\n    const currentHash = useRef<number>();\n    const onNewVersionAvailable = useEvent(onNewVersionAvailableProp);\n\n    useEffect(() => {\n        if (disabled) return;\n\n        getHashForUrl(url, fetchOptions).then(hash => {\n            if (hash != null) {\n                currentHash.current = hash;\n            }\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [disabled, url, JSON.stringify(fetchOptions)]);\n\n    useEffect(() => {\n        if (disabled) return;\n\n        const interval = setInterval(() => {\n            getHashForUrl(url, fetchOptions)\n                .then(hash => {\n                    if (hash != null && currentHash.current !== hash) {\n                        // Store the latest hash to avoid calling the onNewVersionAvailable function multiple times\n                        // or when users have closed the notification\n                        currentHash.current = hash;\n                        onNewVersionAvailable();\n                    }\n                })\n                .catch(() => {\n                    // Ignore errors to avoid issues when connectivity is lost\n                });\n        }, delay);\n        return () => clearInterval(interval);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        delay,\n        onNewVersionAvailable,\n        disabled,\n        url,\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        JSON.stringify(fetchOptions),\n    ]);\n};\n\nconst getHashForUrl = async (url: string, fetchOptions?: RequestInit) => {\n    try {\n        const response = await fetch(url, fetchOptions);\n        if (!response.ok) return null;\n        const text = await response.text();\n        return hash(text);\n    } catch (e) {\n        return null;\n    }\n};\n\n// Simple hash function, taken from https://stackoverflow.com/a/52171480/3723993, suggested by Copilot\nconst hash = (value: string, seed = 0) => {\n    let h1 = 0xdeadbeef ^ seed,\n        h2 = 0x41c6ce57 ^ seed;\n    for (let i = 0, ch; i < value.length; i++) {\n        ch = value.charCodeAt(i);\n        h1 = Math.imul(h1 ^ ch, 2654435761);\n        h2 = Math.imul(h2 ^ ch, 1597334677);\n    }\n    h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507);\n    h1 ^= Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n    h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507);\n    h2 ^= Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n\n    return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n};\n\nconst ONE_HOUR = 1000 * 60 * 60;\n\nexport interface UseCheckForApplicationUpdateOptions {\n    onNewVersionAvailable: () => void;\n    interval?: number;\n    url?: string;\n    fetchOptions?: RequestInit;\n    disabled?: boolean;\n}\n", "import { useCallback } from 'react';\n\nimport { useStoreContext } from './useStoreContext';\n\n/**\n * Get a callback to remove an item from the store\n *\n * @example\n * import { useRemoveFromStore } from 'react-admin';\n *\n * const ResetDatagridPrefs = () {\n *    const removeItem = useRemoveFromStore();\n *\n *    const handleClick = () => {\n *        removeItem('datagrid.prefs');\n *    };\n *\n *    return <Button onClick={hancleClick}>Reset datagrid preferences</Button>;\n * }\n */\nexport const useRemoveFromStore = (hookTimeKey?: string) => {\n    const { removeItem } = useStoreContext();\n    return useCallback(\n        (key?: string) => {\n            if (\n                typeof key === 'undefined' &&\n                typeof hookTimeKey === 'undefined'\n            ) {\n                throw new Error(\n                    'You must provide a key to remove an item from the store'\n                );\n            }\n            // @ts-ignore\n            return removeItem(key ?? hookTimeKey);\n        },\n        [removeItem, hookTimeKey]\n    );\n};\n", "import { useCallback } from 'react';\n\nimport { useStoreContext } from './useStoreContext';\n\n/**\n * Get a callback to remove all item with a certain key prefix from the store\n *\n * @example\n * import { useRemoveItemsFromStore } from 'react-admin';\n *\n * const ResetDatagridPrefs = () {\n *    const removeItems = useRemoveItemsFromStore();\n *\n *    const handleClick = () => {\n *        removeItems('datagrid.prefs');\n *    };\n *\n *    return <Button onClick={hancleClick}>Reset datagrid preferences</Button>;\n * }\n */\nexport const useRemoveItemsFromStore = (hookTimeKeyPrefix?: string | null) => {\n    const { removeItems } = useStoreContext();\n    return useCallback(\n        (keyPrefix?: string) => {\n            if (\n                typeof keyPrefix === 'undefined' &&\n                typeof hookTimeKeyPrefix === 'undefined'\n            ) {\n                throw new Error(\n                    'You must provide a key to remove an item from the store'\n                );\n            }\n            // @ts-ignore\n            return removeItems(keyPrefix ?? hookTimeKeyPrefix);\n        },\n        [removeItems, hookTimeKeyPrefix]\n    );\n};\n", "import { useStoreContext } from './useStoreContext';\n\n/**\n * Get a callback to remove all items from the store\n *\n * @example\n * import { useResetStore } from 'react-admin';\n *\n * const ResetPrefs = () {\n *    const reset = useResetStore();\n *\n *    const handleClick = () => {\n *        reset();\n *    };\n *\n *    return <Button onClick={handleClick}>Reset preferences</Button>;\n * }\n */\nexport const useResetStore = () => {\n    const { reset } = useStoreContext();\n    return reset;\n};\n", "import { useEffect, useMemo } from 'react';\nimport {\n    QueryObserverResult,\n    useQuery,\n    UseQueryOptions,\n} from '@tanstack/react-query';\nimport useAuthProvider from './useAuthProvider';\nimport useLogoutIfAccessDenied from './useLogoutIfAccessDenied';\nimport { useEvent } from '../util';\n\nconst emptyParams = {};\n\n/**\n * Hook for getting user permissions\n *\n * Calls the authProvider.getPermissions() method using react-query.\n * If the authProvider returns a rejected promise, returns empty permissions.\n *\n * The return value updates according to the request state:\n *\n * - start: { isPending: true }\n * - success: { permissions: [any], isPending: false }\n * - error: { error: [error from provider], isPending: false }\n *\n * Useful to enable features based on user permissions\n *\n * @param {Object} params Any params you want to pass to the authProvider\n *\n * @returns The current auth check state. Destructure as { permissions, error, isPending, refetch }.\n *\n * @example\n *     import { usePermissions } from 'react-admin';\n *\n *     const PostDetail = () => {\n *         const { isPending, permissions } = usePermissions();\n *         if (!isPending && permissions == 'editor') {\n *             return <PostEdit />\n *         } else {\n *             return <PostShow />\n *         }\n *     };\n */\nconst usePermissions = <PermissionsType = any, ErrorType = Error>(\n    params = emptyParams,\n    queryParams: UsePermissionsOptions<PermissionsType, ErrorType> = {\n        staleTime: 5 * 60 * 1000,\n    }\n): UsePermissionsResult<PermissionsType, ErrorType> => {\n    const authProvider = useAuthProvider();\n    const logoutIfAccessDenied = useLogoutIfAccessDenied();\n    const { onSuccess, onError, onSettled, ...queryOptions } =\n        queryParams ?? {};\n\n    const result = useQuery<PermissionsType, ErrorType>({\n        queryKey: ['auth', 'getPermissions', params],\n        queryFn: async ({ signal }) => {\n            if (!authProvider) return Promise.resolve([]);\n            const permissions = await authProvider.getPermissions({\n                ...params,\n                signal,\n            });\n            return permissions ?? null;\n        },\n        ...queryOptions,\n    });\n\n    const onSuccessEvent = useEvent(onSuccess ?? noop);\n    const onSettledEvent = useEvent(onSettled ?? noop);\n    const onErrorEvent = useEvent(\n        onError ??\n            ((error: ErrorType) => {\n                if (process.env.NODE_ENV === 'development') {\n                    console.error(error);\n                }\n                logoutIfAccessDenied(error);\n            })\n    );\n\n    useEffect(() => {\n        if (result.data === undefined || result.isFetching) return;\n        onSuccessEvent(result.data);\n    }, [onSuccessEvent, result.data, result.isFetching]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return useMemo(\n        () => ({\n            ...result,\n            permissions: result.data,\n        }),\n        [result]\n    );\n};\n\nexport default usePermissions;\n\nexport interface UsePermissionsOptions<PermissionsType = any, ErrorType = Error>\n    extends Omit<\n        UseQueryOptions<PermissionsType, ErrorType>,\n        'queryKey' | 'queryFn'\n    > {\n    onSuccess?: (data: PermissionsType) => void;\n    onError?: (err: ErrorType) => void;\n    onSettled?: (data?: PermissionsType, error?: ErrorType | null) => void;\n}\n\nexport type UsePermissionsResult<\n    PermissionsType = any,\n    ErrorType = Error,\n> = QueryObserverResult<PermissionsType, ErrorType> & {\n    permissions: PermissionsType | undefined;\n};\n\nconst noop = () => {};\n", "import { Children, ReactElement, ComponentType, createElement } from 'react';\nimport { Location } from 'react-router-dom';\n\nimport warning from '../util/warning';\nimport { useAuthenticated } from './useAuthenticated';\nimport usePermissions from './usePermissions';\n\nexport interface WithPermissionsChildrenParams {\n    permissions: any;\n}\n\ntype WithPermissionsChildren = (\n    params: WithPermissionsChildrenParams\n) => ReactElement;\n\nexport interface WithPermissionsProps {\n    authParams?: object;\n    children?: WithPermissionsChildren;\n    component?: ComponentType<any>;\n    location?: Location;\n    render?: WithPermissionsChildren;\n    staticContext?: object;\n    [key: string]: any;\n}\n\nconst isEmptyChildren = children => Children.count(children) === 0;\n\n/**\n * After checking that the user is authenticated,\n * retrieves the user's permissions for a specific context.\n *\n * Useful for Route components ; used internally by Resource.\n * Use it to decorate your custom page components to require\n * a custom role. It will pass the permissions as a prop to your\n * component.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @example\n *     import { Admin, CustomRoutes, WithPermissions } from 'react-admin';\n *\n *     const Foo = ({ permissions }) => (\n *         {permissions === 'admin' ? <p>Sensitive data</p> : null}\n *         <p>Not sensitive data</p>\n *     );\n *\n *     const customRoutes = [\n *         <Route path=\"/foo\" element={\n *             <WithPermissions\n *                  authParams={{ foo: 'bar' }}\n *                  component={({ permissions, ...props }) => <Foo permissions={permissions} {...props} />}\n *              />\n *         } />\n *     ];\n *     const App = () => (\n *         <Admin>\n *             <CustomRoutes>{customRoutes}</CustomRoutes>\n *         </Admin>\n *     );\n */\nconst WithPermissions = (props: WithPermissionsProps) => {\n    const { authParams, children, render, component, staticContext, ...rest } =\n        props;\n    warning(\n        (render && children && !isEmptyChildren(children)) ||\n            (render && component) ||\n            (component && children && !isEmptyChildren(children)),\n        'You should only use one of the `component`, `render` and `children` props in <WithPermissions>'\n    );\n\n    useAuthenticated(authParams);\n    const { permissions } = usePermissions(authParams);\n    // render even though the usePermissions() call isn't finished (optimistic rendering)\n    if (component) {\n        return createElement(component, { permissions, ...rest });\n    }\n    // @deprecated\n    if (render) {\n        return render({ permissions, ...rest });\n    }\n    // @deprecated\n    if (children) {\n        return children({ permissions, ...rest });\n    }\n};\n\nexport default WithPermissions as ComponentType<WithPermissionsProps>;\n", "import { UseQueryOptions } from '@tanstack/react-query';\nimport useAuthState from './useAuthState';\n\n/**\n * Restrict access to authenticated users.\n * Redirect anonymous users to the login page.\n *\n * Use it in your custom page components to require\n * authentication.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @example\n *     import { Admin, CustomRoutes, useAuthenticated } from 'react-admin';\n *     const FooPage = () => {\n *         useAuthenticated();\n *         return <Foo />;\n *     }\n *     const customRoutes = [\n *         <Route path=\"/foo\" element={<FooPage />} />\n *     ];\n *     const App = () => (\n *         <Admin>\n *             <CustomRoutes>{customRoutes}</CustomRoutes>\n *         </Admin>\n *     );\n */\nexport const useAuthenticated = <ParamsType = any>({\n    params,\n    ...options\n}: UseAuthenticatedOptions<ParamsType> = {}) => {\n    useAuthState(params ?? emptyParams, true, options);\n};\n\nexport type UseAuthenticatedOptions<ParamsType> = Omit<\n    UseQueryOptions<boolean, any> & {\n        params?: ParamsType;\n    },\n    'queryKey' | 'queryFn'\n>;\n\nconst emptyParams = {};\n", "import { useCallback } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nimport { useNotificationContext } from '../notification';\nimport { useBasename } from '../routing';\nimport useAuthProvider, { defaultAuthParams } from './useAuthProvider';\nimport { removeDoubleSlashes } from '../routing/useCreatePath';\n\n/**\n * Get a callback for calling the authProvider.login() method\n * and redirect to the previous authenticated page (or the home page) on success.\n *\n * @see useAuthProvider\n *\n * @returns {Function} login callback\n *\n * @example\n *\n * import { useLogin } from 'react-admin';\n *\n * const LoginButton = () => {\n *     const [loading, setLoading] = useState(false);\n *     const login = useLogin();\n *     const handleClick = {\n *         setLoading(true);\n *         login({ username: 'john', password: 'p@ssw0rd' }, '/posts')\n *             .then(() => setLoading(false));\n *     }\n *     return <button onClick={handleClick}>Login</button>;\n * }\n */\nconst useLogin = (): Login => {\n    const authProvider = useAuthProvider();\n    const location = useLocation();\n    const locationState = location.state as any;\n    const navigate = useNavigate();\n    const basename = useBasename();\n    const { resetNotifications } = useNotificationContext();\n    const nextPathName = locationState && locationState.nextPathname;\n    const nextSearch = locationState && locationState.nextSearch;\n    const afterLoginUrl = removeDoubleSlashes(\n        `${basename}/${defaultAuthParams.afterLoginUrl}`\n    );\n\n    const login = useCallback(\n        (params: any = {}, pathName) => {\n            if (authProvider) {\n                return authProvider.login(params).then(ret => {\n                    resetNotifications();\n                    if (ret && ret.hasOwnProperty('redirectTo')) {\n                        if (ret) {\n                            navigate(ret.redirectTo);\n                        }\n                    } else {\n                        const redirectUrl = pathName\n                            ? pathName\n                            : nextPathName + nextSearch || afterLoginUrl;\n                        navigate(redirectUrl);\n                    }\n                    return ret;\n                });\n            } else {\n                resetNotifications();\n                navigate(afterLoginUrl);\n                return Promise.resolve();\n            }\n        },\n        [\n            authProvider,\n            navigate,\n            nextPathName,\n            nextSearch,\n            resetNotifications,\n            afterLoginUrl,\n        ]\n    );\n\n    return login;\n};\n\n/**\n * Log a user in by calling the authProvider.login() method\n *\n * @param {Object} params Login parameters to pass to the authProvider. May contain username/email, password, etc\n * @param {string} pathName The path to redirect to after login. By default, redirects to the home page, or to the last page visited after disconnection.\n *\n * @return {Promise} The authProvider response\n */\ntype Login = (params: any, pathName?: string) => Promise<any>;\n\nexport default useLogin;\n", "import { useCallback } from 'react';\n\nimport useAuthProvider from './useAuthProvider';\n\nconst getPermissionsWithoutProvider = () => Promise.resolve([]);\n\n/**\n * Get a callback for calling the authProvider.getPermissions() method.\n *\n * @see useAuthProvider\n *\n * @returns {Function} getPermissions callback\n *\n * This is a low level hook. See those more specialized hooks\n * offering state handling.\n *\n * @see usePermissions\n *\n * @example\n *\n * import { useGetPermissions } from 'react-admin';\n *\n * const Roles = () => {\n *     const [permissions, setPermissions] = useState([]);\n *     const getPermissions = useGetPermissions();\n *     useEffect(() => {\n *         getPermissions().then(permissions => setPermissions(permissions))\n *     }, [])\n *     return (\n *         <ul>\n *             {permissions.map((permission, key) => (\n *                 <li key={key}>{permission}</li>\n *             ))}\n *         </ul>\n *     );\n * }\n */\nconst useGetPermissions = (): GetPermissions => {\n    const authProvider = useAuthProvider();\n    const getPermissions = useCallback(\n        (params: any = {}) =>\n            // react-query requires the query to return something\n            authProvider\n                ? authProvider\n                      .getPermissions(params)\n                      .then(result => result ?? null)\n                : getPermissionsWithoutProvider(),\n        [authProvider]\n    );\n\n    return getPermissions;\n};\n\n/**\n * Proxy for calling authProvider.getPermissions()\n *\n * @param {Object} params The parameters to pass to the authProvider\n *\n * @return {Promise} The authProvider response\n */\ntype GetPermissions = (params?: any) => Promise<any>;\n\nexport default useGetPermissions;\n", "export type UserCheck = (\n    payload: object,\n    pathName: string,\n    routeParams?: object\n) => void;\n\nexport const AUTH_LOGIN = 'AUTH_LOGIN';\nexport const AUTH_CHECK = 'AUTH_CHECK';\nexport const AUTH_ERROR = 'AUTH_ERROR';\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\nexport const AUTH_GET_PERMISSIONS = 'AUTH_GET_PERMISSIONS';\n\nexport type AuthActionType =\n    | typeof AUTH_LOGIN\n    | typeof AUTH_LOGOUT\n    | typeof AUTH_ERROR\n    | typeof AUTH_CHECK\n    | typeof AUTH_GET_PERMISSIONS;\n", "import {\n    AUTH_LOGIN,\n    AUTH_LOGOUT,\n    AUTH_CHECK,\n    AUTH_ERROR,\n    AUTH_GET_PERMISSIONS,\n} from './types';\nimport { AuthProvider, LegacyAuthProvider } from '../types';\n\n/**\n * Turn a function-based authProvider to an object-based one\n *\n * Allows using legacy authProviders transparently.\n *\n * @param {Function} legacyAuthProvider A legacy authProvider (type, params) => Promise<any>\n *\n * @returns {Object} An authProvider that react-admin can use\n */\nexport default (legacyAuthProvider: LegacyAuthProvider): AuthProvider => {\n    const authProvider = (...args) => legacyAuthProvider.apply(null, args);\n    authProvider.login = params => legacyAuthProvider(AUTH_LOGIN, params);\n    authProvider.logout = params => legacyAuthProvider(AUTH_LOGOUT, params);\n    authProvider.checkAuth = params => legacyAuthProvider(AUTH_CHECK, params);\n    authProvider.checkError = error => legacyAuthProvider(AUTH_ERROR, error);\n    authProvider.getPermissions = params =>\n        legacyAuthProvider(AUTH_GET_PERMISSIONS, params);\n    return authProvider;\n};\n", "import * as React from 'react';\nimport { ReactNode } from 'react';\n\nimport useAuthState from './useAuthState';\n\n/**\n * Restrict access to children to authenticated users.\n * Redirects anonymous users to the login page.\n *\n * Use it to decorate your custom page components to require\n * authentication.\n *\n * By default this component is optimistic: it does not block\n * rendering children when checking authentication, but this mode\n * can be turned off by setting `requireAuth` to true.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @see useAuthState\n *\n * @example\n *     import { Admin, CustomRoutes, Authenticated } from 'react-admin';\n *\n *     const customRoutes = [\n *         <Route\n *             path=\"/foo\"\n *             element={\n *                 <Authenticated authParams={{ foo: 'bar' }}>\n *                     <Foo />\n *                 </Authenticated>\n *             }\n *         />\n *     ];\n *     const App = () => (\n *         <Admin>\n *             <CustomRoutes>{customRoutes}</CustomRoutes>\n *         </Admin>\n *     );\n */\nexport const Authenticated = (props: AuthenticatedProps) => {\n    const { authParams, children, requireAuth = false } = props;\n\n    // this hook will log out if the authProvider doesn't validate that the user is authenticated\n    const { isPending, authenticated } = useAuthState(authParams, true);\n\n    // in pessimistic mode don't render the children until authenticated\n    if ((requireAuth && isPending) || !authenticated) {\n        return null;\n    }\n\n    // render the children in optimistic rendering or after authenticated\n    return <>{children}</>;\n};\n\nexport interface AuthenticatedProps {\n    children: ReactNode;\n    authParams?: object;\n    requireAuth?: boolean;\n}\n", "import { useEffect } from 'react';\nimport useLogout from './useLogout';\n\n/**\n * Log the user out and redirect them to login.\n *\n * To be used as a catch-all route for anonymous users in a secure app.\n *\n * @see CoreAdminRoutes\n */\nexport const LogoutOnMount = () => {\n    const logout = useLogout();\n    useEffect(() => {\n        logout();\n    }, [logout]);\n    return null;\n};\n", "import { useCallback } from 'react';\n\nimport useAuthProvider, { defaultAuthParams } from './useAuthProvider';\nimport useLogout from './useLogout';\nimport { useNotify } from '../notification';\nimport { useBasename } from '../routing';\nimport { removeDoubleSlashes } from '../routing/useCreatePath';\n\n/**\n * Get a callback for calling the authProvider.checkAuth() method.\n * In case of rejection, redirects to the login page, displays a notification,\n * and throws an error.\n *\n * This is a low level hook. See those more specialized hooks\n * for common authentication tasks, based on useCheckAuth.\n *\n * @see useAuthenticated\n * @see useAuthState\n *\n * @returns {Function} checkAuth callback\n *\n * @example\n *\n * import { useCheckAuth } from 'react-admin';\n *\n * const MyProtectedPage = () => {\n *     const checkAuth = useCheckAuth();\n *     useEffect(() => {\n *         checkAuth().catch(() => {});\n *     }, []);\n *     return <p>Private content: EZAEZEZAET</p>\n * } // tip: use useAuthenticated() hook instead\n *\n * const MyPage = () => {\n *     const checkAuth = useCheckAuth();\n *     const [authenticated, setAuthenticated] = useState(true); // optimistic auth\n *     useEffect(() => {\n *         checkAuth({}, false)\n *              .then(() => setAuthenticated(true))\n *              .catch(() => setAuthenticated(false));\n *     }, []);\n *     return authenticated ? <Bar /> : <BarNotAuthenticated />;\n * } // tip: use useAuthState() hook instead\n */\nexport const useCheckAuth = (): CheckAuth => {\n    const authProvider = useAuthProvider();\n    const notify = useNotify();\n    const logout = useLogout();\n    const basename = useBasename();\n    const loginUrl = removeDoubleSlashes(\n        `${basename}/${defaultAuthParams.loginUrl}`\n    );\n\n    const checkAuth = useCallback(\n        (params: any = {}, logoutOnFailure = true, redirectTo = loginUrl) =>\n            authProvider\n                ? authProvider.checkAuth(params).catch(error => {\n                      if (logoutOnFailure) {\n                          logout(\n                              {},\n                              error && error.redirectTo != null\n                                  ? error.redirectTo\n                                  : redirectTo\n                          );\n                          const shouldSkipNotify =\n                              error && error.message === false;\n                          !shouldSkipNotify &&\n                              notify(\n                                  getErrorMessage(\n                                      error,\n                                      'ra.auth.auth_check_error'\n                                  ),\n                                  { type: 'error' }\n                              );\n                      }\n                      throw error;\n                  })\n                : checkAuthWithoutAuthProvider(),\n        [authProvider, logout, notify, loginUrl]\n    );\n\n    return checkAuth;\n};\n\nconst checkAuthWithoutAuthProvider = () => Promise.resolve();\n\n/**\n * Check if the current user is authenticated by calling authProvider.checkAuth().\n * Logs the user out on failure.\n *\n * @param {Object} params The parameters to pass to the authProvider\n * @param {boolean} logoutOnFailure Whether the user should be logged out if the authProvider fails to authenticate them. True by default.\n * @param {string} redirectTo The login form url. Defaults to '/login'\n *\n * @return {Promise} Resolved to the authProvider response if the user passes the check, or rejected with an error otherwise\n */\nexport type CheckAuth = (\n    params?: any,\n    logoutOnFailure?: boolean,\n    redirectTo?: string\n) => Promise<any>;\n\nconst getErrorMessage = (error, defaultMessage) =>\n    typeof error === 'string'\n        ? error\n        : typeof error === 'undefined' || !error.message\n          ? defaultMessage\n          : error.message;\n", "import { useEffect, useMemo } from 'react';\nimport {\n    useQuery,\n    UseQueryOptions,\n    QueryObserverResult,\n} from '@tanstack/react-query';\n\nimport useAuthProvider from './useAuthProvider';\nimport { UserIdentity } from '../types';\nimport { useEvent } from '../util';\n\nconst defaultIdentity: UserIdentity = {\n    id: '',\n};\nconst defaultQueryParams = {\n    staleTime: 5 * 60 * 1000,\n};\n\n/**\n * Return the current user identity by calling authProvider.getIdentity() on mount\n *\n * The return value updates according to the call state:\n *\n * - mount: { isPending: true }\n * - success: { identity, refetch: () => {}, isPending: false }\n * - error: { error: Error, isPending: false }\n *\n * The implementation is left to the authProvider.\n *\n * @returns The current user identity. Destructure as { isPending, identity, error, refetch }.\n *\n * @example\n * import { useGetIdentity, useGetOne } from 'react-admin';\n *\n * const PostDetail = ({ id }) => {\n *     const { data: post, isPending: postLoading } = useGetOne('posts', { id });\n *     const { identity, isPending: identityLoading } = useGetIdentity();\n *     if (postLoading || identityLoading) return <>Loading...</>;\n *     if (!post.lockedBy || post.lockedBy === identity.id) {\n *         // post isn't locked, or is locked by me\n *         return <PostEdit post={post} />\n *     } else {\n *         // post is locked by someone else and cannot be edited\n *         return <PostShow post={post} />\n *     }\n * }\n */\nexport const useGetIdentity = <ErrorType extends Error = Error>(\n    options: UseGetIdentityOptions<ErrorType> = defaultQueryParams\n): UseGetIdentityResult<ErrorType> => {\n    const authProvider = useAuthProvider();\n    const { onSuccess, onError, onSettled, ...queryOptions } = options;\n\n    const result = useQuery({\n        queryKey: ['auth', 'getIdentity'],\n        queryFn: async ({ signal }) => {\n            if (\n                authProvider &&\n                typeof authProvider.getIdentity === 'function'\n            ) {\n                return authProvider.getIdentity({ signal });\n            } else {\n                return defaultIdentity;\n            }\n        },\n        ...queryOptions,\n    });\n\n    const onSuccessEvent = useEvent(onSuccess ?? noop);\n    const onErrorEvent = useEvent(onError ?? noop);\n    const onSettledEvent = useEvent(onSettled ?? noop);\n\n    useEffect(() => {\n        if (result.data === undefined || result.isFetching) return;\n        onSuccessEvent(result.data);\n    }, [onSuccessEvent, result.data, result.isFetching]);\n\n    useEffect(() => {\n        if (result.error == null || result.isFetching) return;\n        onErrorEvent(result.error);\n    }, [onErrorEvent, result.error, result.isFetching]);\n\n    useEffect(() => {\n        if (result.status === 'pending' || result.isFetching) return;\n        onSettledEvent(result.data, result.error);\n    }, [\n        onSettledEvent,\n        result.data,\n        result.error,\n        result.status,\n        result.isFetching,\n    ]);\n\n    return useMemo(\n        () => ({\n            ...result,\n            identity: result.data,\n        }),\n        [result]\n    );\n};\n\nexport interface UseGetIdentityOptions<ErrorType extends Error = Error>\n    extends Omit<\n        UseQueryOptions<UserIdentity, ErrorType>,\n        'queryKey' | 'queryFn'\n    > {\n    onSuccess?: (data: UserIdentity) => void;\n    onError?: (err: Error) => void;\n    onSettled?: (data?: UserIdentity, error?: Error | null) => void;\n}\n\nexport type UseGetIdentityResult<ErrorType = Error> = QueryObserverResult<\n    UserIdentity,\n    ErrorType\n> & {\n    identity: UserIdentity | undefined;\n};\n\nexport default useGetIdentity;\n\nconst noop = () => {};\n", "import { useEffect } from 'react';\nimport { useQuery, UseQueryOptions } from '@tanstack/react-query';\nimport { useLocation } from 'react-router';\nimport { useRedirect } from '../routing';\nimport { AuthRedirectResult } from '../types';\nimport useAuthProvider from './useAuthProvider';\nimport { useEvent } from '../util';\n\n/**\n * This hook calls the `authProvider.handleCallback()` method on mount. This is meant to be used in a route called\n * by an external authentication service (e.g. Auth0) after the user has logged in.\n * By default, it redirects to application home page upon success, or to the `redirectTo` location returned by `authProvider. handleCallback`.\n *\n * @returns An object containing { isPending, data, error, refetch }.\n */\nexport const useHandleAuthCallback = (\n    options?: UseHandleAuthCallbackOptions\n) => {\n    const authProvider = useAuthProvider();\n    const redirect = useRedirect();\n    const location = useLocation();\n    const locationState = location.state as any;\n    const nextPathName = locationState && locationState.nextPathname;\n    const nextSearch = locationState && locationState.nextSearch;\n    const defaultRedirectUrl = nextPathName ? nextPathName + nextSearch : '/';\n    const { onSuccess, onError, onSettled, ...queryOptions } = options ?? {};\n\n    const queryResult = useQuery({\n        queryKey: ['auth', 'handleCallback'],\n        queryFn: ({ signal }) =>\n            authProvider && typeof authProvider.handleCallback === 'function'\n                ? authProvider\n                      .handleCallback({ signal })\n                      .then(result => result ?? null)\n                : Promise.resolve(),\n        retry: false,\n        ...queryOptions,\n    });\n\n    const onSuccessEvent = useEvent(\n        onSuccess ??\n            ((data: any) => {\n                // AuthProviders relying on a third party services redirect back to the app can't\n                // use the location state to store the path on which the user was before the login.\n                // So we support a fallback on the localStorage.\n                const previousLocation = localStorage.getItem(\n                    PreviousLocationStorageKey\n                );\n                const redirectTo =\n                    (data as AuthRedirectResult)?.redirectTo ??\n                    previousLocation;\n                if (redirectTo === false) {\n                    return;\n                }\n\n                redirect(redirectTo ?? defaultRedirectUrl);\n            })\n    );\n    const onErrorEvent = useEvent(onError ?? noop);\n    const onSettledEvent = useEvent(onSettled ?? noop);\n\n    useEffect(() => {\n        if (queryResult.error == null || queryResult.isFetching) return;\n        onErrorEvent(queryResult.error);\n    }, [onErrorEvent, queryResult.error, queryResult.isFetching]);\n\n    useEffect(() => {\n        if (queryResult.data === undefined || queryResult.isFetching) return;\n        onSuccessEvent(queryResult.data);\n    }, [onSuccessEvent, queryResult.data, queryResult.isFetching]);\n\n    useEffect(() => {\n        if (queryResult.status === 'pending' || queryResult.isFetching) return;\n        onSettledEvent(queryResult.data, queryResult.error);\n    }, [\n        onSettledEvent,\n        queryResult.data,\n        queryResult.error,\n        queryResult.status,\n        queryResult.isFetching,\n    ]);\n\n    return queryResult;\n};\n\n/**\n * Key used to store the previous location in localStorage.\n * Used by the useHandleAuthCallback hook to redirect the user to their previous location after a successful login.\n */\nexport const PreviousLocationStorageKey = '@react-admin/nextPathname';\n\nexport type UseHandleAuthCallbackOptions = Omit<\n    UseQueryOptions<AuthRedirectResult | void>,\n    'queryKey' | 'queryFn'\n> & {\n    onSuccess?: (data: AuthRedirectResult | void) => void;\n    onError?: (err: Error) => void;\n    onSettled?: (\n        data?: AuthRedirectResult | void,\n        error?: Error | null\n    ) => void;\n};\n\nconst noop = () => {};\n", "import { AuthProvider } from '../types';\n\n/**\n * A higher-order function which wraps an authProvider to handle refreshing authentication.\n * This is useful when the authentication service supports a refresh token mechanism.\n * The wrapped provider will call the refreshAuth function before\n * calling the authProvider checkAuth, getIdentity and getPermissions methods.\n *\n * The refreshAuth function should return a Promise that resolves when the authentication token has been refreshed.\n * It might throw an error if the refresh failed. In this case, react-admin will handle the error as usual.\n *\n * @param provider An authProvider\n * @param refreshAuth A function that refreshes the authentication token if needed and returns a Promise.\n * @returns A wrapped authProvider.\n *\n * @example\n * import { addRefreshAuthToAuthProvider } from 'react-admin';\n * import { authProvider } from './authProvider';\n * import { refreshAuth } from './refreshAuth';\n *\n * const authProvider = addRefreshAuthToAuthProvider(authProvider, refreshAuth);\n */\nexport const addRefreshAuthToAuthProvider = <\n    AuthProviderType extends AuthProvider = AuthProvider,\n>(\n    provider: AuthProviderType,\n    refreshAuth: () => Promise<void>\n): AuthProviderType => {\n    const proxy = new Proxy(provider, {\n        get(_, name) {\n            const shouldIntercept =\n                AuthProviderInterceptedMethods.includes(name.toString()) &&\n                provider[name.toString()] != null;\n\n            if (shouldIntercept) {\n                return async (...args: any[]) => {\n                    await refreshAuth();\n                    return provider[name.toString()](...args);\n                };\n            }\n\n            return provider[name.toString()];\n        },\n    });\n\n    return proxy;\n};\n\nconst AuthProviderInterceptedMethods = [\n    'checkAuth',\n    'getIdentity',\n    'getPermissions',\n];\n", "import { DataProvider } from '../types';\n\n/**\n * A higher-order function which wraps a dataProvider to handle refreshing authentication.\n * This is useful when the authentication service supports a refresh token mechanism.\n * The wrapped provider will call the refreshAuth function before calling any dataProvider methods.\n *\n * The refreshAuth function should return a Promise that resolves when the authentication token has been refreshed.\n * It might throw an error if the refresh failed. In this case, react-admin will handle the error as usual.\n *\n * @param provider A dataProvider\n * @param refreshAuth A function that refreshes the authentication token if needed and returns a Promise.\n * @returns A wrapped dataProvider.\n *\n * @example\n * import { addRefreshAuthToDataProvider } from 'react-admin';\n * import { jsonServerProvider } from 'ra-data-json-server';\n * import { refreshAuth } from './refreshAuth';\n *\n * const dataProvider = addRefreshAuthToDataProvider(jsonServerProvider('http://localhost:3000'), refreshAuth);\n */\nexport const addRefreshAuthToDataProvider = <\n    DataProviderType extends DataProvider = DataProvider,\n>(\n    provider: DataProviderType,\n    refreshAuth: () => Promise<void>\n): DataProviderType => {\n    const proxy = new Proxy(provider, {\n        get(_, name) {\n            return async (...args: any[]) => {\n                await refreshAuth();\n                return provider[name.toString()](...args);\n            };\n        },\n    });\n\n    return proxy;\n};\n", "import * as React from 'react';\nimport { createContext, useContext } from 'react';\n\nexport const PreferenceKeyContext = createContext<string | null>('');\n\nexport const PreferenceKeyContextProvider = ({\n    value = '',\n    children,\n}: {\n    value?: string | null;\n    children: React.ReactNode;\n}) => (\n    <PreferenceKeyContext.Provider value={value}>\n        {children}\n    </PreferenceKeyContext.Provider>\n);\n\nexport const usePreferenceKey = () => {\n    return useContext(PreferenceKeyContext);\n};\n", "import { useStore } from '../store/useStore';\nimport { usePreferenceKey } from './PreferenceKeyContext';\n\n/**\n * Get a preference value from the store\n *\n * Relies on the store, using a key namespaced with the preference key from the PreferenceKeyContext\n * @example\n *\n * // when used inside a PreferenceKeyContext of value 'my-app'\n * const [theme, setTheme] = usePreference('theme', 'light');\n * // this is equivalent to\n * const [theme, setTheme] = useStore('my-app.theme', 'light');\n */\nexport const usePreference = <T = any>(key?: string, defaultValue?: T) => {\n    const preferenceKey = usePreferenceKey();\n    if (!preferenceKey) {\n        throw new Error(\n            \"usePreference cannot be used outside of a Configurable component. Did you forget to wrap your component with <Configurable>? If you don't want to use Configurable, you can use the useStore hook instead.\"\n        );\n    }\n\n    return useStore<T>(\n        preferenceKey && key ? `${preferenceKey}.${key}` : preferenceKey ?? key,\n        defaultValue\n    );\n};\n", "import { useContext } from 'react';\nimport {\n    PreferencesEditorContext,\n    PreferencesEditorContextValue,\n} from './PreferencesEditorContext';\n\nexport const usePreferencesEditor = (): PreferencesEditorContextValue => {\n    const context = useContext(PreferencesEditorContext);\n\n    if (!context) {\n        throw new Error(\n            'usePreferencesEditor must be used within a PreferencesEditorContextProvider'\n        );\n    }\n\n    return context;\n};\n", "import { useState, useEffect } from 'react';\n\nimport { usePreference } from './usePreference';\n\n/**\n * Get the props for a preference input that changes the value on blur\n *\n * Relies on `usePreference`, so it's using the PreferenceKeyContext\n *\n * @example\n * const FontSizePreferenceInput = () => {\n *     const field = usePreferenceInput('ui.font.size', 10);\n *     return (\n *         <div>\n *             <label for=\"font-size\">Font size</label>\n *             <input id=\"font-size\" {...field} />\n *         </div>\n *     );\n * }\n */\nexport const usePreferenceInput = (key?: string, defaultValue?: any) => {\n    const [valueFromStore, setValueFromStore] = usePreference(\n        key,\n        defaultValue\n    );\n    const [value, setValue] = useState(valueFromStore);\n    useEffect(() => {\n        setValue(valueFromStore || defaultValue);\n    }, [valueFromStore, defaultValue]);\n\n    const onChange = event => {\n        setValue(event.target.value === '' ? defaultValue : event.target.value);\n    };\n\n    const onBlur = () => {\n        setValueFromStore(value);\n    };\n\n    const onKeyDown = event => {\n        if (event.key === 'Enter') {\n            setValueFromStore(value);\n            const form = event.target.form;\n            if (form) {\n                const index = [...form].indexOf(event.target);\n                form.elements[index + 1]?.focus();\n            }\n            event.preventDefault();\n        }\n    };\n\n    return { value, onChange, onBlur, onKeyDown };\n};\n", "import { useEffect } from 'react';\nimport { usePreferencesEditor } from './usePreferencesEditor';\n\n/**\n * Set inspector title on mount\n *\n * @example\n * useSetInspectorTitle('Datagrid');\n */\nexport const useSetInspectorTitle = (title: string, options?: any) => {\n    const preferencesEditorContext = usePreferencesEditor();\n    if (!preferencesEditorContext) {\n        throw new Error(\n            'useSetInspectorTitle cannot be called outside of a PreferencesEditorContext'\n        );\n    }\n    const { setTitle } = preferencesEditorContext;\n\n    useEffect(() => {\n        setTitle(title, options);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [title, JSON.stringify(options), setTitle]);\n};\n", "import * as React from 'react';\n\nimport getValuesFromRecords from './getValuesFromRecords';\nimport InferredElement from './InferredElement';\n\nimport {\n    isObject,\n    valuesAreArray,\n    valuesAreBoolean,\n    valuesAreDate,\n    valuesAreDateString,\n    valuesAreHtml,\n    valuesAreInteger,\n    valuesAreNumeric,\n    valuesAreObject,\n    valuesAreString,\n} from './assertions';\nimport { InferredTypeMap } from './types';\nimport { pluralize } from 'inflection';\n\nconst DefaultComponent = () => <span>;</span>;\nconst defaultType = {\n    type: DefaultComponent,\n    representation: () => '<DefaultComponent />',\n};\nconst defaultTypes = {\n    array: defaultType,\n    boolean: defaultType,\n    date: defaultType,\n    email: defaultType,\n    id: defaultType,\n    number: defaultType,\n    reference: defaultType,\n    referenceArray: defaultType,\n    richText: defaultType,\n    string: defaultType,\n    url: defaultType,\n};\n\nconst hasType = (type, types) => typeof types[type] !== 'undefined';\n\n/**\n * Guesses an element based on an array of values\n *\n * @example\n *     inferElementFromValues(\n *         'address',\n *         ['2 Baker Street', '1 Downing street'],\n *         { number: NumberField, string: StringField }\n *     );\n *     // new InferredElement(<StringField source=\"address\" />)\n *\n * Types are optional: if a type isn't provided, the function falls back\n * to the nearest type.\n *\n * @example\n *     inferElementFromValues(\n *         'content',\n *         ['<h1>Hello</h1>'],\n *         { string: StringField } // no richText type\n *     );\n *     // new InferredElement(<StringField source=\"content\" />)\n *\n * Types can be disabled by passing a falsy value.\n *\n * @example\n *     inferElementFromValues(\n *         'content',\n *         ['<h1>Hello</h1>'],\n *         { string: StringField, richText: false }\n *     );\n *     // null\n *\n * @param {string} name Property name, e.g. 'date_of_birth'\n * @param {any[]} values an array of values from which to determine the type, e.g. [12, 34.4, 43]\n * @param {Object} types A set of components indexed by type. The string type is the only required one\n *\n * @return InferredElement\n */\nconst inferElementFromValues = (\n    name,\n    values = [],\n    types: InferredTypeMap = defaultTypes\n) => {\n    if (name === 'id' && hasType('id', types)) {\n        return new InferredElement(types.id, { source: name });\n    }\n    if (name.substr(name.length - 3) === '_id' && hasType('reference', types)) {\n        const reference = pluralize(name.substr(0, name.length - 3));\n        return (\n            types.reference &&\n            new InferredElement(types.reference, {\n                source: name,\n                reference,\n            })\n        );\n    }\n    if (name.substr(name.length - 2) === 'Id' && hasType('reference', types)) {\n        const reference = pluralize(name.substr(0, name.length - 2));\n        return (\n            types.reference &&\n            new InferredElement(types.reference, {\n                source: name,\n                reference,\n            })\n        );\n    }\n    if (\n        name.substr(name.length - 4) === '_ids' &&\n        hasType('referenceArray', types)\n    ) {\n        const reference = pluralize(name.substr(0, name.length - 4));\n        return (\n            types.referenceArray &&\n            new InferredElement(types.referenceArray, {\n                source: name,\n                reference,\n            })\n        );\n    }\n    if (\n        name.substr(name.length - 3) === 'Ids' &&\n        hasType('referenceArray', types)\n    ) {\n        const reference = pluralize(name.substr(0, name.length - 3));\n        return (\n            types.referenceArray &&\n            new InferredElement(types.referenceArray, {\n                source: name,\n                reference,\n            })\n        );\n    }\n    if (values.length === 0) {\n        // FIXME introspect further using name\n        return new InferredElement(types.string, { source: name });\n    }\n    if (valuesAreArray(values)) {\n        if (isObject(values[0][0]) && hasType('array', types)) {\n            const leafValues = getValuesFromRecords(\n                values.reduce((acc, vals) => acc.concat(vals), [])\n            );\n            // FIXME bad visual representation\n            return (\n                types.array &&\n                new InferredElement(\n                    types.array,\n                    {\n                        source: name,\n                    },\n                    Object.keys(leafValues).map(leafName =>\n                        inferElementFromValues(\n                            leafName,\n                            leafValues[leafName],\n                            types\n                        )\n                    )\n                )\n            );\n        }\n        // FIXME introspect further\n        return new InferredElement(types.string, { source: name });\n    }\n    if (valuesAreBoolean(values) && hasType('boolean', types)) {\n        return new InferredElement(types.boolean, { source: name });\n    }\n    if (valuesAreDate(values) && hasType('date', types)) {\n        return new InferredElement(types.date, { source: name });\n    }\n    if (valuesAreString(values)) {\n        if (name === 'email' && hasType('email', types)) {\n            return new InferredElement(types.email, { source: name });\n        }\n        if (name === 'url' && hasType('url', types)) {\n            return new InferredElement(types.url, { source: name });\n        }\n        if (valuesAreDateString(values) && hasType('date', types)) {\n            return new InferredElement(types.date, { source: name });\n        }\n        if (valuesAreHtml(values) && hasType('richText', types)) {\n            return new InferredElement(types.richText, { source: name });\n        }\n        return new InferredElement(types.string, { source: name });\n    }\n    if (\n        (valuesAreInteger(values) || valuesAreNumeric(values)) &&\n        hasType('number', types)\n    ) {\n        return new InferredElement(types.number, { source: name });\n    }\n    if (valuesAreObject(values)) {\n        // we need to go deeper\n        // Arbitrarily, choose the first prop of the first object\n        const propName = Object.keys(values[0]).shift();\n        if (!propName) {\n            return new InferredElement(types.string, { source: name });\n        }\n        const leafValues = values.map(v => v[propName]);\n        return inferElementFromValues(`${name}.${propName}`, leafValues, types);\n    }\n    return new InferredElement(types.string, { source: name });\n};\n\nexport default inferElementFromValues;\n", "/**\n * Gets a list of values indexed by field based on a list of records\n *\n * @example\n * const records = [\n *     {\n *         id: 1,\n *         title: \"Lorem Ipsum\",\n *         views: 254,\n *         user_id: 123,\n *     },\n *     {\n *         id: 2,\n *         title: \"Sic Dolor amet\",\n *         views: 65,\n *         user_id: 456,\n *     },\n * ];\n * getValuesFromRecords(records);\n * // {\n * //    id: [1, 2],\n * //    title: ['Lorem Ipsum', 'Sic Dolor amet'],\n * //    views: [254, 65],\n * //    user_id: [123, 456],\n * // }\n */\nexport default (records: any[]) =>\n    records.reduce((values, record) => {\n        Object.keys(record).forEach(fieldName => {\n            if (!values[fieldName]) {\n                values[fieldName] = [];\n            }\n            if (record[fieldName] != null) {\n                const value = Array.isArray(record[fieldName])\n                    ? [record[fieldName]]\n                    : record[fieldName];\n                values[fieldName] = values[fieldName].concat(value);\n            }\n        });\n        return values;\n    }, {});\n", "import { createElement } from 'react';\nimport { InferredType } from './types';\n\nclass InferredElement {\n    constructor(\n        private type?: InferredType,\n        private props?: any,\n        private children?: any\n    ) {\n        this.type = type;\n        this.props = props;\n        this.children = children;\n    }\n\n    getElement(props = {}) {\n        if (!this.type || !this.type.component) {\n            return;\n        }\n        return this.children\n            ? createElement(\n                  this.type.component,\n                  { ...this.props, ...props },\n                  this.children.length > 0\n                      ? this.children.map((child, index) =>\n                            child.getElement({ key: index })\n                        )\n                      : this.children.getElement()\n              )\n            : createElement(this.type.component, { ...this.props, ...props });\n    }\n\n    getProps() {\n        return this.props;\n    }\n\n    isDefined() {\n        return !!this.type;\n    }\n\n    getRepresentation() {\n        if (!this.type) {\n            return '';\n        }\n        if (this.type.representation) {\n            return this.type.representation(this.props, this.children);\n        }\n        if (this.type.component) {\n            return `<${\n                this.type.component.displayName || this.type.component.name\n            } source=\"${this.props.source}\" />`;\n        }\n        return '';\n    }\n}\n\nexport default InferredElement;\n", "import { isMatch, isValid, parseISO } from 'date-fns';\n\nexport const isNumeric = (value: any) =>\n    !isNaN(parseFloat(value)) && isFinite(value);\nexport const valuesAreNumeric = (values: any[]) => values.every(isNumeric);\n\nexport const isInteger = (value: any) =>\n    Number.isInteger(value) || !isNaN(parseInt(value));\nexport const valuesAreInteger = (values: any[]) => values.every(isInteger);\n\nexport const isBoolean = (value: any) => typeof value === 'boolean';\nexport const valuesAreBoolean = (values: any[]) => values.every(isBoolean);\n\nexport const isBooleanString = (value: any) =>\n    ['true', 'false'].includes(value.toString().toLowerCase());\nexport const valuesAreBooleanString = (values: any[]) =>\n    values.every(isBooleanString);\n\nexport const isString = (value: any) => typeof value === 'string';\nexport const valuesAreString = (values: any[]) => values.every(isString);\n\nconst HtmlRegexp = /<([A-Z][A-Z0-9]*)\\b[^>]*>(.*?)<\\/\\1>/i;\nexport const isHtml = (value: any) => !value || HtmlRegexp.test(value);\nexport const valuesAreHtml = (values: any[]) => values.every(isHtml);\n\nconst UrlRegexp = /http(s*):\\/\\/.*/i;\nexport const isUrl = (value: any) => !value || UrlRegexp.test(value);\nexport const valuesAreUrl = (values: any[]) => values.every(isUrl);\n\nconst ImageUrlRegexp =\n    /http(s*):\\/\\/.*\\.(jpeg|jpg|jfif|pjpeg|pjp|png|svg|gif|webp|apng|bmp|ico|cur|tif|tiff)/i;\nexport const isImageUrl = (value: any) => !value || ImageUrlRegexp.test(value);\nexport const valuesAreImageUrl = (values: any[]) => values.every(isImageUrl);\n\n// This is a very simple regex to find emails\n// It is NOT meant to validate emails as the spec is way more complicated but is\n// enough for our inference needs\nconst EmailRegexp = /@{1}/;\nexport const isEmail = (value: any) => !value || EmailRegexp.test(value);\nexport const valuesAreEmail = (values: any[]) => values.every(isEmail);\n\nexport const isArray = (value: any) => Array.isArray(value);\nexport const valuesAreArray = (values: any[]) => values.every(isArray);\n\nexport const isDate = (value: any) => !value || value instanceof Date;\nexport const valuesAreDate = (values: any[]) => values.every(isDate);\n\nexport const isDateString = (value: any) =>\n    !value ||\n    (typeof value === 'string' &&\n        (isMatch(value, 'MM/dd/yyyy') ||\n            isMatch(value, 'MM/dd/yy') ||\n            isValid(parseISO(value))));\n\nexport const valuesAreDateString = (values: any[]) =>\n    values.every(isDateString);\n\nexport const isObject = (value: any) =>\n    Object.prototype.toString.call(value) === '[object Object]';\nexport const valuesAreObject = (values: any[]) => values.every(isObject);\n", "import inferElementFromValues from './inferElementFromValues';\nimport getValuesFromRecords from './getValuesFromRecords';\nimport { InferredTypeMap } from './types';\nimport InferredElement from './InferredElement';\n\n/**\n * Get a list of React-admin field components from a list of records\n *\n * @example\n * const records = [\n *     {\n *         \"id\": 1,\n *         \"title\": \"Lorem Ipsum\",\n *         \"views\": 254,\n *         \"user_id\": 123,\n *     },\n *     {\n *         \"id\": 2,\n *         \"title\": \"Sic Dolor amet\",\n *         \"user_id\": 456,\n *     },\n * ];\n * const types = {\n *     id: NumberField,\n *     string: TextField,\n *     number: NumberField,\n *     reference: ReferenceField\n * };\n * const components = getElementsFromRecords(records, types);\n * // [\n * //    <NumberField source=\"id\" />,\n * //    <TextField source=\"title\" />,\n * //    <NumberField source=\"views\" />,\n * //    <ReferenceField source=\"user_id\" reference=\"users\"><NumberField source=\"id\" /></ReferenceField>,\n * // ];\n */\nexport default (records: any[], types: InferredTypeMap) => {\n    const fieldValues = getValuesFromRecords(records);\n    return Object.keys(fieldValues)\n        .reduce(\n            (fields, fieldName) =>\n                fields.concat(\n                    inferElementFromValues(\n                        fieldName,\n                        fieldValues[fieldName],\n                        types\n                    )\n                ),\n            [] as InferredElement[]\n        )\n        .filter(inferredElement => inferredElement.isDefined());\n};\n", "import getValuesFromRecords from './getValuesFromRecords';\n\nimport {\n    isObject,\n    valuesAreArray,\n    valuesAreBoolean,\n    valuesAreDate,\n    valuesAreDateString,\n    valuesAreHtml,\n    valuesAreInteger,\n    valuesAreNumeric,\n    valuesAreObject,\n    valuesAreString,\n    valuesAreUrl,\n    valuesAreImageUrl,\n    valuesAreEmail,\n} from './assertions';\nimport { pluralize } from 'inflection';\n\nexport const InferenceTypes = [\n    'array',\n    'boolean',\n    'date',\n    'email',\n    'id',\n    'image',\n    'number',\n    'reference',\n    'referenceChild',\n    'referenceArray',\n    'referenceArrayChild',\n    'richText',\n    'string',\n    'url',\n    'object',\n] as const;\n\nexport type PossibleInferredElementTypes = (typeof InferenceTypes)[number];\n\nexport interface InferredElementDescription {\n    type: PossibleInferredElementTypes;\n    props?: any;\n    children?: InferredElementDescription | InferredElementDescription[];\n}\n\n/**\n * Guesses an element type based on an array of values\n *\n * @example\n *     inferElementFromValues(\n *         'address',\n *         ['2 Baker Street', '1 Downing street'],\n *     );\n *     // { type: 'string', props: { source: 'address' } }\n *\n * @param {string} name Property name, e.g. 'date_of_birth'\n * @param {any[]} values an array of values from which to determine the type, e.g. [12, 34.4, 43]\n */\nexport const inferTypeFromValues = (\n    name,\n    values = []\n): InferredElementDescription => {\n    if (name === 'id') {\n        return { type: 'id', props: { source: name } };\n    }\n    if (name.substr(name.length - 3) === '_id') {\n        return {\n            type: 'reference',\n            props: {\n                source: name,\n                reference: pluralize(name.substr(0, name.length - 3)),\n            },\n            children: { type: 'referenceChild' },\n        };\n    }\n    if (name.substr(name.length - 2) === 'Id') {\n        return {\n            type: 'reference',\n            props: {\n                source: name,\n                reference: pluralize(name.substr(0, name.length - 2)),\n            },\n            children: { type: 'referenceChild' },\n        };\n    }\n    if (name.substr(name.length - 4) === '_ids') {\n        return {\n            type: 'referenceArray',\n            props: {\n                source: name,\n                reference: pluralize(name.substr(0, name.length - 4)),\n            },\n            children: { type: 'referenceArrayChild' },\n        };\n    }\n    if (name.substr(name.length - 3) === 'Ids') {\n        return {\n            type: 'referenceArray',\n            props: {\n                source: name,\n                reference: pluralize(name.substr(0, name.length - 3)),\n            },\n            children: { type: 'referenceArrayChild' },\n        };\n    }\n    if (values.length === 0) {\n        if (name === 'email') {\n            return { type: 'email', props: { source: name } };\n        }\n        if (name === 'url') {\n            return { type: 'url', props: { source: name } };\n        }\n        // FIXME introspect further using name\n        return { type: 'string', props: { source: name } };\n    }\n    if (valuesAreArray(values)) {\n        if (isObject(values[0][0])) {\n            const leafValues = getValuesFromRecords(\n                values.reduce((acc, vals) => acc.concat(vals), [])\n            );\n            // FIXME bad visual representation\n            return {\n                type: 'array',\n                props: { source: name },\n                children: Object.keys(leafValues).map(leafName =>\n                    inferTypeFromValues(leafName, leafValues[leafName])\n                ),\n            };\n        }\n        // FIXME introspect further\n        return { type: 'string', props: { source: name } };\n    }\n    if (valuesAreBoolean(values)) {\n        return { type: 'boolean', props: { source: name } };\n    }\n    if (valuesAreDate(values)) {\n        return { type: 'date', props: { source: name } };\n    }\n    if (valuesAreString(values)) {\n        if (name === 'email' || valuesAreEmail(values)) {\n            return { type: 'email', props: { source: name } };\n        }\n        if (name === 'url' || valuesAreUrl(values)) {\n            if (valuesAreImageUrl(values)) {\n                return { type: 'image', props: { source: name } };\n            }\n            return { type: 'url', props: { source: name } };\n        }\n        if (valuesAreDateString(values)) {\n            return { type: 'date', props: { source: name } };\n        }\n        if (valuesAreHtml(values)) {\n            return { type: 'richText', props: { source: name } };\n        }\n        if (valuesAreInteger(values) || valuesAreNumeric(values)) {\n            return { type: 'number', props: { source: name } };\n        }\n        return { type: 'string', props: { source: name } };\n    }\n    if (valuesAreInteger(values) || valuesAreNumeric(values)) {\n        return { type: 'number', props: { source: name } };\n    }\n    if (valuesAreObject(values)) {\n        /// Arbitrarily, choose the first prop of the first object\n        const propName = Object.keys(values[0]).shift();\n        if (!propName) {\n            return { type: 'object', props: { source: name } };\n        }\n        const leafValues = values.map(v => v[propName]);\n        return inferTypeFromValues(`${name}.${propName}`, leafValues);\n    }\n    return { type: 'string', props: { source: name } };\n};\n", "import { ComponentType, ReactElement, ReactNode } from 'react';\nimport { WithPermissionsChildrenParams } from './auth/WithPermissions';\nimport { AuthActionType } from './auth/types';\n\n/**\n * data types\n */\n\nexport type Identifier = string | number;\n\nexport interface RaRecord<IdentifierType extends Identifier = Identifier>\n    extends Record<string, any> {\n    id: IdentifierType;\n}\n\nexport interface SortPayload {\n    field: string;\n    order: 'ASC' | 'DESC';\n}\nexport interface FilterPayload {\n    [k: string]: any;\n}\nexport interface PaginationPayload {\n    page: number;\n    perPage: number;\n}\nexport type ValidUntil = Date;\n/**\n * i18nProvider types\n */\n\nexport const I18N_TRANSLATE = 'I18N_TRANSLATE';\nexport const I18N_CHANGE_LOCALE = 'I18N_CHANGE_LOCALE';\n\nexport type Translate = (key: string, options?: any) => string;\n\nexport type Locale = {\n    locale: string;\n    name: string;\n};\n\nexport type I18nProvider = {\n    translate: Translate;\n    changeLocale: (locale: string, options?: any) => Promise<void>;\n    getLocale: () => string;\n    getLocales?: () => Locale[];\n    [key: string]: any;\n};\n\nexport interface UserIdentity {\n    id: Identifier;\n    fullName?: string;\n    avatar?: string;\n    [key: string]: any;\n}\n\n/**\n * authProvider types\n */\nexport type AuthProvider = {\n    login: (\n        params: any\n    ) => Promise<{ redirectTo?: string | boolean } | void | any>;\n    logout: (params: any) => Promise<void | false | string>;\n    checkAuth: (params: any & QueryFunctionContext) => Promise<void>;\n    checkError: (error: any) => Promise<void>;\n    getIdentity?: (params?: QueryFunctionContext) => Promise<UserIdentity>;\n    getPermissions: (params: any & QueryFunctionContext) => Promise<any>;\n    handleCallback?: (\n        params?: QueryFunctionContext\n    ) => Promise<AuthRedirectResult | void | any>;\n    [key: string]: any;\n};\n\nexport type AuthRedirectResult = {\n    redirectTo?: string | false;\n    logoutOnFailure?: boolean;\n};\n\nexport type LegacyAuthProvider = (\n    type: AuthActionType,\n    params?: any\n) => Promise<any>;\n\n/**\n * dataProvider types\n */\n\nexport type DataProvider<ResourceType extends string = string> = {\n    getList: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: GetListParams & QueryFunctionContext\n    ) => Promise<GetListResult<RecordType>>;\n\n    getOne: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: GetOneParams<RecordType> & QueryFunctionContext\n    ) => Promise<GetOneResult<RecordType>>;\n\n    getMany: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: GetManyParams<RecordType> & QueryFunctionContext\n    ) => Promise<GetManyResult<RecordType>>;\n\n    getManyReference: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: GetManyReferenceParams & QueryFunctionContext\n    ) => Promise<GetManyReferenceResult<RecordType>>;\n\n    update: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: UpdateParams\n    ) => Promise<UpdateResult<RecordType>>;\n\n    updateMany: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: UpdateManyParams\n    ) => Promise<UpdateManyResult<RecordType>>;\n\n    create: <\n        RecordType extends Omit<RaRecord, 'id'> = any,\n        ResultRecordType extends RaRecord = RecordType & { id: Identifier },\n    >(\n        resource: ResourceType,\n        params: CreateParams\n    ) => Promise<CreateResult<ResultRecordType>>;\n\n    delete: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: DeleteParams<RecordType>\n    ) => Promise<DeleteResult<RecordType>>;\n\n    deleteMany: <RecordType extends RaRecord = any>(\n        resource: ResourceType,\n        params: DeleteManyParams<RecordType>\n    ) => Promise<DeleteManyResult<RecordType>>;\n\n    [key: string]: any;\n    supportAbortSignal?: boolean;\n};\n\nexport interface QueryFunctionContext {\n    signal?: AbortSignal;\n}\n\nexport interface GetListParams {\n    pagination?: PaginationPayload;\n    sort?: SortPayload;\n    filter?: any;\n    meta?: any;\n    signal?: AbortSignal;\n}\nexport interface GetListResult<RecordType extends RaRecord = any> {\n    data: RecordType[];\n    total?: number;\n    pageInfo?: {\n        hasNextPage?: boolean;\n        hasPreviousPage?: boolean;\n    };\n}\n\nexport interface GetInfiniteListResult<RecordType extends RaRecord = any>\n    extends GetListResult<RecordType> {\n    pageParam: number;\n}\nexport interface GetOneParams<RecordType extends RaRecord = any> {\n    id: RecordType['id'];\n    meta?: any;\n    signal?: AbortSignal;\n}\nexport interface GetOneResult<RecordType extends RaRecord = any> {\n    data: RecordType;\n}\n\nexport interface GetManyParams<RecordType extends RaRecord = any> {\n    ids: RecordType['id'][];\n    meta?: any;\n    signal?: AbortSignal;\n}\nexport interface GetManyResult<RecordType extends RaRecord = any> {\n    data: RecordType[];\n}\n\nexport interface GetManyReferenceParams {\n    target: string;\n    id: Identifier;\n    pagination: PaginationPayload;\n    sort: SortPayload;\n    filter: any;\n    meta?: any;\n    signal?: AbortSignal;\n}\nexport interface GetManyReferenceResult<RecordType extends RaRecord = any> {\n    data: RecordType[];\n    total?: number;\n    pageInfo?: {\n        hasNextPage?: boolean;\n        hasPreviousPage?: boolean;\n    };\n}\n\nexport interface UpdateParams<RecordType extends RaRecord = any> {\n    id: RecordType['id'];\n    data: Partial<RecordType>;\n    previousData: RecordType;\n    meta?: any;\n}\nexport interface UpdateResult<RecordType extends RaRecord = any> {\n    data: RecordType;\n}\n\nexport interface UpdateManyParams<T = any> {\n    ids: Identifier[];\n    data: Partial<T>;\n    meta?: any;\n}\nexport interface UpdateManyResult<RecordType extends RaRecord = any> {\n    data?: RecordType['id'][];\n}\n\nexport interface CreateParams<T = any> {\n    data: Partial<T>;\n    meta?: any;\n}\nexport interface CreateResult<RecordType extends RaRecord = any> {\n    data: RecordType;\n}\n\nexport interface DeleteParams<RecordType extends RaRecord = any> {\n    id: RecordType['id'];\n    previousData?: RecordType;\n    meta?: any;\n}\nexport interface DeleteResult<RecordType extends RaRecord = any> {\n    data: RecordType;\n}\n\nexport interface DeleteManyParams<RecordType extends RaRecord = any> {\n    ids: RecordType['id'][];\n    meta?: any;\n}\nexport interface DeleteManyResult<RecordType extends RaRecord = any> {\n    data?: RecordType['id'][];\n}\n\nexport type DataProviderResult<RecordType extends RaRecord = any> =\n    | CreateResult<RecordType>\n    | DeleteResult<RecordType>\n    | DeleteManyResult\n    | GetListResult<RecordType>\n    | GetManyResult<RecordType>\n    | GetManyReferenceResult<RecordType>\n    | GetOneResult<RecordType>\n    | UpdateResult<RecordType>\n    | UpdateManyResult;\n\nexport type MutationMode = 'pessimistic' | 'optimistic' | 'undoable';\nexport type OnSuccess = (\n    response?: any,\n    variables?: any,\n    context?: any\n) => void;\n\nexport type OnError = (error?: any, variables?: any, context?: any) => void;\n\nexport type TransformData = (\n    data: any,\n    options?: { previousData: any }\n) => any | Promise<any>;\n\nexport interface UseDataProviderOptions {\n    action?: string;\n    fetch?: string;\n    meta?: object;\n    mutationMode?: MutationMode;\n    onSuccess?: OnSuccess;\n    onError?: OnError;\n    enabled?: boolean;\n}\n\nexport type LegacyDataProvider = (\n    type: string,\n    resource: string,\n    params: any\n) => Promise<any>;\n\nexport type RecordToStringFunction = (record: any) => string;\n\nexport interface ResourceDefinition<OptionsType extends ResourceOptions = any> {\n    readonly name: string;\n    readonly options?: OptionsType;\n    readonly hasList?: boolean;\n    readonly hasEdit?: boolean;\n    readonly hasShow?: boolean;\n    readonly hasCreate?: boolean;\n    readonly icon?: any;\n    readonly recordRepresentation?:\n        | ReactElement\n        | RecordToStringFunction\n        | string;\n}\n\n/**\n * Misc types\n */\n\nexport type Dispatch<T> = T extends (...args: infer A) => any\n    ? (...args: A) => void\n    : never;\n\nexport type ResourceElement = ReactElement<ResourceProps>;\nexport type RenderResourcesFunction = (permissions: any) =>\n    | ReactNode // (permissions) => <><Resource /><Resource /><Resource /></>\n    | Promise<ReactNode> // (permissions) => fetch().then(() => <><Resource /><Resource /><Resource /></>)\n    | ResourceElement[] // // (permissions) => [<Resource />, <Resource />, <Resource />]\n    | Promise<ResourceElement[]>; // (permissions) => fetch().then(() => [<Resource />, <Resource />, <Resource />])\nexport type AdminChildren =\n    | RenderResourcesFunction\n    | Iterable<ReactNode | RenderResourcesFunction>\n    | ReactNode;\n\nexport type TitleComponent = string | ReactElement<any>;\nexport type CatchAllComponent = ComponentType<{ title?: TitleComponent }>;\n\nexport type LoginComponent = ComponentType<{}> | ReactElement<any>;\nexport type DashboardComponent = ComponentType<WithPermissionsChildrenParams>;\n\nexport interface CoreLayoutProps {\n    children: ReactNode;\n}\n\nexport type LayoutComponent = ComponentType<CoreLayoutProps>;\nexport type LoadingComponent = ComponentType<{\n    loadingPrimary?: string;\n    loadingSecondary?: string;\n}>;\n\nexport interface ResourceComponentInjectedProps {\n    permissions?: any;\n    resource?: string;\n    options?: any;\n    hasList?: boolean;\n    hasEdit?: boolean;\n    hasShow?: boolean;\n    hasCreate?: boolean;\n}\n\nexport interface ResourceOptions {\n    label?: string;\n    [key: string]: any;\n}\n\nexport interface ResourceProps {\n    intent?: 'route' | 'registration';\n    name: string;\n    list?: ComponentType<any> | ReactElement;\n    create?: ComponentType<any> | ReactElement;\n    edit?: ComponentType<any> | ReactElement;\n    show?: ComponentType<any> | ReactElement;\n    hasCreate?: boolean;\n    hasEdit?: boolean;\n    hasShow?: boolean;\n    icon?: ComponentType<any>;\n    recordRepresentation?: ReactElement | RecordToStringFunction | string;\n    options?: ResourceOptions;\n    children?: ReactNode;\n}\n\nexport type Exporter<RecordType extends RaRecord = any> = (\n    data: RecordType[],\n    fetchRelatedRecords: FetchRelatedRecords,\n    dataProvider: DataProvider,\n    resource?: string\n) => void | Promise<void>;\n\nexport type FetchRelatedRecords = <RecordType = any>(\n    data: any[],\n    field: string,\n    resource: string\n) => Promise<{ [key: Identifier]: RecordType }>;\n\nexport type SetOnSave = (\n    onSave?: (values: object, redirect: any) => void\n) => void;\n\nexport type FormFunctions = {\n    setOnSave?: SetOnSave;\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA,QAAI,YAAY;AA6BhB,aAASA,OAAM,QAAQ,MAAM;AAC3B,aAAO,UAAU,OAAO,OAAO,UAAU,QAAQ,IAAI;AAAA,IACvD;AAEA,WAAO,UAAUA;AAAA;AAAA;;;ACjCjB;AAAA;AAAA,QAAI,YAAY;AAGhB,QAAI,kBAAkB;AAAtB,QACI,qBAAqB;AAoBzB,aAASC,WAAU,OAAO;AACxB,aAAO,UAAU,OAAO,kBAAkB,kBAAkB;AAAA,IAC9D;AAEA,WAAO,UAAUA;AAAA;AAAA;;;AC5BjB;AAAA;AAAA,QAAI,OAAO;AAkBX,QAAI,MAAM,WAAW;AACnB,aAAO,KAAK,KAAK,IAAI;AAAA,IACvB;AAEA,WAAO,UAAU;AAAA;AAAA;;;ACtBjB;AAAA;AACA,QAAI,eAAe;AAUnB,aAAS,gBAAgB,QAAQ;AAC/B,UAAI,QAAQ,OAAO;AAEnB,aAAO,WAAW,aAAa,KAAK,OAAO,OAAO,KAAK,CAAC,GAAG;AAAA,MAAC;AAC5D,aAAO;AAAA,IACT;AAEA,WAAO,UAAU;AAAA;AAAA;;;AClBjB;AAAA;AAAA,QAAI,kBAAkB;AAGtB,QAAI,cAAc;AASlB,aAAS,SAAS,QAAQ;AACxB,aAAO,SACH,OAAO,MAAM,GAAG,gBAAgB,MAAM,IAAI,CAAC,EAAE,QAAQ,aAAa,EAAE,IACpE;AAAA,IACN;AAEA,WAAO,UAAU;AAAA;AAAA;;;AClBjB;AAAA;AAAA,QAAI,WAAW;AAAf,QACIC,YAAW;AADf,QAEI,WAAW;AAGf,QAAI,MAAM,IAAI;AAGd,QAAI,aAAa;AAGjB,QAAI,aAAa;AAGjB,QAAI,YAAY;AAGhB,QAAI,eAAe;AAyBnB,aAAS,SAAS,OAAO;AACvB,UAAI,OAAO,SAAS,UAAU;AAC5B,eAAO;AAAA,MACT;AACA,UAAI,SAAS,KAAK,GAAG;AACnB,eAAO;AAAA,MACT;AACA,UAAIA,UAAS,KAAK,GAAG;AACnB,YAAI,QAAQ,OAAO,MAAM,WAAW,aAAa,MAAM,QAAQ,IAAI;AACnE,gBAAQA,UAAS,KAAK,IAAK,QAAQ,KAAM;AAAA,MAC3C;AACA,UAAI,OAAO,SAAS,UAAU;AAC5B,eAAO,UAAU,IAAI,QAAQ,CAAC;AAAA,MAChC;AACA,cAAQ,SAAS,KAAK;AACtB,UAAI,WAAW,WAAW,KAAK,KAAK;AACpC,aAAQ,YAAY,UAAU,KAAK,KAAK,IACpC,aAAa,MAAM,MAAM,CAAC,GAAG,WAAW,IAAI,CAAC,IAC5C,WAAW,KAAK,KAAK,IAAI,MAAM,CAAC;AAAA,IACvC;AAEA,WAAO,UAAU;AAAA;AAAA;;;AC/DjB;AAAA;AAAA,QAAIC,YAAW;AAAf,QACI,MAAM;AADV,QAEI,WAAW;AAGf,QAAI,kBAAkB;AAGtB,QAAI,YAAY,KAAK;AAArB,QACI,YAAY,KAAK;AAwDrB,aAASC,UAAS,MAAM,MAAM,SAAS;AACrC,UAAI,UACA,UACA,SACA,QACA,SACA,cACA,iBAAiB,GACjB,UAAU,OACV,SAAS,OACT,WAAW;AAEf,UAAI,OAAO,QAAQ,YAAY;AAC7B,cAAM,IAAI,UAAU,eAAe;AAAA,MACrC;AACA,aAAO,SAAS,IAAI,KAAK;AACzB,UAAID,UAAS,OAAO,GAAG;AACrB,kBAAU,CAAC,CAAC,QAAQ;AACpB,iBAAS,aAAa;AACtB,kBAAU,SAAS,UAAU,SAAS,QAAQ,OAAO,KAAK,GAAG,IAAI,IAAI;AACrE,mBAAW,cAAc,UAAU,CAAC,CAAC,QAAQ,WAAW;AAAA,MAC1D;AAEA,eAAS,WAAW,MAAM;AACxB,YAAI,OAAO,UACP,UAAU;AAEd,mBAAW,WAAW;AACtB,yBAAiB;AACjB,iBAAS,KAAK,MAAM,SAAS,IAAI;AACjC,eAAO;AAAA,MACT;AAEA,eAAS,YAAY,MAAM;AAEzB,yBAAiB;AAEjB,kBAAU,WAAW,cAAc,IAAI;AAEvC,eAAO,UAAU,WAAW,IAAI,IAAI;AAAA,MACtC;AAEA,eAAS,cAAc,MAAM;AAC3B,YAAI,oBAAoB,OAAO,cAC3B,sBAAsB,OAAO,gBAC7B,cAAc,OAAO;AAEzB,eAAO,SACH,UAAU,aAAa,UAAU,mBAAmB,IACpD;AAAA,MACN;AAEA,eAAS,aAAa,MAAM;AAC1B,YAAI,oBAAoB,OAAO,cAC3B,sBAAsB,OAAO;AAKjC,eAAQ,iBAAiB,UAAc,qBAAqB,QACzD,oBAAoB,KAAO,UAAU,uBAAuB;AAAA,MACjE;AAEA,eAAS,eAAe;AACtB,YAAI,OAAO,IAAI;AACf,YAAI,aAAa,IAAI,GAAG;AACtB,iBAAO,aAAa,IAAI;AAAA,QAC1B;AAEA,kBAAU,WAAW,cAAc,cAAc,IAAI,CAAC;AAAA,MACxD;AAEA,eAAS,aAAa,MAAM;AAC1B,kBAAU;AAIV,YAAI,YAAY,UAAU;AACxB,iBAAO,WAAW,IAAI;AAAA,QACxB;AACA,mBAAW,WAAW;AACtB,eAAO;AAAA,MACT;AAEA,eAAS,SAAS;AAChB,YAAI,YAAY,QAAW;AACzB,uBAAa,OAAO;AAAA,QACtB;AACA,yBAAiB;AACjB,mBAAW,eAAe,WAAW,UAAU;AAAA,MACjD;AAEA,eAAS,QAAQ;AACf,eAAO,YAAY,SAAY,SAAS,aAAa,IAAI,CAAC;AAAA,MAC5D;AAEA,eAAS,YAAY;AACnB,YAAI,OAAO,IAAI,GACX,aAAa,aAAa,IAAI;AAElC,mBAAW;AACX,mBAAW;AACX,uBAAe;AAEf,YAAI,YAAY;AACd,cAAI,YAAY,QAAW;AACzB,mBAAO,YAAY,YAAY;AAAA,UACjC;AACA,cAAI,QAAQ;AAEV,yBAAa,OAAO;AACpB,sBAAU,WAAW,cAAc,IAAI;AACvC,mBAAO,WAAW,YAAY;AAAA,UAChC;AAAA,QACF;AACA,YAAI,YAAY,QAAW;AACzB,oBAAU,WAAW,cAAc,IAAI;AAAA,QACzC;AACA,eAAO;AAAA,MACT;AACA,gBAAU,SAAS;AACnB,gBAAU,QAAQ;AAClB,aAAO;AAAA,IACT;AAEA,WAAO,UAAUC;AAAA;AAAA;;;AC9LjB;AAAA;AAAA;AACA,WAAO,UAAU,SAAO,mBAAmB,GAAG,EAAE,QAAQ,YAAY,OAAK,IAAI,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,EAAE,YAAY,CAAC,EAAE;AAAA;AAAA;;;ACDzH;AAAA;AAAA;AACA,QAAI,QAAQ;AACZ,QAAI,gBAAgB,IAAI,OAAO,MAAM,QAAQ,cAAc,IAAI;AAC/D,QAAI,eAAe,IAAI,OAAO,MAAM,QAAQ,MAAM,IAAI;AAEtD,aAAS,iBAAiB,YAAY,OAAO;AAC5C,UAAI;AAEH,eAAO,CAAC,mBAAmB,WAAW,KAAK,EAAE,CAAC,CAAC;AAAA,MAChD,SAAS,KAAK;AAAA,MAEd;AAEA,UAAI,WAAW,WAAW,GAAG;AAC5B,eAAO;AAAA,MACR;AAEA,cAAQ,SAAS;AAGjB,UAAI,OAAO,WAAW,MAAM,GAAG,KAAK;AACpC,UAAI,QAAQ,WAAW,MAAM,KAAK;AAElC,aAAO,MAAM,UAAU,OAAO,KAAK,CAAC,GAAG,iBAAiB,IAAI,GAAG,iBAAiB,KAAK,CAAC;AAAA,IACvF;AAEA,aAAS,OAAO,OAAO;AACtB,UAAI;AACH,eAAO,mBAAmB,KAAK;AAAA,MAChC,SAAS,KAAK;AACb,YAAI,SAAS,MAAM,MAAM,aAAa,KAAK,CAAC;AAE5C,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACvC,kBAAQ,iBAAiB,QAAQ,CAAC,EAAE,KAAK,EAAE;AAE3C,mBAAS,MAAM,MAAM,aAAa,KAAK,CAAC;AAAA,QACzC;AAEA,eAAO;AAAA,MACR;AAAA,IACD;AAEA,aAAS,yBAAyB,OAAO;AAExC,UAAI,aAAa;AAAA,QAChB,UAAU;AAAA,QACV,UAAU;AAAA,MACX;AAEA,UAAI,QAAQ,aAAa,KAAK,KAAK;AACnC,aAAO,OAAO;AACb,YAAI;AAEH,qBAAW,MAAM,CAAC,CAAC,IAAI,mBAAmB,MAAM,CAAC,CAAC;AAAA,QACnD,SAAS,KAAK;AACb,cAAI,SAAS,OAAO,MAAM,CAAC,CAAC;AAE5B,cAAI,WAAW,MAAM,CAAC,GAAG;AACxB,uBAAW,MAAM,CAAC,CAAC,IAAI;AAAA,UACxB;AAAA,QACD;AAEA,gBAAQ,aAAa,KAAK,KAAK;AAAA,MAChC;AAGA,iBAAW,KAAK,IAAI;AAEpB,UAAI,UAAU,OAAO,KAAK,UAAU;AAEpC,eAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AAExC,YAAI,MAAM,QAAQ,CAAC;AACnB,gBAAQ,MAAM,QAAQ,IAAI,OAAO,KAAK,GAAG,GAAG,WAAW,GAAG,CAAC;AAAA,MAC5D;AAEA,aAAO;AAAA,IACR;AAEA,WAAO,UAAU,SAAU,YAAY;AACtC,UAAI,OAAO,eAAe,UAAU;AACnC,cAAM,IAAI,UAAU,wDAAwD,OAAO,aAAa,GAAG;AAAA,MACpG;AAEA,UAAI;AACH,qBAAa,WAAW,QAAQ,OAAO,GAAG;AAG1C,eAAO,mBAAmB,UAAU;AAAA,MACrC,SAAS,KAAK;AAEb,eAAO,yBAAyB,UAAU;AAAA,MAC3C;AAAA,IACD;AAAA;AAAA;;;AC7FA;AAAA;AAAA;AAEA,WAAO,UAAU,CAAC,QAAQ,cAAc;AACvC,UAAI,EAAE,OAAO,WAAW,YAAY,OAAO,cAAc,WAAW;AACnE,cAAM,IAAI,UAAU,+CAA+C;AAAA,MACpE;AAEA,UAAI,cAAc,IAAI;AACrB,eAAO,CAAC,MAAM;AAAA,MACf;AAEA,YAAM,iBAAiB,OAAO,QAAQ,SAAS;AAE/C,UAAI,mBAAmB,IAAI;AAC1B,eAAO,CAAC,MAAM;AAAA,MACf;AAEA,aAAO;AAAA,QACN,OAAO,MAAM,GAAG,cAAc;AAAA,QAC9B,OAAO,MAAM,iBAAiB,UAAU,MAAM;AAAA,MAC/C;AAAA,IACD;AAAA;AAAA;;;ACrBA;AAAA;AAAA;AACA,WAAO,UAAU,SAAU,KAAK,WAAW;AAC1C,UAAI,MAAM,CAAC;AACX,UAAI,OAAO,OAAO,KAAK,GAAG;AAC1B,UAAI,QAAQ,MAAM,QAAQ,SAAS;AAEnC,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACrC,YAAI,MAAM,KAAK,CAAC;AAChB,YAAI,MAAM,IAAI,GAAG;AAEjB,YAAI,QAAQ,UAAU,QAAQ,GAAG,MAAM,KAAK,UAAU,KAAK,KAAK,GAAG,GAAG;AACrE,cAAI,GAAG,IAAI;AAAA,QACZ;AAAA,MACD;AAEA,aAAO;AAAA,IACR;AAAA;AAAA;;;AChBA;AAAA;AAAA;AACA,QAAM,kBAAkB;AACxB,QAAM,kBAAkB;AACxB,QAAM,eAAe;AACrB,QAAM,eAAe;AAErB,QAAM,oBAAoB,WAAS,UAAU,QAAQ,UAAU;AAE/D,QAAM,2BAA2B,OAAO,0BAA0B;AAElE,aAAS,sBAAsB,SAAS;AACvC,cAAQ,QAAQ,aAAa;AAAA,QAC5B,KAAK;AACJ,iBAAO,SAAO,CAAC,QAAQ,UAAU;AAChC,kBAAM,QAAQ,OAAO;AAErB,gBACC,UAAU,UACT,QAAQ,YAAY,UAAU,QAC9B,QAAQ,mBAAmB,UAAU,IACrC;AACD,qBAAO;AAAA,YACR;AAEA,gBAAI,UAAU,MAAM;AACnB,qBAAO,CAAC,GAAG,QAAQ,CAAC,OAAO,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,EAAE,KAAK,EAAE,CAAC;AAAA,YACpE;AAEA,mBAAO;AAAA,cACN,GAAG;AAAA,cACH,CAAC,OAAO,KAAK,OAAO,GAAG,KAAK,OAAO,OAAO,OAAO,GAAG,MAAM,OAAO,OAAO,OAAO,CAAC,EAAE,KAAK,EAAE;AAAA,YAC1F;AAAA,UACD;AAAA,QAED,KAAK;AACJ,iBAAO,SAAO,CAAC,QAAQ,UAAU;AAChC,gBACC,UAAU,UACT,QAAQ,YAAY,UAAU,QAC9B,QAAQ,mBAAmB,UAAU,IACrC;AACD,qBAAO;AAAA,YACR;AAEA,gBAAI,UAAU,MAAM;AACnB,qBAAO,CAAC,GAAG,QAAQ,CAAC,OAAO,KAAK,OAAO,GAAG,IAAI,EAAE,KAAK,EAAE,CAAC;AAAA,YACzD;AAEA,mBAAO,CAAC,GAAG,QAAQ,CAAC,OAAO,KAAK,OAAO,GAAG,OAAO,OAAO,OAAO,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA,UAClF;AAAA,QAED,KAAK;AACJ,iBAAO,SAAO,CAAC,QAAQ,UAAU;AAChC,gBACC,UAAU,UACT,QAAQ,YAAY,UAAU,QAC9B,QAAQ,mBAAmB,UAAU,IACrC;AACD,qBAAO;AAAA,YACR;AAEA,gBAAI,UAAU,MAAM;AACnB,qBAAO,CAAC,GAAG,QAAQ,CAAC,OAAO,KAAK,OAAO,GAAG,QAAQ,EAAE,KAAK,EAAE,CAAC;AAAA,YAC7D;AAEA,mBAAO,CAAC,GAAG,QAAQ,CAAC,OAAO,KAAK,OAAO,GAAG,UAAU,OAAO,OAAO,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA,UACrF;AAAA,QAED,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK,qBAAqB;AACzB,gBAAM,cAAc,QAAQ,gBAAgB,sBAC3C,QACA;AAED,iBAAO,SAAO,CAAC,QAAQ,UAAU;AAChC,gBACC,UAAU,UACT,QAAQ,YAAY,UAAU,QAC9B,QAAQ,mBAAmB,UAAU,IACrC;AACD,qBAAO;AAAA,YACR;AAGA,oBAAQ,UAAU,OAAO,KAAK;AAE9B,gBAAI,OAAO,WAAW,GAAG;AACxB,qBAAO,CAAC,CAAC,OAAO,KAAK,OAAO,GAAG,aAAa,OAAO,OAAO,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA,YAC7E;AAEA,mBAAO,CAAC,CAAC,QAAQ,OAAO,OAAO,OAAO,CAAC,EAAE,KAAK,QAAQ,oBAAoB,CAAC;AAAA,UAC5E;AAAA,QACD;AAAA,QAEA;AACC,iBAAO,SAAO,CAAC,QAAQ,UAAU;AAChC,gBACC,UAAU,UACT,QAAQ,YAAY,UAAU,QAC9B,QAAQ,mBAAmB,UAAU,IACrC;AACD,qBAAO;AAAA,YACR;AAEA,gBAAI,UAAU,MAAM;AACnB,qBAAO,CAAC,GAAG,QAAQ,OAAO,KAAK,OAAO,CAAC;AAAA,YACxC;AAEA,mBAAO,CAAC,GAAG,QAAQ,CAAC,OAAO,KAAK,OAAO,GAAG,KAAK,OAAO,OAAO,OAAO,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA,UAChF;AAAA,MACF;AAAA,IACD;AAEA,aAAS,qBAAqB,SAAS;AACtC,UAAI;AAEJ,cAAQ,QAAQ,aAAa;AAAA,QAC5B,KAAK;AACJ,iBAAO,CAAC,KAAK,OAAO,gBAAgB;AACnC,qBAAS,aAAa,KAAK,GAAG;AAE9B,kBAAM,IAAI,QAAQ,YAAY,EAAE;AAEhC,gBAAI,CAAC,QAAQ;AACZ,0BAAY,GAAG,IAAI;AACnB;AAAA,YACD;AAEA,gBAAI,YAAY,GAAG,MAAM,QAAW;AACnC,0BAAY,GAAG,IAAI,CAAC;AAAA,YACrB;AAEA,wBAAY,GAAG,EAAE,OAAO,CAAC,CAAC,IAAI;AAAA,UAC/B;AAAA,QAED,KAAK;AACJ,iBAAO,CAAC,KAAK,OAAO,gBAAgB;AACnC,qBAAS,UAAU,KAAK,GAAG;AAC3B,kBAAM,IAAI,QAAQ,SAAS,EAAE;AAE7B,gBAAI,CAAC,QAAQ;AACZ,0BAAY,GAAG,IAAI;AACnB;AAAA,YACD;AAEA,gBAAI,YAAY,GAAG,MAAM,QAAW;AACnC,0BAAY,GAAG,IAAI,CAAC,KAAK;AACzB;AAAA,YACD;AAEA,wBAAY,GAAG,IAAI,CAAC,EAAE,OAAO,YAAY,GAAG,GAAG,KAAK;AAAA,UACrD;AAAA,QAED,KAAK;AACJ,iBAAO,CAAC,KAAK,OAAO,gBAAgB;AACnC,qBAAS,WAAW,KAAK,GAAG;AAC5B,kBAAM,IAAI,QAAQ,UAAU,EAAE;AAE9B,gBAAI,CAAC,QAAQ;AACZ,0BAAY,GAAG,IAAI;AACnB;AAAA,YACD;AAEA,gBAAI,YAAY,GAAG,MAAM,QAAW;AACnC,0BAAY,GAAG,IAAI,CAAC,KAAK;AACzB;AAAA,YACD;AAEA,wBAAY,GAAG,IAAI,CAAC,EAAE,OAAO,YAAY,GAAG,GAAG,KAAK;AAAA,UACrD;AAAA,QAED,KAAK;AAAA,QACL,KAAK;AACJ,iBAAO,CAAC,KAAK,OAAO,gBAAgB;AACnC,kBAAMC,WAAU,OAAO,UAAU,YAAY,MAAM,SAAS,QAAQ,oBAAoB;AACxF,kBAAM,iBAAkB,OAAO,UAAU,YAAY,CAACA,YAAW,OAAO,OAAO,OAAO,EAAE,SAAS,QAAQ,oBAAoB;AAC7H,oBAAQ,iBAAiB,OAAO,OAAO,OAAO,IAAI;AAClD,kBAAM,WAAWA,YAAW,iBAAiB,MAAM,MAAM,QAAQ,oBAAoB,EAAE,IAAI,UAAQ,OAAO,MAAM,OAAO,CAAC,IAAI,UAAU,OAAO,QAAQ,OAAO,OAAO,OAAO;AAC1K,wBAAY,GAAG,IAAI;AAAA,UACpB;AAAA,QAED,KAAK;AACJ,iBAAO,CAAC,KAAK,OAAO,gBAAgB;AACnC,kBAAMA,WAAU,UAAU,KAAK,GAAG;AAClC,kBAAM,IAAI,QAAQ,SAAS,EAAE;AAE7B,gBAAI,CAACA,UAAS;AACb,0BAAY,GAAG,IAAI,QAAQ,OAAO,OAAO,OAAO,IAAI;AACpD;AAAA,YACD;AAEA,kBAAM,aAAa,UAAU,OAC5B,CAAC,IACD,MAAM,MAAM,QAAQ,oBAAoB,EAAE,IAAI,UAAQ,OAAO,MAAM,OAAO,CAAC;AAE5E,gBAAI,YAAY,GAAG,MAAM,QAAW;AACnC,0BAAY,GAAG,IAAI;AACnB;AAAA,YACD;AAEA,wBAAY,GAAG,IAAI,CAAC,EAAE,OAAO,YAAY,GAAG,GAAG,UAAU;AAAA,UAC1D;AAAA,QAED;AACC,iBAAO,CAAC,KAAK,OAAO,gBAAgB;AACnC,gBAAI,YAAY,GAAG,MAAM,QAAW;AACnC,0BAAY,GAAG,IAAI;AACnB;AAAA,YACD;AAEA,wBAAY,GAAG,IAAI,CAAC,EAAE,OAAO,YAAY,GAAG,GAAG,KAAK;AAAA,UACrD;AAAA,MACF;AAAA,IACD;AAEA,aAAS,6BAA6B,OAAO;AAC5C,UAAI,OAAO,UAAU,YAAY,MAAM,WAAW,GAAG;AACpD,cAAM,IAAI,UAAU,sDAAsD;AAAA,MAC3E;AAAA,IACD;AAEA,aAAS,OAAO,OAAO,SAAS;AAC/B,UAAI,QAAQ,QAAQ;AACnB,eAAO,QAAQ,SAAS,gBAAgB,KAAK,IAAI,mBAAmB,KAAK;AAAA,MAC1E;AAEA,aAAO;AAAA,IACR;AAEA,aAAS,OAAO,OAAO,SAAS;AAC/B,UAAI,QAAQ,QAAQ;AACnB,eAAO,gBAAgB,KAAK;AAAA,MAC7B;AAEA,aAAO;AAAA,IACR;AAEA,aAAS,WAAW,OAAO;AAC1B,UAAI,MAAM,QAAQ,KAAK,GAAG;AACzB,eAAO,MAAM,KAAK;AAAA,MACnB;AAEA,UAAI,OAAO,UAAU,UAAU;AAC9B,eAAO,WAAW,OAAO,KAAK,KAAK,CAAC,EAClC,KAAK,CAAC,GAAG,MAAM,OAAO,CAAC,IAAI,OAAO,CAAC,CAAC,EACpC,IAAI,SAAO,MAAM,GAAG,CAAC;AAAA,MACxB;AAEA,aAAO;AAAA,IACR;AAEA,aAAS,WAAW,OAAO;AAC1B,YAAM,YAAY,MAAM,QAAQ,GAAG;AACnC,UAAI,cAAc,IAAI;AACrB,gBAAQ,MAAM,MAAM,GAAG,SAAS;AAAA,MACjC;AAEA,aAAO;AAAA,IACR;AAEA,aAAS,QAAQ,KAAK;AACrB,UAAIC,QAAO;AACX,YAAM,YAAY,IAAI,QAAQ,GAAG;AACjC,UAAI,cAAc,IAAI;AACrB,QAAAA,QAAO,IAAI,MAAM,SAAS;AAAA,MAC3B;AAEA,aAAOA;AAAA,IACR;AAEA,aAAS,QAAQ,OAAO;AACvB,cAAQ,WAAW,KAAK;AACxB,YAAM,aAAa,MAAM,QAAQ,GAAG;AACpC,UAAI,eAAe,IAAI;AACtB,eAAO;AAAA,MACR;AAEA,aAAO,MAAM,MAAM,aAAa,CAAC;AAAA,IAClC;AAEA,aAAS,WAAW,OAAO,SAAS;AACnC,UAAI,QAAQ,gBAAgB,CAAC,OAAO,MAAM,OAAO,KAAK,CAAC,MAAM,OAAO,UAAU,YAAY,MAAM,KAAK,MAAM,KAAK;AAC/G,gBAAQ,OAAO,KAAK;AAAA,MACrB,WAAW,QAAQ,iBAAiB,UAAU,SAAS,MAAM,YAAY,MAAM,UAAU,MAAM,YAAY,MAAM,UAAU;AAC1H,gBAAQ,MAAM,YAAY,MAAM;AAAA,MACjC;AAEA,aAAO;AAAA,IACR;AAEA,aAASC,OAAM,OAAO,SAAS;AAC9B,gBAAU,OAAO,OAAO;AAAA,QACvB,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,aAAa;AAAA,QACb,sBAAsB;AAAA,QACtB,cAAc;AAAA,QACd,eAAe;AAAA,MAChB,GAAG,OAAO;AAEV,mCAA6B,QAAQ,oBAAoB;AAEzD,YAAM,YAAY,qBAAqB,OAAO;AAG9C,YAAM,MAAM,uBAAO,OAAO,IAAI;AAE9B,UAAI,OAAO,UAAU,UAAU;AAC9B,eAAO;AAAA,MACR;AAEA,cAAQ,MAAM,KAAK,EAAE,QAAQ,UAAU,EAAE;AAEzC,UAAI,CAAC,OAAO;AACX,eAAO;AAAA,MACR;AAEA,iBAAW,SAAS,MAAM,MAAM,GAAG,GAAG;AACrC,YAAI,UAAU,IAAI;AACjB;AAAA,QACD;AAEA,YAAI,CAAC,KAAK,KAAK,IAAI,aAAa,QAAQ,SAAS,MAAM,QAAQ,OAAO,GAAG,IAAI,OAAO,GAAG;AAIvF,gBAAQ,UAAU,SAAY,OAAO,CAAC,SAAS,aAAa,mBAAmB,EAAE,SAAS,QAAQ,WAAW,IAAI,QAAQ,OAAO,OAAO,OAAO;AAC9I,kBAAU,OAAO,KAAK,OAAO,GAAG,OAAO,GAAG;AAAA,MAC3C;AAEA,iBAAW,OAAO,OAAO,KAAK,GAAG,GAAG;AACnC,cAAM,QAAQ,IAAI,GAAG;AACrB,YAAI,OAAO,UAAU,YAAY,UAAU,MAAM;AAChD,qBAAW,KAAK,OAAO,KAAK,KAAK,GAAG;AACnC,kBAAM,CAAC,IAAI,WAAW,MAAM,CAAC,GAAG,OAAO;AAAA,UACxC;AAAA,QACD,OAAO;AACN,cAAI,GAAG,IAAI,WAAW,OAAO,OAAO;AAAA,QACrC;AAAA,MACD;AAEA,UAAI,QAAQ,SAAS,OAAO;AAC3B,eAAO;AAAA,MACR;AAEA,cAAQ,QAAQ,SAAS,OAAO,OAAO,KAAK,GAAG,EAAE,KAAK,IAAI,OAAO,KAAK,GAAG,EAAE,KAAK,QAAQ,IAAI,GAAG,OAAO,CAAC,QAAQ,QAAQ;AACtH,cAAM,QAAQ,IAAI,GAAG;AACrB,YAAI,QAAQ,KAAK,KAAK,OAAO,UAAU,YAAY,CAAC,MAAM,QAAQ,KAAK,GAAG;AAEzE,iBAAO,GAAG,IAAI,WAAW,KAAK;AAAA,QAC/B,OAAO;AACN,iBAAO,GAAG,IAAI;AAAA,QACf;AAEA,eAAO;AAAA,MACR,GAAG,uBAAO,OAAO,IAAI,CAAC;AAAA,IACvB;AAEA,YAAQ,UAAU;AAClB,YAAQ,QAAQA;AAEhB,YAAQ,YAAY,CAAC,QAAQ,YAAY;AACxC,UAAI,CAAC,QAAQ;AACZ,eAAO;AAAA,MACR;AAEA,gBAAU,OAAO,OAAO;AAAA,QACvB,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,aAAa;AAAA,QACb,sBAAsB;AAAA,MACvB,GAAG,OAAO;AAEV,mCAA6B,QAAQ,oBAAoB;AAEzD,YAAM,eAAe,SACnB,QAAQ,YAAY,kBAAkB,OAAO,GAAG,CAAC,KACjD,QAAQ,mBAAmB,OAAO,GAAG,MAAM;AAG7C,YAAM,YAAY,sBAAsB,OAAO;AAE/C,YAAM,aAAa,CAAC;AAEpB,iBAAW,OAAO,OAAO,KAAK,MAAM,GAAG;AACtC,YAAI,CAAC,aAAa,GAAG,GAAG;AACvB,qBAAW,GAAG,IAAI,OAAO,GAAG;AAAA,QAC7B;AAAA,MACD;AAEA,YAAM,OAAO,OAAO,KAAK,UAAU;AAEnC,UAAI,QAAQ,SAAS,OAAO;AAC3B,aAAK,KAAK,QAAQ,IAAI;AAAA,MACvB;AAEA,aAAO,KAAK,IAAI,SAAO;AACtB,cAAM,QAAQ,OAAO,GAAG;AAExB,YAAI,UAAU,QAAW;AACxB,iBAAO;AAAA,QACR;AAEA,YAAI,UAAU,MAAM;AACnB,iBAAO,OAAO,KAAK,OAAO;AAAA,QAC3B;AAEA,YAAI,MAAM,QAAQ,KAAK,GAAG;AACzB,cAAI,MAAM,WAAW,KAAK,QAAQ,gBAAgB,qBAAqB;AACtE,mBAAO,OAAO,KAAK,OAAO,IAAI;AAAA,UAC/B;AAEA,iBAAO,MACL,OAAO,UAAU,GAAG,GAAG,CAAC,CAAC,EACzB,KAAK,GAAG;AAAA,QACX;AAEA,eAAO,OAAO,KAAK,OAAO,IAAI,MAAM,OAAO,OAAO,OAAO;AAAA,MAC1D,CAAC,EAAE,OAAO,OAAK,EAAE,SAAS,CAAC,EAAE,KAAK,GAAG;AAAA,IACtC;AAEA,YAAQ,WAAW,CAAC,KAAK,YAAY;AACpC,gBAAU,OAAO,OAAO;AAAA,QACvB,QAAQ;AAAA,MACT,GAAG,OAAO;AAEV,YAAM,CAAC,MAAMD,KAAI,IAAI,aAAa,KAAK,GAAG;AAE1C,aAAO,OAAO;AAAA,QACb;AAAA,UACC,KAAK,KAAK,MAAM,GAAG,EAAE,CAAC,KAAK;AAAA,UAC3B,OAAOC,OAAM,QAAQ,GAAG,GAAG,OAAO;AAAA,QACnC;AAAA,QACA,WAAW,QAAQ,2BAA2BD,QAAO,EAAC,oBAAoB,OAAOA,OAAM,OAAO,EAAC,IAAI,CAAC;AAAA,MACrG;AAAA,IACD;AAEA,YAAQ,eAAe,CAAC,QAAQ,YAAY;AAC3C,gBAAU,OAAO,OAAO;AAAA,QACvB,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,CAAC,wBAAwB,GAAG;AAAA,MAC7B,GAAG,OAAO;AAEV,YAAM,MAAM,WAAW,OAAO,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC,KAAK;AACpD,YAAM,eAAe,QAAQ,QAAQ,OAAO,GAAG;AAC/C,YAAM,qBAAqB,QAAQ,MAAM,cAAc,EAAC,MAAM,MAAK,CAAC;AAEpE,YAAM,QAAQ,OAAO,OAAO,oBAAoB,OAAO,KAAK;AAC5D,UAAI,cAAc,QAAQ,UAAU,OAAO,OAAO;AAClD,UAAI,aAAa;AAChB,sBAAc,IAAI,WAAW;AAAA,MAC9B;AAEA,UAAIA,QAAO,QAAQ,OAAO,GAAG;AAC7B,UAAI,OAAO,oBAAoB;AAC9B,QAAAA,QAAO,IAAI,QAAQ,wBAAwB,IAAI,OAAO,OAAO,oBAAoB,OAAO,IAAI,OAAO,kBAAkB;AAAA,MACtH;AAEA,aAAO,GAAG,GAAG,GAAG,WAAW,GAAGA,KAAI;AAAA,IACnC;AAEA,YAAQ,OAAO,CAAC,OAAO,QAAQ,YAAY;AAC1C,gBAAU,OAAO,OAAO;AAAA,QACvB,yBAAyB;AAAA,QACzB,CAAC,wBAAwB,GAAG;AAAA,MAC7B,GAAG,OAAO;AAEV,YAAM,EAAC,KAAK,OAAO,mBAAkB,IAAI,QAAQ,SAAS,OAAO,OAAO;AACxE,aAAO,QAAQ,aAAa;AAAA,QAC3B;AAAA,QACA,OAAO,aAAa,OAAO,MAAM;AAAA,QACjC;AAAA,MACD,GAAG,OAAO;AAAA,IACX;AAEA,YAAQ,UAAU,CAAC,OAAO,QAAQ,YAAY;AAC7C,YAAM,kBAAkB,MAAM,QAAQ,MAAM,IAAI,SAAO,CAAC,OAAO,SAAS,GAAG,IAAI,CAAC,KAAK,UAAU,CAAC,OAAO,KAAK,KAAK;AAEjH,aAAO,QAAQ,KAAK,OAAO,iBAAiB,OAAO;AAAA,IACpD;AAAA;AAAA;;;ACjeA;AAAA;AAAA;AAEA,QAAI,MAAM,OAAO,UAAU;AAA3B,QACI,SAAS;AASb,aAAS,SAAS;AAAA,IAAC;AASnB,QAAI,OAAO,QAAQ;AACjB,aAAO,YAAY,uBAAO,OAAO,IAAI;AAMrC,UAAI,CAAC,IAAI,OAAO,EAAE,UAAW,UAAS;AAAA,IACxC;AAWA,aAAS,GAAG,IAAI,SAAS,MAAM;AAC7B,WAAK,KAAK;AACV,WAAK,UAAU;AACf,WAAK,OAAO,QAAQ;AAAA,IACtB;AAaA,aAAS,YAAY,SAAS,OAAO,IAAI,SAAS,MAAM;AACtD,UAAI,OAAO,OAAO,YAAY;AAC5B,cAAM,IAAI,UAAU,iCAAiC;AAAA,MACvD;AAEA,UAAI,WAAW,IAAI,GAAG,IAAI,WAAW,SAAS,IAAI,GAC9C,MAAM,SAAS,SAAS,QAAQ;AAEpC,UAAI,CAAC,QAAQ,QAAQ,GAAG,EAAG,SAAQ,QAAQ,GAAG,IAAI,UAAU,QAAQ;AAAA,eAC3D,CAAC,QAAQ,QAAQ,GAAG,EAAE,GAAI,SAAQ,QAAQ,GAAG,EAAE,KAAK,QAAQ;AAAA,UAChE,SAAQ,QAAQ,GAAG,IAAI,CAAC,QAAQ,QAAQ,GAAG,GAAG,QAAQ;AAE3D,aAAO;AAAA,IACT;AASA,aAAS,WAAW,SAAS,KAAK;AAChC,UAAI,EAAE,QAAQ,iBAAiB,EAAG,SAAQ,UAAU,IAAI,OAAO;AAAA,UAC1D,QAAO,QAAQ,QAAQ,GAAG;AAAA,IACjC;AASA,aAASE,gBAAe;AACtB,WAAK,UAAU,IAAI,OAAO;AAC1B,WAAK,eAAe;AAAA,IACtB;AASA,IAAAA,cAAa,UAAU,aAAa,SAAS,aAAa;AACxD,UAAI,QAAQ,CAAC,GACT,QACA;AAEJ,UAAI,KAAK,iBAAiB,EAAG,QAAO;AAEpC,WAAK,QAAS,SAAS,KAAK,SAAU;AACpC,YAAI,IAAI,KAAK,QAAQ,IAAI,EAAG,OAAM,KAAK,SAAS,KAAK,MAAM,CAAC,IAAI,IAAI;AAAA,MACtE;AAEA,UAAI,OAAO,uBAAuB;AAChC,eAAO,MAAM,OAAO,OAAO,sBAAsB,MAAM,CAAC;AAAA,MAC1D;AAEA,aAAO;AAAA,IACT;AASA,IAAAA,cAAa,UAAU,YAAY,SAAS,UAAU,OAAO;AAC3D,UAAI,MAAM,SAAS,SAAS,QAAQ,OAChC,WAAW,KAAK,QAAQ,GAAG;AAE/B,UAAI,CAAC,SAAU,QAAO,CAAC;AACvB,UAAI,SAAS,GAAI,QAAO,CAAC,SAAS,EAAE;AAEpC,eAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK,IAAI,MAAM,CAAC,GAAG,IAAI,GAAG,KAAK;AAClE,WAAG,CAAC,IAAI,SAAS,CAAC,EAAE;AAAA,MACtB;AAEA,aAAO;AAAA,IACT;AASA,IAAAA,cAAa,UAAU,gBAAgB,SAAS,cAAc,OAAO;AACnE,UAAI,MAAM,SAAS,SAAS,QAAQ,OAChC,YAAY,KAAK,QAAQ,GAAG;AAEhC,UAAI,CAAC,UAAW,QAAO;AACvB,UAAI,UAAU,GAAI,QAAO;AACzB,aAAO,UAAU;AAAA,IACnB;AASA,IAAAA,cAAa,UAAU,OAAO,SAAS,KAAK,OAAO,IAAI,IAAI,IAAI,IAAI,IAAI;AACrE,UAAI,MAAM,SAAS,SAAS,QAAQ;AAEpC,UAAI,CAAC,KAAK,QAAQ,GAAG,EAAG,QAAO;AAE/B,UAAI,YAAY,KAAK,QAAQ,GAAG,GAC5B,MAAM,UAAU,QAChB,MACA;AAEJ,UAAI,UAAU,IAAI;AAChB,YAAI,UAAU,KAAM,MAAK,eAAe,OAAO,UAAU,IAAI,QAAW,IAAI;AAE5E,gBAAQ,KAAK;AAAA,UACX,KAAK;AAAG,mBAAO,UAAU,GAAG,KAAK,UAAU,OAAO,GAAG;AAAA,UACrD,KAAK;AAAG,mBAAO,UAAU,GAAG,KAAK,UAAU,SAAS,EAAE,GAAG;AAAA,UACzD,KAAK;AAAG,mBAAO,UAAU,GAAG,KAAK,UAAU,SAAS,IAAI,EAAE,GAAG;AAAA,UAC7D,KAAK;AAAG,mBAAO,UAAU,GAAG,KAAK,UAAU,SAAS,IAAI,IAAI,EAAE,GAAG;AAAA,UACjE,KAAK;AAAG,mBAAO,UAAU,GAAG,KAAK,UAAU,SAAS,IAAI,IAAI,IAAI,EAAE,GAAG;AAAA,UACrE,KAAK;AAAG,mBAAO,UAAU,GAAG,KAAK,UAAU,SAAS,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG;AAAA,QAC3E;AAEA,aAAK,IAAI,GAAG,OAAO,IAAI,MAAM,MAAK,CAAC,GAAG,IAAI,KAAK,KAAK;AAClD,eAAK,IAAI,CAAC,IAAI,UAAU,CAAC;AAAA,QAC3B;AAEA,kBAAU,GAAG,MAAM,UAAU,SAAS,IAAI;AAAA,MAC5C,OAAO;AACL,YAAI,SAAS,UAAU,QACnB;AAEJ,aAAK,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC3B,cAAI,UAAU,CAAC,EAAE,KAAM,MAAK,eAAe,OAAO,UAAU,CAAC,EAAE,IAAI,QAAW,IAAI;AAElF,kBAAQ,KAAK;AAAA,YACX,KAAK;AAAG,wBAAU,CAAC,EAAE,GAAG,KAAK,UAAU,CAAC,EAAE,OAAO;AAAG;AAAA,YACpD,KAAK;AAAG,wBAAU,CAAC,EAAE,GAAG,KAAK,UAAU,CAAC,EAAE,SAAS,EAAE;AAAG;AAAA,YACxD,KAAK;AAAG,wBAAU,CAAC,EAAE,GAAG,KAAK,UAAU,CAAC,EAAE,SAAS,IAAI,EAAE;AAAG;AAAA,YAC5D,KAAK;AAAG,wBAAU,CAAC,EAAE,GAAG,KAAK,UAAU,CAAC,EAAE,SAAS,IAAI,IAAI,EAAE;AAAG;AAAA,YAChE;AACE,kBAAI,CAAC,KAAM,MAAK,IAAI,GAAG,OAAO,IAAI,MAAM,MAAK,CAAC,GAAG,IAAI,KAAK,KAAK;AAC7D,qBAAK,IAAI,CAAC,IAAI,UAAU,CAAC;AAAA,cAC3B;AAEA,wBAAU,CAAC,EAAE,GAAG,MAAM,UAAU,CAAC,EAAE,SAAS,IAAI;AAAA,UACpD;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAWA,IAAAA,cAAa,UAAU,KAAK,SAAS,GAAG,OAAO,IAAI,SAAS;AAC1D,aAAO,YAAY,MAAM,OAAO,IAAI,SAAS,KAAK;AAAA,IACpD;AAWA,IAAAA,cAAa,UAAU,OAAO,SAAS,KAAK,OAAO,IAAI,SAAS;AAC9D,aAAO,YAAY,MAAM,OAAO,IAAI,SAAS,IAAI;AAAA,IACnD;AAYA,IAAAA,cAAa,UAAU,iBAAiB,SAAS,eAAe,OAAO,IAAI,SAAS,MAAM;AACxF,UAAI,MAAM,SAAS,SAAS,QAAQ;AAEpC,UAAI,CAAC,KAAK,QAAQ,GAAG,EAAG,QAAO;AAC/B,UAAI,CAAC,IAAI;AACP,mBAAW,MAAM,GAAG;AACpB,eAAO;AAAA,MACT;AAEA,UAAI,YAAY,KAAK,QAAQ,GAAG;AAEhC,UAAI,UAAU,IAAI;AAChB,YACE,UAAU,OAAO,OAChB,CAAC,QAAQ,UAAU,UACnB,CAAC,WAAW,UAAU,YAAY,UACnC;AACA,qBAAW,MAAM,GAAG;AAAA,QACtB;AAAA,MACF,OAAO;AACL,iBAAS,IAAI,GAAG,SAAS,CAAC,GAAG,SAAS,UAAU,QAAQ,IAAI,QAAQ,KAAK;AACvE,cACE,UAAU,CAAC,EAAE,OAAO,MACnB,QAAQ,CAAC,UAAU,CAAC,EAAE,QACtB,WAAW,UAAU,CAAC,EAAE,YAAY,SACrC;AACA,mBAAO,KAAK,UAAU,CAAC,CAAC;AAAA,UAC1B;AAAA,QACF;AAKA,YAAI,OAAO,OAAQ,MAAK,QAAQ,GAAG,IAAI,OAAO,WAAW,IAAI,OAAO,CAAC,IAAI;AAAA,YACpE,YAAW,MAAM,GAAG;AAAA,MAC3B;AAEA,aAAO;AAAA,IACT;AASA,IAAAA,cAAa,UAAU,qBAAqB,SAAS,mBAAmB,OAAO;AAC7E,UAAI;AAEJ,UAAI,OAAO;AACT,cAAM,SAAS,SAAS,QAAQ;AAChC,YAAI,KAAK,QAAQ,GAAG,EAAG,YAAW,MAAM,GAAG;AAAA,MAC7C,OAAO;AACL,aAAK,UAAU,IAAI,OAAO;AAC1B,aAAK,eAAe;AAAA,MACtB;AAEA,aAAO;AAAA,IACT;AAKA,IAAAA,cAAa,UAAU,MAAMA,cAAa,UAAU;AACpD,IAAAA,cAAa,UAAU,cAAcA,cAAa,UAAU;AAK5D,IAAAA,cAAa,WAAW;AAKxB,IAAAA,cAAa,eAAeA;AAK5B,QAAI,gBAAgB,OAAO,QAAQ;AACjC,aAAO,UAAUA;AAAA,IACnB;AAAA;AAAA;;;AC/UA;AAAA;AAAA,QAAI,cAAc;AAAlB,QACI,WAAW;AADf,QAEI,WAAW;AAFf,QAGI,oBAAoB;AAkBxB,QAAIC,SAAQ,SAAS,SAAS,QAAQ;AACpC,aAAO,SAAS,YAAY,QAAQ,GAAG,mBAAmB,IAAI,CAAC;AAAA,IACjE,CAAC;AAED,WAAO,UAAUA;AAAA;AAAA;;;ACzBjB;AAAA;AAAA,QAAI,WAAW;AAAf,QACI,KAAK;AADT,QAEI,iBAAiB;AAFrB,QAGI,SAAS;AAGb,QAAI,cAAc,OAAO;AAGzB,QAAI,iBAAiB,YAAY;AAuBjC,QAAIC,YAAW,SAAS,SAAS,QAAQ,SAAS;AAChD,eAAS,OAAO,MAAM;AAEtB,UAAI,QAAQ;AACZ,UAAI,SAAS,QAAQ;AACrB,UAAI,QAAQ,SAAS,IAAI,QAAQ,CAAC,IAAI;AAEtC,UAAI,SAAS,eAAe,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG,KAAK,GAAG;AAC1D,iBAAS;AAAA,MACX;AAEA,aAAO,EAAE,QAAQ,QAAQ;AACvB,YAAI,SAAS,QAAQ,KAAK;AAC1B,YAAI,QAAQ,OAAO,MAAM;AACzB,YAAI,aAAa;AACjB,YAAI,cAAc,MAAM;AAExB,eAAO,EAAE,aAAa,aAAa;AACjC,cAAI,MAAM,MAAM,UAAU;AAC1B,cAAI,QAAQ,OAAO,GAAG;AAEtB,cAAI,UAAU,UACT,GAAG,OAAO,YAAY,GAAG,CAAC,KAAK,CAAC,eAAe,KAAK,QAAQ,GAAG,GAAI;AACtE,mBAAO,GAAG,IAAI,OAAO,GAAG;AAAA,UAC1B;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,IACT,CAAC;AAED,WAAO,UAAUA;AAAA;AAAA;;;AC/DjB;AAAA;AAAA;AASA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,YAAQ,YAAY,QAAQ,aAAa,QAAQ,aAAa,QAAQ,WAAW,QAAQ,WAAW,QAAQ,aAAa,QAAQ,WAAW,QAAQ,YAAY,QAAQ,aAAa,QAAQ,WAAW,QAAQ,aAAa,QAAQ,WAAW,QAAQ,UAAU,QAAQ,cAAc,QAAQ,YAAY;AAK5S,QAAM,mBAAmB;AAAA;AAAA,MAErB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA;AAAA;AAAA,MAGA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA;AAAA,MAEA;AAAA;AAAA;AAAA,MAGA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA;AAAA;AAAA,MAIA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA;AAAA;AAAA,MAKA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MAEA;AAAA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,MAGA;AAAA;AAAA,MA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",
  "names": ["unset", "cloneDeep", "isObject", "isObject", "debounce", "isArray", "hash", "parse", "EventEmitter", "union", "defaults", "regex", "pluralize", "singularize", "humanize", "transform", "import_react", "import_react", "import_react", "LocalStorageShim", "get", "set", "unset", "isEmpty", "import_react", "import_react", "React", "import_react", "import_react", "import_react", "import_isEqual", "React", "import_react", "React", "import_get", "React", "import_react", "import_react", "import_react", "import_react", "React", "import_react", "notifications", "import_react", "import_react", "import_react", "key", "lodashGet", "import_react", "React", "merge", "__spreadArray", "import_react", "import_react", "import_react", "import_react", "import_set", "import_get", "get", "set", "cloneDeep", "__spreadArray", "acc", "import_react", "import_react", "import_react", "React", "React", "import_react", "React", "React", "import_react", "import_react", "_a", "debounce", "debounce", "import_react", "import_react", "import_react", "import_react", "import_debounce", "isEqual", "debounce", "import_react", "import_set", "__assign", "__assign", "set", "_a", "sort", "import_react", "__assign", "React", "import_react", "__spreadArray", "import_react", "HttpError", "__assign", "isArray", "isObject", "__spreadArray", "import_index", "EventEmitter", "__spreadArray", "__assign", "__assign", "import_react", "import_react", "__awaiter", "import_react", "import_react", "React", "import_react", "import_react", "__rest", "__assign", "_a", "import_react", "noop", "__rest", "__assign", "_a", "_b", "_c", "import_react", "noop", "__rest", "__assign", "_a", "_b", "import_react", "noop", "__rest", "_b", "_a", "__assign", "__spreadArray", "ids", "union", "meta", "signal", "import_react", "noop", "__rest", "__assign", "_a", "_b", "_c", "import_react", "__rest", "__assign", "_a", "import_react", "__rest", "_a", "resource", "id", "data", "__spreadArray", "__assign", "__awaiter", "mutationMode", "import_react", "__rest", "_a", "resource", "ids", "data", "meta", "__spreadArray", "__assign", "__awaiter", "mutationMode", "import_react", "__rest", "_a", "resource", "id", "__spreadArray", "__assign", "__awaiter", "mutationMode", "import_react", "__rest", "_a", "resource", "ids", "__spreadArray", "__assign", "__awaiter", "mutationMode", "import_react", "MAX_DATA_LENGTH_TO_CACHE", "noop", "__rest", "__assign", "_a", "__rest", "__assign", "import_react", "__rest", "__assign", "React", "import_react", "import_query_string", "import_react", "React", "import_react", "pick", "import_react", "import_react", "__spreadArray", "_i", "import_react", "transform", "__rest", "__assign", "__awaiter", "_a", "data", "_b", "React", "React", "import_react", "import_react", "__assign", "__rest", "__rest", "import_react", "React", "import_react", "transform", "__rest", "__assign", "refetch", "__awaiter", "error", "_a", "_b", "data", "React", "import_react", "React", "React", "React", "import_react", "__rest", "__rest", "import_react", "React", "import_react", "import_react", "__rest", "refetch", "__assign", "import_get", "React", "import_react", "jsonExport", "import_react", "data", "import_react", "__spreadArray", "ids", "import_react", "import_query_string", "import_debounce", "import_react", "import_isEqual", "isEqual", "timer", "debounce", "defaultSort", "__assign", "__spreadArray", "sort", "lodashDebounce", "debounce", "__rest", "__assign", "error", "refetch", "_a", "__spreadArray", "React", "import_react", "import_react", "import_pick", "pick", "import_react", "import_pick", "pick", "import_react", "import_pick", "pick", "import_react", "__rest", "React", "import_react", "debounce", "defaultSort", "__rest", "__assign", "error", "refetch", "__rest", "__rest", "import_react", "__spreadArray", "import_react", "import_react", "import_get", "import_isEqual", "defaultFilter", "sort", "_a", "_b", "__rest", "__assign", "displayedFilters", "isEqual", "get", "import_react", "import_react", "defaults", "refetch", "import_react", "import_react", "import_react", "import_react", "import_react", "defaultFilter", "get", "__rest", "__assign", "error", "refetch", "import_react", "import_get", "import_isEqual", "import_debounce", "defaultFilter", "debounce", "__rest", "sort", "_a", "_b", "__assign", "lodashDebounce", "displayedFilters", "isEqual", "get", "error", "refetch", "import_get", "__rest", "get", "__assign", "error", "refetch", "choices", "import_react", "import_react", "import_debounce", "defaultSort", "debounce", "defaultParams", "getQuery", "sort", "emptyObject", "lodashDebounce", "filter", "getQuery", "hasCustomParams", "__assign", "getNumberOrDefault", "emptyObject", "defaultSort", "defaultParams", "debounce", "getValues", "__rest", "__assign", "refetch", "__spreadArray", "import_react", "debounce", "__rest", "__assign", "__spreadArray", "refetch", "import_react", "React", "import_get", "getValues", "__assign", "__assign", "get", "import_react", "React", "__assign", "__awaiter", "__assign", "import_react", "React", "import_react", "choices", "__rest", "_a", "_b", "_c", "_d", "React", "import_react", "React", "import_react", "__spreadArray", "import_react", "_a", "import_react", "import_merge", "merge", "errors", "import_react", "_a", "sanitizeEmptyValues", "__rest", "__assign", "__awaiter", "_a", "__assign", "isEmpty", "lodashMemoize", "_i", "import_react", "React", "import_react", "import_react", "import_react", "import_get", "getValues", "get", "React", "import_react", "import_get", "get", "import_react", "import_get", "import_isEqual", "get", "isEqual", "import_react", "__assign", "import_react", "import_get", "isRequired", "__rest", "parse", "__assign", "get", "__awaiter", "_a", "_b", "_c", "import_react", "import_set", "choices", "regex", "__spreadArray", "set", "import_merge", "import_react", "import_set", "_a", "merge", "__awaiter", "isEmpty", "set", "__assign", "React", "React", "__rest", "__assign", "refetch", "React", "import_react", "__rest", "__rest", "import_react", "__assign", "__rest", "record", "import_react", "__awaiter", "import_react", "__assign", "import_react", "import_react", "React", "__rest", "__assign", "React", "import_react", "import_react", "title", "titleOptions", "React", "import_react", "import_isEqual", "isEqual", "__assign", "_a", "_b", "__rest", "defaultStore", "React", "import_react", "React", "import_react", "React", "import_react", "import_react", "__assign", "__awaiter", "import_react", "defaultAuthParams", "import_react", "_a", "React", "React", "import_react", "React", "import_react", "import_react", "import_react", "import_react", "import_defaults", "defaults", "React", "import_react", "import_get", "get", "isRequired", "React", "import_react", "__assign", "import_react", "__assign", "import_inflection", "React", "import_react", "useLayoutEffect", "import_get", "get", "import_debounce", "debounce", "import_react", "hash", "__awaiter", "isEqual", "set", "import_react", "import_react", "__rest", "__assign", "noop", "getErrorMessage", "import_react", "emptyParams", "__rest", "__assign", "_a", "noop", "import_react", "__rest", "emptyParams", "__rest", "__assign", "import_react", "import_react", "React", "import_react", "import_react", "getErrorMessage", "import_react", "__rest", "__assign", "noop", "noop", "import_react", "__rest", "__assign", "_a", "noop", "React", "import_react", "import_react", "import_react", "__spreadArray", "_a", "import_react", "React", "import_react", "InferredElement", "__assign", "isObject", "import_inflection", "isObject", "import_inflection", "isObject"]
}
